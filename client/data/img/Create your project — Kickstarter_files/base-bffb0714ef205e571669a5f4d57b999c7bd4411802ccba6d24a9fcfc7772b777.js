function relativeTime(e,t,n){return I18n.t("ember_helpers.format_time."+n,{count:e})}function relativePast(e){return I18n.t("ember_helpers.format_time.past",{time_string:e})}function relativeFuture(e){return I18n.t("ember_helpers.format_time.future",{time_string:e})}function showGrowlSection(){$growl_section.fadeIn("fast"),$original_focus=$(":focus"),$growl_section.find(".jGrowl-notification").attr("tabindex",-1).focus()}function hideGrowlSection(){$growl_section.fadeOut("fast"),$original_focus.length&&$original_focus.focus()}function growl(e,t){$.each(e,function(e,n){"undefined"==typeof t&&(t={}),"error"===e&&(t.sticky=!0,$growl_section.addClass("sticky")),$growl_section.jGrowl(n,$.extend(t,{theme:e,closeTemplate:'<button class="jGrowl-close-x" aria-label="close notification"><span class="ksr-icon__close" aria-hidden="true"></span></button>',beforeOpen:function(){showGrowlSection()},close:function(){hideGrowlSection()}}))})}function select_machine(e,t,n){var i=$(e),r=_.map(_.keys(t),function(e){return"#"+e}).join(", ");i.delegate(r,"change",function(){$(this).trigger("state_change")}),i.delegate(r,"state_change",function(){var e=$(this),i=e.val();_.each(t[e[0].id],function(e,t){var r,o=$("#"+t),a=o.add(o.prev("label")),s=o.val(),c=_.result(e,i);"undefined"==typeof o.data("options")&&o.data("options",o.find("option")),_.isRegExp(c)&&(c=o.option_values(function(e){return e.match(c)})),_.isArray(c)&&(c=_.map(c,function(e){return'[value="'+e+'"]'}).join(", ")),c?(r=$(o.data("options")),_.isString(c)&&(r=r.filter(c)),n.include_blank&&(r=$("<option>").add(r)),o.html(r),a.show(),o.val()!==s&&o.trigger("change")):(n.default_control(a),o.trigger("change"))})})}window.benchmark&&window.performance.mark("begin_base.js_eval"),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=re.type(e);return"function"===n||re.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(re.isFunction(t))return re.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return re.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return re.filter(t,e,n);t=re.filter(t,e)}return re.grep(e,function(e){return re.inArray(e,t)>=0!==n})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=be[e]={};return re.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function a(){he.addEventListener?(he.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(he.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(he.addEventListener||"load"===event.type||"complete"===he.readyState)&&(a(),re.ready())}function c(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(je,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xe.test(n)?re.parseJSON(n):n}catch(r){}re.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if(("data"!==t||!re.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,i){if(re.acceptData(e)){var r,o,a=re.expando,s=e.nodeType,c=s?re.cache:e,l=s?e[a]:e[a]&&a;if(l&&c[l]&&(i||c[l].data)||void 0!==n||"string"!=typeof t)return l||(l=s?e[a]=G.pop()||re.guid++:a),c[l]||(c[l]=s?{}:{toJSON:re.noop}),("object"==typeof t||"function"==typeof t)&&(i?c[l]=re.extend(c[l],t):c[l].data=re.extend(c[l].data,t)),o=c[l],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[re.camelCase(t)]=n),"string"==typeof t?(r=o[t],null==r&&(r=o[re.camelCase(t)])):r=o,r}}function d(e,t,n){if(re.acceptData(e)){var i,r,o=e.nodeType,a=o?re.cache:e,s=o?e[re.expando]:re.expando;if(a[s]){if(t&&(i=n?a[s]:a[s].data)){re.isArray(t)?t=t.concat(re.map(t,re.camelCase)):t in i?t=[t]:(t=re.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!l(i):!re.isEmptyObject(i))return}(n||(delete a[s].data,l(a[s])))&&(o?re.cleanData([e],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function p(){return!1}function h(){try{return he.activeElement}catch(e){}}function m(e){var t=Oe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,i,r=0,o=typeof e.getElementsByTagName!==$e?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==$e?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||re.nodeName(i,t)?o.push(i):re.merge(o,g(i,t));return void 0===t||t&&re.nodeName(e,t)?re.merge([e],o):o}function _(e){Ie.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){return re.nodeName(e,"table")&&re.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==re.find.attr(e,"type"))+"/"+e.type,e}function b(e){var t=Ve.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,i=0;null!=(n=e[i]);i++)re._data(n,"globalEval",!t||re._data(t[i],"globalEval"))}function k(e,t){if(1===t.nodeType&&re.hasData(e)){var n,i,r,o=re._data(e),a=re._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)re.event.add(t,n,s[n][i])}a.data&&(a.data=re.extend({},a.data))}}function $(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[re.expando]){r=re._data(t);for(i in r.events)re.removeEvent(t,i,r.handle);t.removeAttribute(re.expando)}"script"===n&&t.text!==e.text?(y(t).text=e.text,b(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!re.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ie.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function x(t,n){var i,r=re(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:re.css(r[0],"display");return r.detach(),o}function j(e){var t=he,n=Ze[e];return n||(n=x(e,t),"none"!==n&&n||(Xe=(Xe||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Xe[0].contentWindow||Xe[0].contentDocument).document,t.write(),t.close(),n=x(e,t),Xe.detach()),Ze[e]=n),n}function C(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=ft.length;r--;)if(t=ft[r]+n,t in e)return t;return i}function T(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=re._data(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Te(i)&&(o[a]=re._data(i,"olddisplay",j(i.nodeName)))):(r=Te(i),(n&&"none"!==n||!r)&&re._data(i,"olddisplay",r?n:re.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function D(e,t,n){var i=ct.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function I(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=re.css(e,n+Se[o],!0,r)),i?("content"===n&&(a-=re.css(e,"padding"+Se[o],!0,r)),"margin"!==n&&(a-=re.css(e,"border"+Se[o]+"Width",!0,r))):(a+=re.css(e,"padding"+Se[o],!0,r),"padding"!==n&&(a+=re.css(e,"border"+Se[o]+"Width",!0,r)));return a}function E(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=et(e),a=ne.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=tt(e,t,o),(0>r||null==r)&&(r=e.style[t]),it.test(r))return r;i=a&&(ne.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+I(e,t,n||(a?"border":"content"),i,o)+"px"}function A(e,t,n,i,r){return new A.prototype.init(e,t,n,i,r)}function P(){return setTimeout(function(){pt=void 0}),pt=re.now()}function N(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Se[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function M(e,t,n){for(var i,r=(yt[t]||[]).concat(yt["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function O(e,t,n){var i,r,o,a,s,c,l,u,d=this,f={},p=e.style,h=e.nodeType&&Te(e),m=re._data(e,"fxshow");n.queue||(s=re._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,re.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=re.css(e,"display"),u="none"===l?re._data(e,"olddisplay")||j(e.nodeName):l,"inline"===u&&"none"===re.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==j(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],mt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;h=!0}f[i]=m&&m[i]||re.style(e,i)}else l=void 0;if(re.isEmptyObject(f))"inline"===("none"===l?j(e.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(h=m.hidden):m=re._data(e,"fxshow",{}),o&&(m.hidden=!h),h?re(e).show():d.done(function(){re(e).hide()}),d.done(function(){var t;re._removeData(e,"fxshow");for(t in f)re.style(e,t,f[t])});for(i in f)a=M(h?m[i]:0,i,d),i in m||(m[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function F(e,t){var n,i,r,o,a;for(n in e)if(i=re.camelCase(n),r=t[i],o=e[n],re.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=re.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function L(e,t,n){var i,r,o=0,a=vt.length,s=re.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=pt||P(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:pt||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=re.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(F(u,l.opts.specialEasing);a>o;o++)if(i=vt[o].call(l,e,u,l.opts))return i;return re.map(u,M,l),re.isFunction(l.opts.start)&&l.opts.start.call(e,l),re.fx.timer(re.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(ye)||[];if(re.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function H(e,t,n,i){function r(s){var c;return o[s]=!0,re.each(e[s]||[],function(e,s){var l=s(t,n,i);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),c}var o={},a=e===Ut;return r(t.dataTypes[0])||!o["*"]&&r("*")}function B(e,t){var n,i,r=re.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&re.extend(!0,e,n),e}function q(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){c.unshift(a);break}if(c[0]in n)o=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function U(e,t,n,i){var r,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=l[c+" "+o]||l["* "+o],!a)for(r in l)if(s=r.split(" "),s[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[r]:l[r]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function z(e,t,n,i){var r;if(re.isArray(t))re.each(t,function(t,r){n||Vt.test(e)?i(e,r):z(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==re.type(t))i(e,t);else for(r in t)z(e+"["+r+"]",t[r],n,i)}function W(){try{return new e.XMLHttpRequest}catch(t){}}function Y(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function V(e){return re.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],Q=G.slice,K=G.concat,J=G.push,X=G.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ne={},ie="1.11.1",re=function(e,t){return new re.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};re.fn=re.prototype={jquery:ie,constructor:re,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return re.each(this,e,t)},map:function(e){return this.pushStack(re.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:G.sort,splice:G.splice},re.extend=re.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||re.isFunction(a)||(a={}),s===c&&(a=this,s--);c>s;s++)if(null!=(r=arguments[s]))for(i in r)e=a[i],n=r[i],a!==n&&(l&&n&&(re.isPlainObject(n)||(t=re.isArray(n)))?(t?(t=!1,o=e&&re.isArray(e)?e:[]):o=e&&re.isPlainObject(e)?e:{},a[i]=re.extend(l,o,n)):void 0!==n&&(a[i]=n));return a},re.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray||function(e){return"array"===re.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!re.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==re.type(e)||e.nodeType||re.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&re.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ae,"ms-").replace(se,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,a=e.length,s=n(e);if(i){if(s)for(;a>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(s)for(;a>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?re.merge(i,"string"==typeof e?[e]:e):J.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(X)return X.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;a>o;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,a=e.length,s=n(e),c=[];if(s)for(;a>o;o++)r=t(e[o],o,i),null!=r&&c.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&c.push(r);return K.apply([],c)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),re.isFunction(e)?(n=Q.call(arguments,2),i=function(){return e.apply(t||this,n.concat(Q.call(arguments)))},i.guid=e.guid=e.guid||re.guid++,i):void 0},now:function(){return+new Date},support:ne}),re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var le=function(e){function t(e,t,n,i){var r,o,a,s,c,l,d,p,h,m;if((t?t.ownerDocument||t:H)!==A&&E(t),t=t||A,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(N&&!i){if(r=ve.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&L(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!M||!M.test(e))){if(p=d=R,h=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=j(e),(d=t.getAttribute("id"))?p=d.replace(be,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",c=l.length;c--;)l[c]=p+f(l[c]);h=ye.test(e)&&u(t.parentNode)||t,m=l.join(",")}if(m)try{return Z.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return S(e.replace(ce,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>k.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[R]=!0,e}function r(e){var t=A.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)k.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&typeof e.getElementsByTagName!==V&&e}function d(){}function f(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=q++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,c,l=[B,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(c=t[R]||(t[R]={}),(s=c[i])&&s[0]===B&&s[1]===o)return l[2]=s[2];if(c[i]=l,l[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,l=null!=t;c>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),l&&t.push(s));return a}function _(e,t,n,r,o,a){return r&&!r[R]&&(r=_(r)),o&&!o[R]&&(o=_(o,a)),i(function(i,a,s,c){var l,u,d,f=[],p=[],h=a.length,_=i||m(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?_:g(_,f,e,s,c),y=n?o||(i?e:h||r)?[]:a:v;if(n&&n(v,y,s,c),r)for(l=g(y,p),r(l,[],s,c),u=l.length;u--;)(d=l[u])&&(y[p[u]]=!(v[p[u]]=d));if(i){if(o||e){if(o){for(l=[],u=y.length;u--;)(d=y[u])&&l.push(v[u]=d);o(null,y=[],l,c)}for(u=y.length;u--;)(d=y[u])&&(l=o?te.call(i,d):f[u])>-1&&(i[l]=!(a[l]=d))}}else y=g(y===a?y.splice(h,y.length):y),o?o(null,a,y,c):Z.apply(a,y)})}function v(e){for(var t,n,i,r=e.length,o=k.relative[e[0].type],a=o||k.relative[" "],s=o?1:0,c=p(function(e){return e===t},a,!0),l=p(function(e){return te.call(t,e)>-1},a,!0),u=[function(e,n,i){return!o&&(i||n!==T)||((t=n).nodeType?c(e,n,i):l(e,n,i))}];r>s;s++)if(n=k.relative[e[s].type])u=[p(h(u),n)];else{if(n=k.filter[e[s].type].apply(null,e[s].matches),n[R]){for(i=++s;r>i&&!k.relative[e[i].type];i++);return _(s>1&&h(u),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ce,"$1"),n,i>s&&v(e.slice(s,i)),r>i&&v(e=e.slice(i)),r>i&&f(e))}u.push(n)}return h(u)}function y(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,c,l){var u,d,f,p=0,h="0",m=i&&[],_=[],v=T,y=i||o&&k.find.TAG("*",l),b=B+=null==v?1:Math.random()||.1,w=y.length;for(l&&(T=a!==A&&a);h!==w&&null!=(u=y[h]);h++){if(o&&u){for(d=0;f=e[d++];)if(f(u,a,s)){c.push(u);break}l&&(B=b)}r&&((u=!f&&u)&&p--,i&&m.push(u))}if(p+=h,r&&h!==p){for(d=0;f=n[d++];)f(m,_,a,s);if(i){if(p>0)for(;h--;)m[h]||_[h]||(_[h]=J.call(c));_=g(_)}Z.apply(c,_),l&&!i&&_.length>0&&p+n.length>1&&t.uniqueSort(c)}return l&&(B=b,T=v),m};return r?i(a):a}var b,w,k,$,x,j,C,S,T,D,I,E,A,P,N,M,O,F,L,R="sizzle"+-new Date,H=e.document,B=0,q=0,U=n(),z=n(),W=n(),Y=function(e,t){return e===t&&(I=!0),0},V="undefined",G=1<<31,Q={}.hasOwnProperty,K=[],J=K.pop,X=K.push,Z=K.push,ee=K.slice,te=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ae="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ie+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",ce=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),fe=new RegExp(se),pe=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),ke=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(K=ee.call(H.childNodes),H.childNodes),K[H.childNodes.length].nodeType}catch($e){Z={apply:K.length?function(e,t){X.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},E=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:H,i=n.defaultView;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,P=n.documentElement,N=!x(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){E()},!1):i.attachEvent&&i.attachEvent("onunload",function(){E()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=_e.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return P.appendChild(e).id=R,!n.getElementsByName||!n.getElementsByName(R).length}),w.getById?(k.find.ID=function(e,t){if(typeof t.getElementById!==V&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},k.filter.ID=function(e){var t=e.replace(we,ke);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(we,ke);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},k.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==V&&N?t.getElementsByClassName(e):void 0},O=[],M=[],(w.qsa=_e.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&M.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ie+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||M.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=_e.test(F=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){w.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),O.push("!=",se)}),M=M.length&&new RegExp(M.join("|")),O=O.length&&new RegExp(O.join("|")),t=_e.test(P.compareDocumentPosition),L=t||_e.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return I=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===H&&L(H,e)?-1:t===n||t.ownerDocument===H&&L(H,t)?1:D?te.call(D,e)-te.call(D,t):0:4&i?-1:1)}:function(e,t){if(e===t)return I=!0,0;var i,r=0,o=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:D?te.call(D,e)-te.call(D,t):0;if(o===s)return a(e,t);for(i=e;i=i.parentNode;)c.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;c[r]===l[r];)r++;return r?a(c[r],l[r]):c[r]===H?-1:l[r]===H?1:0},n):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&E(e),n=n.replace(de,"='$1']"),w.matchesSelector&&N&&(!O||!O.test(n))&&(!M||!M.test(n)))try{var i=F.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&E(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&E(e);var n=k.attrHandle[t.toLowerCase()],i=n&&Q.call(k.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==i?i:w.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(I=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(Y),I){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return D=null,e},$=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=$(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=$(t);return n},k=t.selectors={cacheLength:50,createPseudo:i,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,ke),e[3]=(e[3]||e[4]||e[5]||"").replace(we,ke),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=j(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,ke).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,_=s&&t.nodeName.toLowerCase(),v=!c&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===_:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(u=g[R]||(g[R]={}),l=u[e]||[],p=l[0]===B&&l[1],f=l[0]===B&&l[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[B,p,f];break}}else if(v&&(l=(t[R]||(t[R]={}))[e])&&l[0]===B)f=l[1];else for(;(d=++p&&d&&d[m]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==_:1!==d.nodeType)||!++f||(v&&((d[R]||(d[R]={}))[e]=[B,f]),d!==t)););return f-=r,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(e,n){var r,o=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[R]?o(n):o.length>1?(r=[e,e,"",n],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=te.call(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=C(e.replace(ce,"$1"));return r[R]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||$(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,ke).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase());
},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},k.pseudos.nth=k.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})k.pseudos[b]=c(b);return d.prototype=k.filters=k.pseudos,k.setFilters=new d,j=t.tokenize=function(e,n){var i,r,o,a,s,c,l,u=z[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],l=k.preFilter;s;){(!i||(r=le.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ce," ")}),s=s.slice(i.length));for(a in k.filter)!(r=he[a].exec(s))||l[a]&&!(r=l[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):z(e,c).slice(0)},C=t.compile=function(e,t){var n,i=[],r=[],o=W[e+" "];if(!o){for(t||(t=j(e)),n=t.length;n--;)o=v(t[n]),o[R]?i.push(o):r.push(o);o=W(e,y(r,i)),o.selector=e}return o},S=t.select=function(e,t,n,i){var r,o,a,s,c,l="function"==typeof e&&e,d=!i&&j(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&N&&k.relative[o[1].type]){if(t=(k.find.ID(a.matches[0].replace(we,ke),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=he.needsContext.test(e)?0:o.length;r--&&(a=o[r],!k.relative[s=a.type]);)if((c=k.find[s])&&(i=c(a.matches[0].replace(we,ke),ye.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&f(o),!e)return Z.apply(n,i),n;break}}return(l||C(e,d))(i,t,!N,n,ye.test(e)&&u(t.parentNode)||t),n},w.sortStable=R.split("").sort(Y).join("")===R,w.detectDuplicates=!!I,E(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);re.find=le,re.expr=le.selectors,re.expr[":"]=re.expr.pseudos,re.unique=le.uniqueSort,re.text=le.getText,re.isXMLDoc=le.isXML,re.contains=le.contains;var ue=re.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;re.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?re.find.matchesSelector(i,e)?[i]:[]:re.find.matches(e,re.grep(t,function(e){return 1===e.nodeType}))},re.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(re(e).filter(function(){for(t=0;r>t;t++)if(re.contains(i[t],this))return!0}));for(t=0;r>t;t++)re.find(e,i[t],n);return n=this.pushStack(r>1?re.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ue.test(e)?re(e):e||[],!1).length}});var pe,he=e.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=re.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof re?t[0]:t,re.merge(this,re.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:he,!0)),de.test(n[1])&&re.isPlainObject(t))for(n in t)re.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=he.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return pe.find(e);this.length=1,this[0]=i}return this.context=he,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?"undefined"!=typeof pe.ready?pe.ready(e):e(re):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))};ge.prototype=re.fn,pe=re(he);var _e=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};re.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!re(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),re.fn.extend({has:function(e){var t,n=re(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(re.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=ue.test(e)||"string"!=typeof e?re(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?re.unique(o):o)},index:function(e){return e?"string"==typeof e?re.inArray(this[0],re(e)):re.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(re.unique(re.merge(this.get(),re(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return re.dir(e,"parentNode")},parentsUntil:function(e,t,n){return re.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return re.dir(e,"nextSibling")},prevAll:function(e){return re.dir(e,"previousSibling")},nextUntil:function(e,t,n){return re.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return re.dir(e,"previousSibling",n)},siblings:function(e){return re.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return re.sibling(e.firstChild)},contents:function(e){return re.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(n,i){var r=re.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=re.filter(i,r)),this.length>1&&(ve[e]||(r=re.unique(r)),_e.test(e)&&(r=r.reverse())),this.pushStack(r)}});var ye=/\S+/g,be={};re.Callbacks=function(e){e="string"==typeof e?be[e]||o(e):re.extend({},e);var t,n,i,r,a,s,c=[],l=!e.once&&[],u=function(o){for(n=e.memory&&o,i=!0,a=s||0,s=0,r=c.length,t=!0;c&&r>a;a++)if(c[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,c&&(l?l.length&&u(l.shift()):n?c=[]:d.disable())},d={add:function(){if(c){var i=c.length;!function o(t){re.each(t,function(t,n){var i=re.type(n);"function"===i?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),t?r=c.length:n&&(s=i,u(n))}return this},remove:function(){return c&&re.each(arguments,function(e,n){for(var i;(i=re.inArray(n,c,i))>-1;)c.splice(i,1),t&&(r>=i&&r--,a>=i&&a--)}),this},has:function(e){return e?re.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||d.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!c||i&&!l||(n=n||[],n=[e,n.slice?n.slice():n],t?l.push(n):u(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(n){re.each(t,function(t,o){var a=re.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,i):i}},r={};return i.pipe=i.then,re.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=Q.call(arguments),a=o.length,s=1!==a||e&&re.isFunction(e.promise)?a:0,c=1===s?e:re.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?Q.call(arguments):r,i===t?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&re.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,t)):--s;return s||c.resolveWith(i,o),c.promise()}});var we;re.fn.ready=function(e){return re.ready.promise().done(e),this},re.extend({isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){if(e===!0?!--re.readyWait:!re.isReady){if(!he.body)return setTimeout(re.ready);re.isReady=!0,e!==!0&&--re.readyWait>0||(we.resolveWith(he,[re]),re.fn.triggerHandler&&(re(he).triggerHandler("ready"),re(he).off("ready")))}}}),re.ready.promise=function(t){if(!we)if(we=re.Deferred(),"complete"===he.readyState)setTimeout(re.ready);else if(he.addEventListener)he.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{he.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&he.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!re.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}a(),re.ready()}}()}return we.promise(t)};var ke,$e="undefined";for(ke in re(ne))break;ne.ownLast="0"!==ke,ne.inlineBlockNeedsLayout=!1,re(function(){var e,t,n,i;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),i=he.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==$e&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=he.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(t){ne.deleteExpando=!1}}e=null}(),re.acceptData=function(e){var t=re.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,je=/([A-Z])/g;re.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?re.cache[e[re.expando]]:e[re.expando],!!e&&!l(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),re.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=re.data(o),1===o.nodeType&&!re._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=re.camelCase(i.slice(5)),c(o,i,r[i])));re._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){re.data(this,e)}):arguments.length>1?this.each(function(){re.data(this,e,t)}):o?c(o,e,re.data(o,e)):void 0},removeData:function(e){return this.each(function(){re.removeData(this,e)})}}),re.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=re._data(e,t),n&&(!i||re.isArray(n)?i=re._data(e,t,re.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=re.queue(e,t),i=n.length,r=n.shift(),o=re._queueHooks(e,t),a=function(){re.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return re._data(e,n)||re._data(e,n,{empty:re.Callbacks("once memory").add(function(){re._removeData(e,t+"queue"),re._removeData(e,n)})})}}),re.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?re.queue(this[0],e):void 0===t?this:this.each(function(){var n=re.queue(this,e,t);re._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=re.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=re._data(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=["Top","Right","Bottom","Left"],Te=function(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)},De=re.access=function(e,t,n,i,r,o,a){var s=0,c=e.length,l=null==n;if("object"===re.type(n)){r=!0;for(s in n)re.access(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,re.isFunction(i)||(a=!0),l&&(a?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(re(e),n)})),t))for(;c>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:l?t.call(e):c?t(e[0],n):o},Ie=/^(?:checkbox|radio)$/i;!function(){var e=he.createElement("input"),t=he.createElement("div"),n=he.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==he.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(i){ne.deleteExpando=!1}}}(),function(){var t,n,i=he.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),ne[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Ee=/^(?:input|select|textarea)$/i,Ae=/^key/,Pe=/^(?:mouse|pointer|contextmenu)|click/,Ne=/^(?:focusinfocus|focusoutblur)$/,Me=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(e,t,n,i,r){var o,a,s,c,l,u,d,f,p,h,m,g=re._data(e);if(g){for(n.handler&&(c=n,n=c.handler,r=c.selector),n.guid||(n.guid=re.guid++),(a=g.events)||(a=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof re===$e||e&&re.event.triggered===e.type?void 0:re.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(ye)||[""],s=t.length;s--;)o=Me.exec(t[s])||[],p=m=o[1],h=(o[2]||"").split(".").sort(),p&&(l=re.event.special[p]||{},p=(r?l.delegateType:l.bindType)||p,l=re.event.special[p]||{},d=re.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:h.join(".")},c),(f=a[p])||(f=a[p]=[],f.delegateCount=0,l.setup&&l.setup.call(e,i,h,u)!==!1||(e.addEventListener?e.addEventListener(p,u,!1):e.attachEvent&&e.attachEvent("on"+p,u))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,d):f.push(d),re.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,c,l,u,d,f,p,h,m,g=re.hasData(e)&&re._data(e);if(g&&(u=g.events)){for(t=(t||"").match(ye)||[""],l=t.length;l--;)if(s=Me.exec(t[l])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(d=re.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,f=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=o=f.length;o--;)a=f[o],!r&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));c&&!f.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||re.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)re.event.remove(e,p+t[l],n,i,!0);re.isEmptyObject(u)&&(delete g.handle,re._removeData(e,"events"))}},trigger:function(t,n,i,r){var o,a,s,c,l,u,d,f=[i||he],p=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(s=u=i=i||he,3!==i.nodeType&&8!==i.nodeType&&!Ne.test(p+re.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[re.expando]?t:new re.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:re.makeArray(n,[t]),l=re.event.special[p]||{},r||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!r&&!l.noBubble&&!re.isWindow(i)){for(c=l.delegateType||p,Ne.test(c+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),u=s;u===(i.ownerDocument||he)&&f.push(u.defaultView||u.parentWindow||e)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?c:l.bindType||p,o=(re._data(s,"events")||{})[t.type]&&re._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&re.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=p,!r&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(f.pop(),n)===!1)&&re.acceptData(i)&&a&&i[p]&&!re.isWindow(i)){u=i[a],u&&(i[a]=null),re.event.triggered=p;try{i[p]()}catch(m){}re.event.triggered=void 0,u&&(i[a]=u)}return t.result}},dispatch:function(e){e=re.event.fix(e);var t,n,i,r,o,a=[],s=Q.call(arguments),c=(re._data(this,"events")||{})[e.type]||[],l=re.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=re.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((re.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],o=0;s>o;o++)i=t[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?re(n,this).index(c)>=0:re.find(n,this,null,[c]).length),r[n]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[re.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Pe.test(r)?this.mouseHooks:Ae.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new re.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||he),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||he,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return re.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return re.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=re.extend(new re.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?re.event.trigger(r,null,t):re.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},re.removeEvent=he.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===$e&&(e[i]=null),e.detachEvent(i,n))},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:p):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!re.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(re.event.special.submit={setup:function(){return re.nodeName(this,"form")?!1:void re.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=re.nodeName(t,"input")||re.nodeName(t,"button")?t.form:void 0;n&&!re._data(n,"submitBubbles")&&(re.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),re._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&re.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return re.nodeName(this,"form")?!1:void re.event.remove(this,"._submit")}}),ne.changeBubbles||(re.event.special.change={setup:function(){return Ee.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(re.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),re.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),re.event.simulate("change",this,e,!0)})),!1):void re.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ee.test(t.nodeName)&&!re._data(t,"changeBubbles")&&(re.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||re.event.simulate("change",this.parentNode,e,!0)}),re._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return re.event.remove(this,"._change"),!Ee.test(this.nodeName)}}),ne.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){re.event.simulate(t,e.target,re.event.fix(e),!0)};re.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=re._data(i,t);r||i.addEventListener(e,n,!0),re._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=re._data(i,t)-1;r?re._data(i,t,r):(i.removeEventListener(e,n,!0),re._removeData(i,t))}}}),re.fn.extend({on:function(e,t,n,i,r){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=p;else if(!i)return this;return 1===r&&(a=i,i=function(e){return re().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=re.guid++)),this.each(function(){re.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,re(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){re.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?re.event.trigger(e,t,n,!0):void 0}});var Oe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Fe=/ jQuery\d+="(?:null|\d+)"/g,Le=new RegExp("<(?:"+Oe+")[\\s/>]","i"),Re=/^\s+/,He=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Be=/<([\w:]+)/,qe=/<tbody/i,Ue=/<|&#?\w+;/,ze=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,Ye=/^$|\/(?:java|ecma)script/i,Ve=/^true\/(.*)/,Ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ke=m(he),Je=Ke.appendChild(he.createElement("div"));Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td,re.extend({clone:function(e,t,n){var i,r,o,a,s,c=re.contains(e.ownerDocument,e);if(ne.html5Clone||re.isXMLDoc(e)||!Le.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Je.innerHTML=e.outerHTML,Je.removeChild(o=Je.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(i=g(o),s=g(e),a=0;null!=(r=s[a]);++a)i[a]&&$(r,i[a]);if(t)if(n)for(s=s||g(e),i=i||g(o),a=0;null!=(r=s[a]);a++)k(r,i[a]);else k(e,o);return i=g(o,"script"),i.length>0&&w(i,!c&&g(e,"script")),i=s=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,a,s,c,l,u,d=e.length,f=m(t),p=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===re.type(o))re.merge(p,o.nodeType?[o]:o);else if(Ue.test(o)){for(s=s||f.appendChild(t.createElement("div")),c=(Be.exec(o)||["",""])[1].toLowerCase(),u=Qe[c]||Qe._default,s.innerHTML=u[1]+o.replace(He,"<$1></$2>")+u[2],r=u[0];r--;)s=s.lastChild;if(!ne.leadingWhitespace&&Re.test(o)&&p.push(t.createTextNode(Re.exec(o)[0])),!ne.tbody)for(o="table"!==c||qe.test(o)?"<table>"!==u[1]||qe.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)re.nodeName(l=o.childNodes[r],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(re.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else p.push(t.createTextNode(o));for(s&&f.removeChild(s),ne.appendChecked||re.grep(g(p,"input"),_),h=0;o=p[h++];)if((!i||-1===re.inArray(o,i))&&(a=re.contains(o.ownerDocument,o),s=g(f.appendChild(o),"script"),a&&w(s),n))for(r=0;o=s[r++];)Ye.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,i,r,o,a=0,s=re.expando,c=re.cache,l=ne.deleteExpando,u=re.event.special;null!=(n=e[a]);a++)if((t||re.acceptData(n))&&(r=n[s],o=r&&c[r])){if(o.events)for(i in o.events)u[i]?re.event.remove(n,i):re.removeEvent(n,i,o.handle);c[r]&&(delete c[r],l?delete n[s]:typeof n.removeAttribute!==$e?n.removeAttribute(s):n[s]=null,G.push(r))}}}),re.fn.extend({text:function(e){return De(this,function(e){return void 0===e?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||he).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?re.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||re.cleanData(g(n)),n.parentNode&&(t&&re.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&re.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&re.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return De(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Fe,""):void 0;if("string"==typeof e&&!ze.test(e)&&(ne.htmlSerialize||!Le.test(e))&&(ne.leadingWhitespace||!Re.test(e))&&!Qe[(Be.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(He,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(re.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,re.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=K.apply([],e);var n,i,r,o,a,s,c=0,l=this.length,u=this,d=l-1,f=e[0],p=re.isFunction(f);if(p||l>1&&"string"==typeof f&&!ne.checkClone&&We.test(f))return this.each(function(n){var i=u.eq(n);p&&(e[0]=f.call(this,n,i.html())),i.domManip(e,t)});if(l&&(s=re.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=re.map(g(s,"script"),y),r=o.length;l>c;c++)i=s,c!==d&&(i=re.clone(i,!0,!0),r&&re.merge(o,g(i,"script"))),t.call(this[c],i,c);if(r)for(a=o[o.length-1].ownerDocument,re.map(o,b),c=0;r>c;c++)i=o[c],Ye.test(i.type||"")&&!re._data(i,"globalEval")&&re.contains(a,i)&&(i.src?re._evalUrl&&re._evalUrl(i.src):re.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Ge,"")));s=n=null}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var n,i=0,r=[],o=re(e),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),re(o[i])[t](n),J.apply(r,n.get());return this.pushStack(r)}});var Xe,Ze={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=he.getElementsByTagName("body")[0],n&&n.style?(t=he.createElement("div"),i=he.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==$e&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(he.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var et,tt,nt=/^margin/,it=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),rt=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tt=function(e,t,n){var i,r,o,a,s=e.style;return n=n||et(e),a=n?n.getPropertyValue(t)||n[t]:void 0,
n&&(""!==a||re.contains(e.ownerDocument,e)||(a=re.style(e,t)),it.test(a)&&nt.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):he.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var i,r,o,a,s=e.style;return n=n||et(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),it.test(a)&&!rt.test(t)&&(i=s.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,i,r;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),i=he.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,c=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(he.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",c=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===r[0].offsetHeight,s&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),n.removeChild(i))}var n,i,r,o,a,s,c;n=he.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],i=r&&r.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,re.extend(ne,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==c&&t(),c}}))}(),re.swap=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r};var ot=/alpha\([^)]*\)/i,at=/opacity\s*=\s*([^)]*)/,st=/^(none|table(?!-c[ea]).+)/,ct=new RegExp("^("+Ce+")(.*)$","i"),lt=new RegExp("^([+-])=("+Ce+")","i"),ut={position:"absolute",visibility:"hidden",display:"block"},dt={letterSpacing:"0",fontWeight:"400"},ft=["Webkit","O","Moz","ms"];re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=re.camelCase(t),c=e.style;if(t=re.cssProps[s]||(re.cssProps[s]=S(c,s)),a=re.cssHooks[t]||re.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];if(o=typeof n,"string"===o&&(r=lt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(re.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||re.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,i)))))try{c[t]=n}catch(l){}}},css:function(e,t,n,i){var r,o,a,s=re.camelCase(t);return t=re.cssProps[s]||(re.cssProps[s]=S(e.style,s)),a=re.cssHooks[t]||re.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=tt(e,t,i)),"normal"===o&&t in dt&&(o=dt[t]),""===n||n?(r=parseFloat(o),n===!0||re.isNumeric(r)?r||0:o):o}}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,n,i){return n?st.test(re.css(e,"display"))&&0===e.offsetWidth?re.swap(e,ut,function(){return E(e,t,i)}):E(e,t,i):void 0},set:function(e,n,i){var r=i&&et(e);return D(e,n,i?I(e,t,i,ne.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,r),r):0)}}}),ne.opacity||(re.cssHooks.opacity={get:function(e,t){return at.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=re.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===re.trim(o.replace(ot,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=ot.test(o)?o.replace(ot,r):o+" "+r)}}),re.cssHooks.marginRight=C(ne.reliableMarginRight,function(e,t){return t?re.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Se[i]+t]=o[i]||o[i-2]||o[0];return r}},nt.test(e)||(re.cssHooks[e+t].set=D)}),re.fn.extend({css:function(e,t){return De(this,function(e,t,n){var i,r,o={},a=0;if(re.isArray(t)){for(i=et(e),r=t.length;r>a;a++)o[t[a]]=re.css(e,t[a],!1,i);return o}return void 0!==n?re.style(e,t,n):re.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Te(this)?re(this).show():re(this).hide()})}}),re.Tween=A,A.prototype={constructor:A,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(re.cssNumber[n]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,n=A.propHooks[this.prop];return this.options.duration?this.pos=t=re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[re.cssProps[e.prop]]||re.cssHooks[e.prop])?re.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},re.fx=A.prototype.init,re.fx.step={};var pt,ht,mt=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),_t=/queueHooks$/,vt=[O],yt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=gt.exec(t),o=r&&r[3]||(re.cssNumber[e]?"":"px"),a=(re.cssNumber[e]||"px"!==o&&+i)&&gt.exec(re.css(n.elem,e)),s=1,c=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,re.style(n.elem,e,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--c)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};re.Animation=re.extend(L,{tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],yt[n]=yt[n]||[],yt[n].unshift(t)},prefilter:function(e,t){t?vt.unshift(e):vt.push(e)}}),re.speed=function(e,t,n){var i=e&&"object"==typeof e?re.extend({},e):{complete:n||!n&&t||re.isFunction(e)&&e,duration:e,easing:n&&t||t&&!re.isFunction(t)&&t};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Te).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=re.isEmptyObject(e),o=re.speed(t,n,i),a=function(){var t=L(this,re.extend({},e),o);(r||re._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=re.timers,a=re._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&_t.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&re.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=re._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=re.timers,a=i?i.length:0;for(n.finish=!0,re.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(e,t){var n=re.fn[t];re.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,i,r)}}),re.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),re.timers=[],re.fx.tick=function(){var e,t=re.timers,n=0;for(pt=re.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||re.fx.stop(),pt=void 0},re.fx.timer=function(e){re.timers.push(e),e()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){ht||(ht=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(ht),ht=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(e,t){return e=re.fx?re.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r;t=he.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=he.createElement("select"),r=n.appendChild(he.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=r.selected,ne.enctype=!!he.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!r.disabled,e=he.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var bt=/\r/g;re.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=re.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,re(this).val()):e,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(e){return null==e?"":e+""})),t=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(bt,""):null==n?"":n)}}}),re.extend({valHooks:{option:{get:function(e){var t=re.find.attr(e,"value");return null!=t?t:re.trim(re.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,c=0>r?s:o?r:0;s>c;c++)if(n=i[c],(n.selected||c===r)&&(ne.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!re.nodeName(n.parentNode,"optgroup"))){if(t=re(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=re.makeArray(t),a=r.length;a--;)if(i=r[a],re.inArray(re.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(e,t){return re.isArray(t)?e.checked=re.inArray(re(e).val(),t)>=0:void 0}},ne.checkOn||(re.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wt,kt,$t=re.expr.attrHandle,xt=/^(?:checked|selected)$/i,jt=ne.getSetAttribute,Ct=ne.input;re.fn.extend({attr:function(e,t){return De(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})}}),re.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===$e?re.prop(e,t,n):(1===o&&re.isXMLDoc(e)||(t=t.toLowerCase(),i=re.attrHooks[t]||(re.expr.match.bool.test(t)?kt:wt)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=re.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void re.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(ye);if(o&&1===e.nodeType)for(;n=o[r++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)?Ct&&jt||!xt.test(n)?e[i]=!1:e[re.camelCase("default-"+n)]=e[i]=!1:re.attr(e,n,""),e.removeAttribute(jt?n:i)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&re.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),kt={set:function(e,t,n){return t===!1?re.removeAttr(e,n):Ct&&jt||!xt.test(n)?e.setAttribute(!jt&&re.propFix[n]||n,n):e[re.camelCase("default-"+n)]=e[n]=!0,n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(e,t){var n=$t[t]||re.find.attr;$t[t]=Ct&&jt||!xt.test(t)?function(e,t,i){var r,o;return i||(o=$t[t],$t[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,$t[t]=o),r}:function(e,t,n){return n?void 0:e[re.camelCase("default-"+t)]?t.toLowerCase():null}}),Ct&&jt||(re.attrHooks.value={set:function(e,t,n){return re.nodeName(e,"input")?void(e.defaultValue=t):wt&&wt.set(e,t,n)}}),jt||(wt={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},$t.id=$t.name=$t.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},re.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:wt.set},re.attrHooks.contenteditable={set:function(e,t,n){wt.set(e,""===t?!1:t,n)}},re.each(["width","height"],function(e,t){re.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(re.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var St=/^(?:input|select|textarea|button|object)$/i,Tt=/^(?:a|area)$/i;re.fn.extend({prop:function(e,t){return De(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return e=re.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),re.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!re.isXMLDoc(e),o&&(t=re.propFix[t]||t,r=re.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=re.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||re.each(["href","src"],function(e,t){re.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(re.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),ne.enctype||(re.propFix.enctype="encoding");var Dt=/[\t\r\n\f]/g;re.fn.extend({addClass:function(e){var t,n,i,r,o,a,s=0,c=this.length,l="string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ye)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=re.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,r,o,a,s=0,c=this.length,l=0===arguments.length||"string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ye)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=e?re.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):re.isFunction(e)?this.each(function(n){re(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=re(this),o=e.match(ye)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===$e||"boolean"===n)&&(this.className&&re._data(this,"__className__",this.className),this.className=this.className||e===!1?"":re._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dt," ").indexOf(t)>=0)return!0;return!1}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){re.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),re.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var It=re.now(),Et=/\?/,At=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;re.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=re.trim(t+"");return r&&!re.trim(r.replace(At,function(e,t,r,o){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!o-!r,"")}))?Function("return "+r)():re.error("Invalid JSON: "+t)},re.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+t),n};var Pt,Nt,Mt=/#.*$/,Ot=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Bt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,qt={},Ut={},zt="*/".concat("*");try{Nt=location.href}catch(Wt){Nt=he.createElement("a"),Nt.href="",Nt=Nt.href}Pt=Bt.exec(Nt.toLowerCase())||[],re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nt,type:"GET",isLocal:Lt.test(Pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,re.ajaxSettings),t):B(re.ajaxSettings,e)},ajaxPrefilter:R(qt),ajaxTransport:R(Ut),ajax:function(e,t){function n(e,t,n,i){var r,u,_,v,b,k=t;2!==y&&(y=2,s&&clearTimeout(s),l=void 0,a=i||"",w.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(v=q(d,w,n)),v=U(d,v,w,r),r?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(re.lastModified[o]=b),b=w.getResponseHeader("etag"),b&&(re.etag[o]=b)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=v.state,u=v.data,_=v.error,r=!_)):(_=k,(e||!k)&&(k="error",0>e&&(e=0))),w.status=e,w.statusText=(t||k)+"",r?h.resolveWith(f,[u,k,w]):h.rejectWith(f,[w,k,_]),w.statusCode(g),g=void 0,c&&p.trigger(r?"ajaxSuccess":"ajaxError",[w,d,r?u:_]),m.fireWith(f,[w,k]),c&&(p.trigger("ajaxComplete",[w,d]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,a,s,c,l,u,d=re.ajaxSetup({},t),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?re(f):re.event,h=re.Deferred(),m=re.Callbacks("once memory"),g=d.statusCode||{},_={},v={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!u)for(u={};t=Ft.exec(a);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=v[n]=v[n]||e,_[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Nt)+"").replace(Mt,"").replace(Ht,Pt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=re.trim(d.dataType||"*").toLowerCase().match(ye)||[""],null==d.crossDomain&&(i=Bt.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Pt[1]&&i[2]===Pt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Pt[3]||("http:"===Pt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=re.param(d.data,d.traditional)),H(qt,d,t,w),2===y)return w;c=d.global,c&&0===re.active++&&re.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Rt.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Et.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ot.test(o)?o.replace(Ot,"$1_="+It++):o+(Et.test(o)?"&":"?")+"_="+It++)),d.ifModified&&(re.lastModified[o]&&w.setRequestHeader("If-Modified-Since",re.lastModified[o]),re.etag[o]&&w.setRequestHeader("If-None-Match",re.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+zt+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)w.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===y))return w.abort();b="abort";for(r in{success:1,error:1,complete:1})w[r](d[r]);if(l=H(Ut,d,t,w)){w.readyState=1,c&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,l.send(_,n)}catch(k){if(!(2>y))throw k;n(-1,k)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return re.get(e,t,n,"json")},getScript:function(e,t){return re.get(e,void 0,t,"script")}}),re.each(["get","post"],function(e,t){re[t]=function(e,n,i,r){return re.isFunction(n)&&(r=r||i,i=n,n=void 0),re.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re._evalUrl=function(e){return re.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(e){if(re.isFunction(e))return this.each(function(t){re(this).wrapAll(e.call(this,t))});if(this[0]){var t=re(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return re.isFunction(e)?this.each(function(t){re(this).wrapInner(e.call(this,t))}):this.each(function(){var t=re(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(n){re(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||re.css(e,"display"))},re.expr.filters.visible=function(e){return!re.expr.filters.hidden(e)};var Yt=/%20/g,Vt=/\[\]$/,Gt=/\r?\n/g,Qt=/^(?:submit|button|image|reset|file)$/i,Kt=/^(?:input|select|textarea|keygen)/i;re.param=function(e,t){var n,i=[],r=function(e,t){t=re.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jquery&&!re.isPlainObject(e))re.each(e,function(){r(this.name,this.value)});else for(n in e)z(n,e[n],t,r);return i.join("&").replace(Yt,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&Kt.test(this.nodeName)&&!Qt.test(e)&&(this.checked||!Ie.test(e))}).map(function(e,t){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(e){return{name:t.name,value:e.replace(Gt,"\r\n")}}):{name:t.name,value:n.replace(Gt,"\r\n")}}).get()}}),re.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||Y()}:W;var Jt=0,Xt={},Zt=re.ajaxSettings.xhr();e.ActiveXObject&&re(e).on("unload",function(){for(var e in Xt)Xt[e](void 0,!0)}),ne.cors=!!Zt&&"withCredentials"in Zt,Zt=ne.ajax=!!Zt,Zt&&re.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,i){var r,o=e.xhr(),a=++Jt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(e.hasContent&&e.data||null),t=function(n,r){var s,c,l;if(t&&(r||4===o.readyState))if(delete Xt[a],t=void 0,o.onreadystatechange=re.noop,r)4!==o.readyState&&o.abort();else{l={},s=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{c=o.statusText}catch(u){c=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&i(s,c,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Xt[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),re.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=he.head||re("head")[0]||he.documentElement;return{send:function(i,r){t=he.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||re.expando+"_"+It++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(tn,"$1"+r):t.jsonp!==!1&&(t.url+=(Et.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||re.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,en.push(r)),a&&re.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),re.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||he;var i=de.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=re.buildFragment([e],t,r),r&&r.length&&re(r).remove(),re.merge([],i.childNodes))};var nn=re.fn.load;re.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>=0&&(i=re.trim(e.slice(s,e.length)),e=e.slice(0,s)),re.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&re.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?re("<div>").append(re.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length};var rn=e.document.documentElement;re.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,l,u=re.css(e,"position"),d=re(e),f={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=re.css(e,"top"),c=re.css(e,"left"),l=("absolute"===u||"fixed"===u)&&re.inArray("auto",[o,c])>-1,l?(i=d.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),re.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+r),"using"in t?t.using.call(e,f):d.css(f)}},re.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){re.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return t=o.documentElement,re.contains(t,r)?(typeof r.getBoundingClientRect!==$e&&(i=r.getBoundingClientRect()),n=V(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===re.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(n=e.offset()),n.top+=re.css(e[0],"borderTopWidth",!0),n.left+=re.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-re.css(i,"marginTop",!0),left:t.left-n.left-re.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||rn;e&&!re.nodeName(e,"html")&&"static"===re.css(e,"position");)e=e.offsetParent;return e||rn})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);re.fn[e]=function(i){return De(this,function(e,i,r){var o=V(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?re(o).scrollLeft():r,n?r:re(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),re.each(["top","left"],function(e,t){re.cssHooks[t]=C(ne.pixelPosition,function(e,n){return n?(n=tt(e,t),it.test(n)?re(e).position()[t]+"px":n):void 0})}),re.each({Height:"height",Width:"width"},function(e,t){re.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){re.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return De(this,function(t,n,i){var r;return re.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?re.css(t,n,a):re.style(t,n,i,a)},t,o?i:void 0,o,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var on=e.jQuery,an=e.$;return re.noConflict=function(t){return e.$===re&&(e.$=an),t&&e.jQuery===re&&(e.jQuery=on),re},typeof t===$e&&(e.jQuery=e.$=re),re}),function(){$(document).ready(function(){if("undefined"!=typeof ga){ga("create",analytics_vars.google_analytics_id,"auto"),
$("#project_category").length&&ga("set","dimension1",$("#project_category").attr("data-project-category")),ga("set","dimension2",analytics_vars.logged_in),ga("set","dimension3",analytics_vars.social_user),$("#projects_show").length&&ga("set","dimension4",$("#about").attr("data-project-state")),ga("set","dimension5",I18n.browser_language),ga("set","dimension6",I18n.chosen_language),ga("set","dimension7",I18n.calculated_language),ga("set","dimension8",I18n.display_language);try{ga("send","pageview")}catch(e){}}})}(),function(){var e=this,t=e._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,a=i.push,s=i.slice,c=i.concat,l=r.toString,u=r.hasOwnProperty,d=i.forEach,f=i.map,p=i.reduce,h=i.reduceRight,m=i.filter,g=i.every,_=i.some,v=i.indexOf,y=i.lastIndexOf,b=Array.isArray,w=Object.keys,k=o.bind,$=function(e){return e instanceof $?e:this instanceof $?void(this._wrapped=e):new $(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=$),exports._=$):e._=$,$.VERSION="1.5.2";var x=$.each=$.forEach=function(e,t,i){if(null!=e)if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(i,e[r],r,e)===n)return}else for(var a=$.keys(e),r=0,o=a.length;o>r;r++)if(t.call(i,e[a[r]],a[r],e)===n)return};$.map=$.collect=function(e,t,n){var i=[];return null==e?i:f&&e.map===f?e.map(t,n):(x(e,function(e,r,o){i.push(t.call(n,e,r,o))}),i)};var j="Reduce of empty array with no initial value";$.reduce=$.foldl=$.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=$.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(x(e,function(e,o,a){r?n=t.call(i,n,e,o,a):(n=e,r=!0)}),!r)throw new TypeError(j);return n},$.reduceRight=$.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return i&&(t=$.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=$.keys(e);o=a.length}if(x(e,function(s,c,l){c=a?a[--o]:--o,r?n=t.call(i,n,e[c],c,l):(n=e[c],r=!0)}),!r)throw new TypeError(j);return n},$.find=$.detect=function(e,t,n){var i;return C(e,function(e,r,o){return t.call(n,e,r,o)?(i=e,!0):void 0}),i},$.filter=$.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(x(e,function(e,r,o){t.call(n,e,r,o)&&i.push(e)}),i)},$.reject=function(e,t,n){return $.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},$.every=$.all=function(e,t,i){t||(t=$.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,i):(x(e,function(e,o,a){return(r=r&&t.call(i,e,o,a))?void 0:n}),!!r)};var C=$.some=$.any=function(e,t,i){t||(t=$.identity);var r=!1;return null==e?r:_&&e.some===_?e.some(t,i):(x(e,function(e,o,a){return r||(r=t.call(i,e,o,a))?n:void 0}),!!r)};$.contains=$.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):C(e,function(e){return e===t})},$.invoke=function(e,t){var n=s.call(arguments,2),i=$.isFunction(t);return $.map(e,function(e){return(i?t:e[t]).apply(e,n)})},$.pluck=function(e,t){return $.map(e,function(e){return e[t]})},$.where=function(e,t,n){return $.isEmpty(t)?n?void 0:[]:$[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},$.findWhere=function(e,t){return $.where(e,t,!0)},$.max=function(e,t,n){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&$.isEmpty(e))return-(1/0);var i={computed:-(1/0),value:-(1/0)};return x(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a>i.computed&&(i={value:e,computed:a})}),i.value},$.min=function(e,t,n){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&$.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return x(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a<i.computed&&(i={value:e,computed:a})}),i.value},$.shuffle=function(e){var t,n=0,i=[];return x(e,function(e){t=$.random(n++),i[n-1]=i[t],i[t]=e}),i},$.sample=function(e,t,n){return arguments.length<2||n?e[$.random(e.length-1)]:$.shuffle(e).slice(0,Math.max(0,t))};var S=function(e){return $.isFunction(e)?e:function(t){return t[e]}};$.sortBy=function(e,t,n){var i=S(t);return $.pluck($.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,i){var r={},o=null==n?$.identity:S(n);return x(t,function(n,a){var s=o.call(i,n,a,t);e(r,s,n)}),r}};$.groupBy=T(function(e,t,n){($.has(e,t)?e[t]:e[t]=[]).push(n)}),$.indexBy=T(function(e,t,n){e[t]=n}),$.countBy=T(function(e,t){$.has(e,t)?e[t]++:e[t]=1}),$.sortedIndex=function(e,t,n,i){n=null==n?$.identity:S(n);for(var r=n.call(i,t),o=0,a=e.length;a>o;){var s=o+a>>>1;n.call(i,e[s])<r?o=s+1:a=s}return o},$.toArray=function(e){return e?$.isArray(e)?s.call(e):e.length===+e.length?$.map(e,$.identity):$.values(e):[]},$.size=function(e){return null==e?0:e.length===+e.length?e.length:$.keys(e).length},$.first=$.head=$.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:s.call(e,0,t)},$.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},$.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},$.rest=$.tail=$.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},$.compact=function(e){return $.filter(e,$.identity)};var D=function(e,t,n){return t&&$.every(e,$.isArray)?c.apply(n,e):(x(e,function(e){$.isArray(e)||$.isArguments(e)?t?a.apply(n,e):D(e,t,n):n.push(e)}),n)};$.flatten=function(e,t){return D(e,t,[])},$.without=function(e){return $.difference(e,s.call(arguments,1))},$.uniq=$.unique=function(e,t,n,i){$.isFunction(t)&&(i=n,n=t,t=!1);var r=n?$.map(e,n,i):e,o=[],a=[];return x(r,function(n,i){(t?i&&a[a.length-1]===n:$.contains(a,n))||(a.push(n),o.push(e[i]))}),o},$.union=function(){return $.uniq($.flatten(arguments,!0))},$.intersection=function(e){var t=s.call(arguments,1);return $.filter($.uniq(e),function(e){return $.every(t,function(t){return $.indexOf(t,e)>=0})})},$.difference=function(e){var t=c.apply(i,s.call(arguments,1));return $.filter(e,function(e){return!$.contains(t,e)})},$.zip=function(){for(var e=$.max($.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=$.pluck(arguments,""+n);return t},$.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},$.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=$.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(v&&e.indexOf===v)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},$.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(y&&e.lastIndexOf===y)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},$.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,o=new Array(i);i>r;)o[r++]=e,e+=n;return o};var I=function(){};$.bind=function(e,t){var n,i;if(k&&e.bind===k)return k.apply(e,s.call(arguments,1));if(!$.isFunction(e))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(s.call(arguments)));I.prototype=e.prototype;var r=new I;I.prototype=null;var o=e.apply(r,n.concat(s.call(arguments)));return Object(o)===o?o:r}},$.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},$.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return x(t,function(t){e[t]=$.bind(e[t],e)}),e},$.memoize=function(e,t){var n={};return t||(t=$.identity),function(){var i=t.apply(this,arguments);return $.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},$.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},$.defer=function(e){return $.delay.apply($,[e,1].concat(s.call(arguments,1)))},$.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:new Date,a=null,o=e.apply(i,r)};return function(){var l=new Date;s||n.leading!==!1||(s=l);var u=t-(l-s);return i=this,r=arguments,0>=u?(clearTimeout(a),a=null,s=l,o=e.apply(i,r)):a||n.trailing===!1||(a=setTimeout(c,u)),o}},$.debounce=function(e,t,n){var i,r,o,a,s;return function(){o=this,r=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?i=setTimeout(c,t-l):(i=null,n||(s=e.apply(o,r)))},l=n&&!i;return i||(i=setTimeout(c,t)),l&&(s=e.apply(o,r)),s}},$.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},$.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},$.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},$.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},$.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)$.has(e,n)&&t.push(n);return t},$.values=function(e){for(var t=$.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},$.pairs=function(e){for(var t=$.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},$.invert=function(e){for(var t={},n=$.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},$.functions=$.methods=function(e){var t=[];for(var n in e)$.isFunction(e[n])&&t.push(n);return t.sort()},$.extend=function(e){return x(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},$.pick=function(e){var t={},n=c.apply(i,s.call(arguments,1));return x(n,function(n){n in e&&(t[n]=e[n])}),t},$.omit=function(e){var t={},n=c.apply(i,s.call(arguments,1));for(var r in e)$.contains(n,r)||(t[r]=e[r]);return t},$.defaults=function(e){return x(s.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},$.clone=function(e){return $.isObject(e)?$.isArray(e)?e.slice():$.extend({},e):e},$.tap=function(e,t){return t(e),e};var E=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof $&&(e=e._wrapped),t instanceof $&&(t=t._wrapped);var r=l.call(e);if(r!=l.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!($.isFunction(a)&&a instanceof a&&$.isFunction(s)&&s instanceof s))return!1;n.push(e),i.push(t);var c=0,u=!0;if("[object Array]"==r){if(c=e.length,u=c==t.length)for(;c--&&(u=E(e[c],t[c],n,i)););}else{for(var d in e)if($.has(e,d)&&(c++,!(u=$.has(t,d)&&E(e[d],t[d],n,i))))break;if(u){for(d in t)if($.has(t,d)&&!c--)break;u=!c}}return n.pop(),i.pop(),u};$.isEqual=function(e,t){return E(e,t,[],[])},$.isEmpty=function(e){if(null==e)return!0;if($.isArray(e)||$.isString(e))return 0===e.length;for(var t in e)if($.has(e,t))return!1;return!0},$.isElement=function(e){return!(!e||1!==e.nodeType)},$.isArray=b||function(e){return"[object Array]"==l.call(e)},$.isObject=function(e){return e===Object(e)},x(["Arguments","Function","String","Number","Date","RegExp"],function(e){$["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),$.isArguments(arguments)||($.isArguments=function(e){return!(!e||!$.has(e,"callee"))}),"function"!=typeof/./&&($.isFunction=function(e){return"function"==typeof e}),$.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},$.isNaN=function(e){return $.isNumber(e)&&e!=+e},$.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},$.isNull=function(e){return null===e},$.isUndefined=function(e){return void 0===e},$.has=function(e,t){return u.call(e,t)},$.noConflict=function(){return e._=t,this},$.identity=function(e){return e},$.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},$.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=$.invert(A.escape),$.each(A.escape,function(e,t){var n=e.replace(/\#x([0-9a-f]+)/i,function(e,t){return e?"#"+parseInt(t,16):void 0});n!==e&&(A.unescape[n]=t)});var P={escape:new RegExp("["+$.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+$.keys(A.unescape).join("|")+")","g")};$.each(["escape","unescape"],function(e){$[e]=function(t){return null==t?"":(""+t).replace(P[e],function(t){return A[e][t]})}}),$.result=function(e,t){if(null==e)return void 0;var n=e[t];return $.isFunction(n)?n.call(e):n},$.mixin=function(e){x($.functions(e),function(t){var n=$[t]=e[t];$.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),L.call(this,n.apply($,e))}})};var N=0;$.uniqueId=function(e){var t=++N+"";return e?e+t:t},$.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;$.template=function(e,t,n){var i;n=$.defaults({},n,$.templateSettings);var r=new RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,function(t,n,i,r,s){return a+=e.slice(o,s).replace(F,function(e){return"\\"+O[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return i(t,$);var c=function(e){return i.call(this,e,$)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},$.chain=function(e){return $(e).chain()};var L=function(e){return this._chain?$(e).chain():e};$.mixin($),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];$.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],L.call(this,n)}}),x(["concat","join","slice"],function(e){var t=i[e];$.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),$.extend($.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(e){e.support.JSON=function(){return"undefined"!=typeof root.JSON}}(jQuery),function(e){e.KSR=e.KSR||{},e.KSR.store=e.KSR.store||{};var t={};e.KSR.store.isSupported=function(){try{var t="storagetest",n=e.localStorage;return n.setItem(t,"1"),n.removeItem(t),!0}catch(i){return!1}},e.KSR.store.getItem=function(n){return e.KSR.store.isSupported()?window.localStorage.getItem.apply(window.localStorage,arguments):t[n]},e.KSR.store.removeItem=function(n){e.KSR.store.isSupported()?window.localStorage.removeItem.apply(window.localStorage,arguments):delete t[n]},e.KSR.store.setItem=function(n,i){e.KSR.store.isSupported()?window.localStorage.setItem.apply(window.localStorage,arguments):t[n]=String(i)}}(this),function(){$(window).load(function(){function e(e){return window.performance.getEntriesByName(e,"mark")[0].startTime}function t(t){return e("end_"+t)-e("begin_"+t)}function n(e,n){var i;return(i=_.find(window.performance.getEntriesByType("resource"),function(t){return t.name.match(n||e)}))?{fetch:i.duration,eval:t(e+"_eval"),block:t(e+"_tag")}:void 0}window.benchmark&&"function"==typeof window.performance.getEntriesByName&&$.support.JSON()&&(Math.random()>.1&&!KSR.store.getItem("benchmarks")||$.ajax({type:"POST",url:"/timings",contentType:"application/json",data:JSON.stringify({data:{"base.js":n("base.js",/\/base(-[a-z0-9]*)?.js/)}})}))})}(),this.root=window,this.packages=root,this.requires=function(){},function(){$(function(){$("body").hasClass("admin")||(root._sf_async_config={uid:5536,domain:window.location.hostname.replace("www.","")},root._sf_endpt=(new Date).getTime(),$.getScript("//a248.e.akamai.net/chartbeat.download.akamai.com/102508/js/chartbeat.js"))})}(),function(){function e(e){var t,n,i,r="",o=-1;if(e&&e.length)for(i=e.length;(o+=1)<i;)t=e.charCodeAt(o),n=i>o+1?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&n>=56320&&57343>=n&&(t=65536+((1023&t)<<10)+(1023&n),o+=1),127>=t?r+=String.fromCharCode(t):2047>=t?r+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function t(e){var t,n,i,r,o,a,s=[];if(t=n=i=r=o=0,e&&e.length)for(a=e.length,e+="";a>t;)i=e.charCodeAt(t),n+=1,128>i?(s[n]=String.fromCharCode(i),t+=1):i>191&&224>i?(r=e.charCodeAt(t+1),s[n]=String.fromCharCode((31&i)<<6|63&r),t+=2):(r=e.charCodeAt(t+1),o=e.charCodeAt(t+2),s[n]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o),t+=3);return s.join("")}function n(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function i(e,t){return e<<t|e>>>32-t}function r(e,t){for(var n,i=t?"0123456789ABCDEF":"0123456789abcdef",r="",o=0,a=e.length;a>o;o+=1)n=e.charCodeAt(o),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r}function o(e){var t,n=32*e.length,i="";for(t=0;n>t;t+=8)i+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return i}function a(e){var t,n=32*e.length,i="";for(t=0;n>t;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function s(e){var t,n=8*e.length,i=Array(e.length>>2),r=i.length;for(t=0;r>t;t+=1)i[t]=0;for(t=0;n>t;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function c(e){var t,n=8*e.length,i=Array(e.length>>2),r=i.length;for(t=0;r>t;t+=1)i[t]=0;for(t=0;n>t;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return i}function l(e,t){var n,i,r,o,a,s,c,l,u=t.length,d=Array();for(s=Array(Math.ceil(e.length/2)),o=s.length,n=0;o>n;n+=1)s[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);for(;s.length>0;){for(a=Array(),r=0,n=0;n<s.length;n+=1)r=(r<<16)+s[n],i=Math.floor(r/u),r-=i*u,(a.length>0||i>0)&&(a[a.length]=i);d[d.length]=r,s=a}for(c="",n=d.length-1;n>=0;n--)c+=t.charAt(d[n]);for(l=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),n=c.length;l>n;n+=1)c=t[0]+c;return c}function u(e,t){var n,i,r,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="",s=e.length;for(t=t||"=",n=0;s>n;n+=3)for(r=e.charCodeAt(n)<<16|(s>n+1?e.charCodeAt(n+1)<<8:0)|(s>n+2?e.charCodeAt(n+2):0),i=0;4>i;i+=1)a+=8*n+6*i>8*e.length?t:o.charAt(r>>>6*(3-i)&63);return a}var d;d={VERSION:"1.0.5",Base64:function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="=",r=!0;this.encode=function(t){var o,a,s,c="",l=t.length;for(i=i||"=",t=r?e(t):t,o=0;l>o;o+=3)for(s=t.charCodeAt(o)<<16|(l>o+1?t.charCodeAt(o+1)<<8:0)|(l>o+2?t.charCodeAt(o+2):0),a=0;4>a;a+=1)c+=8*o+6*a>8*l?i:n.charAt(s>>>6*(3-a)&63);return c},this.decode=function(e){var o,a,s,c,l,u,d,f,p,h,m="",g=[];if(!e)return e;o=h=0,e=e.replace(new RegExp("\\"+i,"gi"),"");do l=n.indexOf(e.charAt(o+=1)),u=n.indexOf(e.charAt(o+=1)),d=n.indexOf(e.charAt(o+=1)),f=n.indexOf(e.charAt(o+=1)),p=l<<18|u<<12|d<<6|f,a=p>>16&255,s=p>>8&255,c=255&p,h+=1,64===d?g[h]=String.fromCharCode(a):64===f?g[h]=String.fromCharCode(a,s):g[h]=String.fromCharCode(a,s,c);while(o<e.length);return m=g.join(""),m=r?t(m):m},this.setPad=function(e){return i=e||i,this},this.setTab=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(r=e),this}},CRC32:function(t){var n,i,r,o=0,a=0,s=0;for(t=e(t),n=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o=-1^o,i=0,r=t.length;r>i;i+=1)s=255&(o^t.charCodeAt(i)),a="0x"+n.substr(9*s,8),o=o>>>8^a;return(-1^o)>>>0},MD5:function(t){function o(t){return t=y?e(t):t,a(d(s(t),8*t.length))}function c(t,n){var i,r,o,c,l;for(t=y?e(t):t,n=y?e(n):n,i=s(t),i.length>16&&(i=d(i,8*t.length)),r=Array(16),o=Array(16),l=0;16>l;l+=1)r[l]=909522486^i[l],o[l]=1549556828^i[l];return c=d(r.concat(s(n)),512+8*n.length),a(d(o.concat(c),640))}function d(e,t){var i,r,o,a,s,c=1732584193,l=-271733879,u=-1732584194,d=271733878;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,i=0;i<e.length;i+=16)r=c,o=l,a=u,s=d,c=p(c,l,u,d,e[i+0],7,-680876936),d=p(d,c,l,u,e[i+1],12,-389564586),u=p(u,d,c,l,e[i+2],17,606105819),l=p(l,u,d,c,e[i+3],22,-1044525330),c=p(c,l,u,d,e[i+4],7,-176418897),d=p(d,c,l,u,e[i+5],12,1200080426),u=p(u,d,c,l,e[i+6],17,-1473231341),l=p(l,u,d,c,e[i+7],22,-45705983),c=p(c,l,u,d,e[i+8],7,1770035416),d=p(d,c,l,u,e[i+9],12,-1958414417),u=p(u,d,c,l,e[i+10],17,-42063),l=p(l,u,d,c,e[i+11],22,-1990404162),c=p(c,l,u,d,e[i+12],7,1804603682),d=p(d,c,l,u,e[i+13],12,-40341101),u=p(u,d,c,l,e[i+14],17,-1502002290),l=p(l,u,d,c,e[i+15],22,1236535329),c=h(c,l,u,d,e[i+1],5,-165796510),d=h(d,c,l,u,e[i+6],9,-1069501632),u=h(u,d,c,l,e[i+11],14,643717713),l=h(l,u,d,c,e[i+0],20,-373897302),c=h(c,l,u,d,e[i+5],5,-701558691),d=h(d,c,l,u,e[i+10],9,38016083),u=h(u,d,c,l,e[i+15],14,-660478335),l=h(l,u,d,c,e[i+4],20,-405537848),c=h(c,l,u,d,e[i+9],5,568446438),d=h(d,c,l,u,e[i+14],9,-1019803690),u=h(u,d,c,l,e[i+3],14,-187363961),l=h(l,u,d,c,e[i+8],20,1163531501),c=h(c,l,u,d,e[i+13],5,-1444681467),d=h(d,c,l,u,e[i+2],9,-51403784),u=h(u,d,c,l,e[i+7],14,1735328473),l=h(l,u,d,c,e[i+12],20,-1926607734),c=m(c,l,u,d,e[i+5],4,-378558),d=m(d,c,l,u,e[i+8],11,-2022574463),u=m(u,d,c,l,e[i+11],16,1839030562),l=m(l,u,d,c,e[i+14],23,-35309556),c=m(c,l,u,d,e[i+1],4,-1530992060),d=m(d,c,l,u,e[i+4],11,1272893353),u=m(u,d,c,l,e[i+7],16,-155497632),l=m(l,u,d,c,e[i+10],23,-1094730640),c=m(c,l,u,d,e[i+13],4,681279174),d=m(d,c,l,u,e[i+0],11,-358537222),u=m(u,d,c,l,e[i+3],16,-722521979),l=m(l,u,d,c,e[i+6],23,76029189),c=m(c,l,u,d,e[i+9],4,-640364487),d=m(d,c,l,u,e[i+12],11,-421815835),u=m(u,d,c,l,e[i+15],16,530742520),l=m(l,u,d,c,e[i+2],23,-995338651),c=g(c,l,u,d,e[i+0],6,-198630844),d=g(d,c,l,u,e[i+7],10,1126891415),u=g(u,d,c,l,e[i+14],15,-1416354905),l=g(l,u,d,c,e[i+5],21,-57434055),c=g(c,l,u,d,e[i+12],6,1700485571),d=g(d,c,l,u,e[i+3],10,-1894986606),u=g(u,d,c,l,e[i+10],15,-1051523),l=g(l,u,d,c,e[i+1],21,-2054922799),c=g(c,l,u,d,e[i+8],6,1873313359),d=g(d,c,l,u,e[i+15],10,-30611744),u=g(u,d,c,l,e[i+6],15,-1560198380),l=g(l,u,d,c,e[i+13],21,1309151649),c=g(c,l,u,d,e[i+4],6,-145523070),d=g(d,c,l,u,e[i+11],10,-1120210379),u=g(u,d,c,l,e[i+2],15,718787259),l=g(l,u,d,c,e[i+9],21,-343485551),c=n(c,r),l=n(l,o),u=n(u,a),d=n(d,s);return Array(c,l,u,d)}function f(e,t,r,o,a,s){return n(i(n(n(t,e),n(o,s)),a),r)}function p(e,t,n,i,r,o,a){return f(t&n|~t&i,e,t,r,o,a)}function h(e,t,n,i,r,o,a){return f(t&i|n&~i,e,t,r,o,a)}function m(e,t,n,i,r,o,a){return f(t^n^i,e,t,r,o,a)}function g(e,t,n,i,r,o,a){return f(n^(t|~i),e,t,r,o,a)}var _=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,v=t&&"string"==typeof t.pad?t.pda:"=",y=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(o(e,y),_)},this.b64=function(e){return u(o(e),v)},this.any=function(e,t){return l(o(e,y),t)},this.raw=function(e){return o(e,y)},this.hex_hmac=function(e,t){return r(c(e,t),_)},this.b64_hmac=function(e,t){return u(c(e,t),v)},this.any_hmac=function(e,t,n){return l(c(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(_=e),this},this.setPad=function(e){return v=e||v,this},this.setUTF8=function(e){return"boolean"==typeof e&&(y=e),this}},SHA1:function(t){function a(t){return t=g?e(t):t,o(d(c(t),8*t.length))}function s(t,n){var i,r,a,s,l;for(t=g?e(t):t,n=g?e(n):n,i=c(t),i.length>16&&(i=d(i,8*t.length)),r=Array(16),a=Array(16),s=0;16>s;s+=1)r[s]=909522486^i[s],a[s]=1549556828^i[s];return l=d(r.concat(c(n)),512+8*n.length),o(d(a.concat(l),672))}function d(e,t){var r,o,a,s,c,l,u,d,h=Array(80),m=1732584193,g=-271733879,_=-1732584194,v=271733878,y=-1009589776;for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,r=0;r<e.length;r+=16){for(s=m,c=g,l=_,u=v,d=y,o=0;80>o;o+=1)16>o?h[o]=e[r+o]:h[o]=i(h[o-3]^h[o-8]^h[o-14]^h[o-16],1),a=n(n(i(m,5),f(o,g,_,v)),n(n(y,h[o]),p(o))),y=v,v=_,_=i(g,30),g=m,m=a;m=n(m,s),g=n(g,c),_=n(_,l),v=n(v,u),y=n(y,d)}return Array(m,g,_,v,y)}function f(e,t,n,i){return 20>e?t&n|~t&i:40>e?t^n^i:60>e?t&n|t&i|n&i:t^n^i}function p(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}var h=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,m=t&&"string"==typeof t.pad?t.pda:"=",g=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(a(e,g),h)},this.b64=function(e){return u(a(e,g),m)},this.any=function(e,t){return l(a(e,g),t)},this.raw=function(e){return a(e,g)},this.hex_hmac=function(e,t){return r(s(e,t))},this.b64_hmac=function(e,t){return u(s(e,t),m)},this.any_hmac=function(e,t,n){return l(s(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(h=e),this},this.setPad=function(e){return m=e||m,this},this.setUTF8=function(e){return"boolean"==typeof e&&(g=e),this}},SHA256:function(t){function i(t,n){return t=n?e(t):t,o(v(c(t),8*t.length))}function a(t,n){t=k?e(t):t,n=k?e(n):n;var i,r=0,a=c(t),s=Array(16),l=Array(16);for(a.length>16&&(a=v(a,8*t.length));16>r;r+=1)s[r]=909522486^a[r],l[r]=1549556828^a[r];return i=v(s.concat(c(n)),512+8*n.length),o(v(l.concat(i),768))}function s(e,t){return e>>>t|e<<32-t}function d(e,t){return e>>>t}function f(e,t,n){return e&t^~e&n}function p(e,t,n){return e&t^e&n^t&n}function h(e){return s(e,2)^s(e,13)^s(e,22)}function m(e){return s(e,6)^s(e,11)^s(e,25)}function g(e){return s(e,7)^s(e,18)^d(e,3)}function _(e){return s(e,17)^s(e,19)^d(e,10)}function v(e,t){var i,r,o,a,s,c,l,u,d,v,b,w,k=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],$=new Array(64);for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,d=0;d<e.length;d+=16){for(i=k[0],r=k[1],o=k[2],a=k[3],s=k[4],c=k[5],l=k[6],u=k[7],v=0;64>v;v+=1)16>v?$[v]=e[v+d]:$[v]=n(n(n(_($[v-2]),$[v-7]),g($[v-15])),$[v-16]),b=n(n(n(n(u,m(s)),f(s,c,l)),y[v]),$[v]),w=n(h(i),p(i,r,o)),u=l,l=c,c=s,s=n(a,b),a=o,o=r,r=i,i=n(b,w);k[0]=n(i,k[0]),k[1]=n(r,k[1]),k[2]=n(o,k[2]),k[3]=n(a,k[3]),k[4]=n(s,k[4]),k[5]=n(c,k[5]),k[6]=n(l,k[6]),k[7]=n(u,k[7])}return k}var y,b=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,w=t&&"string"==typeof t.pad?t.pda:"=",k=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(i(e,k))},this.b64=function(e){return u(i(e,k),w)},this.any=function(e,t){return l(i(e,k),t)},this.raw=function(e){return i(e,k)},this.hex_hmac=function(e,t){return r(a(e,t))},this.b64_hmac=function(e,t){return u(a(e,t),w)},this.any_hmac=function(e,t,n){return l(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(b=e),this},this.setPad=function(e){return w=e||w,this},this.setUTF8=function(e){return"boolean"==typeof e&&(k=e),this},y=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(t){function n(t){return t=w?e(t):t,o(a(c(t),8*t.length))}function i(t,n){t=w?e(t):t,n=w?e(n):n;var i,r=0,s=c(t),l=Array(32),u=Array(32);for(s.length>32&&(s=a(s,8*t.length));32>r;r+=1)l[r]=909522486^s[r],u[r]=1549556828^s[r];return i=a(l.concat(c(n)),1024+8*n.length),o(a(u.concat(i),1536))}function a(e,t){var n,i,r,o=new Array(80),a=new Array(16),c=[new s(1779033703,-205731576),new s(-1150833019,-2067093701),new s(1013904242,-23791573),new s(-1521486534,1595750129),new s(1359893119,-1377402159),new s(-1694144372,725511199),new s(528734635,-79577749),new s(1541459225,327033209)],l=new s(0,0),u=new s(0,0),y=new s(0,0),b=new s(0,0),w=new s(0,0),k=new s(0,0),$=new s(0,0),x=new s(0,0),j=new s(0,0),C=new s(0,0),S=new s(0,0),T=new s(0,0),D=new s(0,0),I=new s(0,0),E=new s(0,0),A=new s(0,0),P=new s(0,0);for(void 0===v&&(v=[new s(1116352408,-685199838),new s(1899447441,602891725),new s(-1245643825,-330482897),new s(-373957723,-2121671748),new s(961987163,-213338824),new s(1508970993,-1241133031),new s(-1841331548,-1357295717),new s(-1424204075,-630357736),new s(-670586216,-1560083902),new s(310598401,1164996542),new s(607225278,1323610764),new s(1426881987,-704662302),new s(1925078388,-226784913),new s(-2132889090,991336113),new s(-1680079193,633803317),new s(-1046744716,-815192428),new s(-459576895,-1628353838),new s(-272742522,944711139),new s(264347078,-1953704523),new s(604807628,2007800933),new s(770255983,1495990901),new s(1249150122,1856431235),new s(1555081692,-1119749164),new s(1996064986,-2096016459),new s(-1740746414,-295247957),new s(-1473132947,766784016),new s(-1341970488,-1728372417),new s(-1084653625,-1091629340),new s(-958395405,1034457026),new s(-710438585,-1828018395),new s(113926993,-536640913),new s(338241895,168717936),new s(666307205,1188179964),new s(773529912,1546045734),new s(1294757372,1522805485),new s(1396182291,-1651133473),new s(1695183700,-1951439906),new s(1986661051,1014477480),new s(-2117940946,1206759142),new s(-1838011259,344077627),new s(-1564481375,1290863460),new s(-1474664885,-1136513023),new s(-1035236496,-789014639),new s(-949202525,106217008),new s(-778901479,-688958952),new s(-694614492,1432725776),new s(-200395387,1467031594),new s(275423344,851169720),new s(430227734,-1194143544),new s(506948616,1363258195),new s(659060556,-544281703),new s(883997877,-509917016),new s(958139571,-976659869),new s(1322822218,-482243893),new s(1537002063,2003034995),new s(1747873779,-692930397),new s(1955562222,1575990012),new s(2024104815,1125592928),new s(-2067236844,-1578062990),new s(-1933114872,442776044),new s(-1866530822,593698344),new s(-1538233109,-561857047),new s(-1090935817,-1295615723),new s(-965641998,-479046869),new s(-903397682,-366583396),new s(-779700025,566280711),new s(-354779690,-840897762),new s(-176337025,-294727304),new s(116418474,1914138554),new s(174292421,-1563912026),new s(289380356,-1090974290),new s(460393269,320620315),new s(685471733,587496836),new s(852142971,1086792851),new s(1017036298,365543100),new s(1126000580,-1676669620),new s(1288033470,-885112138),new s(1501505948,-60457430),new s(1607167915,987167468),new s(1816402316,1246189591)]),
i=0;80>i;i+=1)o[i]=new s(0,0);for(e[t>>5]|=128<<24-(31&t),e[(t+128>>10<<5)+31]=t,r=e.length,i=0;r>i;i+=32){for(d(y,c[0]),d(b,c[1]),d(w,c[2]),d(k,c[3]),d($,c[4]),d(x,c[5]),d(j,c[6]),d(C,c[7]),n=0;16>n;n+=1)o[n].h=e[i+2*n],o[n].l=e[i+2*n+1];for(n=16;80>n;n+=1)f(E,o[n-2],19),p(A,o[n-2],29),h(P,o[n-2],6),T.l=E.l^A.l^P.l,T.h=E.h^A.h^P.h,f(E,o[n-15],1),f(A,o[n-15],8),h(P,o[n-15],7),S.l=E.l^A.l^P.l,S.h=E.h^A.h^P.h,g(o[n],T,o[n-7],S,o[n-16]);for(n=0;80>n;n+=1)D.l=$.l&x.l^~$.l&j.l,D.h=$.h&x.h^~$.h&j.h,f(E,$,14),f(A,$,18),p(P,$,9),T.l=E.l^A.l^P.l,T.h=E.h^A.h^P.h,f(E,y,28),p(A,y,2),p(P,y,7),S.l=E.l^A.l^P.l,S.h=E.h^A.h^P.h,I.l=y.l&b.l^y.l&w.l^b.l&w.l,I.h=y.h&b.h^y.h&w.h^b.h&w.h,_(l,C,T,D,v[n],o[n]),m(u,S,I),d(C,j),d(j,x),d(x,$),m($,k,l),d(k,w),d(w,b),d(b,y),m(y,l,u);m(c[0],c[0],y),m(c[1],c[1],b),m(c[2],c[2],w),m(c[3],c[3],k),m(c[4],c[4],$),m(c[5],c[5],x),m(c[6],c[6],j),m(c[7],c[7],C)}for(i=0;8>i;i+=1)a[2*i]=c[i].h,a[2*i+1]=c[i].l;return a}function s(e,t){this.h=e,this.l=t}function d(e,t){e.h=t.h,e.l=t.l}function f(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n|t.l<<32-n}function p(e,t,n){e.l=t.h>>>n|t.l<<32-n,e.h=t.l>>>n|t.h<<32-n}function h(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n}function m(e,t,n){var i=(65535&t.l)+(65535&n.l),r=(t.l>>>16)+(n.l>>>16)+(i>>>16),o=(65535&t.h)+(65535&n.h)+(r>>>16),a=(t.h>>>16)+(n.h>>>16)+(o>>>16);e.l=65535&i|r<<16,e.h=65535&o|a<<16}function g(e,t,n,i,r){var o=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&r.l),a=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(o>>>16),s=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(a>>>16),c=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(s>>>16);e.l=65535&o|a<<16,e.h=65535&s|c<<16}function _(e,t,n,i,r,o){var a=(65535&t.l)+(65535&n.l)+(65535&i.l)+(65535&r.l)+(65535&o.l),s=(t.l>>>16)+(n.l>>>16)+(i.l>>>16)+(r.l>>>16)+(o.l>>>16)+(a>>>16),c=(65535&t.h)+(65535&n.h)+(65535&i.h)+(65535&r.h)+(65535&o.h)+(s>>>16),l=(t.h>>>16)+(n.h>>>16)+(i.h>>>16)+(r.h>>>16)+(o.h>>>16)+(c>>>16);e.l=65535&a|s<<16,e.h=65535&c|l<<16}var v,y=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,b=t&&"string"==typeof t.pad?t.pda:"=",w=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(e){return r(n(e))},this.b64=function(e){return u(n(e),b)},this.any=function(e,t){return l(n(e),t)},this.raw=function(e){return n(e,w)},this.hex_hmac=function(e,t){return r(i(e,t))},this.b64_hmac=function(e,t){return u(i(e,t),b)},this.any_hmac=function(e,t,n){return l(i(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(y=e),this},this.setPad=function(e){return b=e||b,this},this.setUTF8=function(e){return"boolean"==typeof e&&(w=e),this}},RMD160:function(t){function o(t){return t=_?e(t):t,c(d(s(t),8*t.length))}function a(t,n){t=_?e(t):t,n=_?e(n):n;var i,r,o=s(t),a=Array(16),l=Array(16);for(o.length>16&&(o=d(o,8*t.length)),i=0;16>i;i+=1)a[i]=909522486^o[i],l[i]=1549556828^o[i];return r=d(a.concat(s(n)),512+8*n.length),c(d(l.concat(r),672))}function c(e){var t,n="",i=32*e.length;for(t=0;i>t;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e,t){var r,o,a,s,c,l,u,d,m,g,_,k,$,x,j=1732584193,C=4023233417,S=2562383102,T=271733878,D=3285377520;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,s=e.length,a=0;s>a;a+=16){for(c=g=j,l=_=C,u=k=S,d=$=T,m=x=D,o=0;79>=o;o+=1)r=n(c,f(o,l,u,d)),r=n(r,e[a+v[o]]),r=n(r,p(o)),r=n(i(r,b[o]),m),c=m,m=d,d=i(u,10),u=l,l=r,r=n(g,f(79-o,_,k,$)),r=n(r,e[a+y[o]]),r=n(r,h(o)),r=n(i(r,w[o]),x),g=x,x=$,$=i(k,10),k=_,_=r;r=n(C,n(u,$)),C=n(S,n(d,x)),S=n(T,n(m,g)),T=n(D,n(c,_)),D=n(j,n(l,k)),j=r}return[j,C,S,T,D]}function f(e,t,n,i){return e>=0&&15>=e?t^n^i:e>=16&&31>=e?t&n|~t&i:e>=32&&47>=e?(t|~n)^i:e>=48&&63>=e?t&i|n&~i:e>=64&&79>=e?t^(n|~i):"rmd160_f: j out of range"}function p(e){return e>=0&&15>=e?0:e>=16&&31>=e?1518500249:e>=32&&47>=e?1859775393:e>=48&&63>=e?2400959708:e>=64&&79>=e?2840853838:"rmd160_K1: j out of range"}function h(e){return e>=0&&15>=e?1352829926:e>=16&&31>=e?1548603684:e>=32&&47>=e?1836072691:e>=48&&63>=e?2053994217:e>=64&&79>=e?0:"rmd160_K2: j out of range"}var m=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,g=t&&"string"==typeof t.pad?t.pda:"=",_=t&&"boolean"==typeof t.utf8?t.utf8:!0,v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],w=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(e){return r(o(e,_))},this.b64=function(e){return u(o(e,_),g)},this.any=function(e,t){return l(o(e,_),t)},this.raw=function(e){return o(e,_)},this.hex_hmac=function(e,t){return r(a(e,t))},this.b64_hmac=function(e,t){return u(a(e,t),g)},this.any_hmac=function(e,t,n){return l(a(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(m=e),this},this.setPad=function(e){return"undefined"!=typeof e&&(g=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(_=e),this}}},function(e,t){var n=!1;"object"==typeof exports&&(n=exports,exports&&"object"==typeof global&&global&&global===global.global&&(e=global)),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return d}):n?"object"==typeof module&&module&&module.exports===n?module.exports=d:n.Hashes=d:e.Hashes=d}(this)}(),function(){function e(){var e=["AdobeReader","Flash","Quicktime","RealPlayer","Shockwave","Silverlight","VLC","WindowsMediaPlayer"],t=function(e){try{return root.PluginDetect.getVersion(e)}catch(t){return t.description}};return _.chain(e).zip(_.map(e,t)).filter(_.last).value()}function t(){return _.map(navigator.plugins,function(e){return[e.name,e.description,e.filename,e.length].join("|")})}function n(){return _.map(navigator.mimeTypes,function(e){return[e.type,e.description].join("|")})}function i(){var e=[screen.availWidth,screen.availHeight],t=screen.orientation||screen.mozOrientation||screen.msOrientation;return"object"==typeof t&&(t=t.type),t?t.match("portrait")&&e.reverse():e.sort().reverse(),e.push(screen.colorDepth),e.join("x")}function r(){var e=document.createElement("canvas");if(!e.getContext||!e.getContext("2d"))return void 0;var t=e.getContext("2d"),n="a1b2,#3<!xy> 456.Z";return t.textBaseline="top",t.font='14px "Arial"',t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}function o(){var e=navigator.getGamepads?navigator.getGamepads():[];return _.chain(e).filter(_.identity).map(function(e){return[e.index,e.id].join("|")}).value()}function a(){var e,t,n,i=new Date,r=i.getTimezoneOffset();return i.setDate(1),i.setMonth(1),e=i.getTimezoneOffset(),i.setMonth(6),t=i.getTimezoneOffset(),n=e-t,n?r+"DST"+n:r.toString()}function s(){var e=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],t=["monospace","sans-serif","serif"],n=function(e){var t=document.createElement("span");t.style.fontFamily=e,t.style.fontSize="72px";var n=document.createTextNode("mmmmmmmmmmlli");return t.appendChild(n),t},i=_.map(t,n),r=_.map(e,function(e){return _.map(t,function(t){return n(e+","+t)})}),o=document.createElement("div");o.style.position="absolute",o.style.visibility="hidden",_.forEach(_.flatten(r).concat(i),function(e){o.appendChild(e)});var a=document.getElementsByTagName("body")[0];a.appendChild(o);var s=function(e){var t=e.offsetHeight,n=e.offsetWidth;return[n,t]},c=_.map(i,s),l=_.map(r,function(e){return _.map(e,s)});a.removeChild(o);var u=function(e,n){var i,r,o;for(o=0;o<t.length;o+=1)if(i=l[n][o],r=c[o],i[0]!==r[0]||i[1]!==r[1])return!0;return!1};return _.filter(e,u)}function c(){var e=[screen.height===screen.availHeight,screen.height===window.innerHeight,0===n().length,0===(new Date).getTimezoneOffset()];return _.filter(e,_.identity).length/e.length}function l(e){var t=new root.Hashes.SHA256;return t.hex(e)}function u(){var e=root.current_user;return void 0===e||null===e||""===e||"object"!=typeof e?null:"function"==typeof e.get?e.get("id")||null:e.id?e.id||null:null}var d,f;d=_.memoize(function(){var u,d=e(),f=t(),p=n(),h=o(),m=s(),g={pdc:d.length,pds:d.toString(),npc:f.length,nps:f.toString(),mtc:p.length,mts:p.toString(),fnc:m.length,fns:m.toString(),gpc:h.length,gps:h.toString(),tzo:a(),uas:navigator.userAgent,lan:[navigator.language,navigator.userLanguage,navigator.systemLanguage,navigator.languages].join("|"),cpu:[navigator.platform,navigator.hardwareConcurrency].join("|"),mpi:Math.PI.toString()};return c()<.75&&(u=r(),g.cnv=[u.substr(0,32),u.length,l(u)].join("|"),g.res=i()),g}),f=_.memoize(function(){var e=d(),t=["pds","nps","mts","fns","gps","tzo","uas","lan","cpu","cnv","mpi","res"],n=_.chain(t).map(function(t){return e[t]}).map(function(e){return void 0===e?"":e}).map(function(e){return e.toString()}).value();return l(n.join("\n"))}),root.log_device=function(){var e=function(){var e,t;if(root.koala_device_endpoint){try{t=f()}catch(n){t=null}e={partition_key:root.visitor_id,device_id2:t,visitor_id:root.visitor_id,ip_address:root.current_ip,user_uid:u()},root.enabled_features&&root.enabled_features.device_components&&(e.components=d()),$.ajax({type:"POST",url:root.koala_device_endpoint,data:JSON.stringify(e),contentType:"text/plain; charset=UTF-8"})}};_.defer(function(){e()})}}(),function(){function e(e,t,n){var i=URI(e).absoluteTo(window.location),r=URI(t).absoluteTo(window.location);return n=n||{},n.ignore_query&&(i.search({}),r.search({})),n.ignore_hash&&(i.hash(""),r.hash("")),i.equals(r)}root.url_equals=e}(),function(){$(document).on("click",".js-facebook-login, a.facebook-link",function(e){var t=$(this);e.preventDefault(),FB.login(function(e){e.authResponse&&$.post(t.attr("href"),{fbsr:e.authResponse.signedRequest}).done(function(e){e.data&&url_equals(e.data,window.location.href)?window.location.reload(!0):e.data?window.location=e.data:e.flash&&($.isArray(e.flash)&&$.isArray(e.flash[0])?growl($.map(e.flash,function(e){return e[e.length-1]})):e.flash&&growl(e.flash))})},{scope:"email,user_friends,public_profile"})})}(),function(e,t){var n={};!function(){var e=document.getElementsByTagName("script"),t=e[e.length-1];if(t){var r,o=t.attributes;for(i=0,len=o.length;i<len;i++)/data-(\w+)$/.test(o[i].nodeName)&&(r=o[i].nodeValue,"false"===r&&(r=!1),n[RegExp.$1]=r)}}();var r=function(){var e=t(),i=e(n);return i.factory=e,i};"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():e.Honeybadger=r()}(this,function(){function e(e,t){var n={};for(k in e)n[k]=e[k];for(k in t)n[k]=t[k];return n}function t(e){return a?a.name!==e.name?!1:a.message!==e.message?!1:a.stack!==e.stack?!1:!0:!1}function n(){var e={};return e.HTTP_USER_AGENT=navigator.userAgent,document.referrer.match(/\S/)&&(e.HTTP_REFERER=document.referrer),e}function i(e){return e.stacktrace||e.stack||void 0}function r(e){var t,n=10;if(e&&(t=i(e)))return{stack:t,generator:void 0};try{throw new Error("")}catch(r){if(t=i(r))return{stack:t,generator:"throw"}}t=["<call-stack>"];for(var o=arguments.callee;o&&t.length<n;){/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{o=o.caller}catch(r){break}}return{stack:t.join("\n"),generator:"walk"}}function o(e,t){var n,i,r;for(i=0,r=e.length;r>i;i++)if(n=e[i],n(t)===!1)return!0;return!1}var a,s,c="0.4.2",l={name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:c,language:"javascript"},u=!1,d=!1,f=function(f){function p(e){h("debug")&&this.console&&console.log(e)}function h(e,t){var n;return void 0!==C[e]&&(n=C[e]),"false"===n&&(n=!1),void 0!==n?n:t}function m(){return"http"+(h("ssl",!0)&&"s"||"")+"://"+h("host","api.honeybadger.io")}function g(e,t,n){var i,r,o,a;if(o=[],n||(n=0),n>=h("max_depth",8))return encodeURIComponent(t)+"=[MAX DEPTH REACHED]";for(i in e)a=e[i],a instanceof Function&&(a="[FUNC]"),e.hasOwnProperty(i)&&null!=i&&null!=a&&(r=t?t+"["+i+"]":i,o.push("object"==typeof a?g(a,r,n+1):encodeURIComponent(r)+"="+encodeURIComponent(a)));return o.join("&")}function _(e){try{return x=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),x.open("GET",e,!0),void x.send()}catch(t){p("Error encountered during XHR request (will retry): "+t)}img=new Image,img.src=e}function v(e){return a=s=null,h("api_key")?(url=m()+"/v1/notices/js.gif?"+g({notice:e})+"&api_key="+h("api_key")+"&t="+(new Date).getTime(),_(url),!0):(p("Unable to send error report: no API key has been configured."),!1)}function y(r,c){if(h("disabled",!1))return!1;if(!(r instanceof Object))return!1;if(r instanceof Error){var d=r;r={name:d.name,message:d.message,stack:i(d)}}if(t(r))return!1;if(s&&u&&v(s),0===function(){var e,t;t=[];for(e in r)({}).hasOwnProperty.call(r,e)&&t.push(e);return t}().length)return!1;if(c&&(r=e(r,c)),o(C.beforeNotifyHandlers,r))return!1;var f={notifier:l,error:{"class":r.name||"Error",message:r.message,backtrace:r.stack,generator:r.generator,fingerprint:r.fingerprint},request:{url:r.url||document.URL,component:r.component||h("component"),action:r.action||h("action"),context:e(C.context,r.context),cgi_data:n()},server:{project_root:r.project_root||h("project_root",window.location.protocol+"//"+window.location.host),environment_name:r.environment||h("environment")}};return s=f,a=r,u?(p("Defering notice.",r,f),window.setTimeout(function(){t(r)&&v(f)})):(p("Queuing notice.",r,f),j.push(f)),r}function b(e,t){try{return"function"!=typeof e?e:(e.___hb||(e.___hb=function(){var n=h("onerror",!0);if(!(S&&(n||t)||t&&!n))return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(i){throw y(i),i}}),e.___hb)}catch(n){return e}}function w(e,t,n){if(!d&&e&&t&&n){var i=e[t];e[t]=n(i)}}var $=[],j=[],C={context:{},beforeNotifyHandlers:[]};if(f instanceof Object)for(k in f)C[k]=f[k];var S=!0;if(window.atob||(S=!1),window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(S=!1)}catch(T){}C.notify=function(t,n,o){if(t||(t={}),t instanceof Error){var a=t;t={name:a.name,message:a.message,stack:i(a)}}if(!(t instanceof Object)){var s=String(t);t={message:s}}if(n&&!(n instanceof Object)){var c=String(n);n={name:c}}return n&&(t=e(t,n)),o instanceof Object&&(t=e(t,o)),y(t,r(t))},C.wrap=function(e){return b(e,!0)},C.setContext=function(t){return t instanceof Object&&(C.context=e(C.context,t)),C},C.resetContext=function(t){return t instanceof Object?C.context=e({},t):C.context={},C},C.configure=function(e){for(k in e)C[k]=e[k];return C},C.beforeNotify=function(e){return C.beforeNotifyHandlers.push(e),C};var D=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};C.reset=function(){C.context={},C.beforeNotifyHandlers=[];for(k in C)-1==D.call($,k)&&(C[k]=void 0);return C},C.getVersion=function(){return c};var I=function(e){return function(t,n){if(t instanceof Function){var i=Array.prototype.slice.call(arguments,2);return t=b(t),e(function(){t.apply(null,i)},n)}return e(t,n)}};w(window,"setTimeout",I),w(window,"setInterval",I),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){prototype=window[e]&&window[e].prototype,prototype&&prototype.hasOwnProperty&&prototype.hasOwnProperty("addEventListener")&&(w(prototype,"addEventListener",function(e){return function(t,n,i,r){try{n&&null!=n.handleEvent&&(n.handleEvent=b(n.handleEvent))}catch(o){p(o)}return e.call(this,t,b(n),i,r)}}),w(prototype,"removeEventListener",function(e){return function(t,n,i,r){return e.call(this,t,n,i,r),e.call(this,t,b(n),i,r)}}))}),w(window,"onerror",function(e){function t(e,t,n,i,r){if(!a&&h("onerror",!0)){if(0===n&&/Script error\.?/.test(e))return void p("Ignoring cross-domain script error. Use CORS to enable tracking of these types of errors.");if(p("Error caught by window.onerror"),r)return void y(r);stack=[e,"\n    at ? (",t||"unknown",":",n||0,":",i||0,")"].join(""),y({name:"window.onerror",message:e,stack:stack})}}return function(n,i,r,o,a){return t(n,i,r,o,a),e instanceof Function?e.apply(this,arguments):!1}}),d=!0;for(k in C)$.push(k);if(p("Initializing honeybadger.js "+c),/complete|interactive|loaded/.test(document.readyState))u=!0,p("honeybadger.js "+c+" ready");else{p("Installing ready handler");var E=function(){for(u=!0,p("honeybadger.js "+c+" ready");notice=j.pop();)v(notice)};document.addEventListener?document.addEventListener("DOMContentLoaded",E,!0):window.attachEvent("onload",E)}return C};return f}),function(){root.Honeybadger&&root.honeybadger_configuration&&(Honeybadger.configure(honeybadger_configuration),Honeybadger.beforeNotify(function(){return/\.kickstarter\.com$/.test(window.location.hostname)===!1?!1:void 0}))}(),function(){function e(e){var t,n=document.cookie.split(/; */);for(e+="=",t=0;t<n.length;t+=1)if(0===n[t].indexOf(e))return decodeURIComponent(n[t].substr(e.length));return null}function t(e,t,n,i){var r=e+"="+encodeURIComponent(t),o="";return i=i||"/","number"==typeof n&&(n=new Date(n)),n&&(o+="; expires="+n.toGMTString()),o+="; path="+i,document.cookie=r+o,t}function n(e,n){t(e,null,0,n)}root.read_cookie=e,root.destroy_cookie=n,root.write_cookie=t}(),function(){function e(){return[Math.floor(1e20*Math.random()).toString(16).slice(0,16),Math.floor(1e20*Math.random()).toString(16).slice(0,16),Math.floor(1e20*Math.random()).toString(16).slice(0,16)].join("-")+"v1"}root.visitor_id=read_cookie("vis")||write_cookie("vis",e(),new Date(2025,12,31),"/")}(),function(e,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}(this,function(e,t,n,i){"use strict";function r(e,t){return this instanceof r?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new r(e,t)}function o(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function s(e){return"Array"===a(e)}function c(e,t){var n,i,r={};if(s(t))for(n=0,i=t.length;i>n;n++)r[t[n]]=!0;else r[t]=!0;for(n=0,i=e.length;i>n;n++)void 0!==r[e[n]]&&(e.splice(n,1),i--,n--);return e}function l(e,t){var n,i;if(s(t)){for(n=0,i=t.length;i>n;n++)if(!l(e,t[n]))return!1;return!0}var r=a(t);for(n=0,i=e.length;i>n;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function u(e,t){if(!s(e)||!s(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;i>n;n++)if(e[n]!==t[n])return!1;return!0}function d(e){return escape(e)}function f(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}var p=i&&i.URI;r.version="1.12.0";var h=r.prototype,m=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/},r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},r.getDomAttribute=function(e){if(!e||!e.nodeName)return void 0;var t=e.nodeName.toLowerCase();return"input"===t&&"image"!==e.type?void 0:r.domAttributes[t]},r.encode=f,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=f,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},r.encodeQuery=function(e,t){var n=r.encode(e+"");return t?n.replace(/%20/g,"+"):n},r.decodeQuery=function(e,t){e+="";try{return r.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}},r.recodePath=function(e){for(var t=(e+"").split("/"),n=0,i=t.length;i>n;n++)t[n]=r.encodePathSegment(r.decode(t[n]));return t.join("/")},r.decodePath=function(e){for(var t=(e+"").split("/"),n=0,i=t.length;i>n;n++)t[n]=r.decodePathSegment(t[n]);return t.join("/")};var g,_={encode:"encode",decode:"decode"},v=function(e,t){return function(n){return r[t](n+"").replace(r.characters[e][t].expression,function(n){return r.characters[e][t].map[n]})}};for(g in _)r[g+"PathSegment"]=v("pathname",_[g]);r.encodeReserved=v("reserved","encode"),r.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=r.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(r.protocol_expression)?t.protocol=void 0:"file"===t.protocol?e=e.substring(n+3):"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=r.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},r.parseHost=function(e,t){var n,i,r=e.indexOf("/");return-1===r&&(r=e.length),"["===e.charAt(0)?(n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,r)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,r)||null,t.port=null):(i=e.substring(0,r).split(":"),t.hostname=i[0]||null,t.port=i[1]||null),t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),e.substring(r)||"/"},r.parseAuthority=function(e,t){return e=r.parseUserinfo(e,t),r.parseHost(e,t)},r.parseUserinfo=function(e,t){var n,i=e.indexOf("/"),o=i>-1?e.lastIndexOf("@",i):e.indexOf("@");return o>-1&&(-1===i||i>o)?(n=e.substring(0,o).split(":"),t.username=n[0]?r.decode(n[0]):null,n.shift(),t.password=n[0]?r.decode(n.join(":")):null,e=e.substring(o+1)):(t.username=null,t.password=null),e},r.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n,i,o,a={},s=e.split("&"),c=s.length,l=0;c>l;l++)n=s[l].split("="),i=r.decodeQuery(n.shift(),t),o=n.length?r.decodeQuery(n.join("="),t):null,a[i]?("string"==typeof a[i]&&(a[i]=[a[i]]),a[i].push(o)):a[i]=o;return a},r.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=r.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},r.buildHost=function(e){var t="";return e.hostname?(r.ip6_expression.test(e.hostname)?t+=e.port?"["+e.hostname+"]:"+e.port:e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},r.buildAuthority=function(e){return r.buildUserinfo(e)+r.buildHost(e)},r.buildUserinfo=function(e){var t="";return e.username&&(t+=r.encode(e.username),e.password&&(t+=":"+r.encode(e.password)),t+="@"),t},r.buildQuery=function(e,t,n){var i,o,a,c,l="";for(o in e)if(m.call(e,o)&&o)if(s(e[o]))for(i={},a=0,c=e[o].length;c>a;a++)void 0!==e[o][a]&&void 0===i[e[o][a]+""]&&(l+="&"+r.buildQueryParameter(o,e[o][a],n),t!==!0&&(i[e[o][a]+""]=!0));else void 0!==e[o]&&(l+="&"+r.buildQueryParameter(o,e[o],n));return l.substring(1)},r.buildQueryParameter=function(e,t,n){return r.encodeQuery(e,n)+(null!==t?"="+r.encodeQuery(t,n):"")},r.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)m.call(t,i)&&r.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),s(n)||(n=[n]),e[t]=e[t].concat(n)}},r.removeQuery=function(e,t,n){var i,o,a;if(s(t))for(i=0,o=t.length;o>i;i++)e[t[i]]=void 0;else if("object"==typeof t)for(a in t)m.call(t,a)&&r.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==n?e[t]===n?e[t]=void 0:s(e[t])&&(e[t]=c(e[t],n)):e[t]=void 0}},r.hasQuery=function(e,t,n,i){if("object"==typeof t){for(var o in t)if(m.call(t,o)&&!r.hasQuery(e,o,t[o]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(a(n)){case"Undefined":return t in e;case"Boolean":var c=Boolean(s(e[t])?e[t].length:e[t]);return n===c;case"Function":return!!n(e[t],t,e);case"Array":if(!s(e[t]))return!1;var d=i?l:u;return d(e[t],n);case"RegExp":return s(e[t])?i?l(e[t],n):!1:Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return s(e[t])?i?l(e[t],n):!1:e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;i>n;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return 1>n?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(n)||"/"!==t.charAt(n))&&(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},r.withinString=function(e,t,n){n||(n={});var i=n.start||r.findUri.start,o=n.end||r.findUri.end,a=n.trim||r.findUri.trim,s=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var c=i.exec(e);if(!c)break;var l=c.index;if(n.ignoreHtml){var u=e.slice(Math.max(l-3,0),l);if(u&&s.test(u))continue}var d=l+e.slice(l).search(o),f=e.slice(l,d).replace(a,"");if(!n.ignore||!n.ignore.test(f)){d=l+f.length;var p=t(f,l,d,e);e=e.slice(0,l)+p+e.slice(d),i.lastIndex=l+p.length}}return i.lastIndex=0,e},r.ensureValidHostname=function(t){if(t.match(r.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(r.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},r.noConflict=function(e){if(e){var n={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(n.URITemplate=URITemplate.noConflict()),t&&"function"==typeof t.noConflict&&(n.IPv6=t.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(n.SecondLevelDomains=SecondLevelDomains.noConflict()),n}return i.URI===this&&(i.URI=p),this},h.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},h.clone=function(){return new r(this)},h.valueOf=h.toString=function(){return this.build(!1)._string},_={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},v=function(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}};for(g in _)h[g]=v(_[g]);_={query:"?",fragment:"#"},v=function(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!i),this)}};for(g in _)h[g]=v(g,_[g]);_={search:["?","query"],hash:["#","fragment"]},v=function(e,t){return function(n,i){var r=this[e](n,i);return"string"==typeof r&&r.length?t+r:r}};for(g in _)h[g]=v(_[g][1],_[g][0]);h.pathname=function(e,t){if(void 0===e||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?r.decodePath(n):n}return this._parts.path=e?r.recodePath(e):"/",this.build(!t),this},h.path=h.pathname,h.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=r._parts();var i=e instanceof r,o="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var a=r.getDomAttribute(e);e=e[a]||"",o=!1}if(!i&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e)this._parts=r.parse(e,this._parts);else{if(!i&&!o)throw new TypeError("invalid input");var s=i?e._parts:e;for(n in s)m.call(this._parts,n)&&(this._parts[n]=s[n])}return this.build(!t),this},h.is=function(e){var t=!1,i=!1,o=!1,a=!1,s=!1,c=!1,l=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,i=r.ip4_expression.test(this._parts.hostname),o=r.ip6_expression.test(this._parts.hostname),t=i||o,a=!t,s=a&&n&&n.has(this._parts.hostname),c=a&&r.idn_expression.test(this._parts.hostname),l=a&&r.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return o;case"idn":return c;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var y=h.protocol,b=h.port,w=h.hostname;h.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(r.protocol_expression)))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");
return y.call(this,e,t)},h.scheme=h.protocol,h.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port '"+e+"' contains characters other than [0-9]");return b.call(this,e,t)},h.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={};r.parseHost(e,n),e=n.hostname}return w.call(this,e,t)},h.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildHost(this._parts):"":(r.parseHost(e,this._parts),this.build(!t),this)},h.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?r.buildAuthority(this._parts):"":(r.parseAuthority(e,this._parts),this.build(!t),this)},h.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var n=r.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==e[e.length-1]&&(e+="@"),r.parseUserinfo(e,this._parts),this.build(!t),this},h.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=r.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},h.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,i),s=new RegExp("^"+o(a));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&r.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(s,e),this.build(!t),this},h.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(r.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=new RegExp(o(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},h.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(i+1);return t!==!0&&n&&n.list[r.toLowerCase()]?n.get(this._parts.hostname)||r:r}var a;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");a=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},h.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?r.decodePath(i):i}var a=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,a),c=new RegExp("^"+o(s));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=r.recodePath(e),this._parts.path=this._parts.path.replace(c,e),this.build(!t),this},h.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?r.decodePathSegment(i):i}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var s=new RegExp(o(this.filename())+"$");return e=r.recodePath(e),this._parts.path=this._parts.path.replace(s,e),a?this.normalizePath(t):this.build(!t),this},h.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,a=this.filename(),s=a.lastIndexOf(".");return-1===s?"":(n=a.substring(s+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?r.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var c,l=this.suffix();if(l)c=e?new RegExp(o(l)+"$"):new RegExp(o("."+l)+"$");else{if(!e)return this;this._parts.path+="."+r.recodePath(e)}return c&&(e=r.recodePath(e),this._parts.path=this._parts.path.replace(c,e)),this.build(!t),this},h.segment=function(e,t,n){var i=this._parts.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),a=r.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error("Bad segment '"+e+"', must be 0-based integer");if(o&&a.shift(),0>e&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(s(t)){a=[];for(var c=0,l=t.length;l>c;c++)(t[c].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(t[c]))}else(t||"string"==typeof t)&&(""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t||"string"==typeof t&&t.length?a[e]=t:a.splice(e,1);return o&&a.unshift(""),this.path(a.join(i),n)},h.segmentCoded=function(e,t,n){var i,o,a;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(i=this.segment(e,t,n),s(i))for(o=0,a=i.length;a>o;o++)i[o]=r.decode(i[o]);else i=void 0!==i?r.decode(i):void 0;return i}if(s(t))for(o=0,a=t.length;a>o;o++)t[o]=r.decode(t[o]);else t="string"==typeof t?r.encode(t):t;return this.segment(e,t,n)};var k=h.query;return h.query=function(e,t){if(e===!0)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=r.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):k.call(this,e,t)},h.setQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof e)for(var o in e)m.call(e,o)&&(i[o]=e[o]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");i[e]=void 0!==t?t:null}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},h.addQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,e,void 0===t?null:t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},h.removeQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,e,t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},h.hasQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,e,t,n)},h.setSearch=h.setQuery,h.addSearch=h.addQuery,h.removeSearch=h.removeQuery,h.hasSearch=h.hasQuery,h.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},h.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},h.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},h.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},h.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,n,i,o=this._parts.path,a="";for("/"!==o.charAt(0)&&(t=!0,o="/"+o),o=o.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=o.substring(1).match(/^(\.\.\/)+/)||"",a&&(a=a[0]));;){if(n=o.indexOf("/.."),-1===n)break;0!==n?(i=o.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),o=o.substring(0,i)+o.substring(n+3)):o=o.substring(3)}return t&&this.is("relative")&&(o=a+o.substring(1)),o=r.recodePath(o),this._parts.path=o,this.build(!e),this},h.normalizePathname=h.normalizePath,h.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},h.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},h.normalizeSearch=h.normalizeQuery,h.normalizeHash=h.normalizeFragment,h.iso8859=function(){var e=r.encode,t=r.decode;return r.encode=escape,r.decode=decodeURIComponent,this.normalize(),r.encode=e,r.decode=t,this},h.unicode=function(){var e=r.encode,t=r.decode;return r.encode=f,r.decode=unescape,this.normalize(),r.encode=e,r.decode=t,this},h.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",o=0,a=t._parts.query.split("&"),s=a.length;s>o;o++){var c=(a[o]||"").split("=");i+="&"+r.decodeQuery(c[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==c[1]&&(i+="="+r.decodeQuery(c[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(t.hash(),!0)},h.absoluteTo=function(e){var t,n,i,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof r||(e=new r(e)),o._parts.protocol||(o._parts.protocol=e._parts.protocol),this._parts.hostname)return o;for(n=0;i=a[n];n++)o._parts[i]=e._parts[i];return o._parts.path?".."===o._parts.path.substring(-2)&&(o._parts.path+="/"):(o._parts.path=e._parts.path,o._parts.query||(o._parts.query=e._parts.query)),"/"!==o.path().charAt(0)&&(t=e.directory(),o._parts.path=(t?t+"/":"")+o._parts.path,o.normalizePath()),o.build(),o},h.relativeTo=function(e){var t,n,i,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new r(e).normalize(),t=s._parts,n=e._parts,o=s.path(),a=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,o===a)return t.path="",s.build();if(i=r.commonPath(s.path(),e.path()),!i)return s.build();var c=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=c+t.path.substring(i.length),s.build()},h.equals=function(e){var t,n,i,o=this.clone(),a=new r(e),c={},l={},d={};if(o.normalize(),a.normalize(),o.toString()===a.toString())return!0;if(t=o.query(),n=a.query(),o.query(""),a.query(""),o.toString()!==a.toString())return!1;if(t.length!==n.length)return!1;c=r.parseQuery(t,this._parts.escapeQuerySpace),l=r.parseQuery(n,this._parts.escapeQuerySpace);for(i in c)if(m.call(c,i)){if(s(c[i])){if(!u(c[i],l[i]))return!1}else if(c[i]!==l[i])return!1;d[i]=!0}for(i in l)if(m.call(l,i)&&!d[i])return!1;return!0},h.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},h.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},r}),function(e){e.extend(e.fn,{livequery:function(t,n,i){var r,o=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(e,a){return o.selector!=a.selector||o.context!=a.context||t!=a.type||n&&n.$lqguid!=a.fn.$lqguid||i&&i.$lqguid!=a.fn2.$lqguid?void 0:(r=a)&&!1}),r=r||new e.livequery(this.selector,this.context,t,n,i),r.stopped=!1,r.run(),this},expire:function(t,n,i){var r=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(o,a){r.selector!=a.selector||r.context!=a.context||t&&t!=a.type||n&&n.$lqguid!=a.fn.$lqguid||i&&i.$lqguid!=a.fn2.$lqguid||this.stopped||e.livequery.stop(a.id)}),this}}),e.livequery=function(t,n,i,r,o){return this.selector=t,this.context=n,this.type=i,this.fn=r,this.fn2=o,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,r.$lqguid=r.$lqguid||e.livequery.guid++,o&&(o.$lqguid=o.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,n){e.fn2.apply(n)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var t=this,n=this.elements,i=e(this.selector,this.context),r=i.not(n);this.elements=i,this.type?(r.bind(this.type,this.fn),n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&e.event.remove(r,t.type,t.fn)})):(r.each(function(){t.fn.apply(this)}),this.fn2&&n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&t.fn2.apply(r)}))}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var t=e.livequery.queue.length;t--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,n){if(e.fn[n]){var i=e.fn[n];e.fn[n]=function(){var t=i.apply(this,arguments);return e.livequery.run(),t}}})},run:function(t){void 0!=t?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){void 0!=t?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),e(function(){e.livequery.play()})}(jQuery),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Se.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){we.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var n=!0;return h(function(){return n&&(r(e),n=!1),t.apply(this,arguments)},t)}function a(e,t){vt[e]||(r(t),vt[e]=!0)}function s(e,t){return function(n){return _(e.call(this,n),t)}}function c(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function l(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(r,"months");return 0>t-o?(n=e.clone().add(r-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(r+1,"months"),i=(t-o)/(n-o)),-(r+i)}function u(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function d(){}function f(e,t){t!==!1&&P(e),m(this,e),this._d=new Date(+e._d),bt===!1&&(bt=!0,we.updateOffset(this),bt=!1)}function p(e){var t=C(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,c=t.minute||0,l=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*l+6e4*c+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=we.localeData(),this._bubble()}function h(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Oe.length>0)for(n in Oe)i=Oe[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function _(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function v(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function y(e,t){var n;return t=L(t,e),e.isBefore(t)?n=v(e,t):(n=v(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function b(e,t){return function(n,i){var r,o;return null===i||isNaN(+i)||(a(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=we.duration(n,i),w(this,r,e),this}}function w(e,t,n,i){var r=t._milliseconds,o=t._days,a=t._months;i=null==i?!0:i,r&&e._d.setTime(+e._d+r*n),o&&me(e,"Date",he(e,"Date")+o*n),a&&pe(e,he(e,"Month")+a*n),i&&we.updateOffset(e,o||a)}function k(e){return"[object Array]"===Object.prototype.toString.call(e)}function $(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function x(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&T(e[i])!==T(t[i]))&&a++;return a+o}function j(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=dt[e]||ft[t]||t}return e}function C(e){var t,i,r={};for(i in e)n(e,i)&&(t=j(i),t&&(r[t]=e[i]));return r}function S(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}we[t]=function(r,o){var a,s,c=we._locale[t],l=[];if("number"==typeof r&&(o=r,r=e),s=function(e){var t=we().utc().set(i,e);return c.call(we._locale,t,r||"")},null!=o)return s(o);for(a=0;n>a;a++)l.push(s(a));return l}}function T(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function D(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function I(e,t,n){return le(we([e,11,31+t-n]),t,n).week}function E(e){return A(e)?366:365}function A(e){return e%4===0&&e%100!==0||e%400===0}function P(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[De]<0||e._a[De]>11?De:e._a[Ie]<1||e._a[Ie]>D(e._a[Te],e._a[De])?Ie:e._a[Ee]<0||e._a[Ee]>24||24===e._a[Ee]&&(0!==e._a[Ae]||0!==e._a[Pe]||0!==e._a[Ne])?Ee:e._a[Ae]<0||e._a[Ae]>59?Ae:e._a[Pe]<0||e._a[Pe]>59?Pe:e._a[Ne]<0||e._a[Ne]>999?Ne:-1,e._pf._overflowDayOfYear&&(Te>t||t>Ie)&&(t=Ie),e._pf.overflow=t)}function N(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function M(e){return e?e.toLowerCase().replace("_","-"):e}function O(e){for(var t,n,i,r,o=0;o<e.length;){for(r=M(e[o]).split("-"),t=r.length,n=M(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=F(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&x(r,n,!0)>=t-1)break;t--}o++}return null}function F(e){var t=null;if(!Me[e]&&Fe)try{t=we.locale(),require("./locale/"+e),we.locale(t)}catch(n){}return Me[e]}function L(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(we.isMoment(e)||$(e)?+e:+we(e))-+n,n._d.setTime(+n._d+i),we.updateOffset(n,!1),n):we(e).local()}function R(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e){var t,n,i=e.match(Be);for(t=0,n=i.length;n>t;t++)_t[i[t]]?i[t]=_t[i[t]]:i[t]=R(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function B(e,t){return e.isValid()?(t=q(t,e.localeData()),pt[t]||(pt[t]=H(t)),pt[t](e)):e.localeData().invalidDate()}function q(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(qe.lastIndex=0;i>=0&&qe.test(e);)e=e.replace(qe,n),qe.lastIndex=0,i-=1;return e}function U(e,t){var n,i=t._strict;switch(e){case"Q":return Ze;case"DDDD":return tt;case"YYYY":case"GGGG":case"gggg":return i?nt:We;case"Y":case"G":case"g":return rt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?it:Ye;case"S":if(i)return Ze;case"SS":if(i)return et;case"SSS":if(i)return tt;case"DDD":return ze;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ge;case"a":case"A":return t._locale._meridiemParse;case"x":return Je;case"X":return Xe;case"Z":case"ZZ":return Qe;case"T":return Ke;case"SSSS":return Ve;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?et:Ue;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ue;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(X(J(e.replace("\\","")),"i"))}}function z(e){e=e||"";var t=e.match(Qe)||[],n=t[t.length-1]||[],i=(n+"").match(lt)||["-",0,0],r=+(60*i[1])+T(i[2]);return"+"===i[0]?r:-r}function W(e,t,n){var i,r=n._a;switch(e){case"Q":null!=t&&(r[De]=3*(T(t)-1));break;case"M":case"MM":null!=t&&(r[De]=T(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?r[De]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[Ie]=T(t));break;case"Do":null!=t&&(r[Ie]=T(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=T(t));break;case"YY":r[Te]=we.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Te]=T(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[Ee]=T(t);break;case"m":case"mm":r[Ae]=T(t);break;case"s":case"ss":r[Pe]=T(t);break;case"S":case"SS":case"SSS":case"SSSS":r[Ne]=T(1e3*("0."+t));break;case"x":n._d=new Date(T(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=z(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=T(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=we.parseTwoDigitYear(t)}}function Y(e){var n,i,r,o,a,s,c;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(a=1,s=4,i=t(n.GG,e._a[Te],le(we(),1,4).year),r=t(n.W,1),o=t(n.E,1)):(a=e._locale._week.dow,s=e._locale._week.doy,i=t(n.gg,e._a[Te],le(we(),a,s).year),r=t(n.w,1),null!=n.d?(o=n.d,a>o&&++r):o=null!=n.e?n.e+a:a),c=ue(i,r,o,s,a),e._a[Te]=c.year,e._dayOfYear=c.dayOfYear}function V(e){var n,i,r,o,a=[];if(!e._d){for(r=Q(e),e._w&&null==e._a[Ie]&&null==e._a[De]&&Y(e),e._dayOfYear&&(o=t(e._a[Te],r[Te]),e._dayOfYear>E(o)&&(e._pf._overflowDayOfYear=!0),i=oe(o,0,e._dayOfYear),e._a[De]=i.getUTCMonth(),e._a[Ie]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=a[n]=r[n];for(;7>n;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Ee]&&0===e._a[Ae]&&0===e._a[Pe]&&0===e._a[Ne]&&(e._nextDay=!0,e._a[Ee]=0),e._d=(e._useUTC?oe:re).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ee]=24)}}function G(e){var t;e._d||(t=C(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],V(e))}function Q(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function K(t){if(t._f===we.ISO_8601)return void ee(t);t._a=[],t._pf.empty=!0;var n,i,r,o,a,s=""+t._i,c=s.length,l=0;for(r=q(t._f,t._locale).match(Be)||[],n=0;n<r.length;n++)o=r[n],i=(s.match(U(o,t))||[])[0],i&&(a=s.substr(0,s.indexOf(i)),a.length>0&&t._pf.unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),l+=i.length),_t[o]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(o),W(o,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=c-l,s.length>0&&t._pf.unusedInput.push(s),t._pf.bigHour===!0&&t._a[Ee]<=12&&(t._pf.bigHour=e),t._a[Ee]=u(t._locale,t._a[Ee],t._meridiem),V(t),P(t)}function J(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(e){var t,n,r,o,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)a=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[o],K(t),N(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==r||r>a)&&(r=a,n=t));h(e,n||t)}function ee(e){var t,n,i=e._i,r=ot.exec(i);if(r){for(e._pf.iso=!0,t=0,n=st.length;n>t;t++)if(st[t][1].exec(i)){e._f=st[t][0]+(r[6]||" ");break}for(t=0,n=ct.length;n>t;t++)if(ct[t][1].exec(i)){e._f+=ct[t][0];break}i.match(Qe)&&(e._f+="Z"),K(e)}else e._isValid=!1}function te(e){ee(e),e._isValid===!1&&(delete e._isValid,we.createFromInputFallback(e))}function ne(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function ie(t){var n,i=t._i;i===e?t._d=new Date:$(i)?t._d=new Date(+i):null!==(n=Le.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?te(t):k(i)?(t._a=ne(i.slice(0),function(e){return parseInt(e,10)}),V(t)):"object"==typeof i?G(t):"number"==typeof i?t._d=new Date(i):we.createFromInputFallback(t)}function re(e,t,n,i,r,o,a){var s=new Date(e,t,n,i,r,o,a);return 1970>e&&s.setFullYear(e),s}function oe(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ae(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function se(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function ce(e,t,n){var i=we.duration(e).abs(),r=Ce(i.as("s")),o=Ce(i.as("m")),a=Ce(i.as("h")),s=Ce(i.as("d")),c=Ce(i.as("M")),l=Ce(i.as("y")),u=r<ht.s&&["s",r]||1===o&&["m"]||o<ht.m&&["mm",o]||1===a&&["h"]||a<ht.h&&["hh",a]||1===s&&["d"]||s<ht.d&&["dd",s]||1===c&&["M"]||c<ht.M&&["MM",c]||1===l&&["y"]||["yy",l];return u[2]=t,u[3]=+e>0,u[4]=n,se.apply({},u)}function le(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=we(e).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ue(e,t,n,i,r){var o,a,s=oe(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:r,o=r-s+(s>i?7:0)-(r>s?7:0),a=7*(t-1)+(n-r)+o+1,{year:a>0?e:e-1,dayOfYear:a>0?a:E(e-1)+a}}function de(t){var n,i=t._i,r=t._f;return t._locale=t._locale||we.localeData(t._l),null===i||r===e&&""===i?we.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),we.isMoment(i)?new f(i,!0):(r?k(r)?Z(t):K(t):ie(t),n=new f(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function fe(e,t){var n,i;if(1===t.length&&k(t[0])&&(t=t[0]),!t.length)return we();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function pe(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),D(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function he(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function me(e,t,n){return"Month"===t?pe(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ge(e,t){return function(n){return null!=n?(me(this,e,n),we.updateOffset(this,t),this):he(this,e)}}function _e(e){return 400*e/146097}function ve(e){return 146097*e/400}function ye(e){we.duration.fn[e]=function(){return this._data[e]}}function be(e){"undefined"==typeof ender&&(ke=je.moment,e?je.moment=o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",we):je.moment=we)}for(var we,ke,$e,xe="2.9.0",je="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Ce=Math.round,Se=Object.prototype.hasOwnProperty,Te=0,De=1,Ie=2,Ee=3,Ae=4,Pe=5,Ne=6,Me={},Oe=[],Fe="undefined"!=typeof module&&module&&module.exports,Le=/^\/?Date\((\-?\d+)/i,Re=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,He=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Be=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,qe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ue=/\d\d?/,ze=/\d{1,3}/,We=/\d{1,4}/,Ye=/[+\-]?\d{1,6}/,Ve=/\d+/,Ge=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Qe=/Z|[\+\-]\d\d:?\d\d/gi,Ke=/T/i,Je=/[\+\-]?\d+/,Xe=/[\+\-]?\d+(\.\d{1,3})?/,Ze=/\d/,et=/\d\d/,tt=/\d{3}/,nt=/\d{4}/,it=/[+-]?\d{6}/,rt=/[+-]?\d+/,ot=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,at="YYYY-MM-DDTHH:mm:ssZ",st=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ct=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],lt=/([\+\-]|\d\d)/gi,ut=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),dt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ft={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pt={},ht={s:45,m:45,h:22,d:26,M:11},mt="DDD w W M D d".split(" "),gt="M D H h m s w W".split(" "),_t={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return _(this.year()%100,2)},YYYY:function(){return _(this.year(),4)},YYYYY:function(){return _(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+_(Math.abs(e),6)},gg:function(){return _(this.weekYear()%100,2)},gggg:function(){return _(this.weekYear(),4)},ggggg:function(){return _(this.weekYear(),5)},GG:function(){return _(this.isoWeekYear()%100,2)},GGGG:function(){return _(this.isoWeekYear(),4)},GGGGG:function(){return _(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return _(T(this.milliseconds()/10),2)},SSS:function(){return _(this.milliseconds(),3)},SSSS:function(){return _(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+_(T(e/60),2)+":"+_(T(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";
return 0>e&&(e=-e,t="-"),t+_(T(e/60),2)+_(T(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},vt={},yt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],bt=!1;mt.length;)$e=mt.pop(),_t[$e+"o"]=c(_t[$e],$e);for(;gt.length;)$e=gt.pop(),_t[$e+$e]=s(_t[$e],2);_t.DDDD=s(_t.DDD,3),h(d.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=we.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=we([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return le(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),we=function(t,n,r,o){var a;return"boolean"==typeof r&&(o=r,r=e),a={},a._isAMomentObject=!0,a._i=t,a._f=n,a._l=r,a._strict=o,a._isUTC=!1,a._pf=i(),de(a)},we.suppressDeprecationWarnings=!1,we.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),we.min=function(){var e=[].slice.call(arguments,0);return fe("isBefore",e)},we.max=function(){var e=[].slice.call(arguments,0);return fe("isAfter",e)},we.utc=function(t,n,r,o){var a;return"boolean"==typeof r&&(o=r,r=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=r,a._i=t,a._f=n,a._strict=o,a._pf=i(),de(a).utc()},we.unix=function(e){return we(1e3*e)},we.duration=function(e,t){var i,r,o,a,s=e,c=null;return we.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(c=Re.exec(e))?(i="-"===c[1]?-1:1,s={y:0,d:T(c[Ie])*i,h:T(c[Ee])*i,m:T(c[Ae])*i,s:T(c[Pe])*i,ms:T(c[Ne])*i}):(c=He.exec(e))?(i="-"===c[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},s={y:o(c[2]),M:o(c[3]),d:o(c[4]),h:o(c[5]),m:o(c[6]),s:o(c[7]),w:o(c[8])}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(a=y(we(s.from),we(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),r=new p(s),we.isDuration(e)&&n(e,"_locale")&&(r._locale=e._locale),r},we.version=xe,we.defaultFormat=at,we.ISO_8601=function(){},we.momentProperties=Oe,we.updateOffset=function(){},we.relativeTimeThreshold=function(t,n){return ht[t]===e?!1:n===e?ht[t]:(ht[t]=n,!0)},we.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return we.locale(e,t)}),we.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?we.defineLocale(e,t):we.localeData(e),n&&(we.duration._locale=we._locale=n)),we._locale._abbr},we.defineLocale=function(e,t){return null!==t?(t.abbr=e,Me[e]||(Me[e]=new d),Me[e].set(t),we.locale(e),Me[e]):(delete Me[e],null)},we.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return we.localeData(e)}),we.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return we._locale;if(!k(e)){if(t=F(e))return t;e=[e]}return O(e)},we.isMoment=function(e){return e instanceof f||null!=e&&n(e,"_isAMomentObject")},we.isDuration=function(e){return e instanceof p};for($e=yt.length-1;$e>=0;--$e)S(yt[$e]);we.normalizeUnits=function(e){return j(e)},we.invalid=function(e){var t=we.utc(NaN);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},we.parseZone=function(){return we.apply(null,arguments).parseZone()},we.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)},we.isDate=$,h(we.fn=f.prototype,{clone:function(){return we(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=we(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return N(this)},isDSTShifted:function(){return this._a?this.isValid()&&x(this._a,(this._isUTC?we.utc(this._a):we(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=B(this,e||we.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,n){var i,r,o=L(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return t=j(t),"year"===t||"month"===t||"quarter"===t?(r=l(this,o),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:g(r)},from:function(e,t){return we.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(we(),e)},calendar:function(e){var t=e||we(),n=L(t,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,we(t)))},isLeapYear:function(){return A(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ae(e,this.localeData()),this.add(e-t,"d")):t},month:ge("Month",!0),startOf:function(e){switch(e=j(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=j(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=j("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=we.isMoment(e)?e:we(e),+this>+e):(n=we.isMoment(e)?+e:+we(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=j("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=we.isMoment(e)?e:we(e),+e>+this):(n=we.isMoment(e)?+e:+we(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=j(t||"millisecond"),"millisecond"===t?(e=we.isMoment(e)?e:we(e),+this===+e):(n=+we(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=we.apply(null,arguments),this>e?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=we.apply(null,arguments),e>this?this:e}),zone:o("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,i=this._offset||0;return null!=e?("string"==typeof e&&(e=z(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?w(this,we.duration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,we.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(z(this._i)),this},hasAlignedHourOffset:function(e){return e=e?we(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(e){var t=Ce((we(this).startOf("day")-we(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=le(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return I(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return I(this.year(),e.dow,e.doy)},get:function(e){return e=j(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=j(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(n=we.localeData(t),null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),we.fn.millisecond=we.fn.milliseconds=ge("Milliseconds",!1),we.fn.second=we.fn.seconds=ge("Seconds",!1),we.fn.minute=we.fn.minutes=ge("Minutes",!1),we.fn.hour=we.fn.hours=ge("Hours",!0),we.fn.date=ge("Date",!0),we.fn.dates=o("dates accessor is deprecated. Use date instead.",ge("Date",!0)),we.fn.year=ge("FullYear",!0),we.fn.years=o("years accessor is deprecated. Use year instead.",ge("FullYear",!0)),we.fn.days=we.fn.day,we.fn.months=we.fn.month,we.fn.weeks=we.fn.week,we.fn.isoWeeks=we.fn.isoWeek,we.fn.quarters=we.fn.quarter,we.fn.toJSON=we.fn.toISOString,we.fn.isUTC=we.fn.isUtc,h(we.duration.fn=p.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,r=this._days,o=this._months,a=this._data,s=0;a.milliseconds=i%1e3,e=g(i/1e3),a.seconds=e%60,t=g(e/60),a.minutes=t%60,n=g(t/60),a.hours=n%24,r+=g(n/24),s=g(_e(r)),r-=g(ve(s)),o+=g(r/30),r%=30,s+=g(o/12),o%=12,a.days=r,a.months=o,a.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(e){var t=ce(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=we.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=we.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=j(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=j(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*_e(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ve(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:we.fn.lang,locale:we.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),we.duration.fn.toString=we.duration.fn.toISOString;for($e in ut)n(ut,$e)&&ye($e.toLowerCase());we.duration.fn.asMilliseconds=function(){return this.as("ms")},we.duration.fn.asSeconds=function(){return this.as("s")},we.duration.fn.asMinutes=function(){return this.as("m")},we.duration.fn.asHours=function(){return this.as("h")},we.duration.fn.asDays=function(){return this.as("d")},we.duration.fn.asWeeks=function(){return this.as("weeks")},we.duration.fn.asMonths=function(){return this.as("M")},we.duration.fn.asYears=function(){return this.as("y")},we.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===T(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Fe?module.exports=we:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(je.moment=ke),we}),be(!0)):be()}.call(this),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(("undefined"!=typeof global?global:this).moment)}(function(e){function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}return e.defineLocale("de",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(("undefined"!=typeof global?global:this).moment)}(function(e){return e.defineLocale("fr",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(("undefined"!=typeof global?global:this).moment)}(function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_S\xe1".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}),function(){function e(){var e=/\(([a-z]{3,4})\)/i,t=(new Date).toString(),n=t.match(e);return n?n[1].toUpperCase():void 0}function t(){var e=moment(),t=e.format("Z"),i=e.isDST()?"T":"F";return n[t+i]}var n={"+02:00T":"CEST","+01:00F":"CET","+01:00T":"BST","-00:00F":"GMT","-03:00T":"ADT","-04:00F":"AST","-04:00T":"EDT","-05:00F":"EST","-05:00T":"CDT","-06:00F":"CST","-06:00T":"MDT","-07:00F":"MST","-07:00T":"PDT","-08:00F":"PST","-08:00T":"AKDT","-09:00F":"AKST","-09:00T":"HADT","-10:00F":"HAST","+11:00T":"AEDT","+10:00F":"AEST","+10:30T":"ACDT","+09:30F":"ACST","+09:00T":"AWDT","+08:00F":"AWST"};moment.fn.zoneAbbr=function(){return e()||t()||this.format("Z")}}(),moment.locale("en",{longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",ll:"MMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"}}),_.each(I18n.translations,function(e,t){moment.locale(t,{months:_.compact(e.date.month_names),monthsShort:_.compact(e.date.abbr_month_names),weekdays:_.compact(e.date.day_names),weekdaysShort:_.compact(e.date.abbr_day_names),weekdaysMin:_.compact(e.date.abbr_day_names),relativeTime:{future:relativeFuture,past:relativePast,s:I18n.t("ember_helpers.format_time.ss",{count:1}),ss:relativeTime,m:I18n.t("ember_helpers.format_time.mm",{count:1}),mm:relativeTime,h:I18n.t("ember_helpers.format_time.hh",{count:1}),hh:relativeTime,d:I18n.t("ember_helpers.format_time.dd",{count:1}),dd:relativeTime,M:I18n.t("ember_helpers.format_time.MM",{count:1}),MM:relativeTime,y:I18n.t("ember_helpers.format_time.yy",{count:1}),yy:relativeTime}})}),moment.locale(I18n.locale),$(".js-adjust-time").livequery(function(){var e=$(this),t=moment(e.attr("datetime"));e.text(t.format(e.data("format"))),e.removeClass("invisible-if-js")}),$.parseEscapedJSON=function(e){return e=e.replace(/[\u2028\u2029]/g," ").replace(/&#39;/g,"'"),$.parseJSON(_.unescape(e))},function(){function e(){}e.extend=function(e){function t(){this.constructor=n}var n=function(){this.initialize.apply(this,arguments)};for(var i in this)this.hasOwnProperty(i)&&(_.isFunction(this[i])?n[i]=this[i]:n[i]=_.clone(this[i]));return t.prototype=this.prototype,n.prototype=new t,n.__super__=this.prototype,e&&(n.prototype.initialize=e),n},e.prototype.initialize=function(){},window.Class=e}(),function(){var e=Class.extend(function(e){var t=this,n=arguments;this.data={},e&&this.set(e),_.each(this.constructor.initializers,function(e){e.apply(t,n)}),this.data.id&&this.constructor.records&&(this.constructor.records[this.data.id]=this),this.constructor._broadcast({"new":this.data})});e._computed_values={},_.extend(e,{listen:function(e,t){var n=this;return _.isObject(e)&&_.each(e,function(e,t){n.listen(t,e)}),"undefined"==typeof this.listeners&&(this.listeners={}),"undefined"==typeof this.listeners._global&&(this.listeners._global=[]),"function"==typeof e?void this.listeners._global.push(e):("undefined"==typeof this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t),this)},_broadcast:function(e,t,n){"undefined"==typeof this.listeners&&(this.listeners={}),"undefined"==typeof this.listeners._global&&(this.listeners._global=[]);var i,r=this;if(t=t||"",_.each(_.keys(e),function(i){"object"!=typeof e[i]||null===e[i]||_.isArray(e[i])||r._broadcast(e[i],t+i+".",n),"undefined"!=typeof r.listeners[t+i]&&_.each(r.listeners[t+i],function(t){t.call(r,e,n)})}),!t)for(i=0;i<this.listeners._global.length;i+=1)this.listeners._global[i].call(this,e,n)},on_initialize:function(e){"undefined"==typeof this.initializers&&(this.initializers=[]),this.initializers.push(e)},get_computed_values:function(){return this._computed_values},set_computed_value:function(e,t,n){var i=this;this._computed_values[e]=t,n&&_.isArray(n.changes_on)&&_.each(n.changes_on,function(t){i.prototype.on_change(t,function(){var t={};t[e]=this.get(e),this._broadcast(t)})})}}),e.prototype.on_change=e.prototype.listen=e.listen,e.prototype.change=function(){this._broadcast({})},e.prototype._broadcast=e._broadcast,e.prototype.set=function(e,t,n){function i(e,t){var n={};for(var r in t)t.hasOwnProperty(r)&&("object"==typeof t[r]&&null!==t[r]?e?n[r]=i(e[r],t[r]):n[r]=t[r]:e&&e[r]===t[r]||(n[r]=t[r]));return n}function r(e,t){var n={},i=e.shift();return e.length?n[i]=r(e,t):n[i]=t,n}var o,a;return"object"==typeof e?(o=e,n=t):o="string"==typeof e?r(e.split("."),t):{},n||(n={}),a=i(this.data,o),n.overwrite?this.data=_.extend(this.data,o):this.data=jQuery.extend(!0,this.data,o),"undefined"!=typeof n.silent&&n.silent||this._broadcast(a,void 0,n),this},e.prototype.replace=function(e,t,n){return n=n||{},n.silent=!0,this.set(e,null,n),delete n.silent,this.set(e,t,n)},e.prototype.get=function(e){if("string"==typeof e){if("function"==typeof this.constructor.get_computed_values()[e])return this.constructor.get_computed_values()[e].call(this.data);var t=e.split("."),n=this.data;return _.each(t,function(e){n=n[e]}),_.clone(n)}return jQuery.extend(!0,{},this.data,this.compute_values())},e.prototype.compute_values=function(){var e=this.data,t={};return _.each(this.constructor.get_computed_values(),function(n,i){t[i]=n.call(e)}),t},window.Model=e}(),function(){function e(e,t){var n,i;return n=_(e).map(function(e,n){var r=!1;return n.match(/^\!/)&&(r=!0,n=n.replace(/^\!/,"")),_.isArray(e)||(e=[e]),e=_(e).map(function(e){return e+""}),i=_(e).include(t[n]+""),r?!i:i}),_(n).inject(function(e,t){return e||t},n[0])}function t(t,n){if(_.isArray(t)){var i=_(t).map(function(t){return e(t,n)});return _(i).inject(function(e,t){return e&&t},i[0])}}function n(e,n){var r,o,a="",s=$(e),c=s.data("conditions"),l=s.attr("itemprop");"undefined"!=typeof l?a=l.match(/\[(\w*)\]/)[1]:s.data("attr")&&(a=s.data("attr")),"undefined"!=typeof c?("string"==typeof c&&(c=JSON.parse(c)),o=t(c,n),r=o?JSON.parse(s.data("render")):"",s.data("evaluation")!==o&&(s.html(r),s.data("evaluation",o),r.length&&i(s,"Project",n))):"undefined"!=typeof a&&"undefined"!=typeof n[a]&&(s.data("value",n[a]),s.attr("data-value",n[a]),root.refresh_node(s))}function i(e,t,i){$(e).find("."+t+i.id).each(function(e,t){n(t,i)})}function r(e){this.template=e,this.conditions=[]}function o(e){var t;return"string"==typeof e&&(t={},t[e]=!0,e=t),e}var a,s={};root.Schwamm=s,a={number:function(e){return e=_.defaults({},e,{precision:0}),formatters.format_number(e.value,_.omit(e,"format","value"))},distance_date:function(e){return formatters.time_ago_in_words(e.value)}},root.refresh_node=function(e){var t,n=e.data("format");n=e.data("format"),t=n&&"function"==typeof a[n]?a[n](e.data()):e.data("value"),e.html(t)},root.update_record=function(e,t){i(document,e,t)},s.FormattingHelpers=a,r.prototype["if"]=function(e){return this.condition("and",!0,e),this},r.prototype.and=r.prototype["if"],r.prototype.if_not=function(e){return this.condition("and",!1,e),this},r.prototype.unless=r.prototype.if_not,r.prototype.and_not=r.prototype.if_not,r.prototype.or=function(e){return this.condition("or",!0,e),this},r.prototype.or_not=function(e){return this.condition("or",!1,e),this},r.prototype.then=function(){var e=this;return function(){return function(t,n){return e.value=n(t),e.html()}}},r.prototype.condition=function(e,t,n){var i;_.isObject(n)||(i={},i[n]=!0,n=i),t===!1&&_.each(_(n).keys(),function(e){n["!"+e]=n[e],delete n[e]});var r;return"or"===e?(r=o(this.conditions[this.conditions.length-1]),n=o(n),this.conditions[this.conditions.length-1]=$.extend(!0,r,n)):"and"===e&&this.conditions.push(n),this},r.prototype.evaluation=function(){return"undefined"==typeof this.cached_evaluation&&(this.cached_evaluation=t(this.conditions,this.template.proxy)),this.cached_evaluation},r.prototype.content=function(){return this.evaluation()?this.value:""},r.prototype.html=function(){var e=$("<data>");return e.attr(this.html_options()),e.html(this.content()),e[0].outerHTML},r.prototype.html_options=function(){return{"class":this.template.class_name,"data-conditions":JSON.stringify(this.conditions),"data-render":JSON.stringify(this.value),"data-evaluation":t}}}(),ApplicationModel=Model.extend(),ApplicationModel.on_initialize(function(){this.data.id&&(this.constructor.records[this.data.id]=this)}),_.extend(ApplicationModel,{records:{},find:function(e){var t=this;return _.isArray(e)?_.compact(_.map(e,function(e){return t.records[e]})):this.records[e]},every:function(e){_.each(this.records,e),this.listen("new",function(t){e.call(this,t["new"])})},has:function(e,t){function n(e){return"object"!=typeof e?e=[e]:e.get&&(e=[e.get("id")]),e}if("undefined"==typeof this.prototype["has_"+e]){var i=t.through;this.prototype[e]=[],this.on_initialize(function(){this.on_change(e+"_fetched",function(t){var n=t[e+"_fetched"]||[],r=this[e],o=_.compact(_.map(n,function(e){if(e&&e.id&&!_.include(r,e.id)){var t=new root[i](e);return t.get("id")}}));this["set_"+e](_.union(r,o))})}),this.prototype["get_"+e]=function(){return root[i].find(this[e])},this.prototype["has_"+e]=function(t){return t=n(t),t.length&&0===_(this[e]).difference(t).length},this.prototype["add_"+e]=function(t){t=n(t),t=_(t).difference(this[e]),t.length&&this["set_"+e](_.union(this[e],t))},this.prototype["remove_"+e]=function(t){t=n(t),t=_(t).intersection(this[e]),t.length&&this["set_"+e](_(this[e]).difference(t))},this.prototype["set_"+e]=function(t){if(t=n(t),!_.isEqual(_.clone(t).sort(),_.clone(this[e]).sort())){this[e]=t;var i={};i[e]=t,this._broadcast(i)}}}}});var app_models=["Backing","Checkout","Comment","Post","Project","User","ZendeskUser"];_.each(app_models,function(e){root[e]=ApplicationModel.extend()}),Project.on_initialize(function(){"function"==typeof update_record&&this.on_change(function(){update_record("Project",this.get())})}),Project.has("creator",{through:"User"}),Project.has("backers",{through:"User"}),Project.set_computed_value("usd_pledged",function(){return this.pledged*this.static_usd_rate},{changes_on:["pledged"]}),User.has("created_projects",{through:"Project"}),User.has("backed_projects",{through:"Project"}),User.has("backings",{through:"Backing"}),User.prototype.api_url=function(e,t){var n=this.get("urls").api.user;if(n)return"string"==typeof e&&(n=n.replace(/([^\?]*)(.*)/,function(t,n,i){return n+"/"+e+i})),(t||"undefined"==typeof t&&e===!0)&&api_oauth_token&&(n=oauth_url(n).replace(/http:/,"https:")),n},Comment.on_initialize(function(){"function"==typeof update_record&&this.on_change(function(){update_record("Comment",this.get())})}),Post.set_computed_value("post_likes",function(){return this.likes_count<=0?"":I18n.t("library.models.app.likes_count",{count:this.likes_count,formatted_count:formatters.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","has_liked"]}),Post.set_computed_value("post_likes_namepile",function(){var e,t;if(this.likes_count<=0)return"";if(e=[],e=_.map(this.likers,function(e){return'<a href="'+e.urls.web.user+'" title="'+_.escape(e.name)+'">'+_.escape(e.name)+"</a>"}),this.has_liked){if(1===this.likes_count)return I18n.t("library.models.app.You_like_this_update");"undefined"==typeof current_user?e.unshift(I18n.t("library.models.app.You")):e.unshift('<a href="'+current_user.data.urls.web.user+'" title="'+I18n.t("library.models.app.You")+'">'+I18n.t("library.models.app.You")+"</a>")}return t=parseInt(this.likes_count,10)-e.length,t>0&&(this.urls&&this.urls.web&&this.urls.web.likes?e.push('<a href="'+this.urls.web.likes+'" title="'+I18n.t("library.models.app.see_names")+'" id="full_namepile">'+I18n.t("library.models.app.other_people_count",{
count:t,formatted_count:formatters.format_number(t,{precision:0})})+"</a>"):e.push(I18n.t("library.models.app.other_people_count",{count:t,formatted_count:formatters.format_number(t,{precision:0})}))),I18n.t("library.models.app.names_count_like_this_update",{names:formatters.to_sentence(e),count:this.likes_count,formatted_count:formatters.format_number(this.likes_count,{precision:0})})},{changes_on:["likes_count","likers","has_liked"]}),Post.on_initialize(function(){"function"==typeof update_record&&this.on_change(function(){update_record("Post",this.get())})}),Checkout.set_computed_value("net_amount",function(){return this.amount-this.shipping_amount},{changes_on:["shipping_amount","amount"]}),function(){$(function(){"string"==typeof current_user&&(root.current_user=new User($.parseEscapedJSON(current_user)),root.Honeybadger&&Honeybadger.setContext({user_id:current_user.get("id")}))})}(),function(){"string"==typeof current_project&&(root.current_project=new Project($.parseEscapedJSON(current_project)),root.Honeybadger&&Honeybadger.setContext({project_id:current_project.get("id")}))}(),function(){"string"==typeof current_location&&(root.current_location=new Project($.parseEscapedJSON(current_location)))}(),function(){"string"==typeof current_checkout&&(root.current_checkout=new Checkout($.parseEscapedJSON(current_checkout)),current_checkout.on_change(function(e){e.reward?track("Checkout Reward Changed"):"undefined"!=typeof e.location_id?track("Checkout Location Changed"):e.shipping_amount?track("Checkout Shipping Amount Changed"):e.amount&&track("Checkout Amount Changed")}))}(),!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t){function n(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t){"use strict";function n(e){function t(e){return null===c?void u.push(e):void o(function(){var t=c?e.onFulfilled:e.onRejected;if(null===t)return void(c?e.resolve:e.reject)(l);var n;try{n=t(l)}catch(i){return void e.reject(i)}e.resolve(n)})}function n(e){try{if(e===d)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void r(t.bind(e),n,a)}c=!0,l=e,s()}catch(i){a(i)}}function a(e){c=!1,l=e,s()}function s(){for(var e=0,n=u.length;n>e;e++)t(u[e]);u=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var c=null,l=null,u=[],d=this;this.then=function(e,n){return new d.constructor(function(r,o){t(new i(e,n,r,o))})},r(e,n,a)}function i(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function r(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}var o=e("asap");t.exports=n},{asap:4}],3:[function(e,t){"use strict";function n(e){this.then=function(t){return"function"!=typeof t?this:new i(function(n,i){r(function(){try{n(t(e))}catch(r){i(r)}})})}}var i=e("./core.js"),r=e("asap");t.exports=i,n.prototype=i.prototype;var o=new n(!0),a=new n(!1),s=new n(null),c=new n(void 0),l=new n(0),u=new n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return c;if(e===!0)return o;if(e===!1)return a;if(0===e)return l;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(r){return new i(function(e,t){t(r)})}return new n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}t[o]=a,0===--r&&e(t)}catch(c){n(c)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)i(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":2,asap:4}],4:[function(e,t){(function(e){function n(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var t=r.domain;t&&(r.domain=void 0,t.enter());try{e()}catch(i){if(c)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),i;setTimeout(function(){throw i},0)}t&&t.exit()}a=!1}function i(t){o=o.next={task:t,domain:c&&e.domain,next:null},a||(a=!0,s())}var r={task:void 0,next:null},o=r,a=!1,s=void 0,c=!1;if("undefined"!=typeof e&&e.nextTick)c=!0,s=function(){e.nextTick(n)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=n,s=function(){l.port2.postMessage(0)}}else s=function(){setTimeout(n,0)};t.exports=i}).call(this,e("_process"))},{_process:1}],5:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]),function(){var e={};$(function(){function t(e){return/Windows/i.test(e)?/Phone/i.test(e)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(Blackberry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""}function n(e,t){return-1!==e.indexOf(t)}function i(e,t,i){return t=t||"",i?n(e,"Mini")?"Opera Mini":"Opera":/(Blackberry|PlayBook|BB10)/i.test(e)?"BlackBerry":/(FB_IAB|FB4A|FBIOS|FBAV|FBAN)/i.test(e)?"Facebook Mobile":n(e,"Chrome")?"Chrome":n(e,"CriOS")?"Chrome iOS":n(t,"Apple")?n(e,"Mobile")?"Mobile Safari":"Safari":n(e,"Android")?"Android Mobile":n(e,"Konqueror")?"Konqueror":n(e,"Firefox")?"Firefox":n(e,"MSIE")||n(e,"Trident/")?"Internet Explorer":n(e,"Gecko")?"Mozilla":""}function r(e){var t=e.split("/");return t.legth>=3?t[2]:""}function o(e){return/iPad/.test(e)?"iPad":/iPod/i.test(e)?"iPod Touch":/iPhone/i.test(e)?"iPhone":/(Blackberry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Windows Phone/i.test(e)?"Windows Phone":/Android/i.test(e)?"Android":""}function a(e){var t={};return _.each(e,function(e,n){_.isString(e)&&e.length>0&&(t[n]=e)}),t}function s(){var e=navigator.userAgent;return _.extend(a({$os:t(e),$browser:i(e,navigator.vendor,window.opera),$referrer:document.referrer,$referring_domain:r(document.referrer),$device:o(e),user_agent:e}),{$screen_height:screen.height,$screen_width:screen.width})}function c(e,t){var n=_.extend({},s(),{distinct_id:root.visitor_id,request_id:root.request_id},t),i={event:e,properties:n},r=JSON.stringify(i);return root.koala_debug&&(window.console.log("KOALA REQUEST:"),window.console.log(i)),$.ajax({type:"POST",url:koala_endpoint,data:r,contentType:"text/plain; charset=UTF-8"})}function l(e,t,n){$(e).click(function(e){var i,r=this.href,o=2===e.which||e.metaKey||e.ctrlKey||"_blank"===this.target;i="function"==typeof n?n(this):n;var a=new Promise(function(e){window.setTimeout(e,300),c(t,i).then(e)});o||(a.then(function(){window.location=r}),e.preventDefault())})}"true"===KSR.store.getItem("koala_debug")&&(root.koala_debug=!0),e.track=c,e.track_links=l,root.koala=e})}(),function(){function e(){var e;return"undefined"!=typeof current_project&&(e=read_cookie("ref_"+current_project.get("id")))?_.unescape(e).split("?")[0]:!1}var t=[];root.track=function(){t.push(arguments)},$(function(){function n(e,t){var n={};return t&&_.each(_.keys(t),function(i){n[e+"_"+i]=t[i]}),n}function i(e){var t="function"==typeof e.get?e.get():e,i={backers_count:t.backers_count,country:t.country,currency:t.currency,deadline:t.deadline,goal:t.goal,last_update_published_at:t.last_update_published_at,launched_at:t.launched_at,name:t.name,pid:t.id,pledged:t.pledged,profile_state:t.profile.state,state:t.state,updates_count:t.updates_count},r=moment.unix(t.deadline);return t.category&&(i.category_name=t.category.name,t.category.parent?i.parent_category=t.category.parent.name:i.parent_category=t.category.name),t.location&&(i.location=t.location.name),i.hours_remaining=_.max([r.diff(moment(),"hours",!0),0]),i.duration=r.diff(moment.unix(t.launched_at),"days",!0),i.percent_raised=t.pledged/t.goal,t.rewards&&(i.rewards_count=t.rewards.count),i.has_video=null!==t.video,i=n("project",i),i.user_is_backer=t.is_backing,i.user_has_starred=t.is_starred,i.user_is_project_creator="undefined"!=typeof current_user&&current_user.get("id")===t.creator.id,i}function r(e){var t="function"==typeof e.get?e.get():e,i=_.pick(t,["amount","shipping_amount","location_id"]),r=t.reward?_.pick(t.reward,["estimated_delivery_on","id","minimum","reward","shipping_preference","shipping_enabled"]):{};return r=n("reward",r),_.extend(i,r),i=n("checkout",i)}function o(e,t){var n=_.extend({page_id:$("body").attr("id"),ref_tag:URI().query(!0).ref,landing_page_url:document.URL},_.contains(["undefined","string"],typeof current_project)?{}:i(current_project),!_.contains(["undefined","string"],typeof current_checkout)&&current_checkout.get("amount")&&current_checkout.get("reward")?r(current_checkout):{},_.contains(["undefined","string"],typeof current_variants)?{}:{current_variants:current_variants},s,t);koala.track(e,n)}function a(e,t,n){window.setTimeout(function(){koala.track_links(e,t,function(e){var t=$(e);return _.extend({selected_link:t.attr("data-original_text")?t.data("original_text"):$.trim(t.text()),page_id:$("body").attr("id")},_.contains(["undefined","string"],typeof current_project)?{}:i(current_project),s,n)})},1)}var s,c,l;s={client_type:$("body.native-app-request").length?"native":"web",client_platform:$("body.ios").length?"ios":$("body.android").length?"android":void 0,device_format:$("body.phone").length?"phone":$("body.tablet").length?"tablet":"desktop",apple_pay_capable:$("body.apple-pay-capable").length>0,android_pay_capable:$("body.android-pay-capable").length>0,ip_address:"undefined"!=typeof current_ip?current_ip:null,ip_datacenter:"undefined"!=typeof current_ip_datacenter?current_ip_datacenter:null,window_inner_width:window.innerWidth,window_inner_height:window.innerHeight,screen_width:screen.width,screen_height:screen.height,screen_avail_width:screen.availWidth,screen_avail_height:screen.availHeight,user_logged_in:"undefined"!=typeof current_user,user_country:"undefined"!=typeof current_location?current_location.get("country"):void 0,iphone_uuid:"undefined"!=typeof ios_app_uuid?ios_app_uuid:void 0,enabled_features:_.keys("undefined"!=typeof enabled_features?enabled_features:{}),browser_language:I18n.browser_language,chosen_language:I18n.chosen_language,calculated_language:I18n.calculated_language,display_language:I18n.display_language,mp_lib:"js"},c=read_cookie("user_analytics_properties"),null!==c&&_.extend(s,$.parseJSON(c)),l=e(),l&&_.extend(s,{referrer_credit:l}),_.each(t,function(e){o.apply(this,e)}),root.track=o,root.track_links=a,root.mixpanel_project=i,root.mixpanel_checkout=r,root.namespace_keys=n})}(),function(){var e;jQuery(document).on("livesearch:results",function(t,n){var i,r=$(t.target).val();i=n.projects?n.projects.length:n.length,e=$(t.target).attr("data-tracker-name"),"undefined"!=typeof ga&&ga("send","event",e,"Term",r,parseInt(i,10))});var t;jQuery(document).on("livesearch:searching",function(){t=!0}),jQuery(document).on("livesearch:cancel",function(){t&&("undefined"!=typeof ga&&ga("send","event",e,"Cancels"),t=!1)}),jQuery(document).ready(function(){$(".home-editorial-title").on("click",function(){var e=$(this).html();"undefined"!=typeof ga&&ga("send","event","Faux-Category on Homepage Clicks",e)})}),jQuery(document).ready(function(){$(".export").find("a").on("click",function(){"undefined"!=typeof ga&&ga("send","event","Export Reward Report","Download Click")})}),jQuery(document).ready(function(){$("#results_properties").livequery(function(){var e=$(this).children("#number_of_results").text(),t=$(this).children("#term").text();"undefined"!=typeof ga&&ga("send","event","Search Results","Term",t,parseInt(e,10))})}),jQuery(document).ready(function(){$("#pledges_login_or_signup #growl_section .error").livequery(function(){var e=$(this).children(".message").html(),t=$(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Checkout Login Errors",e,t)}),$("#checkout-signup .fieldset-errors").livequery(function(){var e=$(this).children("ul").children(),t=$(document).attr("URL");$.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Checkout Signup Errors",n,t)})}),$("#sessions_new #growl_section .error").livequery(function(){var e=$(this).children(".message").html(),t=$(document).attr("URL");"undefined"!=typeof ga&&ga("send","event","Regular Login Errors",e,t)}),$("#new_user .fieldset-errors").livequery(function(){var e=$(this).children("ul").children(),t=$(document).attr("URL");$.each(e,function(e,n){n=n.innerHTML,"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors",n,t)})})}),jQuery(document).ready(function(){$(".share-box").on("click","a",function(){var e=$(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),$("#checkout-project-share").on("click","a",function(){var e=$(this).attr("data-tracker-name");"undefined"!=typeof ga&&ga("send","event","Sharing",e)}),$(document).on("click",".clipster",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Copied Link")}),$(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){"undefined"!=typeof ga&&ga("send","event","Sharing","Facebook Like")})})}),$(function(){function e(e){e.addModelListener("TIME","timeStats"),e.addModelListener("STATE","getState")}var t,n,i,r,o,a=0,s=0,c=0;$("#video-section object").livequery(function(){t=$(this)[0],$("#projects_show").size>0&&(o=$("#button-back-this-proj").attr("href")),i=$(document).attr("URL")}),$(document).on("click","#video-section",function(){o=$("#button-back-this-proj").attr("href"),i=$(document).attr("URL"),0===a&&t&&(r="Project Page Video",e(t))}),$(window).on("beforeunload",function(){"undefined"!=typeof n&&"PLAYING"===n.newstate&&0===c&&(c=1,"undefined"!=typeof ga&&ga("send","event",r,"Abandoned Play",i,s))})}),jQuery(document).on("modal_dialog:opened",function(e){var t=$(e.target),n=t.find(".modal_dialog_head h4").text();"undefined"!=typeof ga&&ga("send","event","Modal Dialog","Opened",n)}),jQuery(document).ready(function(){$(".faq-question a").click(function(){var e=$("body[id]").length?$("body").attr("id"):"No ID",t=$(this).closest(".faq"),n=$(this).find(".question").text();"undefined"==typeof ga||t.hasClass("expanded")||ga("send","event","FAQ","Expanded - "+e,n)})}),jQuery(document).ready(function(){$(document).on("click","a#edit_survey_response",function(){"undefined"!=typeof ga&&ga("send","event","Surveys","Click","Edit Survey Response")})}),jQuery(document).ready(function(){$(document).on("click","ul#admin-menu > li > a",function(){"undefined"!=typeof ga&&ga("send","event","Admin","Nav Click",$(this).text())})}),jQuery(document).ready(function(){var e=0;$(".scissors").on("click",function(){2>e?("undefined"!=typeof ga&&ga("send","event","Scissors","Clicks"),e+=1):"undefined"!=typeof ga&&ga("send","event","Scissors","Chops")})}),jQuery(document).ready(function(){var e=1;$(document).on("infinite_scroll:scrolled_to",function(t,n){if(n>e){var i=window.location.pathname+window.location.search+window.location.hash;"undefined"!=typeof ga&&ga("send","pageview",i),e=n}})})}(),function(){function e(){var e="__REQUEST_ID_MIDDLEWARE_SWAP_TOKEN__",t=document.documentElement.dataset.requestId;return void 0===t&&(t=null),t===e&&(t=null),t}root.request_id=e()}(),function(e){var t=function(){return!1===e.support.boxModel&&e.support.objectAll&&$support.leadingWhitespace}();e.jGrowl=function(t,n){0==e("#jGrowl").size()&&e('<div id="jGrowl"></div>').addClass(n&&n.position?n.position:e.jGrowl.defaults.position).appendTo("body"),e("#jGrowl").jGrowl(t,n)},e.fn.jGrowl=function(t,n){if(e.isFunction(this.each)){var i=arguments;return this.each(function(){void 0==e(this).data("jGrowl.instance")&&(e(this).data("jGrowl.instance",e.extend(new e.fn.jGrowl,{notifications:[],element:null,interval:null})),e(this).data("jGrowl.instance").startup(this)),e.isFunction(e(this).data("jGrowl.instance")[t])?e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"),e.makeArray(i).slice(1)):e(this).data("jGrowl.instance").create(t,n)})}},e.extend(e.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(e,t,n){},beforeOpen:function(e,t,n){},afterOpen:function(e,t,n){},open:function(e,t,n){},beforeClose:function(e,t,n){},close:function(e,t,n){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(t,n){var n=e.extend({},this.defaults,n);"undefined"!=typeof n.speed&&(n.openDuration=n.speed,n.closeDuration=n.speed),this.notifications.push({message:t,options:n}),n.log.apply(this.element,[this.element,t,n])},render:function(t){var n=this,i=t.message,r=t.options;r.themeState=""==r.themeState?"":"ui-state-"+r.themeState;var t=e('<div class="jGrowl-notification '+r.themeState+" ui-corner-all"+(void 0!=r.group&&""!=r.group?" "+r.group:"")+'"><div class="jGrowl-close">'+r.closeTemplate+'</div><div class="jGrowl-header">'+r.header+'</div><div class="jGrowl-message">'+i+"</div></div>").data("jGrowl",r).addClass(r.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){e(this).parent().trigger("jGrowl.beforeClose")}).parent();e(t).bind("mouseover.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){e("div.jGrowl-notification",n.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){0!=r.beforeOpen.apply(t,[t,i,r,n.element])&&e(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){0!=r.open.apply(t,[t,i,r,n.element])&&("after"==r.glue?e("div.jGrowl-notification:last",n.element).after(t):e("div.jGrowl-notification:first",n.element).before(t),e(this).animate(r.animateOpen,r.openDuration,r.easing,function(){e.support.opacity===!1&&this.style.removeAttribute("filter"),null!=e(this).data("jGrowl")&&(e(this).data("jGrowl").created=new Date),e(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){r.afterOpen.apply(t,[t,i,r,n.element])}).bind("jGrowl.beforeClose",function(){0!=r.beforeClose.apply(t,[t,i,r,n.element])&&e(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){e(this).data("jGrowl.pause",!0),e(this).animate(r.animateClose,r.closeDuration,r.easing,function(){e.isFunction(r.close)?r.close.apply(t,[t,i,r,n.element])!==!1&&e(this).remove():e(this).remove()})}).trigger("jGrowl.beforeOpen"),""!=r.corners&&void 0!=e.fn.corner&&e(t).corner(r.corners),e("div.jGrowl-notification:parent",n.element).size()>1&&0==e("div.jGrowl-closer",n.element).size()&&0!=this.defaults.closer&&e(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){e(this).siblings().trigger("jGrowl.beforeClose"),e.isFunction(n.defaults.closer)&&n.defaults.closer.apply(e(this).parent()[0],[e(this).parent()[0]])})},update:function(){e(this.element).find("div.jGrowl-notification:parent").each(function(){void 0!=e(this).data("jGrowl")&&void 0!=e(this).data("jGrowl").created&&e(this).data("jGrowl").created.getTime()+parseInt(e(this).data("jGrowl").life)<(new Date).getTime()&&1!=e(this).data("jGrowl").sticky&&(void 0==e(this).data("jGrowl.pause")||1!=e(this).data("jGrowl.pause"))&&e(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0==this.defaults.pool||e(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),e(this.element).find("div.jGrowl-notification:parent").size()<2&&e(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){e(this).remove()})},startup:function(n){this.element=e(n).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){e(n).data("jGrowl.instance").update()},parseInt(this.defaults.check)),t&&e(this.element).addClass("ie6")},shutdown:function(){e(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove(),clearInterval(this.interval)},close:function(){e(this.element).find("div.jGrowl-notification").each(function(){e(this).trigger("jGrowl.beforeClose")})}}),e.jGrowl.defaults=e.fn.jGrowl.prototype.defaults}(jQuery),function(){var e={G:71,J:74,K:75,UP:38,DOWN:40,LEFT:37,RIGHT:39,DEL:46,TAB:9,ENTER:13,SPACE:32,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,SHIFT:16,CTRL:17,ALT:18,CMD_LEFT:91,CMD_RIGHT:93,WINDOWS_LEFT:91,WINDOWS_RIGHT:92,WINDOWS:93};e.NOT_INPUT=[e.UP,e.DOWN,e.RIGHT,e.LEFT,e.TAB,e.ENTER,e.ESC,e.SHIFT,e.CTRL,e.ALT,e.CMD_LEFT,e.CMD_RIGHT,e.WINDOWS_LEFT,e.WINDOWS_RIGHT,e.WINDOWS,224,17],root.KEY=e}();var $growl_section=$("#growl_section"),$original_focus;$growl_section.on("click",function(e){var t;$(e.target).is($(this))&&(t=$(this),t.fadeOut("fast"),t.removeClass("sticky"),t.find("div.jGrowl-notification:parent").each(function(){$(this).data("jGrowl").sticky=!1}))}),$(document).on("keydown",function(e){e.which===KEY.ESC&&$growl_section.is(":visible")&&hideGrowlSection()}),root.growl=growl,root.define_namespace=function(e,t){$(function(){var n=$(e);n.length&&t(n)})},function(){root.oauth_url=function(e){return"undefined"!=typeof api_oauth_token?URI(e).addQuery("oauth_token",api_oauth_token).toString():e}}(),function(e,t){function n(t,n){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap=#"+o+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each(function(){e(this).css(a,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,a,s,c={},l=t.split(".")[0];t=t.split(".")[1],r=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(c[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(c[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix:t},c,{constructor:a,namespace:l,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,c=a.length;c>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==t&&(e.isPlainObject(o)?n[r]=e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):n[r]=o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,c=i.call(arguments,1),l=this;return a=!s&&c.length?e.widget.extend.apply(null,[a].concat(c)):a,s?this.each(function(){var i,r=e.data(this,o);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,c),i!==r&&i!==t?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new r(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=e.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var c=i.match(/^(\w+)\s*(.*)$/),l=c[1]+o.eventNamespace,u=c[2];u?r.delegate(u,l,s):n.bind(l,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){
e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,r=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&t+n>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,c=s+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+l>s&&c>i+l,f="y"===this.options.axis||t+u>o&&a>t+u,p=d&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<c},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&i,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return r?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,o,a=[],s=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(r=e(c[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(function(){a.push(this)});return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,a,s,c,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(r=e(f[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(a=d[n][1],s=d[n][0],i=0,l=s.length;l>i;i++)c=e(s[i]),c.data(this.widgetName+"-item",a),u.push({item:c,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var r,o,a,s,c,l,u,d,f,p,h=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(h&&e.contains(this.containers[r].element[0],h.element[0]))continue;h=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(a=1e4,s=null,p=h.floating||i(this.currentItem),c=p?"left":"top",l=p?"width":"height",u=this.positionAbs[c]+this.offset.click[c],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||n(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[c],f=!1,Math.abs(d-u)>Math.abs(d+this.items[o][l]-u)&&(f=!0,d+=this.items[o][l]),Math.abs(d-u)<a&&(a=Math.abs(d-u),s=this.items[o],this.direction=f?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){function t(t,n){this.$elem=t,this.$form=t.closest("form"),this.options=e.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},n),this.url=this.options.url||this.$form.attr("action"),this.options.file_extension?this.ajax_url=this.ensure_file_extension(this.options.file_extension):this.ajax_url=this.url,this.last_search=!1,this.search_xhr=!1,this.options.client_side_cache?this.cache={}:this.cache=!1,this.active=!0,this._attach()}var n;e.fn.livesearch=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("livesearch");i||(i=new t(e(this),n),e(this).data("livesearch",i))})},e.extend(t.prototype,{_attach:function(){var e=this;this.$elem.attr("autocomplete","off"),this.$elem.on("keypress cut paste input",function(){e.active&&(clearTimeout(n),n=setTimeout(function(){e.search()},e.options.delay))}),this.options.process_data||this.options.serialize.on("change",function(){e.search()}),this.$elem.on("livesearch:suspend",function(){e.active=!1}),this.$elem.on("livesearch:activate",function(){e.active=!0}),this.$elem.on("livesearch:cancel",function(){e.search_xhr&&e.search_xhr.abort(),e.last_search=!1})},ensure_file_extension:function(e){var t=window.location.host.replace(/[^\w\d]/g,function(e){return"\\"+e}),n=new RegExp("((?:"+t+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)");return this.url.replace(n,function(t,n,i,r){return n+"."+e+r})},suspend_while:function(e){this.active=!1,e();var t=this;setTimeout(function(){t.active=!0},100)},search:function(){var t=this,n=this.options.serialize.serialize();this.options.process_data&&(n=this.options.process_data.apply(this,[n]),"object"==typeof n&&(n=e.param(n))),n!==this.last_search&&(this.$elem.val().length<this.options.minimum_characters||(this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[n]&&"function"!=typeof this.cache[n]?this.$elem.trigger("livesearch:results",[this.cache[n]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=e.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,data:n,global:!1,success:function(e){null!==e&&(t.$elem.trigger("livesearch:results",[e]),t.$elem.removeClass("searching"),t.cache&&(t.cache[n]=e))},error:function(){t.$elem.trigger("livesearch:ajax_error"),t.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=n))}})}(jQuery),function(e){function t(t,n){this.$elem=t,this.options=e.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(e){return e}},n);var i=this.$elem.closest(".field_with_icon"),r=e([]);r=i.length?i.siblings(".results"):this.$elem.siblings(".results"),r.length?(this.$results=r,this.$results.find("div.no_results").remove()):(this.$results=e('<div class="results"></div>'),i.length?i.after(this.$results):this.$elem.after(this.$results)),this.$results.find("ul.result_list").length||this.$results.append('<ul class="result_list"></ul>'),this.$no_results=e('<div class="no_results">'+this.options.no_results_html+"</div>"),this.$no_results.hide(),this.$results.append(this.$no_results),this.handle_optional_content(),this.livesearch=t.livesearch(this.options).data("livesearch"),this._attach()}var n={UP:38,DOWN:40,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};e.fn.livesearch_input_dropdown=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("livesearch.input_dropdown");i||(i=new t(e(this),n),e(this).data("livesearch.input_dropdown",i))})},e.extend(t.prototype,{_attach:function(){var e=this;this.$elem.on("livesearch:results",function(t,n){e.options.process_results&&(n=e.options.process_results(n)),e.show_results(n),e.push_history(n)}),this.bind_results(),this.bind_popstate(),this.$elem.on("keydown.autocomplete",function(t){var i,r,o,a=!!e.$results.find(".selected").length;switch(t.keyCode){case n.UP:a?(i=e.$results.find(".selected").prev(":not(.not_result)"),i.length||(i=e.$results.find("li:not(.not_result)").last()),e.select(i,!1)):e.select(e.$results.find("li:not(.not_result)").last(),!1),t.preventDefault();break;case n.DOWN:a?(r=e.$results.find(".selected").next(":not(.not_result)"),r.length||(r=e.$results.find("li:not(.not_result)").first()),e.select(r,!1)):e.select(e.$results.find("li:not(.not_result)").first(),!1),t.preventDefault();break;case n.ENTER:o=e.$results.find(".selected"),e.input_can_submit()||t.preventDefault(),o.length&&(t.preventDefault(),e.select(o,!0))}})},history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var e=this;this.replacing_history_state=!1,window.onpopstate=function(t){t.state&&t.state.livesearch?(e.show_results(t.state.livesearch.results),e.livesearch.suspend_while(function(){e.$elem.val(t.state.livesearch.input_value).trigger("input");
})):e.reset(!0)}}},input_can_submit:function(){var e=this.livesearch.search_xhr.readyState,t=e>0&&4>e;return this.options.input_can_submit_on_enter&&!t&&this.$elem.is(":focus")},bind_results:function(){var t=this;this.$results.find("li").on("click",function(n){t.select(e(this),!0),n.preventDefault()}),this.$results.find("li").on("mouseover",function(){t.select(e(this)),t.unselect_on_mouseout=!0}),this.$results.on("mouseout",function(){t.unselect_on_mouseout&&t.unselect_currently_selected()}),this.$elem.on("livesearch:reveal_results",function(){t.reveal_results()})},build_result_names_list:function(t){var n=[],i=this;return e.each(t,function(e,t){i.options.return_name_from_result?t=i.options.return_name_from_result(t):"string"!=typeof t&&(t=t[0]),n.push(t)}),n},show_results:function(t){var n,i,r,o=this.$results.children("ul"),a=e([]);t.results&&(r=t,t=t.results),this.unselect_currently_selected(),o.empty(),t.length?(this.$no_results.hide(),o.show()):(this.$no_results.show(),o.hide()),n=this.build_result_names_list(t),e.each(n,function(n,i){var r=e("<li>"+i+"</li>");r.data("livesearch_result",t[n]),o.append(r)}),r&&r.count>t.length&&(i="see all "+r.count+" results",a=e("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:i,"class":"see_all not_result"}).html(i).wrap("<li>"),o.append(a)),this.bind_results(),this.reveal_results()},push_history:function(e){if(this.history_api_supported()&&!this.options.ignore_history){"string"==typeof e&&(e=JSON.parse(e));var t={livesearch:{input_value:this.$elem.val(),results:e}};this.replacing_history_state?(history.replaceState(t),this.replacing_history_state=!1):history.pushState(t,"","?"+this.livesearch.last_search)}},reveal_results:function(){var t=this;this.$results.slideDown(function(){e(window).resize(),t.$results.trigger("sticky_bar:fix_to_bottom"),t.$results.trigger("shifted"),t.$results.trigger("livesearch:revealed_results")})},reset:function(e){this.$results.hide(),this.$elem.val(""),e&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var e=this.$results.children("ul"),t=e.children("li.selected");t.trigger("livesearch:unselect"),t.removeClass("selected"),this.unselect_on_mouseout=!1},select:function(e,t){var n=this;e.is(".not_result")||(this.unselect_currently_selected(),e.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){n.$elem.val(e.text()),n.$elem.focus()}),e.trigger("livesearch:soft_select"),t&&e.trigger("livesearch:selected",[e.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})}(jQuery),function(e){e.fn.livesearch_pretty_input_dropdown=function(t){return t=t||{},e(this).each(function(){function n(){this.value?s.show():s.hide()}function i(){a.val(""),a.trigger("livesearch:cancel").trigger("livesearch:close_results")}var r,o=e(this),a=o.find("input[type=text]"),s=o.find(".ss-delete"),c=a.siblings(".ss-search");a.livesearch_input_dropdown(e.extend(t,{update_input:!1})),r=a.data("livesearch.input_dropdown"),n.call(a[0]),a.on("keypress cut paste input livesearch:close_results blur",n),a.on("livesearch:searching",function(){c.removeClass("ss-search").addClass("icon-loading-small")}),a.on("livesearch:results livesearch:ajax_error",function(){c.removeClass("icon-loading-small").addClass("ss-search")}),a.on("livesearch:results",function(){if(!t.input_can_submit_on_enter){var e=a.siblings(".results");r.select(e.find("li:first"))}}),s.on("click",function(){a.focus(),i()}),a.on("livesearch:close_results",function(){a.siblings(".results").slideUp(function(){e(window).resize(),e(this).trigger("sticky_bar:fix_to_bottom")})}),a.on("blur",function(){a.val().length<3&&i()})})}}(jQuery),function(e){e.fn.livesearch_navigator=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.livesearch_pretty_input_dropdown(t),n.on("livesearch:selected",function(e,t){t&&(window.location=t[1])})})}}(jQuery),function(e){e.fn.livesearch_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Cancel",target_input:!1},t),e(this).each(function(){function n(){o.hide(),o.attr("disabled","disabled"),o.siblings(".ss-delete, .ss-search").hide();var n=e('<div class="field-selected"><span class="value">'+o.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a></div>");o.siblings("div.field-selected").remove(),o.after(n),o.siblings(".results").slideUp(),o.trigger("livesearch_selector:select",[o.val()]),n.find("a.cancel-link").click(function(e){e.preventDefault(),o.val(""),n.remove(),o.removeAttr("disabled"),o.siblings(".ss-delete, .ss-search").show(),o.show(),o.focus(),a.val(""),o.trigger("dirty"),o.trigger("livesearch_selector:unselect")})}var i,r=e(this),o=r.find('input[type="text"]'),a=t.target_input||r.find('input[type="hidden"]'),s=o.siblings(".ss-search");r.addClass("search"),a.val()&&o.val()&&n(),t.url=t.url||r.closest("form").attr("action"),r.livesearch_pretty_input_dropdown(t),i=o.data("livesearch.input_dropdown"),o.on("livesearch:searching",function(){s.removeClass("ss-search").addClass("icon-loading-small")}),o.on("livesearch:results livesearch:ajax_error",function(){s.removeClass("icon-loading-small").addClass("ss-search")}),o.on("livesearch:results",function(){var e=o.siblings(".results");i.select(e.find("li:first"))}),r.on("livesearch:selected",function(e,t){t&&(o.val(t[0]),a.val(t[1]),n())})})}}(jQuery),function(e){e.fn.livesearch_multi_selector=function(t){return t=e.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},t),e(this).each(function(){function n(n){var i=e('<a class="ss-icon ss-delete cancel-link" href="#">'+t.cancel_copy+"</a>");n.append(i)}function i(){s.val(""),a.siblings(".results").slideUp(),s.trigger("livesearch:cancel")}var r,o=e(this),a=o.find(".field_with_icon"),s=a.find("input.text"),c=o.find("ol.search-selected,ul.search-selected"),l=s.siblings(".ss-search"),u=o.find(".template"),d=t;d.url=t.url||o.closest("form").attr("action"),r=s.livesearch_input_dropdown(d),t.sortable&&c.sortable({containment:"document",axis:"y",update:function(){c.find("input.position").each(function(t){e(this).val(t)})}}),o.addClass("search"),c.find("li").each(function(){n(e(this))}),o.on("click","a.cancel-link",function(t){var n=e(this).closest("li"),i=n.find(".destroy");t.preventDefault(),n.fadeOut(function(){i.length?i.val("1"):n.remove()})}),s.on("livesearch:searching",function(){l.removeClass("ss-search").addClass("icon-loading-small")}),s.on("livesearch:results livesearch:ajax_error",function(){l.removeClass("icon-loading-small").addClass("ss-search")}),o.on("livesearch:selected",function(n,r){if(r){var o=u.clone_form_template();o.find("input.destroy").val(!1),o.find(".name").html(r[0]),o.find(".value").val(r[1]),c.append(o),t.sortable&&c.find("input.position").each(function(t){e(this).val(t)}),i()}})})}}(jQuery),function(e){function t(t,n){this.$field=t,this.options=e.extend({on_invalid:null,format:"%H:%M %z",am:"am",pm:"pm"},n),this._value=this._current_time_from_field(),this._attach()}e.fn.time_field=function(n){return e(this).each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;e.$field.bind("blur",function(){e._handle_edit()}),this.$field.bind("time_field:set_time",function(t,n){e.set_time(n)})},_s_to_time:function(e){if("object"==typeof Date.Parsing){var t=Date.parse(e);return t?t.toString("HH:mm"):this.options.on_invalid}var n,i=/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i,r=e.match(i),o=!r;if(!o){var a=+r[1]%12,s=+r[3]||0,c=(r[4]||"").match(/p/i);r[4]||(c=+r[1]>=12),+r[1]>23&&(o=!0),+r[1]>12&&r[4]&&(o=!0),s>59&&(o=!0),+r[1]<1&&r[4]&&(o=!0);var l=""+(a+(c?12:0));1===l.length&&(l="0"+l);var u=""+s;1===u.length&&(u="0"+u),n=l+":"+u}return o?this.options.on_invalid:n},_time_to_s:function(t){if("object"==typeof Date.Parsing){var n=Date.parse(t);return n?n.toString("h:mm tt"):this.options.on_invalid}var i=t&&t.match(/(\d\d):(\d\d)/);if(i){var r=this.options.format,o=+i[1],a=+i[2],s=o>=12?this.options.pm:this.options.am,c=""+(o%12?o%12:12),l=""+a;1===l.length&&(l="0"+l);var u=[["%Hh",o],["%H",c],["%M",l],["%z",s]];return e(u).each(function(e,t){r=r.replace(t[0],t[1])}),r}return""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(e){e!==this._value&&(this._value=e,this.$field.trigger("time_field:time_changed",this._value)),this._reset_field_value()},_handle_edit:function(){var e=this._current_time_from_field();this.set_time(e)}})}(jQuery),function(e){function t(t,n){this.$div=t,this.options=e.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:[I18n.t("library.calendar_date_picker.January"),I18n.t("library.calendar_date_picker.February"),I18n.t("library.calendar_date_picker.March"),I18n.t("library.calendar_date_picker.April"),I18n.t("library.calendar_date_picker.May"),I18n.t("library.calendar_date_picker.June"),I18n.t("library.calendar_date_picker.July"),I18n.t("library.calendar_date_picker.August"),I18n.t("library.calendar_date_picker.September"),I18n.t("library.calendar_date_picker.October"),I18n.t("library.calendar_date_picker.November"),I18n.t("library.calendar_date_picker.December")],day_of_week_texts:[I18n.t("library.calendar_date_picker.Sunday_short"),I18n.t("library.calendar_date_picker.Monday_short"),I18n.t("library.calendar_date_picker.Tuesday_short"),I18n.t("library.calendar_date_picker.Wednesday_short"),I18n.t("library.calendar_date_picker.Thursday_short"),I18n.t("library.calendar_date_picker.Friday_short"),I18n.t("library.calendar_date_picker.Saturday_short")]},n),this._extract_options(),this._attach(),this._redraw()}function n(e){return i?i.firstChild.nodeValue=e:(i=document.createElement("div"),i.appendChild(document.createTextNode(e))),i.innerHTML}e.fn.calendar_date_picker=function(n){return this.each(function(){var i=e(this),r=new t(i,n);e(this).data("calendar_date_picker",r)})},e.extend(t.prototype,{_copy_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_copy_date_with_time:function(e,t){if(!e)return e;var n=this._copy_date(e),i=(t||"").split(":");return n.setHours(+i[0]||0),n.setMinutes(+i[1]||0),n},_copy_time:function(e){if(!e)return null;var t=""+e.getHours();1===t.length&&(t="0"+t);var n=""+e.getMinutes();return 1===n.length&&(n="0"+n),t+":"+n},_copy_month:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},_next_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)},_previous_month:function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)},_next_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,e.getHours(),e.getMinutes())},_previous_date:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,e.getHours(),e.getMinutes())},_same_year:function(e,t){return e.getFullYear()===t.getFullYear()},_same_month:function(e,t){return this._same_year(e,t)&&e.getMonth()===t.getMonth()},_last_date_of_month:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){return this.selected_date&&this._same_month(this.selected_date,this.focus_date)?this.selected_date.getDate():void 0},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date),this.options.selected_date&&(this.selected_date=this._copy_date(this.options.selected_date)),this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date),this.time=this._does_datetime()?this._copy_time(this.options.selected_date||this.options.today_date||new Date):!1},_refresh_calendar_table_classes:function(e){var t="selected",n=this._selected_date_date_in_focus_month(),i=e.children("tbody"),r=i.find("a.selected");r.removeClass(t),r.parent().removeClass(t);var o=i.find("a:eq("+(n-1)+")");o.addClass(t),o.parent().addClass(t)},_attach:function(){var e=this;this.$div.bind("calendar_date_picker:select_date",function(t,n){e.select_date(n)})},_bind_dom_table_events:function(){var t=this,n=this.$div.children().children("table"),i=n.children(":eq(0)"),r=i.children().children(),o=r.children("a.previous_month");o.text(this.options.previous_month_text),o.click(function(e){e.preventDefault(),t._on_previous_month_clicked()});var a=r.children("a.next_month");a.text(this.options.next_month_text),a.click(function(e){e.preventDefault(),t._on_next_month_clicked()}),r.children(".month, .year").on("click",function(){t.focus_date=new Date,t._refresh_calendar()});var s=n.children("tbody");s.click(function(n){var i;i=e.browser.msie?n.srcElement:n.target;var r=e(i);if(r[0]&&"A"===r[0].nodeName){n.preventDefault();var o=t._copy_date_with_time(t.focus_date,t.time);o.setDate(+r.text());var a=t._copy_date_with_time(t.selected_date,t.time);t.options.allow_deselect&&a&&o-a===0?t.select_date(void 0):t.select_date(o)}})},_bind_dom_time_events:function(){if(this._does_datetime()){var e=this,t=this.$div.children().children("div.time").find("input");t.time_field(this.options.time),t.trigger("time_field:set_time",this.time),t.bind("time_field:time_changed",function(t,n){e.selected_date||(e.selected_date=new Date);var i=e._copy_date_with_time(e.selected_date,n);e.select_date(i)})}},_does_datetime:function(){return void 0!==this.options.time_text},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date),this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=this._next_month(this.focus_date),this._refresh_calendar()},_redraw:function(){this.$div.empty(),this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>"),this._bind_dom_table_events(),this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html()),this._bind_dom_table_events()},select_date:function(e,t){var n=e?this._copy_date(e):void 0,i=t?t:e?this._copy_time(e):void 0,r=this.selected_date?this.selected_date.valueOf():void 0,o=n?n.valueOf():void 0;(r!==o||i!==this.time)&&(this.selected_date=n,this._does_datetime()&&(this.time=i,i&&this.$div.find("input").trigger("time_field:set_time",i)),this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]),this.focus_date=this._copy_month(this.selected_date||this.today_date),this._refresh_calendar(),this._refresh_calendar_table_classes(this.$div.find("table")))},_table_html:function(){return"<table>"+this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month ss-icon ss-navigateleft grey-dark" href="#"></a><a class="next_month ss-icon ss-navigateright grey-dark" href="#"></a><span class="month">'+n(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var e=this._copy_month(this.focus_date).getDay(),t=1,n=this._last_date_of_month(this.focus_date).getDate(),i=this._selected_date_date_in_focus_month(),r=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),o=[];for(o.push(this._date_tds(e,i,r,t,n)),t=8-e;n>=t;t+=7)o.push(this._date_tds(0,i,r,t,n));return"<tbody><tr>"+o.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(e,t,n,i,r){for(var o=[],a="<td></td>",s=0;e>s;s+=1)o.push(a);for(var c=i;o.length<7&&r>=c;c+=1){var l=[];c===t&&l.push("selected"),c===n&&l.push("today");var u;u=l.length?' class="'+l.join(" ")+'"':"";var d="<td"+u+'><a href="#"'+u+">"+c+"</a></td>";o.push(d)}for(var f=r+1;i+7>f;f+=1)o.push(a);return o.join("")},_days_of_week_ths:function(){var t=e.map(this.options.day_of_week_texts,n);return t},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+n(this.options.time_text)+'<input type="text" /></label>'+n(moment().zoneAbbr())+"</div>":""}});var i}(jQuery),function(e){function t(t,n){this.$field=t,this.$calendar=void 0,this.options=e.extend({calendar:{},position:"right"},n),this._in_manual_edit=!1,this._blurs_to_ignore=-1,this._attach()}e.fn.datetime_picker_field=function(n){return this.each(function(){new t(e(this),n)})},e.extend(t.prototype,{_attach:function(){var e=this;this.$field.focus(function(){e._in_time_field=!1,e._ensure_calendar()}),this.$field.blur(function(){e._hide_calendar_or_refocus(),e._blurs_to_ignore-=1}),e.$field.bind("keypress cut paste input",function(){e._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var t=this,n=e("<div></div>"),i=e.extend({selected_date:this.get_selected_datetime()},this.options.calendar);return this.options.class_name?n.addClass(this.options.class_name):(n.css("position","absolute"),n.css("z-index",1e3)),"bottom"===this.options.position?(n.css("left",this.$field.offset().left),n.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(n.css("left",this.$field.offset().left+this.$field.width()+20),n.css("top",this.$field.offset().top)),n.hide(),this._get_surrounding_element().append(n),n.calendar_date_picker(i),n.mousedown(function(){t._in_time_field=!1,t._blurs_to_ignore+=1}),n.find("label").mousedown(function(e){t._in_time_field=!0,t._blurs_to_ignore+=1,e.stopPropagation()}),n.find("input").blur(function(){t._hide_calendar_or_refocus(),t._blurs_to_ignore-=1}),t._blurs_to_ignore=0,n.bind("calendar_date_picker:date_selected",function(e,n){if(!t._in_manual_edit){var i=t.options.format_callback(n);i!==t.$field.val()&&(t.$field.val(i),t.$field.trigger("input"),t.options.calendar.time_text||(t._hide_calendar(),t._focus_next()))}}),n.find(".time input").bind("keydown",function(n){13===n.keyCode&&(e(this).blur(),t._hide_calendar())}),this.$calendar=n,n.fadeIn(),this.options.open_calendar_callback&&this.options.open_calendar_callback(),this.$calendar},_hide_calendar:function(){this.$calendar&&(this.$calendar.fadeOut(function(){e(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback())},_focus_next:function(){var e=this.$field.parents("form:eq(0)").find(":input"),t=e.index(this.$field);t>-1&&t+1<e.length&&e.eq(t+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var e=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){e._in_time_field?e.$calendar&&e.$calendar.length&&e.$calendar.find("input").focus():e.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0,this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime()),this._in_manual_edit=!1},get_selected_datetime:function(){var e=this.$field.val();return this.options.parse_callback(e)},_get_surrounding_element:function(){return e(this.options.surrounding_element?this.options.surrounding_element:"body")}})}(jQuery),function(){$(".field.search.location-search").livequery(function(){var e=$(this);e.on("livesearch_selector:select",function(){$(this).siblings("span.input-tip").hide(),$(this).parent().siblings("span.input-tip").hide(),$(this).trigger("shifted")}),e.on("livesearch_selector:unselect",function(){$(this).siblings("span.input-tip").show(),$(this).parent().siblings("span.input-tip").show(),$(this).trigger("shifted")}),e.livesearch_selector({url:e.data("searchUrl"),cancel_copy:"",process_data:function(){return{term:this.$elem.val()}},process_results:function(e){return _.map(e.locations,function(e){return[e.short_name,e.id]})}})}),$("input.date").livequery(function(){var e=$(this);e.datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},class_name:"absolute z_top",parse_callback:function(e){var t=moment(e,"l");return t.isValid()?t.toDate():void 0},format_callback:function(t){return e.closest(".js-date-field").find(".js-hidden-calendar-input").val(t?moment(t).format("YYYY-MM-DD"):""),t?moment(t).format("l"):""}})}),$("input.datetime").livequery(function(){var e=$(this),t=e.data("options")||{};e.datetime_picker_field($.extend(!0,{calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:I18n.t("onloads.initializers.forms.Time")},class_name:"absolute z_top",position:e.is(".position_calendar_below")?"bottom":"right",parse_callback:function(e){var t=moment(e,"l LT");return t.isValid()?t.toDate():void 0},format_callback:function(t){return e.closest(".js-datetime-field").find(".js-hidden-calendar-input").val(t?moment(t).format("YYYY-MM-DD HH:mm:ss Z"):""),t?moment(t).format("l LT"):""}},t))}),$(".js-calendar-picker").livequery(function(){var e,t=$(this),n=t.find('input[type="hidden"]'),i=t.find(".calendar"),r=i.data("options")||{};i.on("calendar_date_picker:date_selected",function(e,t){t?n.val(moment(t).format("YYYY-MM-DD HH:mm:ss Z")):n.val(""),n.trigger("change")}),""!==n.val()&&(e=moment(n.val(),"YYYY-MM-DD HH:mm:ss Z").toDate()),i.calendar_date_picker(_.extend({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:I18n.t("onloads.initializers.forms.Time"),selected_date:e},r)).data("calendar_date_picker")}),function(){$("form ul.js-sortable, form ol.js-sortable, form tbody.js-sortable").livequery(function(){var e=$(this),t=!1;e.find(".move").length&&(t=".move"),e.find(".move").click(function(e){e.preventDefault()}),e.sortable({containment:"document",axis:"y",handle:t,update:function(){e.find("input.position").each(function(e){$(this).val(e+1)})}}),e.closest("form").submit(function(){e.find("input.position").each(function(e){$(this).val(e+1)})})})}()}(),function(){$(function(){$(document).on("mouseover","li.menu-dropdown",function(){$(this).find(".menu-submenu").show()}),$(document).on("mouseout","li.menu-dropdown",function(){$(this).find(".menu-submenu").hide()}),$(document).on("click",".hit-list li",function(){var e=$(this).find("a.target");e.length&&(window.location=e.attr("href"))})})}(),function(){$(function(){function e(e){var t=new URI(e).domain();return""===t||t===new URI(window.location.href).domain()}$(document).ajaxSend(function(t,n,i){"GET"!==i.type&&e(i.url)&&n.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}),$("form[data-ksrjson]").livequery(function(){var e=$([]);$(this).attr("data-target")?e=$($(this).attr("data-target")):$(this).closest(".ajax-container").length?e=$(this).closest(".ajax-container"):$(this).closest(".modal_dialog").length>0&&(e=$(this)),e.length>0&&KsrJSON.enable_form($(this),e)}),$(document).on("click","a[data-ksrjson]",function(e){var t=$(this),n=$(t.attr("data-target"));return e.preventDefault(),0===n.length&&(n=t.closest(".ajax-container")),0===n.length?!0:KsrJSON.get(t.attr("href"),t.attr("data-ksrmethod"),n,this)})})}(),function(e,t){"object"==typeof exports&&exports?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Mustache={})}(this,function(e){function t(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return h.call(e,t)}function r(e){return!i(m,e)}function o(e){return String(e).replace(/[&<>"'\/]/g,function(e){return g[e]})}function a(t,i){function o(){if(k&&!$)for(;g.length;)delete m[g.pop()];else g=[];k=!1,$=!1}function a(e){if("string"==typeof e&&(e=e.split(v,2)),!p(e)||2!==e.length)throw new Error("Invalid tags: "+e);u=new RegExp(n(e[0])+"\\s*"),d=new RegExp("\\s*"+n(e[1])),f=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var u,d,f,h=[],m=[],g=[],k=!1,$=!1;a(i||e.tags);for(var x,j,C,S,T,D,I=new l(t);!I.eos();){if(x=I.pos,C=I.scanUntil(u))for(var E=0,A=C.length;A>E;++E)S=C.charAt(E),r(S)?g.push(m.length):$=!0,m.push(["text",S,x,x+1]),x+=1,"\n"===S&&o();if(!I.scan(u))break;if(k=!0,j=I.scan(w)||"name",I.scan(_),"="===j?(C=I.scanUntil(y),I.scan(y),I.scanUntil(d)):"{"===j?(C=I.scanUntil(f),I.scan(b),I.scanUntil(d),j="&"):C=I.scanUntil(d),!I.scan(d))throw new Error("Unclosed tag at "+I.pos);if(T=[j,C,x,I.pos],m.push(T),"#"===j||"^"===j)h.push(T);else if("/"===j){if(D=h.pop(),!D)throw new Error('Unopened section "'+C+'" at '+x);if(D[1]!==C)throw new Error('Unclosed section "'+D[1]+'" at '+x)}else"name"===j||"{"===j||"&"===j?$=!0:"="===j&&a(C)}if(D=h.pop())throw new Error('Unclosed section "'+D[1]+'" at '+I.pos);return c(s(m))}function s(e){for(var t,n,i=[],r=0,o=e.length;o>r;++r)t=e[r],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function c(e){for(var t,n,i=[],r=i,o=[],a=0,s=e.length;s>a;++a)switch(t=e[a],t[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],r=o.length>0?o[o.length-1][4]:i;break;default:r.push(t)}return i}function l(e){this.string=e,this.tail=e,this.pos=0}function u(e,t){this.view=null==e?{}:e,this.cache={".":this.view},this.parent=t}function d(){this.cache={}}var f=Object.prototype.toString,p=Array.isArray||function(e){return"[object Array]"===f.call(e)},h=RegExp.prototype.test,m=/\S/,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},_=/\s*/,v=/\s+/,y=/\s*=/,b=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},l.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},u.prototype.push=function(e){return new u(e,this)},u.prototype.lookup=function(e){var n,i=this.cache;if(e in i)n=i[e];else{for(var r,o,a=this;a;){if(e.indexOf(".")>0)for(n=a.view,r=e.split("."),o=0;null!=n&&o<r.length;)n=n[r[o++]];else"object"==typeof a.view&&(n=a.view[e]);if(null!=n)break;a=a.parent}i[e]=n}return t(n)&&(n=n.call(this.view)),n},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=a(e,t)),i},d.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof u?t:new u(t);return this.renderTokens(i,r,n,e)},d.prototype.renderTokens=function(n,i,r,o){function a(e){return u.render(e,i,r)}for(var s,c,l="",u=this,d=0,f=n.length;f>d;++d)switch(s=n[d],s[0]){case"#":if(c=i.lookup(s[1]),!c)continue;if(p(c))for(var h=0,m=c.length;m>h;++h)l+=this.renderTokens(s[4],i.push(c[h]),r,o);else if("object"==typeof c||"string"==typeof c)l+=this.renderTokens(s[4],i.push(c),r,o);else if(t(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");c=c.call(i.view,o.slice(s[3],s[5]),a),null!=c&&(l+=c)}else l+=this.renderTokens(s[4],i,r,o);break;case"^":c=i.lookup(s[1]),(!c||p(c)&&0===c.length)&&(l+=this.renderTokens(s[4],i,r,o));break;case">":if(!r)continue;c=t(r)?r(s[1]):r[s[1]],null!=c&&(l+=this.renderTokens(this.parse(c),i,r,c));break;case"&":c=i.lookup(s[1]),null!=c&&(l+=c);break;case"name":c=i.lookup(s[1]),null!=c&&(l+=e.escape(c));break;case"text":l+=s[1]}return l},e.name="mustache.js",e.version="1.0.0",e.tags=["{{","}}"];var k=new d;e.clearCache=function(){return k.clearCache()},e.parse=function(e,t){return k.parse(e,t)},e.render=function(e,t,n){return k.render(e,t,n)},e.to_html=function(n,i,r,o){var a=e.render(n,i,r);return t(o)?void o(a):a},e.escape=o,e.Scanner=l,e.Context=u,e.Writer=d}),function(){function e(e){var t=$("#template-"+e.replace(/\//g,"_"));if(!t.length)throw"Could not find template: "+e;return $.trim(t.html())}function t(t){var n={};return _.isString(t)&&(t=[t]),_.isArray(t)?(_.each(t,function(t){n[t]=e(t)}),n):void 0}function n(){return function(e,t){return t(I18n.t(e,this))}}function i(i,o,a){var s=r[i]||function(e){return e},c=e(i),l=t(a);return Mustache.render(c,$.extend({t:n},s(o)),l)}var r={};root.render=i,root.presenters=r}(),function(){$(function(){$(".render_mustache").livequery(function(){var e=$(this),t=_.extend(e.data("data"),e.data("extend")),n=t,i=e.data("partials")?e.data("partials").split(","):void 0,r=e.data("template");e.append(render(r,n,i))})})}(),function(e){e.support.fontFace=function(){var e,t,n=document,i=n.head||n.getElementsByTagName("head")[0]||docElement,r=n.createElement("style"),o=n.implementation||{hasFeature:function(){return!1}};return r.type="text/css",i.insertBefore(r,i.firstChild),e=r.sheet||r.styleSheet,(t=o.hasFeature("CSS2","")?function(t){if(!e||!t)return!1;var n=!1;try{e.insertRule(t,0),n=!/unknown/i.test(e.cssRules[0].cssText),e.deleteRule(e.cssRules.length-1)}catch(i){}return n}:function(t){return e&&t?(e.cssText=t,0!==e.cssText.length&&!/unknown/i.test(e.cssText)&&0===e.cssText.replace(/\r+|\n+/g,"").indexOf(t.split(" ")[0])):!1})('@font-face { font-family: "font"; src: "font.ttf"; }')}}(jQuery),function(){$(function(){var e=$(document).children();$.support.fontFace()||e.removeClass("fontface")})}(),$(function(){$.fn.aria_set_visible=function(){return $(this).attr("aria-expanded","true").attr("aria-hidden","false"),this},$.fn.aria_set_hidden=function(){return $(this).attr("aria-expanded","false").attr("aria-hidden","true"),this},$.fn.aria_find_focusable_items=function(){return $(this).find(":focusable")},$.fn.aria_focus_first_element=function(){var e,t=$(this).aria_find_focusable_items();return t.length&&(e=t[0],e.focus()),this},$.fn.aria_activate_keyboard_tabindex=function(){var e=$(this),t=e.aria_find_focusable_items();return t.length&&e.on("keydown.aria_keyboard",function(n){e.aria_focus_next(n,t)}),this},$.fn.aria_deactivate_keyboard_tabindex=function(){return $(this).unbind("keydown.aria_keyboard"),this},$.fn.aria_focus_next=function(e,t){var n=e.keyCode,i=n===KEY.UP||n===KEY.DOWN,r=$(":focus")[0],o=$.inArray(r,t);if(-1!==o&&("textarea"!==r.tagName.toLowerCase()||!i)){if(n===KEY.TAB||i){e.preventDefault();var a;a=e.shiftKey||n===KEY.UP?$(t[o-1]):$(t[o+1]),"undefined"!=typeof a&&a.focus()}return this}}}),define_namespace(".NS_banners__social_prompt",function(e){var t=e.data("url");t&&$.ajax({url:oauth_url(t),type:"get",success:function(t){var n=t.remotely_followed_count;n>0&&(e.find(".js-friend-count").html(n),e.removeClass("banner--is-hidden"))}})}),function(e){function t(t){t.each(function(){var t=e(this),n=t.find("option:selected");t.siblings(".title").text(n.data("altLabel")||n.text())})}e.fn.ksrSelect=function(){var n=e(this);n.find(".js-ksr-select").livequery(function(){t(e(this).find("select"))}),n.on("focus blur",".js-ksr-select select",function(){e(this).parent().toggleClass("is-focus")}),n.on("change",".js-ksr-select select",function(){t(e(this))}),n.on("keydown",".ksr-icon__arrow-down, .ss-delete",function(t){var n=e(this),i=t.keyCode;(i===KEY.ENTER||i===KEY.SPACE)&&(t.preventDefault(),n.hasClass("ss-delete")&&n.parent().find(".ksr-icon__arrow-down").focus(),n.click())})},e.fn.ksr_val=function(n){var i=e(this);if(void 0!==n){var r=i.val(n);return t(i),r}return i.val()}}(jQuery),$(function(){$(document).ksrSelect()}),function(){define_namespace(".NS_layouts__admin_navigation",function(e){function t(){var e=$("#admin_wrap");0!==s.offsetParent().scrollTop()&&s.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad"),s.trigger("opened"),s.slideDown(function(){a.height(e.height())})}function n(){s.slideUp()}function i(){s.is(":hidden")?t():n()}var r=$("a.open_panel",e),o=$("#admin_panel"),a=$("#admin-nav-prop"),s=$("#admin_panel_wrap");e.on("ksr_admin:nav_open",function(){s.is(":hidden")&&i()}),r.click(function(e){i(),e.preventDefault()}),$(window).on("keydown",function(e){if(e.which===KEY.SPACE&&!$(e.target).is(":input")&&!$(e.target).is("[contenteditable]"))if(s.is(":visible")){var t,n=o.find("details[open]").add("#running-board-wrap"),r=0;n.each(function(e){window.scrollY>=this.offsetTop-a.height()&&(r=e)}),t=r===n.length-1?n.get(0):n.get(r+1),t&&window.scrollTo(0,t.offsetTop-a.height()),e.preventDefault()}else i()}),"#admin_panel"===window.location.hash&&($.fx.off=!0,i("local"),$.fx.off=!1)})}(),function(){$(function(){var e=$(".js-mega-footer");e.length&&!function(){function t(e){e>9||(s.removeClass(o[a]),a+=1,a===o.length&&(a=0),s.addClass(o[a]),setTimeout(function(){t(e+1)},100))}var n,i=3,r=0,o=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],a=0,s=$("span.scissors",e);s.click(function(){n||(n=$(".js-mega-footer__content").width()/i),r+=1,t(0),s.animate({marginLeft:n*r},1e3,function(){r===i&&(s.hide(),e.height(e.height()),e.addClass("gone"),$("html").addClass("gone"),$(".js-mini-footer").hide(),e.find(".js-mega-footer__content").animate({
marginTop:[e.height(),"easeInOutExpo"],opacity:0},1e3,function(){$(".js-mega-footer__newsletter-signup").fadeIn()}))})}),$(document).on("change",".js-change-language",function(){$(this).submit()})}()})}(),function(e){e.support.transitionEvent=function(){return"undefined"!=typeof root.TransitionEvent}}(jQuery),function(e){var t=".serialScroll",n=e.serialScroll=function(t){return e(window).serialScroll(t)};n.defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0},e.fn.serialScroll=function(i){return this.each(function(){function r(e){e.data+=b,o(e,this)}function o(e,t){isNaN(t)&&(t=e.data);var n,i=e.type,r=f.exclude?c().slice(0,-f.exclude):c(),o=r.length-1,u=r[t],p=f.duration;if(i&&e.preventDefault(),w&&(s(),d=setTimeout(a,f.interval)),!u){if(n=0>t?0:o,b!==n)t=n;else{if(!f.cycle)return;t=o-n}u=r[t]}!u||f.lock&&_._scrollable().is(":animated")||i&&f.onBefore&&f.onBefore(e,u,_,c(),t)===!1||(f.stop&&_._scrollable().stop(!0),f.constant&&(p=Math.abs(p/h*(b-t))),_.scrollTo(u,p,f),l("notify",t))}function a(){l("next")}function s(){clearTimeout(d)}function c(){return e(y,v)}function l(e){_.trigger(e+t,[].slice.call(arguments,1))}function u(e){if(!isNaN(e))return e;for(var t,n=c();-1===(t=n.index(e))&&e!==v;)e=e.parentNode;return t}var d,f=e.extend({},n.defaults,i),p=f.event,h=f.step,m=f.lazy,g=f.target?this:document,_=e(f.target||this,g),v=_[0],y=f.items,b=f.start,w=f.interval,k=f.navigation;v&&(m||(y=c()),(f.force||w)&&o({},b),e(f.prev||[],g).bind(p,-h,r),e(f.next||[],g).bind(p,h,r),v.ssbound||_.bind("prev"+t,-h,r).bind("next"+t,h,r).bind("goto"+t,o),w&&_.bind("start"+t,function(e){w||(s(),w=!0,a())}).bind("stop"+t,function(){s(),w=!1}),_.bind("notify"+t,function(e,t){var n=u(t);n>-1&&(b=n)}),v.ssbound=!0,f.jump&&(m?_:c()).bind(p,function(e){o(e,u(e.target))}),k&&(k=e(k,g).bind(p,function(e){e.data=Math.round(c().length/k.length)*k.index(this),o(e,this)})))})}}(jQuery),function(){function e(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}var t,n={};t=e(navigator.userAgent),t.browser&&(n[t.browser]=!0,n.version=t.version),n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0),root.browser=n,"function"==typeof jQuery&&(jQuery.browser=n)}(),function(){var e=this,t={};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.formatters=t):e.formatters=e.formatters||t,t=_.extend(e.formatters||{},{currency_symbol:function(e){return this.currency_symbol_mappings[e]},money:function(e,t){t=_.defaults({},t,{separator:I18n.t("number.currency.format.separator"),delimiter:I18n.t("number.currency.format.delimiter"),format:I18n.t("number.currency.format.format")}),isNaN(t.precision)&&(t.precision=I18n.t("number.currency.format.precision")),"truncate_zeros"===t.type&&(t.precision=parseFloat(e)%1===0?0:2);var n=this.interpolate(t.format,{n:this.format_number(e,t),u:this.currency_symbol(t.currency)});return n},shorter_money:function(e,t){return 100>e?t.precision=2:(t.precision=0,e=Math.floor(e)),this.money(e,t)},percent:function(e,t){return t=_.defaults({},t,{delimiter:I18n.t("number.percentage.format.delimiter"),format:I18n.t("number.percentage.format.format")}),this.interpolate(t.format,{n:this.format_number(e,t)})},format_number:function(e,t){t=_.defaults({},t,{separator:I18n.t("number.format.separator"),delimiter:I18n.t("number.format.delimiter")}),isNaN(t.precision)?t.precision=I18n.t("number.format.precision"):t.precision=Math.abs(t.precision);var n,i,r;return n=t.precision||t.round?Math.abs(e).toFixed(t.precision):parseInt(Math.abs(e),10).toString(),i=String(parseInt(n,10)),r=i.split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+t.delimiter.split("").reverse().join("")).split("").reverse().join(""),0>e&&(r="-"+r),t.precision&&(r+=t.separator+Math.abs(n-i).toFixed(t.precision).slice(2)),r},interpolate:function(e,t){return e.replace(/\%([\w]+)/g,function(e,n){return t[n]||""})},pluralize:function(e,t){function n(e,n){var i=a[l+(1===t?0:1)-l%2];return"undefined"!=typeof n&&(i=i.replace(/\(.*\)/,n)),i}function i(e,t){return t.toUpperCase()}for(var r,o=e,a=["zombie","zombies","cow()","ki(i?)ne","move","moves","sex","sexes","child","children","man","men","person","people","database","databases","quiz","quizzes","matrix","matrices","(vert|ind)ex","(vert|ind)ices","(^ox)","(^ox)en","(alias|status)","(alias|status)es","(octop|vir)us","(octop|vir)i","(cris|ax|test)is","(cris|ax|test)es","shoe","shoes","o","oes","bus","buses","(m|l)ouse","(m|l)ice","(x|ch|ss|sh)","(x|ch|ss|sh)es","movie","movies","series","series","([^aeiouy]|qu)y","([^aeiouy]|qu)ies","([lr])f","([lr])ves","tive","tives","hive","hives","([^f])fe","([^f])ves","(analy|ba|diagno|parenthe|progno|synop|the)sis","(analy|ba|diagno|parenthe|progno|synop|the)ses","([ti])um","([ti])a","news","news","([^s])","()s"],s=_.map(a,function(e){return new RegExp(e+"$","i")}),c=!1,l=0;!c&&l<a.length;)l+=1,r=s[l],e.match(r)&&(c=!0,o=e.replace(r,n),e.match(/^[A-Z][^A-Z]+$/)?o=o.replace(/^([a-z])/,i):e.match(/^[A-Z]+$/)&&(o=o.toUpperCase()));return o},capitalize:function(e){return"string"!=typeof e?"":e.replace(/^(\w)|\s(\w)/g,function(e){return e.toUpperCase()})},to_sentence:function(e,t){switch(t=_.defaults({},t,{words_connector:I18n.t("support.array.words_connector"),two_words_connector:I18n.t("support.array.two_words_connector"),last_word_connector:I18n.t("support.array.last_word_connector")}),e.length){case 0:return"";case 1:return String(e[0]);case 2:return e[0]+t.two_words_connector+e[1];default:return e.slice(0,-1).join(t.words_connector)+t.last_word_connector+_.last(e)}},paragraphize:function(e){return e=_.escape(e),e=e.replace(/\r\n?/g,"\n"),e=e.trim(),e.length>0&&(e=e.replace(/\n{2,}/g,"</p><p>"),e=e.replace(/\n/g,"<br />"),e="<p>"+e+"</p>"),e},time_ago_in_words:function(e){if(!e)return"?";("number"==typeof e||"string"==typeof e&&e.match(/^\d+$/))&&(e=parseInt(1e3*e,10));var n,i,r,o=moment(e),a=Math.floor(moment().diff(o)/1e3);return $.each(t.distance_date_intervals,function(e,t){return n=t,n.min>a?!1:void 0}),i={m:Math.round(a/60),h:Math.round(a/3600),d:Math.round(a/86400),t:o.format("MMMM D"),y:o.format("LL")},r=I18n.t(n.i18n_key,{count:i[n.count_key]}),r.match(/NaN|undefined/)?"":r}})}(),function(){function e(e,t){t.blurb||(t.blurb=e.blurb),t.name||(t.name=e.name),t.feature_image_url=t.feature_image_attributes.image_urls.baseball_card,t["has_background_image?"]=!_.isEmpty(t.background_image_attributes),t["has_feature_image?"]=!!t.feature_image_attributes.id,t["hide_background_black?"]=t["has_background_image?"]||t.background_color,t.border_color="",t.text_color&&t["has_feature_image?"]&&!t["has_background_image?"]&&(t.border_color="background-color: #"+t.text_color+";"),t.text_color_style="",t.text_color&&(t.text_color_style="color: #"+t.text_color+";"),t.background_color_style="",t.background_color&&(t.background_color_style="background-color: #"+t.background_color+";"),t.card_style="",t.text_color&&t["has_feature_image?"]&&!t["has_background_image?"]&&(t.card_style+=t.text_color_style),t.background_color&&t["has_feature_image?"]&&!t["has_background_image?"]&&(t.card_style+=t.background_color_style),t.card_background_style="",t["has_background_image?"]&&(t.card_background_style="background-image: url("+t.background_image_attributes.image_urls.baseball_card+"); opacity: "+t.background_image_opacity+";")}presenters["projects/_baseball_card_tall"]=function(t){var n=["live","successful","canceled","failed"],i=[];return t.creator_name=t.creator.name,t.percent_raised=t.pledged/t.goal*100,t.percent_raised_rounded=Math.round(t.percent_raised),t.percent_raised_to_100=Math.min(100,t.percent_raised),t.formatted_percent_raised=formatters.percent(t.percent_raised,{precision:0}),t.formatted_money=formatters.money(t.pledged,{precision:0,currency:t.currency}),t.formatted_goal=formatters.money(t.goal,{precision:0,currency:t.currency}),t.formatted_backers_count=formatters.format_number(t.backers_count,{precision:0}),t.count=t.backers_count,t.javascript_deadline=1e3*t.deadline,t.javascript_state_changed_at=1e3*t.state_changed_at,t.formatted_deadline=moment(t.javascript_deadline).format("ll"),t.formatted_state_changed_at=moment(t.javascript_state_changed_at).format("ll"),e(t,t.profile),$.each(n,function(){var e=String(this);t[e+"?"]=t.state===e}),t.url_ref?t.url_with_ref=URI(t.urls.web.project).setSearch("ref",t.url_ref).toString():t.url_with_ref=t.urls.web.project,t["live_or_successful?"]="live"===t.state||"successful"===t.state,t["video?"]=null!==t.video&&void 0!==t.video,t["potd_today?"]=moment(1e3*t.potd_at).isSame(new Date,"day"),t["staff_pick?"]=t.staff_pick,t["friends_backing?"]=t.friends&&t.friends.length>0,t["friends_backing?"]&&(t.truncated_friends=t.friends.slice(0,2),i=_.map(t.truncated_friends,function(e){return"<strong>"+_.escape(e.name.split(" ")[0])+"</strong>"}),i.length<t.friends.length&&i.push("<strong>"+I18n.t("presenters.projects.baseball_card_tall.amount_more",{count:t.friends.length-i.length})+"</strong>"),t.escaped_sentence=I18n.t("presenters.projects.baseball_card_tall.friends_are_backers",{friends:formatters.to_sentence(i),count:i.length})),t.json=JSON.stringify(t),t.location_json=JSON.stringify(t.location),t.baseball_card_size||(t.baseball_card_size="tall"),t}}(),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var i=d[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=l(),i=n._rgba=[];return t=t.toLowerCase(),h(c,function(e,r){var o,a=r.re.exec(t),s=a&&r.parse(a),c=r.space||"rgba";return s?(o=n[c](s),n[u[c].cache]=o[u[c].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,o.transparent),n):o[t]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=l.support={},p=e("<p>")[0],h=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=p.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(r,a,s,c){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var d=this,f=e.type(r),p=this._rgba=[];return a!==t&&(r=[r,a,s,c],f="array"),"string"===f?this.parse(i(r)||o._default):"array"===f?(h(u.rgba.props,function(e,t){p[t.idx]=n(r[t.idx],t)}),this):"object"===f?(r instanceof l?h(u,function(e,t){r[t.cache]&&(d[t.cache]=r[t.cache].slice())}):h(u,function(t,i){var o=i.cache;h(i.props,function(e,t){if(!d[o]&&i.to){if("alpha"===e||null==r[e])return;d[o]=i.to(d._rgba)}d[o][t.idx]=n(r[e],t,!0)}),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,i.from&&(d._rgba=i.from(d[o])))}),this):void 0},is:function(e){var t=l(e),n=!0,i=this;return h(u,function(e,r){var o,a=t[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],h(r.props,function(e,t){return null!=a[t.idx]?n=a[t.idx]===o[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=l(e),r=i._space(),o=u[r],a=0===this.alpha()?l("transparent"):this,s=a[o.cache]||o.to(a._rgba),c=s.slice();return i=i[o.cache],h(o.props,function(e,r){var o=r.idx,a=s[o],l=i[o],u=d[r.type]||{};null!==l&&(null===a?c[o]=l:(u.mod&&(l-a>u.mod/2?a+=u.mod:a-l>u.mod/2&&(a-=u.mod)),c[o]=n((l-a)*t+a,r)))}),this[r](c)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=l(t)._rgba;return l(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),c=Math.min(i,r,o),l=s-c,u=s+c,d=.5*u;return t=c===s?0:i===s?60*(r-o)/l+360:r===s?60*(o-i)/l+120:60*(i-r)/l+240,n=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,n,d,null==a?1:a]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},h(u,function(i,r){var o=r.props,a=r.cache,c=r.to,u=r.from;l.fn[i]=function(i){if(c&&!this[a]&&(this[a]=c(this._rgba)),i===t)return this[a].slice();var r,s=e.type(i),d="array"===s||"object"===s?i:arguments,f=this[a].slice();return h(o,function(e,t){var i=d["object"===s?e:t.idx];null==i&&(i=f[t.idx]),f[t.idx]=n(i,t)}),u?(r=l(u(f)),r[a]=f,r):l(f)},h(o,function(t,n){l.fn[t]||(l.fn[t]=function(r){var o,a=e.type(r),c="alpha"===t?this._hsla?"hsla":"rgba":i,l=this[c](),u=l[n.idx];return"undefined"===a?u:("function"===a&&(r=r.call(this,u),a=e.type(r)),null==r&&n.empty?this:("string"===a&&(o=s.exec(r),o&&(r=u+parseFloat(o[2])*("+"===o[1]?1:-1))),l[n.idx]=r,this[c](l)))})})}),l.hook=function(t){var n=t.split(" ");h(n,function(t,n){e.cssHooks[n]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=l(o||r),!f.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(c){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(c){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=l(t.elem,n),t.end=l(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function i(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,s){var c=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",l=c.children?a.find("*").addBack():a;l=l.map(function(){var t=e(this);return{el:t,start:n(this)}}),o=function(){e.each(r,function(e,n){t[n]&&a[n+"Class"](t[n])})},o(),l=l.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",s),l=l.map(function(){var t=this,n=e.Deferred(),i=e.extend({},c,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,l.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),c.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(i,r,o,a,s){return"boolean"==typeof r||r===t?o?e.effects.animateClass.call(this,r?{add:i}:{remove:i},o,a,s):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},r,o,a)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function i(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,o;for(o=0;o<i.length;o++)null!==i[o]&&(r=e.data(n+i[o]),r===t&&(r=""),e.css(i[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=n.complete,s=n.mode;(r.is(":hidden")?"hide"===s:"show"===s)?(r[s](),i()):a.call(r[0],n,i)}var n=i.apply(this,arguments),r=n.mode,o=n.queue,a=e.effects.effect[n.effect];return e.fx.off||!a?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(){$(function(){function e(e){if(!$.support.transitionEvent())return 0;var t=e.css("transition-duration");return/ms$/.test(t)?parseFloat(t,10)||0:1e3*parseFloat(t,10)||0}function t(e,t,n,i){e.which===KEY.DOWN&&n.is(".selected")?(i.find(":tabbable:first").focus(),e.preventDefault()):e.which!==KEY.DOWN||n.is(".selected")?e.which===KEY.UP&&n.is(".selected")?(t.click(),e.preventDefault()):e.which===KEY.SPACE&&(t.click(),e.preventDefault()):(t.click(),e.preventDefault())}function n(e,t,n){var i,r,o=$(e.target),a=n.find(":tabbable"),s=a.length,c=a.index(o);e.which===KEY.LEFT||e.which===KEY.RIGHT?(r=e.which===KEY.LEFT?-1:1,i=n.find(".js-dropdown_group"),c=i.index(o.closest(i)),i.length>0&&-1!==c&&c+r>=0&&c+r<i.length&&(c+=r,i.eq(c).find(":tabbable:first").focus()),e.preventDefault()):e.which===KEY.UP&&0===c?(t.focus(),e.preventDefault()):e.which===KEY.DOWN&&c===s-1?e.preventDefault():(e.which===KEY.DOWN||e.which===KEY.UP)&&(r=e.which===KEY.DOWN?1:-1,a.eq(c+r).focus(),e.preventDefault())}function i(e){N=e,N?I.addClass("selecting"):(I.removeClass("selecting"),D.find(".js-livesearch-result").removeClass("selected"))}function r(){var e=$(".js-header-livesearch"),t=$(".js-livesearch-wrap"),n=e.find(".js-search-term"),i=".js-livesearch-container",r=$(i),o=$(".js-livesearch-results"),a=r.find(".header"),s=r.find("p.footer"),c=e.find(".ksr-icon__close");n.trigger("livesearch:cancel"),n.val(""),c.hide(),s.hide(),t.slideUp(function(){o.empty(),a.empty(),s.empty()}),$("body").removeClass("searching")}function o(){D.find(".js-livesearch-result").length<B?C.find(".arrow").addClass("hide"):(C.find(".arrow").removeClass("hide"),0===D.data("cur_page")&&D.find(".js-prev").addClass("hide"),D.data("cur_page")===D.data("last_page")&&D.find(".js-next").addClass("hide"))}function a(e){e.preventDefault(),j.removeClass("submitting-non-ajax")}function s(e){e?j.off("submit",a):j.on("submit",a)}function c(e,t){return-1!==e.attr("class").indexOf(t)}function l(e,t){e.attr("class",function(e,n){return n+" "+t})}function u(e,t){e.attr("class",function(e,n){var i=new RegExp(t,"g");return n.replace(i,"").trim()})}function d(e,t){t.addClass("livesearch-list"),_.each(e.projects,function(e){e.url_ref="nav_search",t.append('<li class="livesearch-result js-livesearch-result">'+render("projects/_baseball_card_tall",e,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</li>")})}function f(e){F.html(e.header),e.footer?(L.html(e.footer),L.show()):(L.empty(),L.hide())}function p(e,t,n){e.projects.length>B?(A.html(t),A.prop("href",n),A.removeClass("hidden"),P.addClass("hidden")):(P.html(I18n.t("onloads.views.layouts.navigation.Displaying_all_amount_results",{count:e.projects.length})),P.removeClass("hidden"),A.addClass("hidden"))}function h(e){I.html(e),$("body").addClass("searching"),C.slideDown("fast"),I.trigger("goto",[0]),D.data("cur_page",0),D.data("last_page",Math.floor((e.children().length-1)/B)),o(),i(!1)}function m(){clearTimeout(spinnerTimeout),c(O,"hide")||(l(O,"hide"),u(M,"hide"))}function g(){E.addClass("hide")}function v(){E.removeClass("hide")}function y(){return $.getJSON(q)}function b(e){var t=$("<ul></ul>");t.addClass("livesearch-list");var n=q+"?ref=nav_search_no_results&sort=newest",i=I18n.t("onloads.views.layouts.navigation.Show_more_term_projects",{term:$(".js-livesearch-no-results").data("filler-type")});$noResultsText=$("<b></b>"),$noResultsText.addClass("h3 center block").html(I18n.t("onloads.views.layouts.navigation.Oops_looks_like_we_couldnt_find_any_search_results")),$explorePopularText=$("<div></div>"),$explorePopularText.addClass("h4 center m4").html(I18n.t("onloads.views.layouts.navigation.Or_explore_some_of_our_most_popular_projects")),E.text()||E.append($noResultsText,$explorePopularText),v(),d(e,t),f(e),p(e,i,n),h(t)}function w(e){var t=$("<ul></ul>");t.addClass("livesearch-list");var n=e.search_url,i=I18n.t("onloads.views.layouts.navigation.See_all_results_for_term",{term:S.val()});g(),d(e,t),f(e),p(e,i,n),h(t)}function k(e){E.is(":visible")?m():y().then(function(e){b(e),m()})}if($(".js-discover-link").click(function(){track("About KSR Navigation Discover Click")}),$(".js-start-link").click(function(){track("About KSR Navigation Start Click")}),$(".js-about-us-link").click(function(){track("About KSR Navigation About Us Click")}),"undefined"!=typeof current_user&&current_user.on_change("name",function(e){$(".js-user-menu .user_context strong").text(e.name)}),KSR.store.getItem("banner_country_projects_hide")||($(".country_tout").removeClass("hidden"),KSR.store.getItem("banner_country_projects_animated")?($(".country_tout").css({"margin-top":"0px"}),$(".country_tout").addClass("expanded")):$(".country_tout").delay(1200).animate({marginTop:"0px"},400,"easeOutExpo",function(){$(this).addClass("expanded"),KSR.store.setItem("banner_country_projects_animated",!0)})),$(".country_tout .close").click(function(){$(".country_tout").animate({"margin-top":"-40px"},400,"easeOutExpo"),$(".country_tout").removeClass("expanded"),$(".country_tout").addClass("hidden")}),$(".country_tout a, .country_tout .close").on("click",function(){KSR.store.setItem("banner_country_projects_hide",!0)}),$("#js-user_menu_dropdown").attr("aria-expanded","false").attr("aria-hidden","true"),$("#js-user_nav_select").attr("aria-haspopup","true").attr("aria-expanded","false"),$("#js-nav-secondary").attr("aria-hidden","true"),$.each($("#js-nav-secondary").find("a"),function(e,t){$(t).attr("tabindex","-1")}),$("#js-nav-search").attr("aria-hidden","true"),$(".js-search-term").attr("tabindex","-1"),$(".js-toggle-search").on("click",function(t){t.preventDefault();var n=$(".js-site-nav-container"),i=$("#js-nav-search"),o=$("#js-nav-primary"),a=$(".js-header-livesearch").find(".js-search-term"),s=e(i)+30;n.hasClass("site-nav--search-is-visible")?(r(),n.removeClass("site-nav--search-is-visible"),i.attr("aria-hidden","true"),o.attr("aria-hidden","false"),a.attr("tabindex","-1"),setTimeout(function(){o.find(".js-toggle-search").focus(),$(".js-searchbar").removeClass("site-nav__item--searchbar--visible")},s)):(n.addClass("site-nav--search-is-visible"),o.attr("aria-hidden","true"),i.attr("aria-hidden","false"),a.attr("tabindex","0"),setTimeout(function(){a.focus(),$(".js-searchbar").addClass("site-nav__item--searchbar--visible")},s))}),$(".js-tab-expand").click(function(e){e.preventDefault();var t=$(this),n=t.closest(".js-user_menu_dropdown"),i=!0;n.is("#menu-sub-me")?$("#menu-sub-me").trigger("user_dropdown:open"):(n.addClass("selected"),$(".js-user-dropdown").addClass("selected")),t.focus(),$("#js-user_menu_dropdown").attr("aria-expanded","true").attr("aria-hidden","false"),$("#js-user_nav_select").attr("aria-expanded","true"),n.find("span.count").remove(),$(document).on("click."+n.attr("id"),function(e){if(i)return void(i=!1);var t=$(e.target);t.parents(".dropdown-child").length||($(document).off("click."+n.attr("id")),n.removeClass("selected"),$(".js-user-dropdown").removeClass("selected"),$("#js-user_menu_dropdown").attr("aria-expanded","false").attr("aria-hidden","true"),$("#js-user_nav_select").attr("aria-expanded","false"))})}),$("#js-user_nav_select, .js-user-dropdown").on("keydown",function(e){var i=$(e.target),r=$(".js-user-dropdown"),o=$("#js-user_nav_select"),a=$(".js-user-dropdown");e.which===KEY.ESC?(o.click(),e.preventDefault()):i.is(o)?t(e,o,r,a):i.closest(a).length&&n(e,o,a)}),!($.browser.msie&&$.browser.version<=6||$("body.touchable").length)){var x,j=$(".js-header-livesearch"),C=$(".js-livesearch-wrap"),S=j.find(".js-search-term"),T=".js-livesearch-container",D=$(T),I=$(".js-livesearch-results"),E=$(".js-livesearch-no-results"),A=$(".js-livesearch-see-all-results"),P=$(".js-livesearch-displaying-results"),N=!1,M=S.siblings(".svg-icon__search"),O=S.siblings(".js-loading-spinner"),F=D.find(".header"),L=D.find("p.footer"),R=D.find(".js-close"),H=j.find(".ksr-icon__close"),B=4,q=$(".js-livesearch-no-results").data("filler-projects-url");I.serialScroll({items:".js-livesearch-result",lazy:!0,lock:!1,step:B,cycle:!1,duration:500,easing:"easeOutExpo"}),C.on("click",".js-next:not(.disabled)",function(){I.trigger("next"),D.data("cur_page",D.data("cur_page")+1),o(),N&&i(!1)}),C.on("click",".js-prev:not(.disabled)",function(){I.trigger("prev"),D.data("cur_page",D.data("cur_page")-1),o(),N&&i(!1)}),x=S.livesearch({minimum_characters:2,file_extension:"json",process_data:function(){return{term:$.trim(S.val()),ref:"nav_search"}}}).data("livesearch"),S.on("livesearch:searching",function(){spinnerTimeout=setTimeout(function(){l(M,"hide"),u(O,"hide")},750),s(!1)}),S.on("keypress keydown cut paste input",function(e){13!==e.keyCode&&(27===e.keyCode&&$(".js-toggle-search:first").click(),s(!1))}),S.on("livesearch:results livesearch:ajax_error",function(){s(!0)}),S.on("livesearch:ajax_error",function(){m()}),S.on("livesearch:results",function(e,t){t.projects&&t.projects.length?(w(t),m()):k(t)}),$(window).on("scroll",function(){C.is(":visible")&&$(window).scrollTop()>D.offset().top+D.height()&&r()}),$(document).click(function(e){$(e.target).closest(".js-livesearch-wrap").length||$(e.target).closest(".js-search-term, .site-nav__right").length||r()}),S.on("keypress cut paste input",function(){this.value?H.show():(H.hide(),r())}),H.on("click",function(){r(),S.focus()}),R.on("click",r),$(document).on("select",T+" .js-livesearch-result",function(){var e=$(this),t=D.find(".js-livesearch-result.selected").removeClass("selected");e.addClass("selected"),i(!0),e.index()>t.index()&&e.index()%B===0?I.trigger("goto",[e.index()]):e.index()<t.index()&&t.index()%B===0&&I.trigger("goto",[t.index()-B]),D.data("cur_page",Math.floor(e.index()/B)),o()}),S.on("keydown",function(e){var t,n=D.find("li.selected"),r=!!n.length;switch(e.keyCode){case KEY.UP:i(!1),e.preventDefault();break;case KEY.DOWN:r||D.find(".js-livesearch-result:first").trigger("select"),i(!0),e.preventDefault();break;case KEY.LEFT:if(!N)break;r?n.prev("li").trigger("select"):D.find(".js-livesearch-result:first").trigger("select"),e.preventDefault();break;case KEY.RIGHT:if(!N)break;r?n.next("li").trigger("select"):D.find(".js-livesearch-result:last").trigger("select"),e.preventDefault();break;case KEY.ENTER:if(!N)break;if(t=n.find("h2 strong a").attr("href"),!t)break;window.location=t,e.preventDefault();break;case KEY.ESC:i(!1),e.preventDefault()}})}})}(),define_namespace(".NS_layouts__notifications",function(e){function t(t){
var n=$(".ksr-banner__text",e);if(0!==n.length){var i=_.pairs(_.countBy($(".ksr-alert-box",e).map(function(){return $(this).data("category")}).get(),function(e){return e})),r=_.reduce(i,function(e,t){return e+t[1]},0),o=$(".js-cta",e),a=$(".ksr-banner__button.js-dismiss",e),s=$(".js-default-toggle",e);$(".js-banners-toggle",e);if(1===r&&t){n.html($(".ksr-alert-box .alert-content",e).html());var c=$(".ksr-alert-box .alert-cta")[0];c?(o.html(c),$("svg",o).removeClass("banner-icon"),o.show()):(o.html(""),o.hide());var l=$(".ksr-alert-box .alert-close",e);l.length?(a[0].setAttribute("href",l.attr("href")),a.show()):a.hide(),s.hide()}else{var u=_.map(i,function(e){return e[0]}).sort().map(function(e){return"<strong>"+I18n.t(e)+"</strong>"}),d="<strong>"+I18n.t("banners.title.alerts",{count:r})+"</strong>",f=formatters.to_sentence(u);n.html(I18n.t("banners.title.text",{alerts:d,categories:f})),$(".ksr-alert-title--urgent",e).text(I18n.t("banners.subtitles.urgent")),$(".ksr-alert-title--nonurgent",e).text(2===$(".alert-section",e).length?I18n.t("banners.subtitles.nonurgent.more"):I18n.t("banners.subtitles.nonurgent.less")),o.hide(),a.hide(),s.show()}$(".ksr-banner-buttons",e).show()}}t(!0),e.on("click",".js-dismiss",function(){function e(e){e.slideUp(200,function(){$(this).remove(),t(!1)})}var n=$(this),i=n.closest(".ksr-banner"),r=n.closest(".alert-wrap"),o=".ksr-alert-box";return e(1===i.find(o).length?i:1===r.find(o).length?r:n.closest(o)),$.post(n.attr("href"),{_method:"delete"}),!1}),e.on("click",".js-banners-toggle",function(){$(".ksr-banner",e).toggleClass("ksr-banner--open",500),$(".alert-container",e).toggleClass("alert-container--open",500)})}),function(){$(function(){function e(){r.find("#menu-me-backed").length&&r.find(".user-dropdown").addClass("backer"),r.find("#menu-me-created").length&&r.find(".user-dropdown").addClass("creator")}function t(t){var n=r.find("#menu-me-children");KSR.store.setItem("user_dropdown_backer_creator_columns_html",t),n.children(".NS_layouts__user_dropdown_backer_creator_columns").remove(),n.append(t),e()}function n(){var e=KSR.store.getItem("user_dropdown_backer_creator_columns_html");e&&(t(e),o=!0)}function i(e){a||(a=$.ajax({url:r.data("user_dropdown_backer_creator_columns_path"),type:"get",dataType:"html",data:{i18n:I18n.enabled},beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t(e),o=!0},complete:function(){e&&e(),a=!1}}))}var r=$(".NS_layouts__user_dropdown"),o=!1,a=!1;n(),e(),$(".js-user-menu-tab").on("user_dropdown:open",function(){var e=$(this);o?e.addClass("selected"):i(function(){e.addClass("selected")})}),$(".js-user-menu-tab, .js-user-menu-tab > a").one("click",function(){track("Account Menu Dropdown",{new_indicator_visible:$(this).find(".indicator").is(":visible")}),i()}),$(document).on("user_dropdown:refresh_from_remote",function(){i()}),$("body").is(".just_logged_out")&&KSR.store.removeItem("user_dropdown_backer_creator_columns_html")})}(),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},handleRemote:function(i){var r,o,a,s,c,l;if(n.fire(i,"ajax:before")){if(s=i.data("with-credentials")||null,c=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var u=i.data("ujs:submit-button");u&&(a.push(u),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);return l={type:r||"GET",data:a,dataType:c,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])?void i.trigger("ajax:send",e):!1},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(o)},s&&(l.xhrFields={withCredentials:s}),o&&(l.url=o),n.ajax(l)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!n.protocol||!n.host||t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=e("meta[name=csrf-token]").attr("content"),c=e("meta[name=csrf-param]").attr("content"),l=e('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';c===t||s===t||n.isCrossDomain(r)||(u+='<input name="'+c+'" value="'+s+'" type="hidden" />'),a&&l.attr("target",a),l.hide().append(u).appendTo("body"),l.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",i=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),i!==t&&e[n](i),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o,a=e(),s=n||"input,textarea",c=t.find(s);return c.each(function(){if(r=e(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&c.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");e.data("ujs:enable-with",e.html()),i!==t&&e.html(i),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableElement(t)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),o=r.data("method"),a=r.data("params"),s=i.metaKey||i.ctrlKey;if(!n.allowAction(r))return n.stopEverything(i);if(!s&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(s&&(!o||"GET"===o)&&!a)return!0;var c=n.handleRemote(r);return c===!1?n.enableElement(r):c.fail(function(){n.enableElement(r)}),!1}return o?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,a=e(this),s=a.data("remote")!==t;if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")==t&&(r=n.blankInputs(a,n.requiredInputSelector),r&&n.fire(a,"ajax:aborted:required",[r])))return n.stopEverything(i);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var c=n.fire(a,"ajax:aborted:file",[o]);return c||setTimeout(function(){n.enableFormElements(a)},13),c}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery);var swfobject=function(){function e(){if(!W&&document.getElementsByTagName("body")[0]){try{var e,t=_("span");t.style.display="none",e=L.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}W=!0;for(var i=B.length,r=0;i>r;r++)B[r]()}}function t(e){W?e():B[B.length]=e}function n(e){if(typeof F.addEventListener!=I)F.addEventListener("load",e,!1);else if(typeof L.addEventListener!=I)L.addEventListener("load",e,!1);else if(typeof F.attachEvent!=I)y(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function i(){var e=L.getElementsByTagName("body")[0],t=_(E);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",N);var n=e.appendChild(t);if(n){var i=0;!function o(){if(typeof n.GetVariable!=I)try{var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),Q.pv=[v(a[0]),v(a[1]),v(a[2])])}catch(s){Q.pv=[8,0,0]}else if(10>i)return i++,void setTimeout(o,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=q.length;if(e>0)for(var t=0;e>t;t++){var n=q[t].id,i=q[t].callbackFn,r={success:!1,id:n};if(Q.pv[0]>0){var l=g(n);if(l)if(!b(q[t].swfVersion)||Q.wk&&Q.wk<312)if(q[t].expressInstall&&a()){var u={};u.data=q[t].expressInstall,u.width=l.getAttribute("width")||"0",u.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(u.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(u.align=l.getAttribute("align"));for(var d={},f=l.getElementsByTagName("param"),p=f.length,h=0;p>h;h++)"movie"!=f[h].getAttribute("name").toLowerCase()&&(d[f[h].getAttribute("name")]=f[h].getAttribute("value"));s(u,d,n,i)}else c(l),i&&i(r);else k(n,!0),i&&(r.success=!0,r.ref=o(n),r.id=n,i(r))}else if(k(n,!0),i){var m=o(n);m&&typeof m.SetVariable!=I&&(r.success=!0,r.ref=m,r.id=m.id),i(r)}}}function o(e){var t=null,n=g(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==I?n:n.getElementsByTagName(E)[0]||n),t}function a(){return!Y&&b("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function s(e,t,n,i){var r=g(n);if(n=m(n),Y=!0,C=i||null,S={success:!1,id:n},r){"OBJECT"==r.nodeName.toUpperCase()?(x=l(r),j=null):(x=r,j=n),e.id=M,(typeof e.width==I||!/%$/.test(e.width)&&v(e.width)<310)&&(e.width="310"),(typeof e.height==I||!/%$/.test(e.height)&&v(e.height)<137)&&(e.height="137");var o=Q.ie?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURIComponent(F.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(L.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!=I?t.flashvars+="&"+a:t.flashvars=a,Q.ie&&4!=r.readyState){var s=_("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",p(r)}d(e,t,n)}}function c(e){if(Q.ie&&4!=e.readyState){e.style.display="none";var t=_("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),p(e)}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=_("div");if(Q.win&&Q.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(E)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function u(e,t){var n=_("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function d(e,t,n){var i,r=g(n);if(n=m(n),Q.wk&&Q.wk<312)return i;if(r){var o,a,s,c=_(Q.ie?"div":E);typeof e.id==I&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&f(c,s,t[s]);Q.ie&&(c=u(e.data,c.innerHTML));for(o in e)e.hasOwnProperty(o)&&(a=o.toLowerCase(),"styleclass"===a?c.setAttribute("class",e[o]):"classid"!==a&&"data"!==a&&c.setAttribute(o,e[o]));Q.ie?U[U.length]=e.id:(c.setAttribute("type",N),c.setAttribute("data",e.data)),r.parentNode.replaceChild(c,r),i=c}return i}function f(e,t,n){var i=_("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=g(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(Q.ie?(t.style.display="none",function n(){if(4==t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(n,10)}()):t.parentNode.removeChild(t))}function h(e){return e&&e.nodeType&&1===e.nodeType}function m(e){return h(e)?e.id:e}function g(e){if(h(e))return e;var t=null;try{t=L.getElementById(e)}catch(n){}return t}function _(e){return L.createElement(e)}function v(e){return parseInt(e,10)}function y(e,t,n){e.attachEvent(t,n),z[z.length]=[e,t,n]}function b(e){e+="";var t=Q.pv,n=e.split(".");return n[0]=v(n[0]),n[1]=v(n[1])||0,n[2]=v(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function w(e,t,n,i){var r=L.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(T=null,D=null),!T||D!=o){var a=_("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),T=r.appendChild(a),Q.ie&&typeof L.styleSheets!=I&&L.styleSheets.length>0&&(T=L.styleSheets[L.styleSheets.length-1]),D=o}T&&(typeof T.addRule!=I?T.addRule(e,t):typeof L.createTextNode!=I&&T.appendChild(L.createTextNode(e+" {"+t+"}")))}}function k(e,t){if(V){var n=t?"visible":"hidden",i=g(e);W&&i?i.style.visibility=n:"string"==typeof e&&w("#"+e,"visibility:"+n)}}function $(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=I?encodeURIComponent(e):e}var x,j,C,S,T,D,I="undefined",E="object",A="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",N="application/x-shockwave-flash",M="SWFObjectExprInst",O="onreadystatechange",F=window,L=document,R=navigator,H=!1,B=[],q=[],U=[],z=[],W=!1,Y=!1,V=!0,G=!1,Q=function(){var e=typeof L.getElementById!=I&&typeof L.getElementsByTagName!=I&&typeof L.createElement!=I,t=R.userAgent.toLowerCase(),n=R.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a="Microsoft Internet Explorer"===R.appName,s=[0,0,0],c=null;if(typeof R.plugins!=I&&typeof R.plugins[A]==E)c=R.plugins[A].description,c&&typeof R.mimeTypes!=I&&R.mimeTypes[N]&&R.mimeTypes[N].enabledPlugin&&(H=!0,a=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=v(c.replace(/^(.*)\..*$/,"$1")),s[1]=v(c.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(c)?v(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof F.ActiveXObject!=I)try{var l=new ActiveXObject(P);l&&(c=l.GetVariable("$version"),c&&(a=!0,c=c.split(" ")[1].split(","),s=[v(c[0]),v(c[1]),v(c[2])]))}catch(u){}return{w3:e,pv:s,wk:o,ie:a,win:i,mac:r}}();(function(){Q.w3&&((typeof L.readyState!=I&&("complete"===L.readyState||"interactive"===L.readyState)||typeof L.readyState==I&&(L.getElementsByTagName("body")[0]||L.body))&&e(),W||(typeof L.addEventListener!=I&&L.addEventListener("DOMContentLoaded",e,!1),Q.ie&&(L.attachEvent(O,function t(){"complete"==L.readyState&&(L.detachEvent(O,t),e())}),F==top&&!function n(){if(!W){try{L.documentElement.doScroll("left")}catch(t){return void setTimeout(n,0)}e()}}()),Q.wk&&!function i(){return W?void 0:/loaded|complete/.test(L.readyState)?void e():void setTimeout(i,0)}()))})();B[0]=function(){H?i():r()};(function(){Q.ie&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var n=U.length,i=0;n>i;i++)p(U[i]);for(var r in Q)Q[r]=null;Q=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})})();return{registerObject:function(e,t,n,i){if(Q.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,q[q.length]=r,k(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return Q.w3?o(e):void 0},embedSWF:function(e,n,i,r,o,c,l,u,f,p){var h=m(n),g={success:!1,id:h};Q.w3&&!(Q.wk&&Q.wk<312)&&e&&n&&i&&r&&o?(k(h,!1),t(function(){i+="",r+="";var t={};if(f&&typeof f===E)for(var m in f)t[m]=f[m];t.data=e,t.width=i,t.height=r;var _={};if(u&&typeof u===E)for(var v in u)_[v]=u[v];if(l&&typeof l===E)for(var y in l)if(l.hasOwnProperty(y)){var w=G?encodeURIComponent(y):y,$=G?encodeURIComponent(l[y]):l[y];typeof _.flashvars!=I?_.flashvars+="&"+w+"="+$:_.flashvars=w+"="+$}if(b(o)){var x=d(t,_,n);t.id==h&&k(h,!0),g.success=!0,g.ref=x,g.id=x.id}else{if(c&&a())return t.data=c,void s(t,_,n,p);k(h,!0)}p&&p(g)})):p&&p(g)},switchOffAutoHideShow:function(){V=!1},enableUriEncoding:function(e){G=typeof e===I?!0:e},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,n){return Q.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,i){Q.w3&&a()&&s(e,t,n,i)},removeSWF:function(e){Q.w3&&p(e)},createCSS:function(e,t,n,i){Q.w3&&w(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=L.location.search||L.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return $(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return $(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var e=g(M);e&&x&&(e.parentNode.replaceChild(x,e),j&&(k(j,!0),Q.ie&&(x.style.display="block")),C&&C(S)),Y=!1}},version:"2.3"}}();!function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function r(){return"tipsyuid"+a++}function o(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}var a=0;o.prototype={show:function(){if(n(this.$element[0])&&(!i(this.$element)||this.$element.is(":visible"))){var o;if(this.enabled&&(o=this.getTitle())){var a=this.tip();a.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](o),a[0].className="tipsy"+this.options.theme,this.options.className&&a.addClass(t(this.options.className,this.$element[0])),a.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=e.extend({},this.$element.offset());s=this.$element.parents("svg").size()>0?e.extend(s,this.$element[0].getBBox()):e.extend(s,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});var c,l=a[0].offsetWidth,u=a[0].offsetHeight,d=t(this.options.gravity,this.$element[0]);switch(d.charAt(0)){case"n":c={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-l/2};break;case"s":c={top:s.top-u-this.options.offset,left:s.left+s.width/2-l/2};break;case"e":c={top:s.top+s.height/2-u/2,left:s.left-l-this.options.offset};break;case"w":c={top:s.top+s.height/2-u/2,left:s.left+s.width+this.options.offset}}if(2==d.length&&("w"==d.charAt(1)?c.left=s.left+s.width/2-15:c.left=s.left+s.width/2-l+15),a.css(c).addClass("tipsy-"+d+this.options.theme),a.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+d.charAt(0)+this.options.theme,this.options.fade?(this.options.shadow&&e(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),a.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})):a.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var f=r();a.attr("id",f),this.$element.attr("aria-describedby",f)}}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(n){var i=e.data(n,"tipsy");return i||(i=new o(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",i)),i}function r(){if(e.fn.tipsy.enabled===!0){var r=i(this);r.hoverState="in",0===t.delayIn?r.show():(r.fixTitle(),setTimeout(function(){"in"==r.hoverState&&n(r.$element)&&r.show()},t.delayIn))}}function a(){var e=i(this);e.hoverState="out",0===t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState&&e.$element&&e.$element.is(":visible")||e.hide()},t.delayOut)}if(e.fn.tipsy.enable(),t===!0)return this.data("tipsy");if("string"==typeof t){var s=this.data("tipsy");return s&&s[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.theme=t.theme&&""!==t.theme?"-"+t.theme:"",t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var c="hover"==t.trigger?"mouseenter mouseover touchstart":"focus",l="hover"==t.trigger?"mouseleave mouseout touchmove touchleave":"blur";if(t.live&&t.live!==!0)e(this).on(c,t.live,r),e(this).on(l,t.live,a);else{if(t.live&&!e.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";var u=t.live?"live":"bind";this[u](c,r)[u](l,a)}}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",theme:""},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&n(t)||e(this).remove()})},e.fn.tipsy.enable=function(){e.fn.tipsy.enabled=!0},e.fn.tipsy.disable=function(){e.fn.tipsy.enabled=!1},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoNWNE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"ne":"nw"},e.fn.tipsy.autoSWSE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"se":"sw"},e.fn.tipsy.autoBounds=function(t,n,i){return function(){var r={ns:i[0],ew:i.length>1?i[1]:!1},o=e(document).scrollTop()+t,a=e(document).scrollLeft()+n,s=e(this);return s.offset().top<o&&(r.ns="n"),s.offset().left<a&&(r.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<n&&(r.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(r.ns="s"),r.ns+(r.ew?r.ew:"")}}}(jQuery),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var n=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},e.fn.scrollTo=function(i,r,o){return"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=e.extend({},n.defaults,o),r=r||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(r/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function a(e){l.animate(d,r,o.easing,e&&function(){e.call(this,u,o)})}if(null!=i){var s,c=this,l=e(c),u=i,d={},f=l.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=e(u,this),!u.length)return;case"object":(u.is||u.style)&&(s=(u=e(u)).offset())}e.each(o.axis.split(""),function(e,t){var i="x"==t?"Left":"Top",r=i.toLowerCase(),p="scroll"+i,h=c[p],m=n.max(c,t);if(s)d[p]=s[r]+(f?0:h-l.offset()[r]),o.margin&&(d[p]-=parseInt(u.css("margin"+i))||0,d[p]-=parseInt(u.css("border"+i+"Width"))||0),d[p]+=o.offset[r]||0,o.over[r]&&(d[p]+=u["x"==t?"width":"height"]()*o.over[r]);else{var g=u[r];d[p]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}o.limit&&/^\d+$/.test(d[p])&&(d[p]=d[p]<=0?0:Math.min(d[p],m)),!e&&o.queue&&(h!=d[p]&&a(o.onAfterFirst),delete d[p])}),a(o.onAfter)}}).end()},n.max=function(t,n){var i="x"==n?"Width":"Height",r="scroll"+i;if(!e(t).is("html,body"))return t[r]-e(t)[i.toLowerCase()]();var o="client"+i,a=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(a[r],s[r])-Math.min(a[o],s[o])}}(jQuery),!function(e){"use strict";e.extend({tablesorter:new function(){function t(){var e=arguments.length>1?Array.prototype.slice.call(arguments):arguments[0];"undefined"!=typeof console&&"undefined"!=typeof console.log?console.log(e):alert(e)}function n(e,n){t(e+" ("+((new Date).getTime()-n.getTime())+"ms)")}function i(e){for(var t in e)return!1;return!0}function r(t,n,i){if(!n)return"";var r=t.config,o=r.textExtraction,a="";return a="simple"===o?r.supportsTextContent?n.textContent:e(n).text():"function"==typeof o?o(n,t,i):"object"==typeof o&&o.hasOwnProperty(i)?o[i](n,t,i):r.supportsTextContent?n.textContent:e(n).text(),e.trim(a)}function o(e,n,i,o){for(var a,s=$.parsers.length,c=!1,l="",u=!0;""===l&&u;)i++,n[i]?(c=n[i].cells[o],l=r(e,c,o),e.config.debug&&t("Checking if value was empty on row "+i+", column: "+o+': "'+l+'"')):u=!1;for(;--s>=0;)if(a=$.parsers[s],a&&"text"!==a.id&&a.is&&a.is(l,e,c))return a;return $.getParserById("text")}function a(e){var i,r,a,s,c,l,u,d,f=e.config,p=f.$tbodies=f.$table.children("tbody:not(."+f.cssInfoBlock+")"),h="";if(0===p.length)return f.debug?t("*Empty table!* Not building a parser cache"):"";if(f.debug&&(d=new Date,t("Detecting parsers for each column")),i=p[0].rows,i[0])for(r=[],a=i[0].cells.length,s=0;a>s;s++)c=f.$headers.filter(":not([colspan])"),c=c.add(f.$headers.filter('[colspan="1"]')).filter('[data-column="'+s+'"]:last'),l=f.headers[s],u=$.getParserById($.getData(c,l,"sorter")),f.empties[s]=$.getData(c,l,"empty")||f.emptyTo||(f.emptyToBottom?"bottom":"top"),f.strings[s]=$.getData(c,l,"string")||f.stringTo||"max",u||(u=o(e,i,-1,s)),f.debug&&(h+="column:"+s+"; parser:"+u.id+"; string:"+f.strings[s]+"; empty: "+f.empties[s]+"\n"),r.push(u);f.debug&&(t(h),n("Completed detecting parsers",d)),f.parsers=r}function s(i){var o,a,s,c,l,u,d,f,p,h,m=i.tBodies,g=i.config,_=g.parsers,v=[];if(g.cache={},!_)return g.debug?t("*Empty table!* Not building a cache"):"";for(g.debug&&(h=new Date),g.showProcessing&&$.isProcessing(i,!0),d=0;d<m.length;d++)if(g.cache[d]={row:[],normalized:[]},!e(m[d]).hasClass(g.cssInfoBlock)){for(o=m[d]&&m[d].rows.length||0,a=m[d].rows[0]&&m[d].rows[0].cells.length||0,l=0;o>l;++l)if(f=e(m[d].rows[l]),p=[],f.hasClass(g.cssChildRow))g.cache[d].row[g.cache[d].row.length-1]=g.cache[d].row[g.cache[d].row.length-1].add(f);else{for(g.cache[d].row.push(f),u=0;a>u;++u)s=r(i,f[0].cells[u],u),c=_[u].format(s,i,f[0].cells[u],u),p.push(c),"numeric"===(_[u].type||"").toLowerCase()&&(v[u]=Math.max(Math.abs(c)||0,v[u]||0));p.push(g.cache[d].normalized.length),g.cache[d].normalized.push(p)}g.cache[d].colMax=v}g.showProcessing&&$.isProcessing(i),g.debug&&n("Building cache for "+o+" rows",h)}function c(t,r){var o,a,s,c,l,u,d,f,p,h,m,g,_=t.config,v=_.widgetOptions,y=t.tBodies,b=[],w=_.cache;if(!i(w)){for(_.debug&&(g=new Date),p=0;p<y.length;p++)if(l=e(y[p]),l.length&&!l.hasClass(_.cssInfoBlock)){for(u=$.processTbody(t,l,!0),o=w[p].row,a=w[p].normalized,s=a.length,c=s?a[0].length-1:0,d=0;s>d;d++)if(m=a[d][c],b.push(o[m]),!_.appender||_.pager&&(!_.pager.removeRows||!v.pager_removeRows)&&!_.pager.ajax)for(h=o[m].length,f=0;h>f;f++)u.append(o[m][f]);$.processTbody(t,u,!1)}_.appender&&_.appender(t,b),_.debug&&n("Rebuilt table",g),r||_.appender||$.applyWidget(t),e(t).trigger("sortEnd",t),e(t).trigger("updateComplete",t)}}function l(t){var n,i,r,o,a,s,c,l,u,d,f,p,h=[],m={},g=0,_=e(t).find("thead:eq(0), tfoot").children("tr");for(n=0;n<_.length;n++)for(s=_[n].cells,i=0;i<s.length;i++){for(a=s[i],c=a.parentNode.rowIndex,l=c+"-"+a.cellIndex,u=a.rowSpan||1,d=a.colSpan||1,"undefined"==typeof h[c]&&(h[c]=[]),r=0;r<h[c].length+1;r++)if("undefined"==typeof h[c][r]){f=r;break}for(m[l]=f,g=Math.max(f,g),e(a).attr({"data-column":f}),r=c;c+u>r;r++)for("undefined"==typeof h[r]&&(h[r]=[]),p=h[r],o=f;f+d>o;o++)p[o]="x"}return t.config.columns=g+1,m}function u(e){return/^d/i.test(e)||1===e}function d(i){var r,o,a,s,c,d,f,h=l(i),m=i.config;m.headerList=[],m.headerContent=[],m.debug&&(f=new Date),s=m.cssIcon?'<i class="'+m.cssIcon+" "+$.css.icon+'"></i>':"",m.$headers=e(i).find(m.selectorHeaders).each(function(t){o=e(this),r=m.headers[t],m.headerContent[t]=e(this).html(),c=m.headerTemplate.replace(/\{content\}/g,e(this).html()).replace(/\{icon\}/g,s),m.onRenderTemplate&&(a=m.onRenderTemplate.apply(o,[t,c]),a&&"string"==typeof a&&(c=a)),e(this).html('<div class="tablesorter-header-inner">'+c+"</div>"),m.onRenderHeader&&m.onRenderHeader.apply(o,[t]),this.column=h[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=u($.getData(o,r,"sortInitialOrder")||m.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,d=$.getData(o,r,"lockedOrder")||!1,"undefined"!=typeof d&&d!==!1&&(this.order=this.lockedOrder=u(d)?[1,1,1]:[0,0,0]),o.addClass($.css.header+" "+m.cssHeader),m.headerList[t]=this,o.parent().addClass($.css.headerRow+" "+m.cssHeaderRow),
o.attr("tabindex",0)}),p(i),m.debug&&(n("Built headers:",f),t(m.$headers))}function f(e,t,n){var i=e.config;i.$table.find(i.selectorRemove).remove(),a(e),s(e),w(i.$table,t,n)}function p(t){var n,i=t.config;i.$headers.each(function(t,r){n="false"===$.getData(r,i.headers[t],"sorter"),r.sortDisabled=n,e(r)[n?"addClass":"removeClass"]("sorter-false")})}function h(t){var n,i,r,o,a=t.config,s=a.sortList,c=[$.css.sortAsc+" "+a.cssAsc,$.css.sortDesc+" "+a.cssDesc],l=e(t).find("tfoot tr").children().removeClass(c.join(" "));for(a.$headers.removeClass(c.join(" ")),o=s.length,i=0;o>i;i++)if(2!==s[i][1]&&(n=a.$headers.not(".sorter-false").filter('[data-column="'+s[i][0]+'"]'+(1===o?":last":"")),n.length))for(r=0;r<n.length;r++)n[r].sortDisabled||(n.eq(r).addClass(c[s[i][1]]),l.length&&l.filter('[data-column="'+s[i][0]+'"]').eq(r).addClass(c[s[i][1]]))}function m(t){if(t.config.widthFixed&&0===e(t).find("colgroup").length){var n=e("<colgroup>"),i=e(t).width();e(t.tBodies[0]).find("tr:first").children("td:visible").each(function(){n.append(e("<col>").css("width",parseInt(e(this).width()/i*1e3,10)/10+"%"))}),e(t).prepend(n)}}function g(t,n){var i,r,o,a=t.config,s=n||a.sortList;a.sortList=[],e.each(s,function(t,n){i=[parseInt(n[0],10),parseInt(n[1],10)],o=a.$headers[i[0]],o&&(a.sortList.push(i),r=e.inArray(i[1],o.order),o.count=r>=0?r:i[1]%(a.sortReset?3:2))})}function _(e,t){return e&&e[t]?e[t].type||"":""}function v(t,n,i){var r,o,a,s,l,u=t.config,d=!i[u.sortMultiSortKey],f=e(t);if(f.trigger("sortStart",t),n.count=i[u.sortResetKey]?2:(n.count+1)%(u.sortReset?3:2),u.sortRestart&&(o=n,u.$headers.each(function(){this===o||!d&&e(this).is("."+$.css.sortDesc+",."+$.css.sortAsc)||(this.count=-1)})),o=n.column,d){if(u.sortList=[],null!==u.sortForce)for(r=u.sortForce,a=0;a<r.length;a++)r[a][0]!==o&&u.sortList.push(r[a]);if(s=n.order[n.count],2>s&&(u.sortList.push([o,s]),n.colSpan>1))for(a=1;a<n.colSpan;a++)u.sortList.push([o+a,s])}else if(u.sortAppend&&u.sortList.length>1&&$.isValueInArray(u.sortAppend[0][0],u.sortList)&&u.sortList.pop(),$.isValueInArray(o,u.sortList))for(a=0;a<u.sortList.length;a++)l=u.sortList[a],s=u.$headers[l[0]],l[0]===o&&(l[1]=s.order[n.count],2===l[1]&&(u.sortList.splice(a,1),s.count=-1));else if(s=n.order[n.count],2>s&&(u.sortList.push([o,s]),n.colSpan>1))for(a=1;a<n.colSpan;a++)u.sortList.push([o+a,s]);if(null!==u.sortAppend)for(r=u.sortAppend,a=0;a<r.length;a++)r[a][0]!==o&&u.sortList.push(r[a]);f.trigger("sortBegin",t),setTimeout(function(){h(t),y(t),c(t)},1)}function y(e){var t,r,o,a,s,c,l,u,d,f,p,h,m,g,v=0,y=e.config,b=y.textSorter||"",w=y.sortList,k=w.length,x=e.tBodies.length;if(!y.serverSideSorting&&!i(y.cache)){for(y.debug&&(p=new Date),r=0;x>r;r++)c=y.cache[r].colMax,l=y.cache[r].normalized,u=l.length,f=l&&l[0]?l[0].length-1:0,l.sort(function(n,i){for(t=0;k>t;t++){if(s=w[t][0],d=w[t][1],v=0===d,m=v?n:i,g=v?i:n,o=y.string[y.empties[s]||y.emptyTo],""===m[s]&&0!==o)return("boolean"==typeof o?o?-1:1:o||1)*(v?1:-1);if(""===g[s]&&0!==o)return("boolean"==typeof o?o?1:-1:-o||-1)*(v?1:-1);if(a=/n/i.test(_(y.parsers,s)),a&&y.strings[s]?(a="boolean"==typeof y.string[y.strings[s]]?(v?1:-1)*(y.string[y.strings[s]]?-1:1):y.strings[s]?y.string[y.strings[s]]||0:0,h=y.numberSorter?y.numberSorter(m[s],g[s],v,c[s],e):$.sortNumeric(m[s],g[s],a,c[s])):h="function"==typeof b?b(m[s],g[s],v,s,e):"object"==typeof b&&b.hasOwnProperty(s)?b[s](m[s],g[s],v,s,e):$.sortNatural(m[s],g[s]),h)return h}return n[f]-i[f]});y.debug&&n("Sorting on "+w.toString()+" and dir "+d+" time",p)}}function b(e,t){var n=e[0].config;n.pager&&!n.pager.ajax&&e.trigger("updateComplete"),"function"==typeof t&&t(e[0])}function w(e,t,n){t===!1||e[0].isProcessing?b(e,n):e.trigger("sorton",[e[0].config.sortList,function(){b(e,n)}])}function k(t){var n,o,l=t.config,u=l.$table;l.$headers.find(l.selectorSort).add(l.$headers.filter(l.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(n,r){if(!(1!==(n.which||n.button)&&!/sort|keypress/.test(n.type)||"keypress"===n.type&&13!==n.which||"mouseup"===n.type&&r!==!0&&(new Date).getTime()-o>250)){if("mousedown"===n.type)return o=(new Date).getTime(),"INPUT"===n.target.tagName?"":!l.cancelSelection;l.delayInit&&i(l.cache)&&s(t);var a=/TH|TD/.test(this.tagName)?e(this):e(this).parents("th, td").filter(":first"),c=a[0];c.sortDisabled||v(t,c,n)}}),l.cancelSelection&&l.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"}),u.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(e){e.stopPropagation(),l.sortList=[],h(t),y(t),c(t)}).bind("updateAll.tablesorter",function(e,n,i){e.stopPropagation(),$.refreshWidgets(t,!0,!0),$.restoreHeaders(t),d(t),k(t),f(t,n,i)}).bind("update.tablesorter updateRows.tablesorter",function(e,n,i){e.stopPropagation(),p(t),f(t,n,i)}).bind("updateCell.tablesorter",function(n,i,o,a){n.stopPropagation(),u.find(l.selectorRemove).remove();var s,c,d,f=u.find("tbody"),p=f.index(e(i).parents("tbody").filter(":first")),h=e(i).parents("tr").filter(":first");i=e(i)[0],f.length&&p>=0&&(c=f.eq(p).find("tr").index(h),d=i.cellIndex,s=l.cache[p].normalized[c].length-1,l.cache[p].row[t.config.cache[p].normalized[c][s]]=h,l.cache[p].normalized[c][d]=l.parsers[d].format(r(t,i,d),t,i,d),w(u,o,a))}).bind("addRows.tablesorter",function(e,i,o,s){e.stopPropagation();var c,d=i.filter("tr").length,f=[],p=i[0].cells.length,h=u.find("tbody").index(i.parents("tbody").filter(":first"));for(l.parsers||a(t),c=0;d>c;c++){for(n=0;p>n;n++)f[n]=l.parsers[n].format(r(t,i[c].cells[n],n),t,i[c].cells[n],n);f.push(l.cache[h].row.length),l.cache[h].row.push([i[c]]),l.cache[h].normalized.push(f),f=[]}w(u,o,s)}).bind("sorton.tablesorter",function(e,n,r,o){var a=t.config;e.stopPropagation(),u.trigger("sortStart",this),g(t,n),h(t),a.delayInit&&i(a.cache)&&s(t),u.trigger("sortBegin",this),y(t),c(t,o),"function"==typeof r&&r(t)}).bind("appendCache.tablesorter",function(e,n,i){e.stopPropagation(),c(t,i),"function"==typeof n&&n(t)}).bind("applyWidgetId.tablesorter",function(e,n){e.stopPropagation(),$.getWidgetById(n).format(t,l,l.widgetOptions)}).bind("applyWidgets.tablesorter",function(e,n){e.stopPropagation(),$.applyWidget(t,n)}).bind("refreshWidgets.tablesorter",function(e,n,i){e.stopPropagation(),$.refreshWidgets(t,n,i)}).bind("destroy.tablesorter",function(e,n,i){e.stopPropagation(),$.destroy(t,n,i)})}var $=this;$.version="2.13.3",$.parsers=[],$.widgets=[],$.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},$.css={table:"tablesorter",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc"},$.log=t,$.benchmark=n,$.construct=function(t){return this.each(function(){var n=this,i=e.extend(!0,{},$.defaults,t);!n.hasInitialized&&$.buildTable&&"TABLE"!==this.tagName&&$.buildTable(n,i),$.setup(n,i)})},$.setup=function(n,i){if(!n||!n.tHead||0===n.tBodies.length||n.hasInitialized===!0)return i.debug?t("stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var r="",o=e(n),c=e.metadata;n.hasInitialized=!1,n.isProcessing=!0,n.config=i,e.data(n,"tablesorter",i),i.debug&&e.data(n,"startoveralltimer",new Date),i.supportsTextContent="x"===e("<span>x</span>")[0].textContent,i.supportsDataObject=function(e){return e[0]=parseInt(e[0],10),e[0]>1||1===e[0]&&parseInt(e[1],10)>=4}(e.fn.jquery.split(".")),i.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:!0,bottom:!1},/tablesorter\-/.test(o.attr("class"))||(r=""!==i.theme?" tablesorter-"+i.theme:""),i.$table=o.addClass($.css.table+" "+i.tableClass+r),i.$tbodies=o.children("tbody:not(."+i.cssInfoBlock+")"),i.widgetInit={},d(n),m(n),a(n),i.delayInit||s(n),k(n),i.supportsDataObject&&"undefined"!=typeof o.data().sortlist?i.sortList=o.data().sortlist:c&&o.metadata()&&o.metadata().sortlist&&(i.sortList=o.metadata().sortlist),$.applyWidget(n,!0),i.sortList.length>0?o.trigger("sorton",[i.sortList,{},!i.initWidgets]):i.initWidgets&&$.applyWidget(n),i.showProcessing&&o.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(e){$.isProcessing(n,"sortBegin"===e.type)}),n.hasInitialized=!0,n.isProcessing=!1,i.debug&&$.benchmark("Overall initialization time",e.data(n,"startoveralltimer")),o.trigger("tablesorter-initialized",n),"function"==typeof i.initialized&&i.initialized(n)},$.isProcessing=function(t,n,i){t=e(t);var r=t[0].config,o=i||t.find("."+$.css.header);n?(r.sortList.length>0&&(o=o.filter(function(){return this.sortDisabled?!1:$.isValueInArray(parseFloat(e(this).attr("data-column")),r.sortList)})),o.addClass($.css.processing+" "+r.cssProcessing)):o.removeClass($.css.processing+" "+r.cssProcessing)},$.processTbody=function(t,n,i){var r;return i?(t.isProcessing=!0,n.before('<span class="tablesorter-savemyplace"/>'),r=e.fn.detach?n.detach():n.remove()):(r=e(t).find("span.tablesorter-savemyplace"),n.insertAfter(r),r.remove(),void(t.isProcessing=!1))},$.clearTableBody=function(t){e(t)[0].config.$tbodies.empty()},$.restoreHeaders=function(t){var n=t.config;n.$table.find(n.selectorHeaders).each(function(t){e(this).find(".tablesorter-header-inner").length&&e(this).html(n.headerContent[t])})},$.destroy=function(t,n,i){if(t=e(t)[0],t.hasInitialized){$.refreshWidgets(t,!0,!0);var r=e(t),o=t.config,a=r.find("thead:first"),s=a.find("tr."+$.css.headerRow).removeClass($.css.headerRow+" "+o.cssHeaderRow),c=r.find("tfoot:first > tr").children("th, td");a.find("tr").not(s).remove(),r.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter ")),o.$headers.add(c).removeClass([$.css.header,o.cssHeader,o.cssAsc,o.cssDesc,$.css.sortAsc,$.css.sortDesc].join(" ")).removeAttr("data-column"),s.find(o.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter"),$.restoreHeaders(t),n!==!1&&r.removeClass($.css.table+" "+o.tableClass+" tablesorter-"+o.theme),t.hasInitialized=!1,"function"==typeof i&&i(t)}},$.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i},$.sortNatural=function(e,t){if(e===t)return 0;var n,i,r,o,a,s,c,l,u=$.regex;if(u.hex.test(t)){if(i=parseInt(e.match(u.hex),16),o=parseInt(t.match(u.hex),16),o>i)return-1;if(i>o)return 1}for(n=e.replace(u.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),r=t.replace(u.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),l=Math.max(n.length,r.length),c=0;l>c;c++){if(a=isNaN(n[c])?n[c]||0:parseFloat(n[c])||0,s=isNaN(r[c])?r[c]||0:parseFloat(r[c])||0,isNaN(a)!==isNaN(s))return isNaN(a)?1:-1;if(typeof a!=typeof s&&(a+="",s+=""),s>a)return-1;if(a>s)return 1}return 0},$.sortText=function(e,t){return e>t?1:t>e?-1:0},$.getTextValue=function(e,t,n){if(n){var i,r=e?e.length:0,o=n+t;for(i=0;r>i;i++)o+=e.charCodeAt(i);return t*o}return 0},$.sortNumeric=function(e,t,n,i){return e===t?0:(isNaN(e)&&(e=$.getTextValue(e,n,i)),isNaN(t)&&(t=$.getTextValue(t,n,i)),e-t)},$.characterEquivalents={a:"\xe1\xe0\xe2\xe3\xe4\u0105\xe5",A:"\xc1\xc0\xc2\xc3\xc4\u0104\xc5",c:"\xe7\u0107\u010d",C:"\xc7\u0106\u010c",e:"\xe9\xe8\xea\xeb\u011b\u0119",E:"\xc9\xc8\xca\xcb\u011a\u0118",i:"\xed\xec\u0130\xee\xef\u0131",I:"\xcd\xcc\u0130\xce\xcf",o:"\xf3\xf2\xf4\xf5\xf6",O:"\xd3\xd2\xd4\xd5\xd6",ss:"\xdf",SS:"\u1e9e",u:"\xfa\xf9\xfb\xfc\u016f",U:"\xda\xd9\xdb\xdc\u016e"},$.replaceAccents=function(e){var t,n="[",i=$.characterEquivalents;if(!$.characterRegex){$.characterRegexArray={};for(t in i)"string"==typeof t&&(n+=i[t],$.characterRegexArray[t]=new RegExp("["+i[t]+"]","g"));$.characterRegex=new RegExp(n+"]")}if($.characterRegex.test(e))for(t in i)"string"==typeof t&&(e=e.replace($.characterRegexArray[t],t));return e},$.isValueInArray=function(e,t){var n,i=t.length;for(n=0;i>n;n++)if(t[n][0]===e)return!0;return!1},$.addParser=function(e){var t,n=$.parsers.length,i=!0;for(t=0;n>t;t++)$.parsers[t].id.toLowerCase()===e.id.toLowerCase()&&(i=!1);i&&$.parsers.push(e)},$.getParserById=function(e){var t,n=$.parsers.length;for(t=0;n>t;t++)if($.parsers[t].id.toLowerCase()===e.toString().toLowerCase())return $.parsers[t];return!1},$.addWidget=function(e){$.widgets.push(e)},$.getWidgetById=function(e){var t,n,i=$.widgets.length;for(t=0;i>t;t++)if(n=$.widgets[t],n&&n.hasOwnProperty("id")&&n.id.toLowerCase()===e.toLowerCase())return n},$.applyWidget=function(t,i){t=e(t)[0];var r,o,a,s=t.config,c=s.widgetOptions,l=[];s.debug&&(r=new Date),s.widgets.length&&(s.widgets=e.grep(s.widgets,function(t,n){return e.inArray(t,s.widgets)===n}),e.each(s.widgets||[],function(e,t){a=$.getWidgetById(t),a&&a.id&&(a.priority||(a.priority=10),l[e]=a)}),l.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),e.each(l,function(n,r){r&&((i||!s.widgetInit[r.id])&&(r.hasOwnProperty("options")&&(c=t.config.widgetOptions=e.extend(!0,{},r.options,c),s.widgetInit[r.id]=!0),r.hasOwnProperty("init")&&r.init(t,r,s,c)),!i&&r.hasOwnProperty("format")&&r.format(t,s,c,!1))})),s.debug&&(o=s.widgets.length,n("Completed "+(i===!0?"initializing ":"applying ")+o+" widget"+(1!==o?"s":""),r))},$.refreshWidgets=function(n,i,r){n=e(n)[0];var o,a=n.config,s=a.widgets,c=$.widgets,l=c.length;for(o=0;l>o;o++)c[o]&&c[o].id&&(i||e.inArray(c[o].id,s)<0)&&(a.debug&&t("Refeshing widgets: Removing "+c[o].id),c[o].hasOwnProperty("remove")&&(c[o].remove(n,a,a.widgetOptions),a.widgetInit[c[o].id]=!1));r!==!0&&$.applyWidget(n,i)},$.getData=function(t,n,i){var r,o,a="",s=e(t);return s.length?(r=e.metadata?s.metadata():!1,o=" "+(s.attr("class")||""),"undefined"!=typeof s.data(i)||"undefined"!=typeof s.data(i.toLowerCase())?a+=s.data(i)||s.data(i.toLowerCase()):r&&"undefined"!=typeof r[i]?a+=r[i]:n&&"undefined"!=typeof n[i]?a+=n[i]:" "!==o&&o.match(" "+i+"-")&&(a=o.match(new RegExp("\\s"+i+"-([\\w-]+)"))[1]||""),e.trim(a)):""},$.formatFloat=function(t,n){if("string"!=typeof t||""===t)return t;var i,r=n&&n.config?n.config.usNumberFormat!==!1:"undefined"!=typeof n?n:!0;return t=r?t.replace(/,/g,""):t.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(t)&&(t=t.replace(/^\s*\(([.\d]+)\)/,"-$1")),i=parseFloat(t),isNaN(i)?e.trim(t):i},$.isDigit=function(e){return isNaN(e)?/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,"")):!0}}});var t=e.tablesorter;e.fn.extend({tablesorter:t.construct}),t.addParser({id:"text",is:function(){return!0},format:function(n,i){var r=i.config;return n&&(n=e.trim(r.ignoreCase?n.toLocaleLowerCase():n),n=r.sortLocaleCompare?t.replaceAccents(n):n),n},type:"text"}),t.addParser({id:"digit",is:function(e){return t.isDigit(e)},format:function(n,i){var r=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof r?r:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[,. ]/g,""))},format:function(n,i){var r=t.formatFloat((n||"").replace(/[^\w,. \-()]/g,""),i);return n&&"number"==typeof r?r:n?e.trim(n&&i.config.ignoreCase?n.toLocaleLowerCase():n):n},type:"numeric"}),t.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,n){var i,r=e?e.split("."):"",o="",a=r.length;for(i=0;a>i;i++)o+=("00"+r[i]).slice(-3);return e?t.formatFloat(o,n):e},type:"numeric"}),t.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(t){return t?e.trim(t.replace(/(https?|ftp|file):\/\//,"")):t},type:"text"}),t.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,n){return e?t.formatFloat(""!==e?new Date(e.replace(/-/g,"/")).getTime()||"":"",n):e},type:"numeric"}),t.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,n){return e?t.formatFloat(e.replace(/%/g,""),n):e},type:"numeric"}),t.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,n,i,r){if(e){var o=n.config,a=o.headerList[r],s=a.dateFormat||t.getData(a,o.headers[r],"dateFormat")||o.dateFormat;e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===s?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===s&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return e?t.formatFloat(new Date(e).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,n){return e?t.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||"",n):e},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,n,i){var r=n.config,o=r.parserMetadataName?r.parserMetadataName:"sortValue";return e(i).metadata()[o]},type:"numeric"}),t.addWidget({id:"zebra",priority:90,format:function(n,i,r){var o,a,s,c,l,u,d,f,p=new RegExp(i.cssChildRow,"i"),h=i.$tbodies;for(i.debug&&(u=new Date),d=0;d<h.length;d++)o=h.eq(d),f=o.children("tr").length,f>1&&(c=0,a=o.children("tr:visible"),a.each(function(){s=e(this),p.test(this.className)||c++,l=c%2===0,s.removeClass(r.zebra[l?1:0]).addClass(r.zebra[l?0:1])}));i.debug&&t.benchmark("Applying Zebra widget",u)},remove:function(t,n,i){var r,o,a=n.$tbodies,s=(i.zebra||["even","odd"]).join(" ");for(r=0;r<a.length;r++)o=e.tablesorter.processTbody(t,a.eq(r),!0),o.children().removeClass(s),e.tablesorter.processTbody(t,o,!1)}})}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,o,a,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)a[n]=str(n,c)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,c),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(e,t){t||(t={}),this.text=t.text||e.data("text")||e.text(),this.$elem=e,this.is_on=!1,this.bind()}var n=e('<div id="jquery-clipster-overlay"><div><p>Press \u2318C to copy</p><p><textarea></textarea></p></div></div>'),i=n.find("textarea");n.hide(),e(function(){e("body").append(n)}),e.clipster=function(t,n){e(document).on("click",t,function(t){var i=e(this).clipster(n),r=i.data("clipster");r.activate(),t.preventDefault()})},e.fn.clipster=function(n){return this.each(function(){var i=e(this),r=i.data("clipster");r||(r=new t(i,n),i.data("clipster",r))})},t.prototype.bind=function(){var t=this;this.$elem.on("click",function(e){t.activate(),e.preventDefault()}),e(document).on("copy click",function(n){var r=e(n.target);r.closest(t.$elem).length||"click"===n.type&&r.is(i)||t.deactivate()}),e(document).on("keydown",function(e){27===e.which&&t.deactivate()})},t.prototype.activate=function(){this.active||(n.show(),i.val(this.text),i[0].select(),i.focus(),this.active=!0)},t.prototype.deactivate=function(){this.active&&(setTimeout(function(){n.hide()}),this.active=!1)}}(jQuery),function(e,t,n){"$:nomunge";function i(){r=t[s](function(){o.each(function(){var t=e(this),n=t.width(),i=t.height(),r=e.data(this,l);(n!==r.w||i!==r.h)&&t.trigger(c,[r.w=n,r.h=i])}),i()},a[u])}var r,o=e([]),a=e.resize=e.extend(e.resize,{}),s="setTimeout",c="resize",l=c+"-special-event",u="delay",d="throttleWindow";a[u]=250,a[d]=!0,e.event.special[c]={setup:function(){if(!a[d]&&this[s])return!1;var t=e(this);o=o.add(t),e.data(this,l,{w:t.width(),h:t.height()}),1===o.length&&i()},teardown:function(){if(!a[d]&&this[s])return!1;var t=e(this);o=o.not(t),t.removeData(l),o.length||clearTimeout(r)},add:function(t){function i(t,i,o){var a=e(this),s=e.data(this,l);s.w=i!==n?i:a.width(),s.h=o!==n?o:a.height(),r.apply(this,arguments)}if(!a[d]&&this[s])return!1;var r;return e.isFunction(t)?(r=t,i):(r=t.handler,void(t.handler=i))}}}(jQuery,this),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var r=["opacity",t,~~(100*e),n,i].join("-"),o=.01+n/i*100,a=Math.max(1-(1-e)/t*(100-o),e),s=u.substring(0,u.indexOf("Animation")).toLowerCase(),c=s&&"-"+s+"-"||"";return f[r]||(p.insertRule("@"+c+"keyframes "+r+"{0%{opacity:"+a+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",p.cssRules.length),f[r]=1),r}function i(e,t){var n,i,r=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<d.length;i++)if(n=d[i]+t,void 0!==r[n])return n;return void 0!==r[t]?t:void 0}function r(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function a(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function s(e,t){return"string"==typeof e?e:e[t%e.length]}function c(e){return"undefined"==typeof this?new c(e):void(this.opts=o(e||{},c.defaults,h))}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),c.prototype.lines=function(e,i){function o(){return r(n("group",{coordsize:u+" "+u,coordorigin:-l+" "+-l}),{width:u,height:u})}function a(e,a,c){t(f,t(r(o(),{rotation:360/i.lines*e+"deg",left:~~a}),t(r(n("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:c}),n("fill",{color:s(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var c,l=i.length+i.width,u=2*l,d=2*-(i.width+i.length)+"px",f=r(o(),{position:"absolute",top:d,left:d});if(i.shadow)for(c=1;c<=i.lines;c++)a(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=i.lines;c++)a(c);return t(e,f)},c.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=r.childNodes[t+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var u,d=["webkit","Moz","ms","O"],f={},p=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};c.defaults={},o(c.prototype,{spin:function(t){this.stop();var n,i,o=this,s=o.opts,c=o.el=r(e(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),l=s.radius+s.length+s.width;if(t&&(t.insertBefore(c,t.firstChild||null),i=a(t),n=a(c),r(c,{left:("auto"==s.left?i.x-n.x+(t.offsetWidth>>1):parseInt(s.left,10)+l)+"px",top:("auto"==s.top?i.y-n.y+(t.offsetHeight>>1):parseInt(s.top,10)+l)+"px"})),c.setAttribute("role","progressbar"),o.lines(c,o.opts),!u){var d,f=0,p=(s.lines-1)*(1-s.direction)/2,h=s.fps,m=h/s.speed,g=(1-s.opacity)/(m*s.trail/100),_=m/s.lines;!function v(){f++;for(var e=0;e<s.lines;e++)d=Math.max(1-(f+(s.lines-e)*_)%m*g,s.opacity),o.opacity(c,e*s.direction+p,d,s);o.timeout=o.el&&setTimeout(v,~~(1e3/h))}()}return o},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,o){function a(t,n){return r(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var c,l=0,d=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)c=r(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:u&&n(o.opacity,o.trail,d+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(c,r(a("#000","0 0 4px #000"),{top:"2px"})),t(i,t(c,a(s(o.color,l),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var m=r(e("group"),{behavior:"url(#default#VML)"});return!i(m,"transform")&&m.adj?l():u=i(m,"animation"),c}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(n,i){return this.each(function(){var r=e(this),o=r.data();o.spinner&&(o.spinner.stop(),delete o.spinner),n!==!1&&(n=e.extend({color:i||r.css("color")},e.fn.spin.presets[n]||n),o.spinner=new t(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;!function(e,t){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(n){return t(n,e)}):t(e.jQuery,e)}(this,function(n,i){var r,o,a,s,c,l,u,d,f,p,h,m,g,_,v,y;return r=n(i),d=e.call(i,"ontouchstart")>=0,s={horizontal:{},vertical:{}},c=1,u={},l="waypoints-context-id",h="resize.waypoints",m="scroll.waypoints",g=1,_="waypoints-waypoint-ids",v="waypoint",y="waypoints",o=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+c++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},e.data(l,this.id),u[this.id]=this,e.bind(m,function(){var e;return t.didScroll||d?void 0:(t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},i.setTimeout(e,n[y].settings.scrollThrottle))}),e.bind(h,function(){var e;return t.didResize?void 0:(t.didResize=!0,e=function(){return n[y]("refresh"),t.didResize=!1},i.setTimeout(e,n[y].settings.resizeThrottle))})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!d||e.vertical.oldScroll&&e.vertical.newScroll||n[y]("refresh"),n.each(e,function(e,i){var r,o,a;return a=[],o=i.newScroll>i.oldScroll,r=o?i.forward:i.backward,n.each(t.waypoints[e],function(e,t){var n,r;return i.oldScroll<(n=t.offset)&&n<=i.newScroll?a.push(t):i.newScroll<(r=t.offset)&&r<=i.oldScroll?a.push(t):void 0}),a.sort(function(e,t){return e.offset-t.offset}),o||a.reverse(),n.each(a,function(e,t){return t.options.continuous||e===a.length-1?t.trigger([r]):void 0})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,i,r=this;return i=n.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:i?0:t.left,contextScroll:i?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:i?0:t.top,contextScroll:i?0:this.oldScroll.y,contextDimension:i?n[y]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(e,function(e,t){return n.each(r.waypoints[e],function(e,i){var r,o,a,s,c;return r=i.options.offset,a=i.offset,o=n.isWindow(i.element)?0:i.$element.offset()[t.offsetProp],n.isFunction(r)?r=r.apply(i.element):"string"==typeof r&&(r=parseFloat(r),i.options.offset.indexOf("%")>-1&&(r=Math.ceil(t.contextDimension*r/100))),i.offset=o-t.contextOffset+t.contextScroll-r,i.options.onlyOnScroll&&null!=a||!i.enabled?void 0:null!==a&&a<(s=t.oldScroll)&&s<=i.offset?i.trigger([t.backward]):null!==a&&a>(c=t.oldScroll)&&c>=i.offset?i.trigger([t.forward]):null===a&&t.oldScroll>=i.offset?i.trigger([t.forward]):void 0})})},e.prototype.checkEmpty=function(){return n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([h,m].join(" ")),delete u[this.id]):void 0},e}(),a=function(){function e(e,t,i){var r,o;i=n.extend({},n.fn[v].defaults,i),"bottom-in-view"===i.offset&&(i.offset=function(){
var e;return e=n[y]("viewportHeight"),n.isWindow(t.element)||(e=t.$element.height()),e-n(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=i.horizontal?"horizontal":"vertical",this.callback=i.handler,this.context=t,this.enabled=i.enabled,this.id="waypoints"+g++,this.offset=null,this.options=i,t.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,r=null!=(o=e.data(_))?o:[],r.push(this.id),e.data(_,r)}return e.prototype.trigger=function(e){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,i;return(i=n(e).data(_))?(t=n.extend({},s.horizontal,s.vertical),n.map(i,function(e){return t[e]})):[]},e}(),p={init:function(e,t){var i;return null==t&&(t={}),null==(i=t.handler)&&(t.handler=e),this.each(function(){var e,i,r,s;return e=n(this),r=null!=(s=t.context)?s:n.fn[v].defaults.context,n.isWindow(r)||(r=e.closest(r)),r=n(r),i=u[r.data(l)],i||(i=new o(r)),new a(e,i,t)}),n[y]("refresh"),this},disable:function(){return p._invoke(this,"disable")},enable:function(){return p._invoke(this,"enable")},destroy:function(){return p._invoke(this,"destroy")},prev:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){return t>0?e.push(n[t-1]):void 0})},next:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){return t<n.length-1?e.push(n[t+1]):void 0})},_traverse:function(e,t,r){var o,a;return null==e&&(e="vertical"),null==t&&(t=i),a=f.aggregate(t),o=[],this.each(function(){var t;return t=n.inArray(this,a[e]),r(o,t,a[e])}),this.pushStack(o)},_invoke:function(e,t){return e.each(function(){var e;return e=a.getWaypointsByElement(this),n.each(e,function(e,n){return n[t](),!0})}),this}},n.fn[v]=function(){var e,i;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],p[i]?p[i].apply(this,e):n.isFunction(i)?p.init.apply(this,arguments):n.isPlainObject(i)?p.init.apply(this,[null,i]):i?n.error("The "+i+" method does not exist in jQuery Waypoints."):n.error("jQuery Waypoints needs a callback function or handler option.")},n.fn[v].defaults={context:i,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},f={refresh:function(){return n.each(u,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=i.innerHeight)?e:r.height()},aggregate:function(e){var t,i,r;return t=s,e&&(t=null!=(r=u[n(e).data(l)])?r.waypoints:void 0),t?(i={horizontal:[],vertical:[]},n.each(i,function(e,r){return n.each(t[e],function(e,t){return r.push(t)}),r.sort(function(e,t){return e.offset-t.offset}),i[e]=n.map(r,function(e){return e.element}),i[e]=n.unique(i[e])}),i):[]},above:function(e){return null==e&&(e=i),f._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=i),f._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=i),f._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=i),f._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return f._invoke("enable")},disable:function(){return f._invoke("disable")},destroy:function(){return f._invoke("destroy")},extendFn:function(e,t){return p[e]=t},_invoke:function(e){var t;return t=n.extend({},s.vertical,s.horizontal),n.each(t,function(t,n){return n[e](),!0})},_filter:function(e,t,i){var r,o;return(r=u[n(e).data(l)])?(o=[],n.each(r.waypoints[t],function(e,t){return i(r,t)?o.push(t):void 0}),o.sort(function(e,t){return e.offset-t.offset}),n.map(o,function(e){return e.element})):[]}},n[y]=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],f[n]?f[n].apply(null,e):f.aggregate.call(null,n)},n[y].settings={resizeThrottle:100,scrollThrottle:30},r.load(function(){return n[y]("refresh")})})}.call(this),function(e,t){"object"==typeof exports?module.exports=t(require("jquery","./URI")):"function"==typeof define&&define.amd?define(["jquery","./URI"],t):t(e.jQuery,e.URI)}(this,function(e,t){"use strict";function n(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function i(e){var n=e.nodeName.toLowerCase(),i=t.domAttributes[n];return"input"===n&&"image"!==e.type?void 0:i}function r(t){return{get:function(n){return e(n).uri()[t]()},set:function(n,i){return e(n).uri()[t](i),i}}}function o(t,n){var r,o,c;return i(t)&&n?(r=n.match(u),r&&(r[5]||":"===r[2]||s[r[2]])?(c=e(t).uri(),r[5]?c.is(r[5]):":"===r[2]?(o=r[1].toLowerCase()+":",s[o]?s[o](c,r[4]):!1):(o=r[1].toLowerCase(),a[o]?s[r[2]](c[o](),r[4],o):!1)):!1):!1}var a={},s={"=":function(e,t){return e===t},"^=":function(e,t,i){return!!(e+"").match(new RegExp("^"+n(t),"i"))},"$=":function(e,t,i){return!!(e+"").match(new RegExp(n(t)+"$","i"))},"*=":function(e,t,i){return"directory"==i&&(e+="/"),!!(e+"").match(new RegExp(n(t),"i"))},"equals:":function(e,t){return e.equals(t)},"is:":function(e,t){return e.is(t)}};e.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(t,n){a[n]=!0,e.attrHooks["uri:"+n]=r(n)});var c={get:function(t){return e(t).uri()},set:function(t,n){return e(t).uri().href(n).toString()}};e.each(["src","href","action","uri","cite"],function(t,n){e.attrHooks[n]={set:c.set}}),e.attrHooks.uri.get=c.get,e.fn.uri=function(e){var n=this.first(),r=n.get(0),o=i(r);if(!o)throw new Error('Element "'+r.nodeName+'" does not have either property: href, src, action, cite');if(void 0!==e){var a=n.data("uri");if(a)return a.href(e);e instanceof t||(e=t(e||""))}else{if(e=n.data("uri"))return e;e=t(n.attr(o)||"")}return e._dom_element=r,e._dom_attribute=o,e.normalize(),n.data("uri",e),e},t.prototype.build=function(e){return this._dom_element?(this._string=t.build(this._parts),this._deferred_build=!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string):e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=t.build(this._parts),this._deferred_build=!1),this};var l,u=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;return l=e.expr.createPseudo?e.expr.createPseudo(function(e){return function(t){return o(t,e)}}):function(e,t,n){return o(e,n[3])},e.expr[":"].uri=l,{}}),function(e){"use strict";function t(e){return(e||"").toLowerCase()}var n="2.0.2";e.fn.cycle=function(n){var i;return 0!==this.length||e.isReady?this.each(function(){var i,r,o,a,s=e(this),c=e.fn.cycle.log;if(!s.data("cycle.opts")){(s.data("cycle-log")===!1||n&&n.log===!1||r&&r.log===!1)&&(c=e.noop),c("--c2 init--"),i=s.data();for(var l in i)i.hasOwnProperty(l)&&/^cycle[A-Z]+/.test(l)&&(a=i[l],o=l.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),c(o+":",a,"("+typeof a+")"),i[o]=a);r=e.extend({},e.fn.cycle.defaults,i,n||{}),r.timeoutId=0,r.paused=r.paused||!1,r.container=s,r._maxZ=r.maxZ,r.API=e.extend({_container:s},e.fn.cycle.API),r.API.log=c,r.API.trigger=function(e,t){return r.container.trigger(e,t),r.API},s.data("cycle.opts",r),s.data("cycle.API",r.API),r.API.trigger("cycle-bootstrap",[r,r.API]),r.API.addInitialSlides(),r.API.preInitSlideshow(),r.slides.length&&r.API.initSlideshow()}}):(i={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(i.s,i.c).cycle(n)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),n=t.slides;t.slideCount=0,t.slides=e(),n=n.jquery?n:t.container.find(n),t.random&&n.sort(function(){return Math.random()-.5}),t.API.add(n)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.preInit)&&n.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var n=e.fn.cycle.transitions[t.fx];n&&e.isFunction(n.postInit)&&n.postInit(t)},initSlideshow:function(){var t,n=this.opts(),i=n.container;n.API.calcFirstSlide(),"static"==n.container.css("position")&&n.container.css("position","relative"),e(n.slides[n.currSlide]).css("opacity",1).show(),n.API.stackSlides(n.slides[n.currSlide],n.slides[n.nextSlide],!n.reverse),n.pauseOnHover&&(n.pauseOnHover!==!0&&(i=e(n.pauseOnHover)),i.hover(function(){n.API.pause(!0)},function(){n.API.resume(!0)})),n.timeout&&(t=n.API.getSlideOpts(n.currSlide),n.API.queueTransition(t,t.timeout+n.delay)),n._initialized=!0,n.API.updateView(!0),n.API.trigger("cycle-initialized",[n]),n.API.postInitSlideshow()},pause:function(t){var n=this.opts(),i=n.API.getSlideOpts(),r=n.hoverPaused||n.paused;t?n.hoverPaused=!0:n.paused=!0,r||(n.container.addClass("cycle-paused"),n.API.trigger("cycle-paused",[n]).log("cycle-paused"),i.timeout&&(clearTimeout(n.timeoutId),n.timeoutId=0,n._remainingTimeout-=e.now()-n._lastQueue,(n._remainingTimeout<0||isNaN(n._remainingTimeout))&&(n._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),n=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,n||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,n){var i,r=this.opts(),o=r.slideCount,a=!1;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(t){var i,o=e(this);n?r.container.prepend(o):r.container.append(o),r.slideCount++,i=r.API.buildSlideOpts(o),n?r.slides=e(o).add(r.slides):r.slides=r.slides.add(o),r.API.initSlide(i,o,--r._maxZ),o.data("cycle.opts",i),r.API.trigger("cycle-slide-added",[r,i,o])}),r.API.updateView(!0),a=r._preInitialized&&2>o&&r.slideCount>=1,a&&(r._initialized?r.timeout&&(i=r.slides.length,r.nextSlide=r.reverse?i-1:1,r.timeoutId||r.API.queueTransition(r)):r.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();e=parseInt(t.startingSlide||0,10),(e>=t.slides.length||0>e)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,n){var i,r=t;return n&&r.manualFx&&(i=e.fn.cycle.transitions[r.manualFx]),i||(i=e.fn.cycle.transitions[r.fx]),i||(i=e.fn.cycle.transitions.fade,r.API.log('Transition "'+r.fx+'" not found.  Using fade.')),i},prepareTx:function(e,t){var n,i,r,o,a,s=this.opts();return s.slideCount<2?void(s.timeoutId=0):(!e||s.busy&&!s.manualTrump||(s.API.stopTransition(),s.busy=!1,clearTimeout(s.timeoutId),s.timeoutId=0),void(s.busy||(0!==s.timeoutId||e)&&(i=s.slides[s.currSlide],r=s.slides[s.nextSlide],o=s.API.getSlideOpts(s.nextSlide),a=s.API.calcTx(o,e),s._tx=a,e&&void 0!==o.manualSpeed&&(o.speed=o.manualSpeed),s.nextSlide!=s.currSlide&&(e||!s.paused&&!s.hoverPaused&&s.timeout)?(s.API.trigger("cycle-before",[o,i,r,t]),a.before&&a.before(o,i,r,t),n=function(){s.busy=!1,s.container.data("cycle.opts")&&(a.after&&a.after(o,i,r,t),s.API.trigger("cycle-after",[o,i,r,t]),s.API.queueTransition(o),s.API.updateView(!0))},s.busy=!0,a.transition?a.transition(o,i,r,t,n):s.API.doTransition(o,i,r,t,n),s.API.calcNextSlide(),s.API.updateView()):s.API.queueTransition(o))))},doTransition:function(t,n,i,r,o){var a=t,s=e(n),c=e(i),l=function(){c.animate(a.animIn||{opacity:1},a.speed,a.easeIn||a.easing,o)};c.css(a.cssBefore||{}),s.animate(a.animOut||{},a.speed,a.easeOut||a.easing,function(){s.css(a.cssAfter||{}),a.sync||l()}),a.sync&&l()},queueTransition:function(t,n){var i=this.opts(),r=void 0!==n?n:t.timeout;return 0===i.nextSlide&&0===--i.loop?(i.API.log("terminating; loop=0"),i.timeout=0,r?setTimeout(function(){i.API.trigger("cycle-finished",[i])},r):i.API.trigger("cycle-finished",[i]),void(i.nextSlide=i.currSlide)):void(r&&(i._lastQueue=e.now(),void 0===n&&(i._remainingTimeout=t.timeout),i.paused||i.hoverPaused||(i.timeoutId=setTimeout(function(){i.API.prepareTx(!1,!i.reverse)},r))))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(n){var i,r,o=this.opts(),a=n.data()||{};for(var s in a)a.hasOwnProperty(s)&&/^cycle[A-Z]+/.test(s)&&(i=a[s],r=s.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),o.API.log("["+(o.slideCount-1)+"]",r+":",i,"("+typeof i+")"),a[r]=i);a=e.extend({},e.fn.cycle.defaults,o,a),a.slideNum=o.slideCount;try{delete a.API,delete a.slideCount,delete a.currSlide,delete a.nextSlide,delete a.slides}catch(c){}return a},getSlideOpts:function(t){var n=this.opts();void 0===t&&(t=n.currSlide);var i=n.slides[t],r=e(i).data("cycle.opts");return e.extend({},n,r)},initSlide:function(t,n,i){var r=this.opts();n.css(t.slideCss||{}),i>0&&n.css("zIndex",i),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),n.addClass(r.slideClass)},updateView:function(e,t,n){var i=this.opts();if(i._initialized){var r=i.API.getSlideOpts(),o=i.slides[i.currSlide];!e&&t!==!0&&(i.API.trigger("cycle-update-view-before",[i,r,o]),i.updateView<0)||(i.slideActiveClass&&i.slides.removeClass(i.slideActiveClass).eq(i.currSlide).addClass(i.slideActiveClass),e&&i.hideNonActive&&i.slides.filter(":not(."+i.slideActiveClass+")").hide(),0===i.updateView&&setTimeout(function(){i.API.trigger("cycle-update-view",[i,r,o,e])},r.speed/(i.sync?2:1)),0!==i.updateView&&i.API.trigger("cycle-update-view",[i,r,o,e]),e&&i.API.trigger("cycle-update-view-after",[i,r,o]))}},getComponent:function(t){var n=this.opts(),i=n[t];return"string"==typeof i?/^\s*[\>|\+|~]/.test(i)?n.container.find(i):e(i):i.jquery?i:e(i)},stackSlides:function(t,n,i){var r=this.opts();t||(t=r.slides[r.currSlide],n=r.slides[r.nextSlide],i=!r.reverse),e(t).css("zIndex",r.maxZ);var o,a=r.maxZ-2,s=r.slideCount;if(i){for(o=r.currSlide+1;s>o;o++)e(r.slides[o]).css("zIndex",a--);for(o=0;o<r.currSlide;o++)e(r.slides[o]).css("zIndex",a--)}else{for(o=r.currSlide-1;o>=0;o--)e(r.slides[o]).css("zIndex",a--);for(o=s-1;o>r.currSlide;o--)e(r.slides[o]).css("zIndex",a--)}e(n).css("zIndex",r.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: "+n},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,n,i){e.API.stackSlides(n,t,i),e.cssBefore={opacity:1,display:"block"}}},fade:{before:function(t,n,i,r){var o=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,r),t.cssBefore=e.extend(o,{opacity:0,display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,n,i,r){var o=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(n,i,r),t.cssBefore=e.extend(o,{opacity:1,display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,n,i){e.API.stackSlides(t,n,i);var r=e.container.css("overflow","hidden").width();e.cssBefore={left:i?r:-r,top:0,opacity:1,display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:i?-r:r}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),function(e){"use strict";function t(t,n,i){var r,o=t.API.getComponent("pager");o.each(function(){var o=e(this);if(n.pagerTemplate){var a=t.API.tmpl(n.pagerTemplate,n,t,i[0]);r=e(a).appendTo(o)}else r=o.children().eq(t.slideCount-1);r.on(t.pagerEvent,function(e){e.preventDefault(),t.API.page(o,e.currentTarget)})})}function n(e,t){var n=this.opts();if(!n.busy||n.manualTrump){var i=e.children().index(t),r=i,o=n.currSlide<r;n.currSlide!=r&&(n.nextSlide=r,n.API.prepareTx(!0,o),n.API.trigger("cycle-pager-activated",[n,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,n,i){i.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,i,r){t.pager&&(t.API.buildPagerLink(t,i,r),t.API.page=n)}),e(document).on("cycle-slide-removed",function(t,n,i,r){if(n.pager){var o=n.API.getComponent("pager");o.each(function(){var t=e(this);e(t.children()[i]).remove()})}}),e(document).on("cycle-update-view",function(t,n,i){var r;n.pager&&(r=n.API.getComponent("pager"),r.each(function(){e(this).children().removeClass(n.pagerActiveClass).eq(n.currSlide).addClass(n.pagerActiveClass)}))}),e(document).on("cycle-destroyed",function(e,t){var n=t.API.getComponent("pager");n&&(n.children().off(t.pagerEvent),t.pagerTemplate&&n.empty())})}(jQuery),function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(n){var i,r,o,a=e.makeArray(arguments);return"number"==e.type(n)?this.cycle("goto",n):"string"==e.type(n)?this.each(function(){var s;return i=n,o=e(this).data("cycle.opts"),void 0===o?void t.log('slideshow must be initialized before sending commands; "'+i+'" ignored'):(i="goto"==i?"jump":i,r=o.API[i],e.isFunction(r)?(s=e.makeArray(a),s.shift(),r.apply(o.API,s)):void t.log("unknown command: ",i))}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;e.allowWrap===!1&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;e.allowWrap===!1&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),n=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),n(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){e(this).removeData(),n(this,"parsedAttrs",!1)})},jump:function(e){var t,n=this.opts();if(!n.busy||n.manualTrump){var i=parseInt(e,10);if(isNaN(i)||0>i||i>=n.slides.length)return void n.API.log("goto: invalid slide index: "+i);if(i==n.currSlide)return void n.API.log("goto: skipping, already on slide",i);n.nextSlide=i,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",i," (zero-index)"),t=n.currSlide<n.nextSlide,n.API.prepareTx(!0,t)}},stop:function(){var t=this.opts(),n=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(t.pauseOnHover!==!0&&(n=e(t.pauseOnHover)),n.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var n,i,r=this.opts(),o=[],a=1,s=0;s<r.slides.length;s++)n=r.slides[s],s==t?i=n:(o.push(n),e(n).data("cycle.opts").slideNum=a,a++);i&&(r.slides=e(o),r.slideCount--,e(i).remove(),t==r.currSlide?r.API.advanceSlide(1):t<r.currSlide?r.currSlide--:r.currSlide++,r.API.trigger("cycle-slide-removed",[r,t,i]).log("cycle-slide-removed"),r.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var n=e(this),i=n.data("cycle-cmd"),r=n.data("cycle-context")||".cycle-slideshow";e(r).cycle(i,n.data("cycle-arg"))})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var n=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",i=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(n,function(e){t.API.next()}),t.container.on(i,function(){t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t,n,i){if(!t.allowWrap){var r=t.disabledClass,o=t.API.getComponent("next"),a=t.API.getComponent("prev"),s=t._prevBoundry||0,c=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==c?o.addClass(r).prop("disabled",!0):o.removeClass(r).prop("disabled",!1),t.currSlide===s?a.addClass(r).prop("disabled",!0):a.removeClass(r).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,n,i,r){if("caption"===n.captionModule){e.each(["caption","overlay"],function(){var e=this,t=i[e+"Template"],o=n.API.getComponent(e);o.length&&t?(o.html(n.API.tmpl(t,i,n,r)),o.show()):o.hide()})}}),e(document).on("cycle-destroyed",function(t,n){var i;e.each(["caption","overlay"],function(){var e=this,t=n[e+"Template"];n[e]&&t&&(i=n.API.getComponent("caption"),i.empty())})})}(jQuery),function(e){"use strict";function t(t,i){var r,o,a,s=i.autoHeight;if("container"==s)o=e(i.slides[i.currSlide]).outerHeight(),i.container.height(o);else if(i._autoHeightRatio)i.container.height(i.container.width()/i._autoHeightRatio);else if("calc"===s||"number"==e.type(s)&&s>=0){if(a="calc"===s?n(t,i):s>=i.slides.length?0:s,a==i._sentinelIndex)return;i._sentinelIndex=a,i._sentinel&&i._sentinel.remove(),r=e(i.slides[a].cloneNode(!0)),r.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),r.css({position:"static",visibility:"hidden",display:"block"}).prependTo(i.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),r.find("*").css("visibility","hidden"),i._sentinel=r}}function n(t,n){var i=0,r=-1;return n.slides.each(function(t){var n=e(this).height();n>r&&(r=n,i=t)}),i}function i(t,n,i,r,o){var a=e(r).outerHeight();n.container.animate({height:a},n.autoHeightSpeed,n.autoHeightEasing)}function r(n,o){o._autoHeightOnResize&&(e(window).off("resize orientationchange",o._autoHeightOnResize),o._autoHeightOnResize=null),o.container.off("cycle-slide-added cycle-slide-removed",t),o.container.off("cycle-destroyed",r),o.container.off("cycle-before",i),o._sentinel&&(o._sentinel.remove(),o._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(n,o){function a(){t(n,o)}var s,c=o.autoHeight,l=e.type(c),u=null;("string"===l||"number"===l)&&(o.container.on("cycle-slide-added cycle-slide-removed",t),o.container.on("cycle-destroyed",r),"container"==c?o.container.on("cycle-before",i):"string"===l&&/\d+\:\d+/.test(c)&&(s=c.match(/(\d+)\:(\d+)/),s=s[1]/s[2],o._autoHeightRatio=s),"number"!==l&&(o._autoHeightOnResize=function(){clearTimeout(u),u=setTimeout(a,50)},e(window).on("resize orientationchange",o._autoHeightOnResize)),setTimeout(a,30))})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,n){var i=new RegExp(n.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),r=e.makeArray(arguments);return r.shift(),t.replace(i,function(t,n){var i,o,a,s,c=n.split(".");for(i=0;i<r.length;i++)if(a=r[i]){if(c.length>1)for(s=a,o=0;o<c.length;o++)a=s,s=s[c[o]]||n;else s=a[n];if(e.isFunction(s))return s.apply(a,r);if(void 0!==s&&null!==s&&s!=n)return s}return n})}})}(jQuery),function(e){"use strict";function t(t,n){var i;return t._hashFence?void(t._hashFence=!1):(i=window.location.hash.substring(1),void t.slides.each(function(r){if(e(this).data("cycle-hash")==i){if(n===!0)t.startingSlide=r;else{var o=t.currSlide<r;t.nextSlide=r,t.API.prepareTx(!0,o)}return!1}}))}e(document).on("cycle-pre-initialize",function(n,i){t(i,!0),i._onHashChange=function(){t(i,!1)},e(window).on("hashchange",i._onHashChange)}),e(document).on("cycle-update-view",function(e,t,n){n.hash&&"#"+n.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=n.hash)}),e(document).on("cycle-destroyed",function(t,n){n._onHashChange&&e(window).off("hashchange",n._onHashChange)})}(jQuery),function(e){"use strict";window.XDomainRequest&&e.ajaxTransport(function(t){if(t.crossDomain&&t.async){t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout);var n;return{send:function(i,r){function o(t,i,o,a){n.onload=n.onerror=n.ontimeout=e.noop,n=void 0,r(t,i,o,a)}n=new XDomainRequest,n.onload=function(){o(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},n.onerror=function(){o(404,"Not Found")},n.onprogress=function(){},n.ontimeout=function(){o(0,"timeout")},n.timeout=t.xdrTimeout||Number.MAX_VALUE,n.open(t.type,t.url),n.send(t.hasContent&&t.data||null)},abort:function(){n&&(n.onerror=e.noop,n.abort())}}}})}(jQuery),function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.console||t,i=e.document,r=e.navigator,o=e.sessionStorage||!1,a=e.setTimeout,s=e.clearTimeout,c=e.setInterval,l=e.clearInterval,u=e.JSON,d=e.alert,f=e.History=e.History||{},p=e.history;try{o.setItem("TEST","1"),o.removeItem("TEST")}catch(h){o=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,"undefined"!=typeof f.init)throw new Error("History.js Core has already been loaded...");f.init=function(e){return"undefined"==typeof f.Adapter?!1:("undefined"!=typeof f.initCore&&f.initCore(),"undefined"!=typeof f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(h){if("undefined"!=typeof f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||i.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var e,t=f.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)l(t[e]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(){var e,t,r,o,a,s=!("undefined"==typeof n||"undefined"==typeof n.log||"undefined"==typeof n.log.apply),c=i.getElementById("log");for(s?(o=Array.prototype.slice.call(arguments),e=o.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[e,o]):n.log.apply(n,[e,o])):e="\n"+arguments[0]+"\n",t=1,r=arguments.length;r>t;++t){if(a=arguments[t],"object"==typeof a&&"undefined"!=typeof u)try{a=u.stringify(a)}catch(l){}e+="\n"+a+"\n"}return c?(c.value+=e+"\n-----\n",c.scrollTop=c.scrollHeight-c.clientHeight):s||d(e),!0},f.getInternetExplorerMajorVersion=function(){var e=f.getInternetExplorerMajorVersion.cached="undefined"!=typeof f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},f.isInternetExplorer=function(){var e=f.isInternetExplorer.cached="undefined"!=typeof f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion());return e},f.options.html4Mode?f.emulated={pushState:!0,hashChange:!0}:f.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.cloneObject=function(e){var t,n;return e?(t=u.stringify(e),n=u.parse(t)):n={},n},f.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},f.getBaseHref=function(){var e=i.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},f.getBaseUrl=function(){var e=f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl();return e},f.getPageUrl=function(){var e,t=f.getState(!1,!1),n=(t||{}).url||f.getLocationHref();return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},f.getBasePageUrl=function(){var e=f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},f.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(n="/"===i?f.getRootUrl()+e.replace(/^\/+/,""):"#"===i?f.getPageUrl().replace(/#.*/,"")+e:"?"===i?f.getPageUrl().replace(/[\?#].*/,"")+e:t?f.getBaseUrl()+e.replace(/^(\.\/)+/,""):f.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(e){var t=e,n=f.getBaseUrl(),i=f.getRootUrl();return f.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),f.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(e){return e=e||i,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=f.getLastSavedState();return!n&&t&&(n=f.createStateObject()),e&&(n=f.cloneObject(n),n.url=n.cleanUrl||n.url),n},f.getIdByState=function(e){var t,n=f.extractId(e.url);if(!n)if(t=f.getStateString(e),"undefined"!=typeof f.stateToId[t])n=f.stateToId[t];else if("undefined"!=typeof f.store.stateToId[t])n=f.store.stateToId[t];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof f.idToState[n]&&"undefined"==typeof f.store.idToState[n])break;f.stateToId[t]=n,f.idToState[n]=e}return n},f.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=f.getFullUrl(e.url?e.url:f.getLocationHref()),t.hash=f.getShortUrl(t.url),
t.data=f.cloneObject(e.data),t.id=f.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!f.isEmptyObject(t.data),(t.title||n)&&f.options.disableSuid!==!0&&(t.hash=f.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=f.getFullUrl(t.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},f.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=f.normalizeState(i)},f.getStateById=function(e){e=String(e);var n=f.idToState[e]||f.store.idToState[e]||t;return n},f.getStateString=function(e){var t,n,i;return t=f.normalizeState(e),n={data:t.data,title:e.title,url:e.url},i=u.stringify(n)},f.getStateId=function(e){var t,n;return t=f.normalizeState(e),n=t.id},f.getHashByState=function(e){var t,n;return t=f.normalizeState(e),n=t.hash},f.extractId=function(e){var t,n,i,r;return r=-1!=e.indexOf("#")?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(r),i=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},f.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},f.extractState=function(e,t,n){var i,r,o=null;return t=t||!1,i=f.extractId(e),i&&(o=f.getStateById(i)),o||(r=f.getFullUrl(e),i=f.getIdByUrl(r)||!1,i&&(o=f.getStateById(i)),o||!t||f.isTraditionalAnchor(e)||(o=f.createStateObject(null,n||null,r))),o},f.getIdByUrl=function(e){var n=f.urlToId[e]||f.store.urlToId[e]||t;return n},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||t},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||t},f.hasUrlDuplicate=function(e){var t,n=!1;return t=f.extractState(e.url),n=t&&t.id!==e.id},f.storeState=function(e){return f.urlToId[e.url]=e.id,f.storedStates.push(f.cloneObject(e)),e},f.isLastSavedState=function(e){var t,n,i,r=!1;return f.savedStates.length&&(t=e.id,n=f.getLastSavedState(),i=n.id,r=t===i),r},f.saveState=function(e){return f.isLastSavedState(e)?!1:(f.savedStates.push(f.cloneObject(e)),!0)},f.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?f.savedStates[f.savedStates.length-1]:0>e?f.savedStates[f.savedStates.length+e]:f.savedStates[e]},f.getCurrentIndex=function(){var e=null;return e=f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(e){var t,n=f.getLocationHref(e);return t=f.getHashByUrl(n)},f.unescapeHash=function(e){var t=f.normalizeHash(e);return t=decodeURIComponent(t)},f.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},f.setHash=function(e,t){var n,r;return t!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:t}),!1):(f.busy(!0),n=f.extractState(e,!0),n&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==e&&(f.bugs.setHash?(r=f.getPageUrl(),f.pushState(null,null,r+"#"+e,!1)):i.location.hash=e),f)},f.escapeHash=function(t){var n=f.normalizeHash(t);return n=e.encodeURIComponent(n),f.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},f.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=f.unescapeHash(t)},f.setTitle=function(e){var t,n=e.title;n||(t=f.getStateByIndex(0),t&&t.url===e.url&&(n=t.title)),n||(n=f.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(r){}return i.title=n,f},f.queues=[],f.busy=function(e){if("undefined"!=typeof e?f.busy.flag=e:"undefined"==typeof f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){s(f.busy.timeout);var t=function(){var e,n,i;if(!f.busy.flag)for(e=f.queues.length-1;e>=0;--e)n=f.queues[e],0!==n.length&&(i=n.shift(),f.fireQueueItem(i),f.busy.timeout=a(t,f.options.busyDelay))};f.busy.timeout=a(t,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(e){return e.callback.apply(e.scope||f,e.args||[])},f.pushQueue=function(e){return f.queues[e.queue||0]=f.queues[e.queue||0]||[],f.queues[e.queue||0].push(e),f},f.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),f.busy()?f.pushQueue(e):f.fireQueueItem(e),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(s(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(e){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=a(function(){return f.doubleCheckClear(),f.stateChanged||e(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var t,n=f.extractState(f.getLocationHref());if(!f.isLastSavedState(n))return t=n,t||(t=f.createStateObject()),f.Adapter.trigger(e,"popstate"),f},f.back=function(e){return e!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),p.go(-1),!0)},f.forward=function(e){return e!==!1&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),p.go(1),!0)},f.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)f.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)f.back(t)}return f},f.emulated.pushState){var m=function(){};f.pushState=f.pushState||m,f.replaceState=f.replaceState||m}else f.onPopState=function(t,n){var i,r,o=!1,a=!1;return f.doubleCheckComplete(),(i=f.getHash())?(r=f.extractState(i||f.getLocationHref(),!0),r?f.replaceState(r.data,r.title,r.url,!1):(f.Adapter.trigger(e,"anchorchange"),f.busy(!1)),f.expectedStateId=!1,!1):(o=f.Adapter.extractEventData("state",t,n)||!1,a=o?f.getStateById(o):f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()),a||(a=f.createStateObject(null,null,f.getLocationHref())),f.expectedStateId=!1,f.isLastSavedState(a)?(f.busy(!1),!1):(f.storeState(a),f.saveState(a),f.setTitle(a),f.Adapter.trigger(e,"statechange"),f.busy(!1),!0))},f.Adapter.bind(e,"popstate",f.onPopState),f.pushState=function(t,n,i,r){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:r}),!1;f.busy(!0);var o=f.createStateObject(t,n,i);return f.isLastSavedState(o)?f.busy(!1):(f.storeState(o),f.expectedStateId=o.id,p.pushState(o.id,o.title,o.url),f.Adapter.trigger(e,"popstate")),!0},f.replaceState=function(t,n,i,r){if(f.getHashByUrl(i)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:r}),!1;f.busy(!0);var o=f.createStateObject(t,n,i);return f.isLastSavedState(o)?f.busy(!1):(f.storeState(o),f.expectedStateId=o.id,p.replaceState(o.id,o.title,o.url),f.Adapter.trigger(e,"popstate")),!0};if(o){try{f.store=u.parse(o.getItem("History.store"))||{}}catch(g){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(e,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0,i.title))),o&&(f.onUnload=function(){var e,t,n;try{e=u.parse(o.getItem("History.store"))||{}}catch(i){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in f.idToState)f.idToState.hasOwnProperty(t)&&(e.idToState[t]=f.idToState[t]);for(t in f.urlToId)f.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=f.urlToId[t]);for(t in f.stateToId)f.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=f.stateToId[t]);f.store=e,f.normalizeStore(),n=u.stringify(e);try{o.setItem("History.store",n)}catch(r){if(r.code!==DOMException.QUOTA_EXCEEDED_ERR)throw r;o.length&&(o.removeItem("History.store"),o.setItem("History.store",n))}},f.intervalList.push(c(f.onUnload,f.options.storeInterval)),f.Adapter.bind(e,"beforeunload",f.onUnload),f.Adapter.bind(e,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(c(f.safariStatePoll,f.options.safariPollInterval)),("Apple Computer, Inc."===r.vendor||"Mozilla"===(r.appCodeName||""))&&(f.Adapter.bind(e,"hashchange",function(){f.Adapter.trigger(e,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(e,"hashchange")})))},f.options&&f.options.delayInit||f.init()}}(window),function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.document,i=e.setTimeout||i,r=e.clearTimeout||r,o=e.setInterval||o,a=e.History=e.History||{};if("undefined"!=typeof a.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");a.initHtml4=function(){return"undefined"!=typeof a.initHtml4.initialized?!1:(a.initHtml4.initialized=!0,a.enabled=!0,a.savedHashes=[],a.isLastHash=function(e){var t,n=a.getHashByIndex();return t=e===n},a.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},a.saveHash=function(e){return a.isLastHash(e)?!1:(a.savedHashes.push(e),!0)},a.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?a.savedHashes[a.savedHashes.length-1]:0>e?a.savedHashes[a.savedHashes.length+e]:a.savedHashes[e]},a.discardedHashes={},a.discardedStates={},a.discardState=function(e,t,n){var i,r=a.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},a.discardedStates[r]=i,!0},a.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return a.discardedHashes[e]=i,!0},a.discardedState=function(e){var t,n=a.getHashByState(e);return t=a.discardedStates[n]||!1},a.discardedHash=function(e){var t=a.discardedHashes[e]||!1;return t},a.recycleState=function(e){var t=a.getHashByState(e);return a.discardedState(e)&&delete a.discardedStates[t],!0},a.emulated.hashChange&&(a.hashChangeInit=function(){a.checkerFunction=null;var t,i,r,s,c="",l=Boolean(a.getHash());return a.isInternetExplorer()?(t="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",t),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),r="",s=!1,a.checkerFunction=function(){if(s)return!1;s=!0;var t=a.getHash(),n=a.getHash(i.contentWindow.document);return t!==c?(c=t,n!==t&&(r=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=a.escapeHash(t)),a.Adapter.trigger(e,"hashchange")):n!==r&&(r=n,l&&""===n?a.back():a.setHash(n,!1)),s=!1,!0}):a.checkerFunction=function(){var t=a.getHash()||"";return t!==c&&(c=t,a.Adapter.trigger(e,"hashchange")),!0},a.intervalList.push(o(a.checkerFunction,a.options.hashChangeInterval)),!0},a.Adapter.onDomLoad(a.hashChangeInit)),a.emulated.pushState&&(a.onHashChange=function(t){var n,i=t&&t.newURL||a.getLocationHref(),r=a.getHashByUrl(i),o=null,s=null;return a.isLastHash(r)?(a.busy(!1),!1):(a.doubleCheckComplete(),a.saveHash(r),r&&a.isTraditionalAnchor(r)?(a.Adapter.trigger(e,"anchorchange"),a.busy(!1),!1):(o=a.extractState(a.getFullUrl(r||a.getLocationHref()),!0),a.isLastSavedState(o)?(a.busy(!1),!1):(s=a.getHashByState(o),(n=a.discardedState(o))?(a.getHashByIndex(-2)===a.getHashByState(n.forwardState)?a.back(!1):a.forward(!1),!1):(a.pushState(o.data,o.title,encodeURI(o.url),!1),!0))))},a.Adapter.bind(e,"hashchange",a.onHashChange),a.pushState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),a.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(r!==!1&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:r}),!1;a.busy(!0);var o=a.createStateObject(t,n,i),s=a.getHashByState(o),c=a.getState(!1),l=a.getHashByState(c),u=a.getHash(),d=a.expectedStateId==o.id;return a.storeState(o),a.expectedStateId=o.id,a.recycleState(o),a.setTitle(o),s===l?(a.busy(!1),!1):(a.saveState(o),d||a.Adapter.trigger(e,"statechange"),a.isHashEqual(s,u)||a.isHashEqual(s,a.getShortUrl(a.getLocationHref()))||a.setHash(s,!1),a.busy(!1),!0)},a.replaceState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),a.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(r!==!1&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:r}),!1;a.busy(!0);var o=a.createStateObject(t,n,i),s=a.getHashByState(o),c=a.getState(!1),l=a.getHashByState(c),u=a.getStateByIndex(-2);return a.discardState(c,o,u),s===l?(a.storeState(o),a.expectedStateId=o.id,a.recycleState(o),a.setTitle(o),a.saveState(o),a.Adapter.trigger(e,"statechange"),a.busy(!1)):a.pushState(o.data,o.title,o.url,!1),!0}),void(a.emulated.pushState&&a.getHash()&&!a.emulated.hashChange&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(e,"hashchange")})))},"undefined"!=typeof a.init&&a.init()}}(window),function(e,t){"use strict";if("undefined"==typeof DISABLE_HISTORY_JS||!DISABLE_HISTORY_JS){var n=e.History=e.History||{},i=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,n,i){var r=n&&n.originalEvent&&n.originalEvent[e]||i&&i[e]||t;return r},onDomLoad:function(e){i(e)}},"undefined"!=typeof n.init&&n.init()}}(window),function(e){function t(t,i,r){var o=(new Date).getTime();return t.find("label,input,textarea,select").each(function(t,a){n(e(a),o,i,r)}),t.removeClass("template").show()}function n(t,n,r,o){var a=r.pattern||i,s=new RegExp("_"+a+"_"),c=new RegExp("\\["+a+"\\]");t.attr("id")&&t.attr("id",t.attr("id").replace(s,"_"+n+"_")),t.attr("for")&&t.attr("for",t.attr("for").replace(s,"_"+n+"_")),t.attr("name")&&(r.copy_values&&t.val(e('[name="'+t.attr("name")+'"]').val()),t.attr("name",t.attr("name").replace(c,"["+n+"]"))),"function"==typeof o&&o.apply(t,t)}var i="-1";e.fn.clone_form_template=function(n,i){return n||(n={}),e(this).map(function(){return t(e(this).clone(),n,i)[0]})}}(jQuery),function(e){function t(t,n,i){this.url=t,this.finished=n||function(){},this.options=e.extend({delay:3e4,on_error:function(){},on_complete:function(){},continue_on_error:!1},i),this.xhr=!1,this.running=!1,this.go()}e.pollster=function(e,n,i){return new t(e,n,i)},window.Pollster=t,t.prototype.start=function(){var e=this;this.running=!0,this.timeout=setTimeout(function(){e.go()},this.options.delay)},t.prototype.stop=function(){this.running=!1,this.timeout&&clearTimeout(this.timeout)},t.prototype.go=function(){function t(){n?i.stop():i.start()}var n=!1,i=this;this.xhr||(this.xhr=e.ajax({url:this.url,dataType:"json",type:"get",global:!1,cache:!1,success:function(e){n=i.finished(e),t()},error:function(){i.options.continue_on_error&&t(),i.options.on_error()},complete:function(){i.xhr=!1,i.options.on_complete()}}))}}(jQuery),function(e){function t(e,t){""===e.val()?e.data("placeholder").removeClass(t.hideClass):e.data("placeholder").addClass(t.hideClass)}function n(e,t){e.data("placeholder").addClass(t.hideClass)}function i(e,t){var n=t.is("textarea"),i=parseFloat(t.css("padding-top")),r=parseFloat(t.css("padding-left")),o=t.offset();i&&(o.top+=i),r&&(o.left+=r),e.css({width:t.innerWidth()-(n?20:4),height:t.innerHeight()-6,lineHeight:t.css("line-height"),whiteSpace:n?"normal":"nowrap",overflow:"hidden"}).offset(o)}function r(e,t){var i=e.val();!function r(){c=requestAnimationFrame(r),e.val()!==i&&(n(e,t),a(),o(e,t))}()}function o(e,n){!function i(){c=requestAnimationFrame(i),t(e,n)}()}function a(){window.cancelAnimationFrame&&cancelAnimationFrame(c)}function s(e){l&&window.console&&window.console.log&&window.console.log(e)}var c,l=!1;e.fn.placeHolder=function(o){s("init placeHolder");var c=this,l=e(this).length;return this.options=e.extend({className:"placeholder",visibleToScreenreaders:!0,visibleToScreenreadersHideClass:"placeholder-hide-except-screenreader",visibleToNoneHideClass:"placeholder-hide",hideOnFocus:!1,removeLabelClass:"visuallyhidden",hiddenOverrideClass:"visuallyhidden-with-placeholder",forceHiddenOverride:!0,forceApply:!1,autoInit:!0},o),this.options.hideClass=this.options.visibleToScreenreaders?this.options.visibleToScreenreadersHideClass:this.options.visibleToNoneHideClass,e(this).each(function(o){function u(){!c.options.hideOnFocus&&window.requestAnimationFrame?r(m,c.options):n(m,c.options)}var d,f,p,h,m=e(this),g=m.attr("placeholder"),_=m.attr("id");return(""===g||void 0===g)&&(g=m[0].attributes.placeholder.value),d=m.closest("label"),m.removeAttr("placeholder"),d.length||_?(d=d.length?d:e('label[for="'+_+'"]').first(),d.length?(h=e(d).find(".placeholder"),h.length?(i(h,m),h.text(g),m):(d.hasClass(c.options.removeLabelClass)&&d.removeClass(c.options.removeLabelClass).addClass(c.options.hiddenOverrideClass),f=e("<span>").addClass(c.options.className).text(g).appendTo(d),p=f.width()>m.width(),p&&f.attr("title",g),i(f,m),m.data("placeholder",f),f.data("input",m),f.click(function(){e(this).data("input").focus()}),m.focusin(u),m.focusout(function(){t(e(this),c.options),c.options.hideOnFocus||a()}),t(m,c.options),e(document).bind("fontresize resize",function(){i(f,m)}),e.event.special.resize?e("textarea").bind("resize",function(t){e(this).is(":visible")&&i(f,m),t.stopPropagation(),t.preventDefault()}):e("textarea").css("resize","none"),o>=l-1&&"undefined"!=typeof e.attrHooks&&(e.attrHooks.placeholder={get:function(t){return"input"===t.nodeName.toLowerCase()||"textarea"===t.nodeName.toLowerCase()?e(t).data("placeholder")?e(e(t).data("placeholder")).text():e(t)[0].placeholder:void 0},set:function(t,n){return e(e(t).data("placeholder")).text(n)}}),void(m.is(":focus")&&u()))):void s("the input element with the placeholder needs a label!")):void s("the input element with the placeholder needs an id!")})},e(function(){var t=window.placeHolderConfig||{};return t.autoInit===!1?void s("placeholder:abort because autoInit is off"):("placeholder"in e("<input>")[0]||"placeHolder"in e("<input>")[0])&&!t.forceApply?void s("placeholder:abort because browser has native support"):void e("input[placeholder], textarea[placeholder]").placeHolder(t)})}(jQuery),function(e,t,n){"use strict";function i(n){if(r=t.documentElement,o=t.body,z(),ae=this,n=n||{},de=n.constants||{},n.easing)for(var i in n.easing)V[i]=n.easing[i];ve=n.edgeStrategy||"set",le={beforerender:n.beforerender,render:n.render},ue=n.forceHeight!==!1,ue&&(Ne=n.scale||1),fe=n.mobileDeceleration||x,he=n.smoothScrolling!==!1,me=n.smoothScrollingDuration||j,ge={targetTop:ae.getScrollTop()},qe=(n.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})(),qe?(ce=t.getElementById("skrollr-body"),ce&&oe(),G(),Te(r,[v,w],[y])):Te(r,[v,b],[y]),ae.refresh(),we(e,"resize orientationchange",function(){var e=r.clientWidth,t=r.clientHeight;(t!==Re||e!==Le)&&(Re=t,Le=e,He=!0)});var a=W();return function s(){J(),be=a(s)}(),ae}var r,o,a=e.skrollr={get:function(){return ae},init:function(e){return ae||new i(e)},VERSION:"0.6.21"},s=Object.prototype.hasOwnProperty,c=e.Math,l=e.getComputedStyle,u="touchstart",d="touchmove",f="touchcancel",p="touchend",h="skrollable",m=h+"-before",g=h+"-between",_=h+"-after",v="skrollr",y="no-"+v,b=v+"-desktop",w=v+"-mobile",k="linear",$=1e3,x=.004,j=200,C="start",S="end",T="center",D="bottom",I="___skrollable_id",E=/^(?:input|textarea|button|select)$/i,A=/^\s+|\s+$/g,P=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,N=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,M=/^([a-z\-]+)\[(\w+)\]$/,O=/-([a-z])/g,F=function(e,t){return t.toUpperCase()},L=/[\-+]?[\d]*\.?[\d]+/g,R=/\{\?\}/g,H=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,B=/[a-z\-]+-gradient/g,q="",U="",z=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(l){var t=l(o,null);for(var n in t)if(q=n.match(e)||+n==n&&t[n].match(e))break;if(!q)return void(q=U="");q=q[0],"-"===q.slice(0,1)?(U=q,q={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[q]):U="-"+q.toLowerCase()+"-"}},W=function(){var t=e.requestAnimationFrame||e[q.toLowerCase()+"RequestAnimationFrame"],n=Ee();return(qe||!t)&&(t=function(t){var i=Ee()-n,r=c.max(0,1e3/60-i);return e.setTimeout(function(){n=Ee(),t()},r)}),t},Y=function(){var t=e.cancelAnimationFrame||e[q.toLowerCase()+"CancelAnimationFrame"];return(qe||!t)&&(t=function(t){return e.clearTimeout(t)}),t},V={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-c.cos(e*c.PI)/2+.5},sqrt:function(e){return c.sqrt(e)},outCubic:function(e){return c.pow(e-1,3)+1},bounce:function(e){var t;if(.5083>=e)t=3;else if(.8489>=e)t=9;else if(.96208>=e)t=27;else{if(!(.99981>=e))return 1;t=91}return 1-c.abs(3*c.cos(e*t*1.028)/t)}};i.prototype.refresh=function(e){var i,r,o=!1;for(e===n?(o=!0,se=[],Be=0,e=t.getElementsByTagName("*")):e=[].concat(e),i=0,r=e.length;r>i;i++){var a=e[i],s=a,c=[],l=he,u=ve;if(a.attributes){for(var d=0,f=a.attributes.length;f>d;d++){var p=a.attributes[d];if("data-anchor-target"!==p.name)if("data-smooth-scrolling"!==p.name)if("data-edge-strategy"!==p.name){var m=p.name.match(P);if(null!==m){var g={props:p.value,element:a};c.push(g);var _=m[1];_&&(g.constant=_.substr(1));var v=m[2];/p$/.test(v)?(g.isPercentage=!0,g.offset=(0|v.slice(0,-1))/100):g.offset=0|v;var y=m[3],b=m[4]||y;y&&y!==C&&y!==S?(g.mode="relative",g.anchors=[y,b]):(g.mode="absolute",y===S?g.isEnd=!0:g.isPercentage||(g.offset=g.offset*Ne))}}else u=p.value;else l="off"!==p.value;else if(s=t.querySelector(p.value),null===s)throw'Unable to find anchor target "'+p.value+'"'}if(c.length){var w,k,$;!o&&I in a?($=a[I],w=se[$].styleAttr,k=se[$].classAttr):($=a[I]=Be++,w=a.style.cssText,k=Se(a)),se[$]={element:a,styleAttr:w,classAttr:k,anchorTarget:s,keyFrames:c,smoothScrolling:l,edgeStrategy:u},Te(a,[h],[])}}}for(xe(),i=0,r=e.length;r>i;i++){var x=se[e[i][I]];x!==n&&(X(x),ee(x))}return ae},i.prototype.relativeToAbsolute=function(e,t,n){var i=r.clientHeight,o=e.getBoundingClientRect(),a=o.top,s=o.bottom-o.top;return t===D?a-=i:t===T&&(a-=i/2),n===D?a+=s:n===T&&(a+=s/2),a+=ae.getScrollTop(),a+.5|0},i.prototype.animateTo=function(e,t){t=t||{};var i=Ee(),r=ae.getScrollTop();return pe={startTop:r,topDiff:e-r,targetTop:e,duration:t.duration||$,startTime:i,endTime:i+(t.duration||$),easing:V[t.easing||k],done:t.done},pe.topDiff||(pe.done&&pe.done.call(ae,!1),pe=n),ae},i.prototype.stopAnimateTo=function(){pe&&pe.done&&pe.done.call(ae,!0),pe=n},i.prototype.isAnimatingTo=function(){return!!pe},i.prototype.setScrollTop=function(t,n){return _e=n===!0,qe?Ue=c.min(c.max(t,0),Pe):e.scrollTo(0,t),ae},i.prototype.getScrollTop=function(){return qe?Ue:e.pageYOffset||r.scrollTop||o.scrollTop||0},i.prototype.getMaxScrollTop=function(){return Pe},i.prototype.on=function(e,t){return le[e]=t,ae},i.prototype.off=function(e){return delete le[e],ae},i.prototype.destroy=function(){var e=Y();e(be),$e(),Te(r,[y],[v,b,w]);for(var t=0,i=se.length;i>t;t++)re(se[t].element);r.style.overflow=o.style.overflow="auto",r.style.height=o.style.height="auto",ce&&a.setStyle(ce,"transform","none"),ae=n,ce=n,le=n,ue=n,Pe=0,Ne=1,de=n,fe=n,Me="down",Oe=-1,Le=0,Re=0,He=!1,pe=n,he=n,me=n,ge=n,_e=n,Be=0,ve=n,qe=!1,Ue=0,ye=n};var G=function(){var i,a,s,l,h,m,g,_,v,y,b,w;we(r,[u,d,f,p].join(" "),function(e){var r=e.changedTouches[0];for(l=e.target;3===l.nodeType;)l=l.parentNode;switch(h=r.clientY,m=r.clientX,y=e.timeStamp,E.test(l.tagName)||e.preventDefault(),e.type){case u:i&&i.blur(),ae.stopAnimateTo(),i=l,a=g=h,s=m,v=y;break;case d:E.test(l.tagName)&&t.activeElement!==l&&e.preventDefault(),_=h-g,w=y-b,ae.setScrollTop(Ue-_,!0),g=h,b=y;break;default:case f:case p:var o=a-h,k=s-m,$=k*k+o*o;if(49>$){if(!E.test(i.tagName)){i.focus();var x=t.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,e.view,1,r.screenX,r.screenY,r.clientX,r.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i.dispatchEvent(x)}return}i=n;var j=_/w;j=c.max(c.min(j,3),-3);var C=c.abs(j/fe),S=j*C+.5*fe*C*C,T=ae.getScrollTop()-S,D=0;T>Pe?(D=(Pe-T)/S,T=Pe):0>T&&(D=-T/S,T=0),C*=1-D,ae.animateTo(T+.5|0,{easing:"outCubic",duration:C})}}),e.scrollTo(0,0),r.style.overflow=o.style.overflow="hidden"},Q=function(){var e,t,n,i,o,a,s,l,u,d,f,p=r.clientHeight,h=je();for(l=0,u=se.length;u>l;l++)for(e=se[l],t=e.element,n=e.anchorTarget,i=e.keyFrames,o=0,a=i.length;a>o;o++)s=i[o],d=s.offset,f=h[s.constant]||0,s.frame=d,s.isPercentage&&(d*=p,s.frame=d),"relative"===s.mode&&(re(t),s.frame=ae.relativeToAbsolute(n,s.anchors[0],s.anchors[1])-d,re(t,!0)),s.frame+=f,ue&&!s.isEnd&&s.frame>Pe&&(Pe=s.frame);for(Pe=c.max(Pe,Ce()),l=0,u=se.length;u>l;l++){for(e=se[l],i=e.keyFrames,o=0,a=i.length;a>o;o++)s=i[o],f=h[s.constant]||0,s.isEnd&&(s.frame=Pe-s.offset+f);e.keyFrames.sort(Ae)}},K=function(e,t){for(var n=0,i=se.length;i>n;n++){var r,o,c=se[n],l=c.element,u=c.smoothScrolling?e:t,d=c.keyFrames,f=d[0].frame,p=d[d.length-1].frame,v=f>u,y=u>p,b=d[v?0:d.length-1];if(v||y){if(v&&-1===c.edge||y&&1===c.edge)continue;switch(Te(l,[v?m:_],[m,g,_]),c.edge=v?-1:1,c.edgeStrategy){case"reset":re(l);continue;case"ease":u=b.frame;break;default:case"set":var w=b.props;for(r in w)s.call(w,r)&&(o=ie(w[r].value),a.setStyle(l,r,o));continue}}else 0!==c.edge&&(Te(l,[h,g],[m,_]),c.edge=0);for(var k=0,$=d.length-1;$>k;k++)if(u>=d[k].frame&&u<=d[k+1].frame){var x=d[k],j=d[k+1];for(r in x.props)if(s.call(x.props,r)){var C=(u-x.frame)/(j.frame-x.frame);C=x.props[r].easing(C),o=ne(x.props[r].value,j.props[r].value,C),o=ie(o),a.setStyle(l,r,o)}break}}},J=function(){He&&(He=!1,xe());var e,t,i=ae.getScrollTop(),r=Ee();if(pe)r>=pe.endTime?(i=pe.targetTop,e=pe.done,pe=n):(t=pe.easing((r-pe.startTime)/pe.duration),i=pe.startTop+t*pe.topDiff|0),ae.setScrollTop(i,!0);else if(!_e){var o=ge.targetTop-i;o&&(ge={startTop:Oe,topDiff:i-Oe,targetTop:i,startTime:Fe,endTime:Fe+me}),r<=ge.endTime&&(t=V.sqrt((r-ge.startTime)/me),i=ge.startTop+t*ge.topDiff|0)}if(qe&&ce&&a.setStyle(ce,"transform","translate(0, "+-Ue+"px) "+ye),_e||Oe!==i){Me=i>Oe?"down":Oe>i?"up":Me,_e=!1;var s={curTop:i,lastTop:Oe,maxTop:Pe,direction:Me},c=le.beforerender&&le.beforerender.call(ae,s);c!==!1&&(K(i,ae.getScrollTop()),Oe=i,le.render&&le.render.call(ae,s)),e&&e.call(ae,!1)}Fe=r},X=function(e){for(var t=0,n=e.keyFrames.length;n>t;t++){for(var i,r,o,a,s=e.keyFrames[t],c={};null!==(a=N.exec(s.props));)o=a[1],r=a[2],i=o.match(M),null!==i?(o=i[1],i=i[2]):i=k,r=r.indexOf("!")?Z(r):[r.slice(1)],c[o]={value:r,easing:V[i]};s.props=c}},Z=function(e){var t=[];return H.lastIndex=0,e=e.replace(H,function(e){return e.replace(L,function(e){return e/255*100+"%"})}),U&&(B.lastIndex=0,e=e.replace(B,function(e){return U+e})),e=e.replace(L,function(e){return t.push(+e),"{?}"}),t.unshift(e),t},ee=function(e){var t,n,i={};for(t=0,n=e.keyFrames.length;n>t;t++)te(e.keyFrames[t],i);for(i={},t=e.keyFrames.length-1;t>=0;t--)te(e.keyFrames[t],i)},te=function(e,t){var n;for(n in t)s.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},ne=function(e,t,n){var i,r=e.length;if(r!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var o=[e[0]];for(i=1;r>i;i++)o[i]=e[i]+(t[i]-e[i])*n;return o},ie=function(e){var t=1;return R.lastIndex=0,e[0].replace(R,function(){return e[t++]})},re=function(e,t){e=[].concat(e);for(var n,i,r=0,o=e.length;o>r;r++)i=e[r],n=se[i[I]],n&&(t?(i.style.cssText=n.dirtyStyleAttr,Te(i,n.dirtyClassAttr)):(n.dirtyStyleAttr=i.style.cssText,n.dirtyClassAttr=Se(i),i.style.cssText=n.styleAttr,Te(i,n.classAttr)))},oe=function(){ye="translateZ(0)",a.setStyle(ce,"transform",ye);var e=l(ce),t=e.getPropertyValue("transform"),n=e.getPropertyValue(U+"transform"),i=t&&"none"!==t||n&&"none"!==n;i||(ye="")};a.setStyle=function(e,t,n){var i=e.style;if(t=t.replace(O,F).replace("-",""),"zIndex"===t)isNaN(n)?i[t]=n:i[t]=""+(0|n);else if("float"===t)i.styleFloat=i.cssFloat=n;else try{q&&(i[q+t.slice(0,1).toUpperCase()+t.slice(1)]=n),i[t]=n}catch(r){}};var ae,se,ce,le,ue,de,fe,pe,he,me,ge,_e,ve,ye,be,we=a.addEvent=function(t,n,i){var r=function(t){return t=t||e.event,t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),i.call(this,t)};n=n.split(" ");for(var o,a=0,s=n.length;s>a;a++)o=n[a],t.addEventListener?t.addEventListener(o,i,!1):t.attachEvent("on"+o,r),ze.push({element:t,name:o,listener:i})},ke=a.removeEvent=function(e,t,n){t=t.split(" ");for(var i=0,r=t.length;r>i;i++)e.removeEventListener?e.removeEventListener(t[i],n,!1):e.detachEvent("on"+t[i],n)},$e=function(){for(var e,t=0,n=ze.length;n>t;t++)e=ze[t],ke(e.element,e.name,e.listener);ze=[]},xe=function(){var e=ae.getScrollTop();Pe=0,ue&&!qe&&(o.style.height="auto"),Q(),ue&&!qe&&(o.style.height=Pe+r.clientHeight+"px"),qe?ae.setScrollTop(c.min(ae.getScrollTop(),Pe)):ae.setScrollTop(e,!0),_e=!0},je=function(){var e,t,n=r.clientHeight,i={};for(e in de)t=de[e],"function"==typeof t?t=t.call(ae):/p$/.test(t)&&(t=t.slice(0,-1)/100*n),i[e]=t;return i},Ce=function(){var e=ce&&ce.offsetHeight||0,t=c.max(e,o.scrollHeight,o.offsetHeight,r.scrollHeight,r.offsetHeight,r.clientHeight);return t-r.clientHeight},Se=function(t){var n="className";return e.SVGElement&&t instanceof e.SVGElement&&(t=t[n],n="baseVal"),t[n]},Te=function(t,i,r){var o="className";if(e.SVGElement&&t instanceof e.SVGElement&&(t=t[o],o="baseVal"),r===n)return void(t[o]=i);for(var a=t[o],s=0,c=r.length;c>s;s++)a=Ie(a).replace(Ie(r[s])," ");a=De(a);for(var l=0,u=i.length;u>l;l++)-1===Ie(a).indexOf(Ie(i[l]))&&(a+=" "+i[l]);t[o]=De(a)},De=function(e){return e.replace(A,"")},Ie=function(e){return" "+e+" "},Ee=Date.now||function(){return+new Date},Ae=function(e,t){return e.frame-t.frame},Pe=0,Ne=1,Me="down",Oe=-1,Fe=Ee(),Le=0,Re=0,He=!1,Be=0,qe=!1,Ue=0,ze=[]}(window,document),function(e){function t(e){return e=e.toUpperCase(),e=e.substr(4)+e.substr(0,4),e.split("").map(function(e){var t=e.charCodeAt(0);return t>=s&&c>=t?t-s+10:e}).join("")}function n(e){for(var t,n=e;n.length>2;)t=n.slice(0,9),n=parseInt(t,10)%97+n.slice(t.length);return parseInt(n,10)%97}function i(e){var t=e.match(/(.{3})/g).map(function(e){var t,n=e.slice(0,1),i=parseInt(e.slice(1),10);switch(n){case"A":t="0-9A-Za-z";break;case"B":t="0-9A-Z";break;case"C":t="A-Za-z";break;case"F":t="0-9";break;case"L":t="a-z";break;case"U":t="A-Z";break;case"W":t="0-9a-z"}return"(["+t+"]{"+i+"})"});return new RegExp("^"+t.join("")+"$")}function r(e,t,n,i){this.countryCode=e,this.length=t,this.structure=n,this.example=i}function o(e){l[e.countryCode]=e}function a(e){return"string"==typeof e||e instanceof String}Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=new Array(n),r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)o in t&&(i[o]=e.call(r,t[o],o,t));return i});var s="A".charCodeAt(0),c="Z".charCodeAt(0);r.prototype._regex=function(){return this._cachedRegex||(this._cachedRegex=i(this.structure))},r.prototype.isValid=function(e){return this.length==e.length&&this.countryCode===e.slice(0,2)&&this._regex().test(e.slice(4))&&1==n(t(e))},r.prototype.toBBAN=function(e,t){return this._regex().exec(e.slice(4)).slice(1).join(t)},r.prototype.fromBBAN=function(e){if(!this.isValidBBAN(e))throw new Error("Invalid BBAN");var i=n(t(this.countryCode+"00"+e)),r=("0"+(98-i)).slice(-2);return this.countryCode+r+e},r.prototype.isValidBBAN=function(e){return this.length-4==e.length&&this._regex().test(e)};var l={};o(new r("AD",24,"F04F04A12","AD1200012030200359100100")),o(new r("AE",23,"F03F16","AE070331234567890123456")),o(new r("AL",28,"F08A16","AL47212110090000000235698741")),o(new r("AT",20,"F05F11","AT611904300234573201")),o(new r("AZ",28,"U04A20","AZ21NABZ00000000137010001944")),o(new r("BA",20,"F03F03F08F02","BA391290079401028494")),o(new r("BE",16,"F03F07F02","BE68539007547034")),o(new r("BG",22,"U04F04F02A08","BG80BNBG96611020345678")),o(new r("BH",22,"U04A14","BH67BMAG00001299123456")),o(new r("BR",29,"F08F05F10U01A01","BR9700360305000010009795493P1")),o(new r("CH",21,"F05A12","CH9300762011623852957")),o(new r("CR",21,"F03F14","CR0515202001026284066")),o(new r("CY",28,"F03F05A16","CY17002001280000001200527600")),o(new r("CZ",24,"F04F06F10","CZ6508000000192000145399")),o(new r("DE",22,"F08F10","DE89370400440532013000")),o(new r("DK",18,"F04F09F01","DK5000400440116243")),o(new r("DO",28,"U04F20","DO28BAGR00000001212453611324")),o(new r("EE",20,"F02F02F11F01","EE382200221020145685")),
o(new r("ES",24,"F04F04F01F01F10","ES9121000418450200051332")),o(new r("FI",18,"F06F07F01","FI2112345600000785")),o(new r("FO",18,"F04F09F01","FO6264600001631634")),o(new r("FR",27,"F05F05A11F02","FR1420041010050500013M02606")),o(new r("GB",22,"U04F06F08","GB29NWBK60161331926819")),o(new r("GE",22,"U02F16","GE29NB0000000101904917")),o(new r("GI",23,"U04A15","GI75NWBK000000007099453")),o(new r("GL",18,"F04F09F01","GL8964710001000206")),o(new r("GR",27,"F03F04A16","GR1601101250000000012300695")),o(new r("GT",28,"A04A20","GT82TRAJ01020000001210029690")),o(new r("HR",21,"F07F10","HR1210010051863000160")),o(new r("HU",28,"F03F04F01F15F01","HU42117730161111101800000000")),o(new r("IE",22,"U04F06F08","IE29AIBK93115212345678")),o(new r("IL",23,"F03F03F13","IL620108000000099999999")),o(new r("IS",26,"F04F02F06F10","IS140159260076545510730339")),o(new r("IT",27,"U01F05F05A12","IT60X0542811101000000123456")),o(new r("KW",30,"U04A22","KW81CBKU0000000000001234560101")),o(new r("KZ",20,"F03A13","KZ86125KZT5004100100")),o(new r("LB",28,"F04A20","LB62099900000001001901229114")),o(new r("LI",21,"F05A12","LI21088100002324013AA")),o(new r("LT",20,"F05F11","LT121000011101001000")),o(new r("LU",20,"F03A13","LU280019400644750000")),o(new r("LV",21,"U04A13","LV80BANK0000435195001")),o(new r("MC",27,"F05F05A11F02","MC5811222000010123456789030")),o(new r("MD",24,"U02F18","MD24AG000225100013104168")),o(new r("ME",22,"F03F13F02","ME25505000012345678951")),o(new r("MK",19,"F03A10F02","MK07250120000058984")),o(new r("MR",27,"F05F05F11F02","MR1300020001010000123456753")),o(new r("MT",31,"U04F05A18","MT84MALT011000012345MTLCAST001S")),o(new r("MU",30,"U04F02F02F12F03U03","MU17BOMM0101101030300200000MUR")),o(new r("NL",18,"U04F10","NL91ABNA0417164300")),o(new r("NO",15,"F04F06F01","NO9386011117947")),o(new r("PK",24,"U04A16","PK36SCBL0000001123456702")),o(new r("PL",28,"F08F16","PL61109010140000071219812874")),o(new r("PS",29,"U04A21","PS92PALS000000000400123456702")),o(new r("PT",25,"F04F04F11F02","PT50000201231234567890154")),o(new r("RO",24,"U04A16","RO49AAAA1B31007593840000")),o(new r("RS",22,"F03F13F02","RS35260005601001611379")),o(new r("SA",24,"F02A18","SA0380000000608010167519")),o(new r("SE",24,"F03F16F01","SE4550000000058398257466")),o(new r("SI",19,"F05F08F02","SI56263300012039086")),o(new r("SK",24,"F04F06F10","SK3112000000198742637541")),o(new r("SM",27,"U01F05F05A12","SM86U0322509800000000270100")),o(new r("TN",24,"F02F03F13F02","TN5910006035183598478831")),o(new r("TR",26,"F05A01A16","TR330006100519786457841326")),o(new r("VG",24,"U04F16","VG96VPVG0000012345678901")),o(new r("AO",25,"F21","AO69123456789012345678901")),o(new r("BF",27,"F23","BF2312345678901234567890123")),o(new r("BI",16,"F12","BI41123456789012")),o(new r("BJ",28,"F24","BJ39123456789012345678901234")),o(new r("CI",28,"U01F23","CI17A12345678901234567890123")),o(new r("CM",27,"F23","CM9012345678901234567890123")),o(new r("CV",25,"F21","CV30123456789012345678901")),o(new r("DZ",24,"F20","DZ8612345678901234567890")),o(new r("IR",26,"F22","IR861234568790123456789012")),o(new r("JO",30,"A04F22","JO15AAAA1234567890123456789012")),o(new r("MG",27,"F23","MG1812345678901234567890123")),o(new r("ML",28,"U01F23","ML15A12345678901234567890123")),o(new r("MZ",25,"F21","MZ25123456789012345678901")),o(new r("QA",29,"U04A21","QA30AAAA123456789012345678901")),o(new r("SN",28,"U01F23","SN52A12345678901234567890123")),o(new r("UA",29,"F25","UA511234567890123456789012345"));var u=/[^a-zA-Z0-9]/g,d=/(.{4})(?!$)/g;e.isValid=function(e){if(!a(e))return!1;e=this.electronicFormat(e);var t=l[e.slice(0,2)];return!!t&&t.isValid(e)},e.toBBAN=function(e,t){"undefined"==typeof t&&(t=" "),e=this.electronicFormat(e);var n=l[e.slice(0,2)];if(!n)throw new Error("No country with code "+e.slice(0,2));return n.toBBAN(e,t)},e.fromBBAN=function(e,t){var n=l[e];if(!n)throw new Error("No country with code "+e);return n.fromBBAN(this.electronicFormat(t))},e.isValidBBAN=function(e,t){if(!a(t))return!1;var n=l[e];return n&&n.isValidBBAN(this.electronicFormat(t))},e.printFormat=function(e,t){return"undefined"==typeof t&&(t=" "),this.electronicFormat(e).replace(d,"$1"+t)},e.electronicFormat=function(e){return e.replace(u,"").toUpperCase()},e.countries=l}("undefined"==typeof exports?this.IBAN={}:exports),function(){var e={version:"0.9.0",name:"PluginDetect",addPlugin:function(t,n){t&&e.isString(t)&&n&&e.isFunc(n.getVersion)&&(t=t.replace(/\s/g,"").toLowerCase(),e.Plugins[t]=n,e.isDefined(n.getVersionDone)||(n.installed=null,n.version=null,n.version0=null,n.getVersionDone=null,n.pluginName=t))},uniqueName:function(){return e.name+"998"},openTag:"<",hasOwnPROP:{}.constructor.prototype.hasOwnProperty,hasOwn:function(t,n){var i;try{i=e.hasOwnPROP.call(t,n)}catch(r){}return!!i},rgx:{str:/string/i,num:/number/i,fun:/function/i,arr:/array/i},toString:{}.constructor.prototype.toString,isDefined:function(e){return"undefined"!=typeof e},isArray:function(t){return e.rgx.arr.test(e.toString.call(t))},isString:function(t){return e.rgx.str.test(e.toString.call(t))},isNum:function(t){return e.rgx.num.test(e.toString.call(t))},isStrNum:function(t){return e.isString(t)&&/\d/.test(t)},isFunc:function(t){return e.rgx.fun.test(e.toString.call(t))},getNumRegx:/[\d][\d\.\_,\-]*/,splitNumRegx:/[\.\_,\-]/g,getNum:function(t,n){var i=e.isStrNum(t)?(e.isDefined(n)?new RegExp(n):e.getNumRegx).exec(t):null;return i?i[0]:null},compareNums:function(t,n,i){var r,o,a,s=parseInt;if(e.isStrNum(t)&&e.isStrNum(n)){if(e.isDefined(i)&&i.compareNums)return i.compareNums(t,n);for(r=t.split(e.splitNumRegx),o=n.split(e.splitNumRegx),a=0;a<Math.min(r.length,o.length);a++){if(s(r[a],10)>s(o[a],10))return 1;if(s(r[a],10)<s(o[a],10))return-1}}return 0},formatNum:function(t,n){var i,r;if(!e.isStrNum(t))return null;for(e.isNum(n)||(n=4),n--,r=t.replace(/\s/g,"").split(e.splitNumRegx).concat(["0","0","0","0"]),i=0;4>i;i++)/^(0+)(.+)$/.test(r[i])&&(r[i]=RegExp.$2),(i>n||!/\d/.test(r[i]))&&(r[i]="0");return r.slice(0,4).join(",")},pd:{getPROP:function(e,t,n){try{e&&(n=e[t])}catch(i){}return n},findNavPlugin:function(t){if(t.dbug)return t.dbug;var n=null;if(window.navigator){var i,r,o,a,s,c,l={Find:e.isString(t.find)?new RegExp(t.find,"i"):t.find,Find2:e.isString(t.find2)?new RegExp(t.find2,"i"):t.find2,Avoid:t.avoid?e.isString(t.avoid)?new RegExp(t.avoid,"i"):t.avoid:0,Num:t.num?/\d/:0},u=navigator.mimeTypes,d=navigator.plugins;if(t.mimes&&u)for(a=e.isArray(t.mimes)?[].concat(t.mimes):e.isString(t.mimes)?[t.mimes]:[],i=0;i<a.length;i++){r=0;try{e.isString(a[i])&&/[^\s]/.test(a[i])&&(r=u[a[i]].enabledPlugin)}catch(f){}if(r&&(o=this.findNavPlugin_(r,l),o.obj&&(n=o.obj),n&&!e.dbug))return n}if(t.plugins&&d){for(s=e.isArray(t.plugins)?[].concat(t.plugins):e.isString(t.plugins)?[t.plugins]:[],i=0;i<s.length;i++){r=0;try{s[i]&&e.isString(s[i])&&(r=d[s[i]])}catch(f){}if(r&&(o=this.findNavPlugin_(r,l),o.obj&&(n=o.obj),n&&!e.dbug))return n}if(c=d.length,e.isNum(c))for(i=0;c>i;i++){r=0;try{r=d[i]}catch(f){}if(r&&(o=this.findNavPlugin_(r,l),o.obj&&(n=o.obj),n&&!e.dbug))return n}}}return n},findNavPlugin_:function(e,t){var n=e.description||"",i=e.name||"",r={};return(!t.Find.test(n)||t.Find2&&!t.Find2.test(i)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))&&(!t.Find.test(i)||t.Find2&&!t.Find2.test(n)||t.Num&&!t.Num.test(RegExp.leftContext+RegExp.rightContext))||t.Avoid&&(t.Avoid.test(n)||t.Avoid.test(i))||(r.obj=e),r},getVersionDelimiter:",",findPlugin:function(t){var n,i={status:-3,plugin:0};return e.isString(t)?1==t.length?(this.getVersionDelimiter=t,i):(t=t.toLowerCase().replace(/\s/g,""),n=e.Plugins[t],n&&n.getVersion?(i.plugin=n,i.status=1,i):i):i}},getPluginFileVersion:function(t,n){var i,r,o,a,s=-1;if(!t)return n;if(t.version&&(i=e.getNum(t.version+"")),!i||!n)return n||i||null;for(r=e.formatNum(n).split(e.splitNumRegx),o=e.formatNum(i).split(e.splitNumRegx),a=0;a<r.length;a++){if(s>-1&&a>s&&"0"!=r[a])return n;if(o[a]!=r[a]&&(-1==s&&(s=a),"0"!=r[a]))return n}return i},AXO:function(){var e;try{e=new window.ActiveXObject}catch(t){}return e?null:window.ActiveXObject}(),getAXO:function(t){var n=null;try{n=new e.AXO(t)}catch(i){e.errObj=i}return n&&(e.browser.ActiveXEnabled=!0),n},browser:{detectPlatform:function(){var t,n=window.navigator?navigator.platform||"":"";if(e.OS=100,n){var i=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(t=i.length-2;t>=0;t-=2)if(i[t]&&new RegExp(i[t],"i").test(n)){e.OS=i[t+1];break}}},detectIE:function(){var t,n,i,r,o,a=this,s=document,c=window.navigator?navigator.userAgent||"":"";a.ActiveXFilteringEnabled=!1,a.ActiveXEnabled=!1;try{a.ActiveXFilteringEnabled=!!window.external.msActiveXFilteringEnabled()}catch(l){}for(r=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","TDCCtl.TDCCtl","Shell.UIHelper","HtmlDlgSafeHelper.HtmlDlgSafeHelper","Scripting.Dictionary"],o=["WMPlayer.OCX","ShockwaveFlash.ShockwaveFlash","AgControl.AgControl"],i=r.concat(o),t=0;t<i.length&&(!e.getAXO(i[t])||e.dbug);t++);if(a.ActiveXEnabled&&a.ActiveXFilteringEnabled)for(t=0;t<o.length;t++)if(e.getAXO(o[t])){a.ActiveXFilteringEnabled=!1;break}n=s.documentMode;try{s.documentMode=""}catch(l){}a.isIE=a.ActiveXEnabled,a.isIE=a.isIE||e.isNum(s.documentMode)||new Function("return/*@cc_on!@*/!1")();try{s.documentMode=n}catch(l){}a.verIE=null,a.isIE&&(a.verIE=(e.isNum(s.documentMode)&&s.documentMode>=7?s.documentMode:0)||(/^(?:.*?[^a-zA-Z])??(?:MSIE|rv\s*\:)\s*(\d+\.?\d*)/i.test(c)?parseFloat(RegExp.$1,10):7)),a.betterIE()},betterIE:function(){var t=this,n=document;if(t.verIEtrue=null,t.docModeIE=null,t.isIE){var i,r,o=n.createElement("div"),a=["{45EA75A0-A269-11D1-B5BF-0000F8051515}","{3AF36230-A269-11D1-B5BF-0000F8051515}","{89820200-ECBD-11CF-8B85-00AA005B4383}"];try{o.style.behavior="url(#default#clientcaps)"}catch(s){}for(r=0;r<a.length;r++){try{t.verIEtrue=o.getComponentVersion(a[r],"componentid").replace(/,/g,".")}catch(s){}if(t.verIEtrue&&!e.dbug)break}i=parseFloat(t.verIEtrue||"0",10),t.docModeIE=n.documentMode||(/back/i.test(n.compatMode||"")?5:i)||t.verIE,t.verIE=i||t.docModeIE}},detectNonIE:function(){var t=this,n=window.navigator?navigator:{},i=t.isIE?"":n.userAgent||"",r=n.vendor||"",o=n.product||"";t.isGecko=/Gecko/i.test(o)&&/Gecko\s*\/\s*\d/i.test(i),t.verGecko=t.isGecko?e.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(i)?RegExp.$1:"0.9"):null,t.isOpera=/(OPR\s*\/|Opera\s*\/\s*\d.*\s*Version\s*\/|Opera\s*[\/]?)\s*(\d+[\.,\d]*)/i.test(i),t.verOpera=t.isOpera?e.formatNum(RegExp.$2):null,t.isChrome=!t.isOpera&&/(Chrome|CriOS)\s*\/\s*(\d[\d\.]*)/i.test(i),t.verChrome=t.isChrome?e.formatNum(RegExp.$2):null,t.isSafari=!t.isOpera&&!t.isChrome&&(/Apple/i.test(r)||!r)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(i),t.verSafari=t.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(i)?e.formatNum(RegExp.$1):null},init:function(){var e=this;e.detectPlatform(),e.detectIE(),e.detectNonIE()}},init:{hasRun:0,library:function(){window[e.name]=e;var t=this,n=document;e.win.init(),e.head=n.getElementsByTagName("head")[0]||n.getElementsByTagName("body")[0]||n.body||null,e.browser.init(),t.hasRun=1}},ev:{addEvent:function(e,t,n){e&&t&&n&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=this.concatFn(n,e["on"+t]))},removeEvent:function(e,t,n){e&&t&&n&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n))},concatFn:function(e,t){return function(){e(),"function"==typeof t&&t()}},handler:function(e,t,n,i,r){return function(){e(t,n,i,r)}},handlerOnce:function(t,n,i,r){return function(){var o=e.uniqueName();t[o]||(t[o]=1,t(n,i,r))}},handlerWait:function(e,t,n,i,r){var o=this;return function(){o.setTimeout(o.handler(t,n,i,r),e)}},setTimeout:function(t,n){e.win&&e.win.unload||setTimeout(t,n)},fPush:function(t,n){e.isArray(n)&&(e.isFunc(t)||e.isArray(t)&&t.length>0&&e.isFunc(t[0]))&&n.push(t)},call0:function(t){var n=e.isArray(t)?t.length:-1;n>0&&e.isFunc(t[0])?t[0](e,n>1?t[1]:0,n>2?t[2]:0,n>3?t[3]:0):e.isFunc(t)&&t(e)},callArray0:function(t){var n,i=this;if(e.isArray(t))for(;t.length;)n=t[0],t.splice(0,1),e.win&&e.win.unload&&t!==e.win.unloadHndlrs||i.call0(n)},call:function(e){var t=this;t.call0(e),t.ifDetectDoneCallHndlrs()},callArray:function(e){var t=this;t.callArray0(e),t.ifDetectDoneCallHndlrs()},allDoneHndlrs:[],ifDetectDoneCallHndlrs:function(){var t,n,i=this;if(i.allDoneHndlrs.length&&(!e.win||e.win.loaded&&!e.win.loadPrvtHndlrs.length&&!e.win.loadPblcHndlrs.length)){if(e.Plugins)for(t in e.Plugins)if(e.hasOwn(e.Plugins,t)&&(n=e.Plugins[t],n&&e.isFunc(n.getVersion)&&(3==n.OTF||n.DoneHndlrs&&n.DoneHndlrs.length||n.BIHndlrs&&n.BIHndlrs.length)))return;i.callArray0(i.allDoneHndlrs)}}},getVersion:function(t,n,i){var r,o,a=e.pd.findPlugin(t);return a.status<0?null:(r=a.plugin,1!=r.getVersionDone&&(r.getVersion(null,n,i),null===r.getVersionDone&&(r.getVersionDone=1)),o=r.version||r.version0,o=o?o.replace(e.splitNumRegx,e.pd.getVersionDelimiter):o)},hasMimeType:function(t){if(t&&window.navigator&&navigator.mimeTypes){var n,i,r,o,a=navigator.mimeTypes,s=e.isArray(t)?[].concat(t):e.isString(t)?[t]:[];for(o=s.length,r=0;o>r;r++){n=0;try{e.isString(s[r])&&/[^\s]/.test(s[r])&&(n=a[s[r]])}catch(c){}if(i=n?n.enabledPlugin:0,i&&(i.name||i.description))return n}}return null},getInfo:function(t,n,i){var r,o,a=null,s=e.pd.findPlugin(t);return s.status<0?a:(r=s.plugin,e.isFunc(r.getInfo)&&(null===r.getVersionDone&&(o=e.getVersion?e.getVersion(t,n,i):e.isMinVersion(t,"0",n,i)),a=r.getInfo()),a)},onDetectionDone:function(t,n,i,r){var o,a,s=e.pd.findPlugin(t);return-3==s.status?-1:(a=s.plugin,e.isArray(a.DoneHndlrs)||(a.DoneHndlrs=[]),1!=a.getVersionDone&&(o=e.getVersion?e.getVersion(t,i,r):e.isMinVersion(t,"0",i,r)),a.installed!=-.5&&.5!=a.installed?(e.ev.call(n),1):(e.ev.fPush(n,a.DoneHndlrs),0))},codebase:{isDisabled:function(){return e.browser.ActiveXEnabled&&e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?0:1},isMin:function(e,t){var n=0;return n},search:function(t){var n,i=this,r=(t.$$,0);if(n=t.searchHasRun||i.isDisabled()?1:0,t.searchHasRun=1,n)return t.version||null;i.init(t);var o,a,s,c,l,u=t.DIGITMAX,d=99999999,f=[0,0,0,0],p=[0,0,0,0],h=function(e,n){var o,a=[].concat(f);return a[e]=n,o=i.isActiveXObject(t,a.join(",")),o?(r=1,f[e]=n):p[e]=n,o};for(o=0;o<p.length;o++){for(f[o]=Math.floor(t.DIGITMIN[o])||0,c=f.join(","),l=f.slice(0,o).concat([d,d,d,d]).slice(0,f.length).join(","),s=0;s<u.length;s++)e.isArray(u[s])&&(u[s].push(0),u[s][o]>p[o]&&e.compareNums(l,t.Lower[s])>=0&&e.compareNums(c,t.Upper[s])<0&&(p[o]=Math.floor(u[s][o])));for(a=0;30>a;a++){if(p[o]-f[o]<=16){for(s=p[o];s>=f[o]+(o?1:0)&&!h(o,s);s--);break}h(o,Math.round((p[o]+f[o])/2))}if(!r)break;p[o]=f[o]}return r&&(t.version=i.convert(t,f.join(",")).v),t.version||null},emptyNode:function(e){try{e.innerHTML=""}catch(t){}},HTML:[],len:0,onUnload:function(e,t){var n,i,r=t.HTML;for(n=0;n<r.length;n++)i=r[n],i&&(r[n]=0,t.emptyNode(i.span()),i.span=0,i.spanObj=0,i=0);t.iframe=0},init:function(t){var n=this;if(!n.iframe){var i,r=e.DOM;i=r.iframe.insert(0,"$.codebase{ }"),n.iframe=i,r.iframe.write(i," "),r.iframe.close(i)}if(!t.init){t.init=1;var o,a;for(e.ev.fPush([n.onUnload,n],e.win.unloadHndlrs),t.tagA='<object width="1" height="1" style="display:none;" codebase="#version=',a=t.classID||t.$$.classID||"",t.tagB='" '+(/clsid\s*:/i.test(a)?'classid="':'type="')+a+'">'+e.openTag+"/object>",o=0;o<t.Lower.length;o++)t.Lower[o]=e.formatNum(t.Lower[o]),t.Upper[o]=e.formatNum(t.Upper[o])}},isActiveXObject:function(t,n){var i=this,r=0,o=(t.$$,(e.DOM.iframe.doc(i.iframe)||document).createElement("span"));return t.min&&e.compareNums(n,t.min)<=0?1:t.max&&e.compareNums(n,t.max)>=0?0:(o.innerHTML=t.tagA+n+t.tagB,e.pd.getPROP(o.firstChild,"object")&&(r=1),r?(t.min=n,i.HTML.push({spanObj:o,span:i.span})):(t.max=n,o.innerHTML=""),r)},span:function(){return this.spanObj},convert_:function(t,n,i,r){var o=t.convert[n];return o?e.isFunc(o)?e.formatNum(o(i.split(e.splitNumRegx),r).join(",")):i:o},convert:function(t,n,i){var r,o,a,s=this;if(n=e.formatNum(n),o={v:n,x:-1},n)for(r=0;r<t.Lower.length;r++)if(a=s.convert_(t,r,t.Lower[r]),a&&e.compareNums(n,i?a:t.Lower[r])>=0&&(!r||e.compareNums(n,i?s.convert_(t,r,t.Upper[r]):t.Upper[r])<0)){o.v=s.convert_(t,r,n,i),o.x=r;break}return o},z:0},win:{disable:function(){this.cancel=!0},cancel:!1,loaded:!1,unload:!1,hasRun:0,init:function(){var t=this;t.hasRun||(t.hasRun=1,/complete/i.test(document.readyState||"")?t.loaded=!0:e.ev.addEvent(window,"load",t.onLoad),e.ev.addEvent(window,"unload",t.onUnload))},loadPrvtHndlrs:[],loadPblcHndlrs:[],unloadHndlrs:[],onUnload:function(){var t=e.win;t.unload||(t.unload=!0,e.ev.removeEvent(window,"load",t.onLoad),e.ev.removeEvent(window,"unload",t.onUnload),e.ev.callArray(t.unloadHndlrs))},onLoad:function(){var t=e.win;t.loaded||t.unload||t.cancel||(t.loaded=!0,e.ev.callArray(t.loadPrvtHndlrs),e.ev.callArray(t.loadPblcHndlrs))}},DOM:{isEnabled:{objectTag:function(){var t=e.browser,n=t.isIE?0:1;return t.ActiveXEnabled&&(n=1),!!n},objectTagUsingActiveX:function(){var t=0;return e.browser.ActiveXEnabled&&(t=1),!!t},objectProperty:function(t){return t&&t.tagName&&e.browser.isIE?/applet/i.test(t.tagName)?!this.objectTag()||e.isDefined(e.pd.getPROP(document.createElement("object"),"object"))?1:0:e.isDefined(e.pd.getPROP(document.createElement(t.tagName),"object"))?1:0:0}},HTML:[],div:null,divID:"plugindetect",divWidth:500,getDiv:function(){return this.div||document.getElementById(this.divID)||null},initDiv:function(){var t,n=this;n.div||(t=n.getDiv(),t?n.div=t:(n.div=document.createElement("div"),n.div.id=n.divID,n.setStyle(n.div,n.getStyle.div()),n.insertDivInBody(n.div)),e.ev.fPush([n.onUnload,n],e.win.unloadHndlrs)),t=0},pluginSize:1,iframeWidth:40,iframeHeight:10,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(t){var n=this;if(t&&/div|span/i.test(t.tagName||"")){e.browser.isIE&&n.setStyle(t,["display","none"]);try{t.innerHTML=""}catch(i){}}},removeNode:function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(t){}},onUnload:function(e,t){var n,i,r,o,a=t.HTML,s=a.length;if(s)for(i=s-1;i>=0;i--)o=a[i],o&&(a[i]=0,t.emptyNode(o.span()),t.removeNode(o.span()),o.span=0,o.spanObj=0,o.doc=0,o.objectProperty=0);n=t.getDiv(),t.emptyNode(n),t.removeNode(n),o=0,r=0,n=0,t.div=0},span:function(){var e=this;return e.spanObj||(e.spanObj=e.doc.getElementById(e.spanId)),e.spanObj||null},width:function(){var t,n,i=this,r=i.span(),o=-1;return t=r&&e.isNum(r.scrollWidth)?r.scrollWidth:o,n=r&&e.isNum(r.offsetWidth)?r.offsetWidth:o,r=0,n>0?n:t>0?t:Math.max(n,t)},obj:function(){var e=this.span();return e?e.firstChild||null:null},readyState:function(){var t=this;return e.browser.isIE&&e.isDefined(e.pd.getPROP(t.span(),"readyState"))?e.pd.getPROP(t.obj(),"readyState"):e.UNDEFINED},objectProperty:function(){var t,n=this,i=n.DOM;return i.isEnabled.objectProperty(n)&&(t=e.pd.getPROP(n.obj(),"object")),t},onLoadHdlr:function(e,t){t.loaded=1},getTagStatus:function(t,n,i,r,o,a,s){var c=this;if(!t||!t.span())return-2;var l=t.width(),u=t.obj()?1:0,d=t.readyState(),f=t.objectProperty();if(f)return 1.5;var p=/clsid\s*\:/i,h=i&&p.test(i.outerHTML||"")?i:r&&p.test(r.outerHTML||"")?r:0,m=i&&!p.test(i.outerHTML||"")?i:r&&!p.test(r.outerHTML||"")?r:0,g=t&&p.test(t.outerHTML||"")?h:m;if(!(n&&n.span()&&g&&g.span()))return-2;var _=g.width(),v=n.width(),y=g.readyState();return 0>l||0>_||v<=c.pluginSize?0:(s&&!t.pi&&e.isDefined(f)&&e.browser.isIE&&t.tagName==g.tagName&&t.time<=g.time&&l===_&&0===d&&0!==y&&(t.pi=1),v>_||!t.loaded||!n.loaded||!g.loaded?t.pi?-.1:0:l!=v&&u?l!=c.pluginSize||!u||e.isNum(d)&&4!==d?t.pi?-.5:-1:1:t.pi?-.5:-1)},setStyle:function(e,t){var n,i=e.style;if(i&&t)for(n=0;n<t.length;n+=2)try{i[t[n]]=t[n+1]}catch(r){}e=0,i=0},getStyle:{iframe:function(){return this.span()},span:function(t){var n,i=e.DOM;return n=t?this.plugin():[].concat(this.Default).concat(["display","inline","fontSize",i.pluginSize+3+"px","lineHeight",i.pluginSize+3+"px"])},div:function(){var t=e.DOM;return[].concat(this.Default).concat(["display","block","width",t.divWidth+"px","height",t.pluginSize+3+"px","fontSize",t.pluginSize+3+"px","lineHeight",t.pluginSize+3+"px","position","absolute","right","9999px","top","-9999px"])},plugin:function(t){var n=e.DOM;return"background-color:transparent;background-image:none;vertical-align:baseline;outline-style:none;border-style:none;padding:0px;margin:0px;visibility:"+(t?"hidden;":"visible;")+"display:inline;font-size:"+(n.pluginSize+3)+"px;line-height:"+(n.pluginSize+3)+"px;"},Default:["backgroundColor","transparent","backgroundImage","none","verticalAlign","baseline","outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"]},insertDivInBody:function(t,n){var i="pd33993399",r=null,o=n?window.top.document:window.document,a=o.getElementsByTagName("body")[0]||o.body;if(!a)try{o.write('<div id="'+i+'">.'+e.openTag+"/div>"),r=o.getElementById(i)}catch(s){}a=o.getElementsByTagName("body")[0]||o.body,a&&(a.insertBefore(t,a.firstChild),r&&a.removeChild(r)),t=0},iframe:{onLoad:function(t,n){e.ev.callArray(t)},insert:function(t,n){var i,r,o=this,a=e.DOM,s=document.createElement("iframe");a.setStyle(s,a.getStyle.iframe()),s.width=a.iframeWidth,s.height=a.iframeHeight,a.initDiv(),i=a.getDiv(),i.appendChild(s);try{o.doc(s).open()}catch(c){}return s[e.uniqueName()]=[],r=e.ev.handlerOnce(e.isNum(t)&&t>0?e.ev.handlerWait(t,o.onLoad,s[e.uniqueName()],n):e.ev.handler(o.onLoad,s[e.uniqueName()],n)),e.ev.addEvent(s,"load",r),s.onload||(s.onload=r),e.ev.addEvent(o.win(s),"load",r),s},addHandler:function(t,n){t&&e.ev.fPush(n,t[e.uniqueName()])},close:function(e){try{this.doc(e).close()}catch(t){}},write:function(e,t){try{this.doc(e).write(t)}catch(n){}},win:function(e){try{return e.contentWindow}catch(t){}return null},doc:function(e){var t;try{t=e.contentWindow.document}catch(n){}try{t||(t=e.contentDocument)}catch(n){}return t||null}},insert:function(t,n,i,r,o,a,s){var c,l,u,d,f,p=this;if(s||(p.initDiv(),s=p.getDiv()),s&&(/div/i.test(s.tagName)&&(d=s.ownerDocument),/iframe/i.test(s.tagName)&&(d=p.iframe.doc(s))),d&&d.createElement||(d=document),e.isDefined(r)||(r=""),e.isString(t)&&/[^\s]/.test(t)){t=t.toLowerCase().replace(/\s/g,""),c=e.openTag+t+" ",c+='style="'+p.getStyle.plugin(a)+'" ';var h=1,m=1;for(f=0;f<n.length;f+=2)/[^\s]/.test(n[f+1])&&(c+=n[f]+'="'+n[f+1]+'" '),/width/i.test(n[f])&&(h=0),/height/i.test(n[f])&&(m=0);if(c+=(h?'width="'+p.pluginSize+'" ':"")+(m?'height="'+p.pluginSize+'" ':""),"embed"==t||"img"==t)c+=" />";else{for(c+=">",f=0;f<i.length;f+=2)/[^\s]/.test(i[f+1])&&(c+=e.openTag+'param name="'+i[f]+'" value="'+i[f+1]+'" />');c+=r+e.openTag+"/"+t+">"}}else t="",c=r;if(l={spanId:"",spanObj:null,span:p.span,loaded:null,tagName:t,outerHTML:c,DOM:p,time:(new Date).getTime(),width:p.width,obj:p.obj,readyState:p.readyState,objectProperty:p.objectProperty,doc:d},s&&s.parentNode)if(/iframe/i.test(s.tagName))p.iframe.addHandler(s,[p.onLoadHdlr,l]),l.loaded=0,l.spanId=e.name+"Span"+p.HTML.length,u='<span id="'+l.spanId+'" style="'+p.getStyle.span(1)+'">'+c+"</span>",p.iframe.write(s,u);else if(/div/i.test(s.tagName)){u=d.createElement("span"),p.setStyle(u,p.getStyle.span()),s.appendChild(u);try{u.innerHTML=c}catch(g){}l.spanObj=u}return u=0,s=0,p.HTML.push(l),l}},file:{any:"fileStorageAny999",valid:"fileStorageValid999",save:function(t,n,i){var r,o=this;t&&e.isDefined(i)&&(t[o.any]||(t[o.any]=[]),t[o.valid]||(t[o.valid]=[]),t[o.any].push(i),r=o.split(n,i),r&&t[o.valid].push(r))},getValidLength:function(e){return e&&e[this.valid]?e[this.valid].length:0},getAnyLength:function(e){return e&&e[this.any]?e[this.any].length:0},getValid:function(e,t){var n=this;return e&&e[n.valid]?n.get(e[n.valid],t):null},getAny:function(e,t){var n=this;return e&&e[n.any]?n.get(e[n.any],t):null},get:function(t,n){var i=t.length-1,r=e.isNum(n)?n:i;return 0>r||r>i?null:t[r]},split:function(t,n){var i,r,o=null;return t=t?t.replace(".","\\."):"",r=new RegExp("^(.*[^\\/])("+t+"\\s*)$"),e.isString(n)&&r.test(n)&&(i=RegExp.$1.split("/"),o={name:i[i.length-1],ext:RegExp.$2,full:n},i[i.length-1]="",o.path=i.join("/")),o}},Plugins:{}};e.init.library();var t={setPluginStatus:function(t,n,i){var r=this;r.version=n?e.formatNum(n,3):null,r.installed=r.version?1:i?i>0?.7:-.1:t?0:-1,r.getVersionDone=.7==r.installed||r.installed==-.1||0===r.nav.done?0:1},getVersion:function(t,n){var i,r=this,o=null,a=0;return n=e.browser.isIE?0:n,a&&!e.dbug||!r.nav.query(n).installed||(a=1),o&&!e.dbug||!r.nav.query(n).version||(o=r.nav.version),(i=o?0:r.codebase.isMin(t))?void r.setPluginStatus(0,0,i):((!o||e.dbug)&&(i=r.codebase.search(),i&&(a=1,o=i)),a&&!e.dbug||!r.axo.query().installed||(a=1),o&&!e.dbug||!r.axo.query().version||(o=r.axo.version),void r.setPluginStatus(a,o))},nav:{done:null,installed:0,version:null,result:[0,0],mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime","application/x-rtsp","application/x-sdp","application/sdp","audio/vnd.qcelp","video/sd-video","audio/mpeg","video/mp4","video/3gpp2","application/x-mpeg","audio/x-m4b","audio/x-aac","video/flc"],find:"QuickTime.*Plug-?in",find2:"QuickTime.*Plug-?in",find3filename:"QuickTime|QT",avoid:"Totem|VLC|RealPlayer|Helix|MPlayer|Windows\\s*Media\\s*Player",plugins:"QuickTime Plug-in",detect:function(t){var n,i,r=this,o={installed:0,version:null,plugin:null};return n=e.pd.findNavPlugin({find:r.find,find2:t?0:r.find2,avoid:t?0:r.avoid,mimes:r.mimeType,plugins:r.plugins}),n&&(o.plugin=n,o.installed=1,i=new RegExp(r.find,"i"),n.name&&i.test(n.name+"")&&(o.version=e.getNum(n.name+""))),o},query:function(t){var n,i,r=this;if(t=t?1:0,null===r.done){if(e.hasMimeType(r.mimeType)){i=r.detect(1),i.installed&&(n=r.detect(0),r.result=[n,n.installed?n:i]);var o,a=r.result[0],s=r.result[1],c=new RegExp(r.avoid,"i"),l=new RegExp(r.find3filename,"i");a=a?a.plugin:0,s=s?s.plugin:0,a||!s||!s.name||s.description&&!/^[\s]*$/.test(s.description+"")||c.test(s.name+"")||(o=(s.filename||"")+"",/^.*[\\\/]([^\\\/]*)$/.test(o)&&(o=RegExp.$1),o&&l.test(o)&&!c.test(o)&&(r.result[0]=r.result[1]))}r.done=r.result[0]===r.result[1]?1:0}return r.result[t]&&(r.installed=r.result[t].installed,r.version=r.result[t].version),r}},codebase:{classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",isMin:function(n){var i,r=this,o=0;return r.$$=t,e.isStrNum(n)&&(i=n.split(e.splitNumRegx),i.length>3&&parseInt(i[3],10)>0&&(i[3]="9999"),n=i.join(","),o=e.codebase.isMin(r,n)),o},search:function(){return this.$$=t,e.codebase.search(this)},DIGITMAX:[[12,11,11],[7,60],[7,11,11],0,[7,11,11]],DIGITMIN:[5,0,0,0],Upper:["999","7,60","7,50","7,6","7,5"],Lower:["7,60","7,50","7,6","7,5","0"],convert:[1,function(e,t){return t?[e[0],e[1]+e[2],e[3],"0"]:[e[0],e[1].charAt(0),e[1].charAt(1),e[2]]},1,0,1]},axo:{hasRun:0,installed:0,version:null,progID:["QuickTimeCheckObject.QuickTimeCheck","QuickTimeCheckObject.QuickTimeCheck.1"],progID0:"QuickTime.QuickTime",query:function(){var t,n,i,r=this,o=r.hasRun||!e.browser.ActiveXEnabled;if(r.hasRun=1,o)return r;for(n=0;n<r.progID.length&&(t=e.getAXO(r.progID[n]),!t||(r.installed=1,i=e.pd.getPROP(t,"QuickTimeVersion"),!i||!i.toString||(i=i.toString(16),r.version=parseInt(i.charAt(0)||"0",16)+"."+parseInt(i.charAt(1)||"0",16)+"."+parseInt(i.charAt(2)||"0",16),e.dbug)));n++);return r}}};e.addPlugin("quicktime",t);var n={mimeType:["application/x-java-applet","application/x-java-vm","application/x-java-bean"],mimeType_dummy:"application/dummymimejavaapplet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",classID_dummy:"clsid:8AD9C840-044E-11D1-B3E9-BA9876543210",navigator:{init:function(){var t=this,i=n;t.mimeObj=e.hasMimeType(i.mimeType),t.mimeObj&&(t.pluginObj=t.mimeObj.enabledPlugin)},a:function(){try{return window.navigator.javaEnabled()}catch(e){}return 1}(),javaEnabled:function(){return!!this.a},mimeObj:0,pluginObj:0},OTF:null,info:{pluginObj:null,getPluginObj:function(){var e=this;return null===e.pluginObj&&(e.pluginObj=n.navMime.pluginObj||n.navigator.pluginObj||0),e.pluginObj},getNavPluginName:function(){var e=this.getPluginObj();return e?e.name||"":""},getNavPluginDescription:function(){var e=this.getPluginObj();return e?e.description||"":""},Plugin2Status:0,setPlugin2Status:function(t){e.isNum(t)&&(this.Plugin2Status=t)},getPlugin2Status:function(){var t,n,i,r,o,a=this;return 0===a.Plugin2Status&&(n=/Next.*Generation.*Java.*Plug-?in|Java.*Plug-?in\s*2\s/i,i=/Classic.*Java.*Plug-?in/i,r=a.getNavPluginDescription(),o=a.getNavPluginName(),n.test(r)||n.test(o)?a.setPlugin2Status(1):i.test(r)||i.test(o)?a.setPlugin2Status(-1):e.browser.isIE&&/Sun|Oracle/i.test(a.getVendor())&&(t=a.isMinJre4Plugin2(),t>0?a.setPlugin2Status(1):0>t&&a.setPlugin2Status(-1))),a.Plugin2Status},isMinJre4Plugin2:function(t){var i,r=n,o="",a=r.applet.getResult()[0];return o=1==e.OS?"1,6,0,10":2==e.OS?"1,6,0,12":(3==e.OS,"1,6,0,10"),t||(t=(a&&!r.applet.isRange(a)?a:0)||r.version,i=r.applet.codebase,t=t||(i.min&&o?i.isMin(o)>0?o:"0,0,0,0":0)),t=e.formatNum(e.getNum(t)),t?e.compareNums(t,o)>=0?1:-1:0},BrowserForbidsPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,0,0")<0||t.isOpera&&e.compareNums(t.verOpera,"10,50,0,0")<0?1:0},BrowserRequiresPlugin2:function(){var t=e.browser;return e.OS>=20?0:t.isGecko&&e.compareNums(t.verGecko,"1,9,2,0")>=0||t.isChrome||1==e.OS&&t.isOpera&&e.compareNums(t.verOpera,"10,60,0,0")>=0?1:0},VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc.","Oracle Corporation","IBM Corporation"],VENDORS_reg:[/Sun/i,/Apple/i,/Oracle/i,/IBM/i],getNavVendor:function(){var e,t=this,n=t.getNavPluginName(),i=t.getNavPluginDescription(),r="";if(n||i)for(e=0;e<t.VENDORS.length;e++)if(t.VENDORS_reg[e].test(n)||t.VENDORS_reg[e].test(i)){r=t.VENDORS[e];break}return r},OracleMin:"1,7,0,0",OracleOrSun:function(t){var n=this;return n.VENDORS[e.compareNums(e.formatNum(t),n.OracleMin)<0?0:2]},OracleOrApple:function(t){var n=this;return n.VENDORS[e.compareNums(e.formatNum(t),n.OracleMin)<0?1:2]},getVendor:function(){var t,i,r=this,o=n,a=o.vendor||o.applet.getResult()[1]||"";return a||(i=o.DTK.version,t=o.applet.codebase,i=i||t.version||(t.min?t.isMin(r.OracleMin)>0?r.OracleMin:"0,0,0,0":0),i?a=r.OracleOrSun(i):(a=r.getNavVendor()||"",a||o.version&&(2==e.OS?a=r.OracleOrApple(o.version):(1==e.OS||3==e.OS)&&(a=r.OracleOrSun(o.version))))),a},isPlugin2InstalledEnabled:function(){var e=this,t=n,i=-1,r=t.installed,o=e.getPlugin2Status(),a=e.BrowserRequiresPlugin2(),s=e.BrowserForbidsPlugin2(),c=e.isMinJre4Plugin2();return null!==r&&r>=-.1&&(o>=3?i=1:-3>=o||(2==o?i=1:-2==o||(a&&o>=0&&c>0?i=1:s&&0>=o&&0>c||(a?i=1:s||(o>0?i=1:0>o||0>c||(i=0)))))),i},result:{getDeploymentToolkitObj:function(){var e=n,t=e.info,i=e.DTK;return i.query(1),t.updateResult(),i.status&&i.HTML?i.HTML.obj():i.status}},updateResult:function(){var t,i=this,r=n,o=r.applet,a=r.installed,s=r.DTK,c=o.results,l=i.result;for(l.DeployTK_versions=[].concat(e.isArray(s.VERSIONS)?s.VERSIONS:[]),l.vendor=i.getVendor(),l.isPlugin2=i.isPlugin2InstalledEnabled(),l.OTF=r.OTF<3?0:3==r.OTF?1:2,l.JavaAppletObj=null,t=0;t<c.length;t++)if(c[t][0]&&o.HTML[t]&&o.HTML[t].obj()){l.JavaAppletObj=o.HTML[t].obj();break}var u=[null,null,null,null];for(t=0;t<c.length;t++)c[t][0]?u[t]=1:null!==c[t][0]?(r.NOTF&&r.NOTF.isAppletActive(t),o.active[t]>0?u[t]=0:o.allowed[t]>=1&&3!=r.OTF&&(o.isDisabled.single(t)||a==-.2||-1==a||o.active[t]<0||3==t&&/Microsoft/i.test(l.vendor))&&(u[t]=-1)):3==t&&c[0][0]?u[t]=0:o.isDisabled.single(t)&&(u[t]=-1);l.objectTag=u[1],l.appletTag=u[2],l.objectTagActiveX=u[3],l.name=i.getNavPluginName(),l.description=i.getNavPluginDescription(),l.All_versions=[].concat(l.DeployTK_versions.length?l.DeployTK_versions:e.isString(r.version)?[r.version]:[]);var d=l.All_versions;for(t=0;t<d.length;t++)d[t]=e.formatNum(e.getNum(d[t]));return l}},getInfo:function(){var e=this.info;return e.updateResult(),e.result},getVerifyTagsDefault:function(){return[1,this.applet.isDisabled.VerifyTagsDefault_1()?0:1,1]},getVersion:function(t,n,i){var r,o=this,a=o.applet,s=o.verify,c=o.navigator,l=null,u=null,d=null;return null===o.getVersionDone&&(o.OTF=0,c.init(),s&&s.init()),a.setVerifyTagsArray(i),e.file.save(o,".jar",n),0===o.getVersionDone?void(a.should_Insert_Query_Any()&&(r=a.insert_Query_Any(t),o.setPluginStatus(r[0],r[1],l,t))):(l&&!e.dbug||!o.navMime.query().version||(l=o.navMime.version),l&&!e.dbug||!o.navPlugin.query().version||(l=o.navPlugin.version),l&&!e.dbug||!o.DTK.query().version||(l=o.DTK.version),o.nonAppletDetectionOk(l)&&(d=l),o.setPluginStatus(d,u,l,t),a.should_Insert_Query_Any()&&(r=a.insert_Query_Any(t),r[0]&&(d=r[0],u=r[1])),void o.setPluginStatus(d,u,l,t))},nonAppletDetectionOk:function(t){
var n=this,i=n.navigator,r=e.browser,o=1;return t&&i.javaEnabled()&&(r.isIE||i.mimeObj)||(o=0),o},setPluginStatus:function(t,n,i,r){var o,a=this,s=0,c=a.applet;i=i||a.version0,o=c.isRange(t),o&&(c.setRange(o,r)==t&&(s=o),t=0),a.OTF<3&&(a.installed=s?s>0?.7:-.1:t?1:i?-.2:-1),2==a.OTF&&a.NOTF&&!a.applet.getResult()[0]&&(a.installed=i?-.2:-1),3==a.OTF&&a.installed!=-.5&&.5!=a.installed&&(a.installed=a.NOTF.isJavaActive(1)>=1?.5:-.5),4!=a.OTF||a.installed!=-.5&&.5!=a.installed||(t?a.installed=1:s?a.installed=s>0?.7:-.1:a.NOTF.isJavaActive(1)>=1?i?(a.installed=1,t=i):a.installed=0:i?a.installed=-.2:a.installed=-1),i&&(a.version0=e.formatNum(e.getNum(i))),t&&!s&&(a.version=e.formatNum(e.getNum(t))),n&&e.isString(n)&&(a.vendor=n),a.vendor||(a.vendor=""),a.verify&&a.verify.isEnabled()?a.getVersionDone=0:1!=a.getVersionDone&&(a.OTF<2?a.getVersionDone=0:a.getVersionDone=a.applet.can_Insert_Query_Any()?0:1)},DTK:{hasRun:0,status:null,VERSIONS:[],version:"",HTML:null,Plugin2Status:null,classID:["clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA","clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA"],mimeType:["application/java-deployment-toolkit","application/npruntime-scriptable-plugin;DeploymentToolkit"],isDisabled:function(t){var n=this;return n.HTML?1:t||e.dbug?0:n.hasRun||!e.DOM.isEnabled.objectTagUsingActiveX()?1:0},query:function(t){var i,r,o,a=this,s=n,c=e.DOM.altHTML,l={},u=null,d=null,f=a.isDisabled(t);if(a.hasRun=1,f)return a;if(a.status=0,e.DOM.isEnabled.objectTagUsingActiveX())for(i=0;i<a.classID.length&&(a.HTML=e.DOM.insert("object",["classid",a.classID[i]],[],c),u=a.HTML.obj(),!e.pd.getPROP(u,"jvms"));i++);else r=e.hasMimeType(a.mimeType),r&&r.type&&(a.HTML=e.DOM.insert("object",["type",r.type],[],c),u=a.HTML.obj());if(u){try{Math.abs(s.info.getPlugin2Status())<2&&(a.Plugin2Status=u.isPlugin2())}catch(p){}null!==a.Plugin2Status&&(a.Plugin2Status?s.info.setPlugin2Status(2):(e.DOM.isEnabled.objectTagUsingActiveX()||s.info.getPlugin2Status()<=0)&&s.info.setPlugin2Status(-2));try{if(o=e.pd.getPROP(u,"jvms"),o&&(d=o.getLength(),e.isNum(d)))for(a.status=d>0?1:-1,i=0;d>i;i++)r=e.getNum(o.get(d-1-i).version),r&&(a.VERSIONS.push(r),l["a"+e.formatNum(r)]=1)}catch(p){}a.VERSIONS.length&&(a.version=e.formatNum(a.VERSIONS[0]))}return a}},navMime:{hasRun:0,mimetype:"",version:"",mimeObj:0,pluginObj:0,regexJPI:/^\s*application\/x-java-applet;jpi-version\s*=\s*(\d.*)$/i,isDisabled:function(){var e=this,t=n;return e.hasRun||!t.navigator.mimeObj?1:0},update:function(t){var n=this,i=t?t.enabledPlugin:0,r=t&&n.regexJPI.test(t.type||"")?e.formatNum(e.getNum(RegExp.$1)):0;r&&i&&(i.description||i.name)&&e.compareNums(r,n.version||e.formatNum("0"))>0&&(n.version=r,n.mimeObj=t,n.pluginObj=i,n.mimetype=t.type)},query:function(){var t,i,r,o,a,s,c=this,l=n,u=navigator.mimeTypes,d=c.isDisabled();if(c.hasRun=1,d)return c;if(s=u.length,e.isNum(s))for(t=0;s>t;t++){r=0;try{r=u[t]}catch(f){}c.update(r)}if(!c.version||e.dbug)for(a=e.isArray(l.mimeType)?l.mimeType:[l.mimeType],t=0;t<a.length;t++){r=0;try{r=u[a[t]]}catch(f){}if(o=r?r.enabledPlugin:0,s=o?o.length:null,e.isNum(s))for(i=0;s>i;i++){r=0;try{r=o[i]}catch(f){}c.update(r)}}return c}},navPlugin:{hasRun:0,version:"",getPlatformNum:function(){var t=n,i=0,r=/Java.*TM.*Platform[^\d]*(\d+)[\.,_]?(\d*)\s*U?(?:pdate)?\s*(\d*)/i,o=e.pd.findNavPlugin({find:r,mimes:t.mimeType,plugins:1});return o&&(r.test(o.name||"")||r.test(o.description||""))&&parseInt(RegExp.$1,10)>=5&&(i="1,"+RegExp.$1+","+(RegExp.$2?RegExp.$2:"0")+","+(RegExp.$3?RegExp.$3:"0")),i},getPluginNum:function(){var t,i,r,o,a=this,s=n,c=0,l=0;return r=/Java[^\d]*Plug-in/i,o=e.pd.findNavPlugin({find:r,num:1,mimes:s.mimeType,plugins:1,dbug:l}),o&&(t=a.checkPluginNum(o.description,r),i=a.checkPluginNum(o.name,r),c=t&&i?e.compareNums(t,i)>0?t:i:t||i),c||(r=/Java.*\d.*Plug-in/i,o=e.pd.findNavPlugin({find:r,mimes:s.mimeType,plugins:1,dbug:l}),o&&(t=a.checkPluginNum(o.description,r),i=a.checkPluginNum(o.name,r),c=t&&i?e.compareNums(t,i)>0?t:i:t||i)),c},checkPluginNum:function(t,n){var i,r;return i=n.test(t)?e.formatNum(e.getNum(t)):0,i&&e.compareNums(i,e.formatNum("10"))>=0&&(r=i.split(e.splitNumRegx),i=e.formatNum("1,"+(parseInt(r[0],10)-3)+",0,"+r[1])),i&&(e.compareNums(i,e.formatNum("1,3"))<0||e.compareNums(i,e.formatNum("2"))>=0)&&(i=0),i},query:function(){var t,i=this,r=n,o=0,a=i.hasRun||!r.navigator.mimeObj;return i.hasRun=1,a?i:((!o||e.dbug)&&(t=i.getPlatformNum(),t&&(o=t)),(!o||e.dbug)&&(t=i.getPluginNum(),t&&(o=t)),o&&(i.version=e.formatNum(o)),i)}},applet:{codebase:{isMin:function(t){return this.$$=n,e.codebase.isMin(this,t)},search:function(){return this.$$=n,e.codebase.search(this)},DIGITMAX:[[15,128],[6,0,512],0,[1,5,2,256],0,[1,4,1,1],[1,4,0,64],[1,3,2,32]],DIGITMIN:[1,0,0,0],Upper:["999","10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4"],Lower:["10","5,0,20","1,5,0,20","1,4,1,20","1,4,1,2","1,4,1","1,4","0"],convert:[function(e,t){return t?[parseInt(e[0],10)>1?"99":parseInt(e[1],10)+3+"",e[3],"0","0"]:["1",parseInt(e[0],10)-3+"","0",e[1]]},function(e,t){return t?[e[1],e[2],e[3]+"0","0"]:["1",e[0],e[1],e[2].substring(0,e[2].length-1||1)]},0,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},0,1,function(e,t){return t?[e[0],e[1],e[2],e[3]+"0"]:[e[0],e[1],e[2],e[3].substring(0,e[3].length-1||1)]},1]},results:[[null,null],[null,null],[null,null],[null,null]],getResult:function(){var e,t=this,n=t.results,i=[];for(e=n.length-1;e>=0&&(i=n[e],!i[0]);e--);return i=[].concat(i)},DummySpanTagHTML:0,HTML:[0,0,0,0],active:[0,0,0,0],DummyObjTagHTML:0,DummyObjTagHTML2:0,allowed:[1,1,1,1],VerifyTagsHas:function(e){var t,n=this;for(t=0;t<n.allowed.length;t++)if(n.allowed[t]===e)return 1;return 0},saveAsVerifyTagsArray:function(t){var n,i=this;if(e.isArray(t)){for(n=1;n<i.allowed.length;n++)t.length>n-1&&e.isNum(t[n-1])&&(t[n-1]<0&&(t[n-1]=0),t[n-1]>3&&(t[n-1]=3),i.allowed[n]=t[n-1]);i.allowed[0]=i.allowed[3]}},setVerifyTagsArray:function(t){var i=this,r=n;null===r.getVersionDone&&i.saveAsVerifyTagsArray(r.getVerifyTagsDefault()),e.dbug?i.saveAsVerifyTagsArray([3,3,3]):t&&i.saveAsVerifyTagsArray(t)},isDisabled:{single:function(t){var n=this;return n.all()?1:1==t?!e.DOM.isEnabled.objectTag():2==t?n.AppletTag():0===t?e.codebase.isDisabled():3==t?!e.DOM.isEnabled.objectTagUsingActiveX():1},all_:null,all:function(){var t,i=this,r=n,o=r.navigator,a=e.browser;return null===i.all_&&(t=a.isOpera&&e.compareNums(a.verOpera,"13,0,0,0")<0&&!o.javaEnabled()||i.AppletTag()&&!e.DOM.isEnabled.objectTag()||!o.mimeObj&&!a.isIE?1:0,i.all_=t),i.all_},AppletTag:function(){var t=n,i=t.navigator;return e.browser.isIE?!i.javaEnabled():0},VerifyTagsDefault_1:function(){var t=e.browser,n=1;return t.isIE&&!t.ActiveXEnabled&&(n=0),(t.isIE&&t.verIE<9||t.verGecko&&e.compareNums(t.verGecko,e.formatNum("2"))<0||t.isSafari&&(!t.verSafari||e.compareNums(t.verSafari,e.formatNum("4"))<0)||t.isOpera&&e.compareNums(t.verOpera,e.formatNum("11"))<0)&&(n=0),n}},can_Insert_Query:function(e){var t=this,n=t.results[0][0],i=t.getResult()[0];return t.HTML[e]||0===e&&null!==n&&!t.isRange(n)||0===e&&i&&!t.isRange(i)?0:!t.isDisabled.single(e)},can_Insert_Query_Any:function(){var e,t=this;for(e=0;e<t.results.length;e++)if(t.can_Insert_Query(e))return 1;return 0},should_Insert_Query:function(e){var t=this,i=t.allowed,r=n,o=t.getResult()[0];return o=o&&(e>0||!t.isRange(o)),t.can_Insert_Query(e)&&0!==i[e]?3==i[e]||2.8==i[e]&&!o?1:r.nonAppletDetectionOk(r.version0)||2!=i[e]&&(1!=i[e]||o)?0:1:0},should_Insert_Query_Any:function(){var e,t=this;for(e=0;e<t.allowed.length;e++)if(t.should_Insert_Query(e))return 1;return 0},query:function(t){var i,r,o=this,a=n,s=null,c=null,l=o.results,u=o.HTML[t];if(u&&u.obj()&&!l[t][0]&&!a.bridgeDisabled&&(i=u.obj(),r=u.readyState(),!e.isNum(r)||4==r)){try{s=e.getNum(i.getVersion()+""),c=i.getVendor()+"",i.statusbar((e.win.loaded," "))}catch(d){}!s||!e.isStrNum(s)||e.dbug&&a.OTF<3||(l[t]=[s,c],o.active[t]=2)}},isRange:function(e){return/^[<>]/.test(e||"")?">"==e.charAt(0)?1:-1:0},setRange:function(t,n){return(t?t>0?">":"<":"")+(e.isString(n)?n:"")},insertJavaTag:function(t,i,r,o,a){var s=n,c="A.class",l=e.file.getValid(s),u=l.name+l.ext,d=l.path,f=["archive",u,"code",c],p=(o?["width",o]:[]).concat(a?["height",a]:[]),h=["mayscript","true"],m=["scriptable","true","codebase_lookup","false"].concat(h),g=s.navigator,_=!e.browser.isIE&&g.mimeObj&&g.mimeObj.type?g.mimeObj.type:s.mimeType[0];return 1==t?e.browser.isIE?e.DOM.insert("object",["type",_].concat(p),["codebase",d].concat(f).concat(m),r,s,0,i):e.DOM.insert("object",["type",_].concat(p),["codebase",d].concat(f).concat(m),r,s,0,i):2==t?e.browser.isIE?e.DOM.insert("applet",["alt",r].concat(h).concat(f).concat(p),["codebase",d].concat(m),r,s,0,i):e.DOM.insert("applet",["codebase",d,"alt",r].concat(h).concat(f).concat(p),[].concat(m),r,s,0,i):3==t?e.browser.isIE?e.DOM.insert("object",["classid",s.classID].concat(p),["codebase",d].concat(f).concat(m),r,s,0,i):e.DOM.insert():4==t?e.DOM.insert("embed",["codebase",d].concat(f).concat(["type",_]).concat(m).concat(p),[],r,s,0,i):e.DOM.insert()},insertIframe:function(t){return e.DOM.iframe.insert(99,t)},insert_Query_Any:function(t){var i,r,o=this,a=n,s=e.DOM,c=o.results,l=o.HTML,u=s.altHTML,d=e.file.getValid(a);return o.should_Insert_Query(0)&&(a.OTF<2&&(a.OTF=2),c[0]=[0,0],i=t?o.codebase.isMin(t):o.codebase.search(),i&&(c[0][0]=t?o.setRange(i,t):i),o.active[0]=i?1.5:-1),d?(o.DummySpanTagHTML||(r=o.insertIframe("applet.DummySpanTagHTML"),o.DummySpanTagHTML=s.insert("",[],[],u,0,0,r),s.iframe.close(r)),o.should_Insert_Query(1)&&(a.OTF<2&&(a.OTF=2),r=o.insertIframe("applet.HTML[1]"),l[1]=o.insertJavaTag(1,r,u),s.iframe.close(r),c[1]=[0,0],o.query(1)),o.should_Insert_Query(2)&&(a.OTF<2&&(a.OTF=2),r=o.insertIframe("applet.HTML[2]"),l[2]=o.insertJavaTag(2,r,u),s.iframe.close(r),c[2]=[0,0],o.query(2)),o.should_Insert_Query(3)&&(a.OTF<2&&(a.OTF=2),r=o.insertIframe("applet.HTML[3]"),l[3]=o.insertJavaTag(3,r,u),s.iframe.close(r),c[3]=[0,0],o.query(3)),s.isEnabled.objectTag()&&(o.DummyObjTagHTML||!l[1]&&!l[2]||(r=o.insertIframe("applet.DummyObjTagHTML"),o.DummyObjTagHTML=s.insert("object",["type",a.mimeType_dummy],[],u,0,0,r),s.iframe.close(r)),!o.DummyObjTagHTML2&&l[3]&&(r=o.insertIframe("applet.DummyObjTagHTML2"),o.DummyObjTagHTML2=s.insert("object",["classid",a.classID_dummy],[],u,0,0,r),s.iframe.close(r))),a.NOTF.init(),o.getResult()):o.getResult()}},NOTF:{count:0,count2:0,countMax:25,intervalLength:250,init:function(){var t=this,i=n;i.OTF<3&&t.shouldContinueQuery()&&(i.OTF=3,e.ev.setTimeout(t.onIntervalQuery,t.intervalLength))},allHTMLloaded:function(){var e,t=n.applet,i=[t.DummySpanTagHTML,t.DummyObjTagHTML,t.DummyObjTagHTML2].concat(t.HTML);for(e=0;e<i.length;e++)if(i[e]&&null!==i[e].loaded&&!i[e].loaded)return 0;return 1},shouldContinueQuery:function(){var e,t=this,i=n,r=i.applet,o=0;if(t.allHTMLloaded()){if(t.count-t.count2>2)return o}else t.count2=t.count;for(e=0;e<r.results.length;e++)r.HTML[e]&&!r.results[e][0]&&(r.allowed[e]>=2||1==r.allowed[e]&&!r.getResult()[0])&&(!t.count||t.isAppletActive(e)>=0)&&(o=1);return o},isJavaActive:function(e){var t,i,r=this,o=n,a=-9;for(t=0;t<o.applet.HTML.length;t++)i=r.isAppletActive(t,e),i>a&&(a=i);return a},isAppletActive:function(t,i){var r,o,a=this,s=n,c=s.navigator,l=s.applet,u=l.HTML[t],d=l.active,f=0,p=d[t];if(i||p>=1.5||!u||!u.span())return p;for(o=e.DOM.getTagStatus(u,l.DummySpanTagHTML,l.DummyObjTagHTML,l.DummyObjTagHTML2,a.count),r=0;r<d.length;r++)d[r]>0&&(f=1);return p=1!=o?o:e.browser.isIE||s.version0&&c.javaEnabled()&&c.mimeObj&&("object"==u.tagName||f)?1:0,d[t]=p,p},onIntervalQuery:function(){var t,i=n.NOTF;i.count++,3==n.OTF&&(t=i.queryAllApplets(),i.shouldContinueQuery()||i.queryCompleted(t)),3==n.OTF&&e.ev.setTimeout(i.onIntervalQuery,i.intervalLength)},queryAllApplets:function(){var e,t,i=n,r=i.applet;for(e=0;e<r.results.length;e++)r.query(e);return t=r.getResult()},queryCompleted:function(t){var i=this,r=n;r.OTF>=4||(r.OTF=4,i.isJavaActive(),r.setPluginStatus(t[0],t[1],0),e.ev.callArray(r.DoneHndlrs))}}};e.addPlugin("java",n);var i={mimeType:"application/x-shockwave-flash",setPluginStatus:function(t,n){var i,r=this;r.installed=n?1:t?0:-1,r.version=e.formatNum(n),i=-1==r.installed||r.instance.version,i=i||r.axo.version,r.getVersionDone=i?1:0},getVersion:function(t,n){var i=this,r=null,o=0;o&&!e.dbug||!i.navPlugin.query().installed||(o=1),r&&!e.dbug||!i.navPlugin.query().version||(r=i.navPlugin.version),o&&!e.dbug||!i.axo.query().installed||(o=1),r&&!e.dbug||!i.axo.query().version||(r=i.axo.version),(!o&&!r||n||e.dbug)&&i.instance.query().version&&(o=1,r=i.instance.version),i.setPluginStatus(o,r)},navPlugin:{hasRun:0,installed:0,version:null,getNum:function(e){if(!e)return null;var t=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e);return t?t[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},query:function(){var t,n,r=this,o=i,a=r.hasRun||!e.hasMimeType(o.mimeType);return r.hasRun=1,a?r:(n=e.pd.findNavPlugin({find:"Shockwave.*Flash",mimes:o.mimeType,plugins:["Shockwave Flash"]}),n&&(r.installed=1,n.description&&(t=r.getNum(n.description))),t&&(t=e.getPluginFileVersion(n,t)),t&&(r.version=t),r)}},axo:{hasRun:0,installed:0,version:null,progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",query:function(){var t,n,i,r=this,o=r.hasRun;if(r.hasRun=1,o)return r;for(n=0;10>n;n++)if(i=e.getAXO(r.progID+(n?"."+n:""))){r.installed=1,t=0;try{t=e.getNum(i.GetVariable("$version")+"")}catch(a){}if(t&&(r.version=t,!e.dbug))break}return r}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=this,n=i,r=1;return(t.hasRun||e.DOM.isEnabled.objectTagUsingActiveX()||!e.DOM.isEnabled.objectTag()||!e.hasMimeType(n.mimeType))&&(r=0),r},query:function(){var t=this,n=i,r=t.isEnabled();if(t.hasRun=1,r){t.HTML=e.DOM.insert("object",["type",n.mimeType],["play","false","menu","false"],"",n);try{t.version=e.getNum(t.HTML.obj().GetVariable("$version")+"")}catch(o){}}return t}}};e.addPlugin("flash",i);var r={getVersion:function(){var t,n=this,i=null;t&&!e.dbug||!n.nav.query().installed||(t=1),i&&!e.dbug||!n.nav.query().version||(i=n.nav.version),t&&!e.dbug||!n.axo.query().installed||(t=1),i&&!e.dbug||!n.axo.query().version||(i=n.axo.version),n.installed=i?1:t?0:-1,n.version=e.formatNum(i)},nav:{hasRun:0,installed:0,version:null,mimeType:"application/x-director",query:function(){var t,n,i=this,r=i.hasRun||!e.hasMimeType(i.mimeType);return i.hasRun=1,r?i:(n=e.pd.findNavPlugin({find:"Shockwave\\s*for\\s*Director",mimes:i.mimeType,plugins:"Shockwave for Director"}),n&&n.description&&(t=e.getNum(n.description+"")),t&&(t=e.getPluginFileVersion(n,t)),n&&(i.installed=1),t&&(i.version=t),i)}},axo:{hasRun:0,installed:null,version:null,progID:["SWCtl.SWCtl","SWCtl.SWCtl.1","SWCtl.SWCtl.7","SWCtl.SWCtl.8","SWCtl.SWCtl.11","SWCtl.SWCtl.12"],classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",query:function(){var t,n,i,r,o,a=this,s=!a.hasRun;if(a.hasRun=1,s)for(n=0;n<a.progID.length;n++)if(t=e.getAXO(a.progID[n])){a.installed=1,r="";try{r=t.ShockwaveVersion("")+""}catch(c){}if(/(\d[\d\.\,]*)(?:\s*r\s*(\d+))?/i.test(r)&&(o=RegExp.$2,i=e.formatNum(RegExp.$1),o&&(i=i.split(e.splitNumRegx),i[3]=o,i=i.join(","))),i&&(a.version=i,!e.dbug))break}return a}}};e.addPlugin("shockwave",r);var o={setPluginStatus:function(t,n){var i=this;t&&(i.version=e.formatNum(t)),i.installed=i.version?1:n?0:-1,i.getVersionDone=0===i.installed?0:1},getVersion:function(t,n){var i,r=this,o=null;i&&!e.dbug||!r.nav.query().installed||(i=1),i&&!e.dbug||!r.axo.query().installed||(i=1),o&&!e.dbug||!r.axo.query().version||(o=r.axo.version),(!i&&!o||n||e.dbug)&&r.FirefoxPlugin.query().version&&(i=1,o=r.FirefoxPlugin.version),r.setPluginStatus(o,i)},mimeType:["application/x-ms-wmp","application/asx","application/x-mplayer2","video/x-ms-asf","video/x-ms-wm","video/x-ms-asf-plugin"],find:["Microsoft.*Windows\\s*Media\\s*Player.*Firefox.*Plug-?in","Windows\\s*Media\\s*Player\\s*Plug-?in\\s*Dynamic\\s*Link\\s*Library","Flip4Mac.*Windows\\s*Media.*Plug-?in|Flip4Mac.*WMV.*Plug-?in"],avoid:"Totem|VLC|RealPlayer|Helix",plugins:["Microsoft"+String.fromCharCode(174)+" Windows Media Player Firefox Plugin","Windows Media Player Plug-in Dynamic Link Library"],nav:{hasRun:0,installed:0,query:function(){var t,n=this,i=o,r=n.hasRun||!e.hasMimeType(i.mimeType);return n.hasRun=1,r?n:(t=e.pd.findNavPlugin({find:i.find.join("|"),avoid:i.avoid,mimes:i.mimeType,plugins:i.plugins}),t&&(n.installed=1),n)}},FirefoxPlugin:{hasRun:0,version:null,isDisabled:function(){var t=this,n=o,i=e.browser;return t.hasRun||i.isGecko&&e.compareNums(i.verGecko,e.formatNum("1.8"))<0||i.isOpera&&e.compareNums(i.verOpera,e.formatNum("10"))<0||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(n.mimeType)||!e.pd.findNavPlugin({find:n.find[0],avoid:n.avoid,mimes:n.mimeType,plugins:n.plugins[0]})?1:0},query:function(){var t,n=this,i=o,r=n.isDisabled();return n.hasRun=1,r?n:(t=e.pd.getPROP(e.DOM.insert("object",["type",e.hasMimeType(i.mimeType).type,"data",""],["src",""],"",i).obj(),"versionInfo"),t&&(n.version=e.getNum(t)),n)}},axo:{hasRun:0,installed:null,version:null,progID:["WMPlayer.OCX","WMPlayer.OCX.7"],classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",query:function(){var t,n,i,r=this,o=!r.hasRun;if(r.hasRun=1,o)for(n=0;n<r.progID.length&&(t=e.getAXO(r.progID[n]),!t||(r.installed=1,i=e.pd.getPROP(t,"versionInfo",0),i&&(i=e.getNum(i)),!i||(r.version=i,e.dbug)));n++);return r}},result:0,getInfo:function(){var t=this,n=t.installed;return t.result||(t.result={ActiveXPlugin:!!t.axo.version,FirefoxPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[0],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[0]})),DllPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[1],avoid:t.avoid,mimes:t.mimeType,plugins:t.plugins[1]})),Flip4macPlugin:!(0!==n&&1!=n||!e.pd.findNavPlugin({find:t.find[2],avoid:t.avoid,mimes:t.mimeType,plugins:1}))},t.result.Scriptable=!(1!=n&&!t.result.FirefoxPlugin)),t.result}};e.addPlugin("windowsmediaplayer",o);var a={getVersion:function(){var t=this,n=null,i=0;i&&!e.dbug||!t.nav.query().installed||(i=1),n&&!e.dbug||!t.nav.query().version||(n=t.nav.version),i&&!e.dbug||!t.axo.query().installed||(i=1),n&&!e.dbug||!t.axo.query().version||(n=t.axo.version),t.version=e.formatNum(n),t.installed=n?1:i?0:-1},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-silverlight","application/x-silverlight-2"],query:function(){var t,n,i,r=this,o=r.hasRun||!e.hasMimeType(r.mimeType);return r.hasRun=1,o?r:(i=e.pd.findNavPlugin({find:"Silverlight.*Plug-?in",mimes:r.mimeType,plugins:"Silverlight Plug-In"}),i&&(r.installed=1),i&&i.description&&(n=e.formatNum(e.getNum(i.description+""))),n&&(t=n.split(e.splitNumRegx),parseInt(t[0],10)<2&&parseInt(t[2],10)>=30226&&(t[0]="2"),n=t.join(",")),n&&(r.version=n),r)}},axo:{hasRun:0,installed:0,version:null,progID:"AgControl.AgControl",maxdigit:[20,10,10,100,100,10],mindigit:[0,0,0,0,0,0],IsVersionSupported:function(t,n){var i=this;try{return i.testVersion?e.compareNums(e.formatNum(i.testVersion.join(",")),e.formatNum(n.join(",")))>=0:t.IsVersionSupported(i.format(n))}catch(r){}return 0},format:function(e){var t=this;return e[0]+"."+e[1]+"."+e[2]+t.make2digits(e[3])+t.make2digits(e[4])+"."+e[5]},make2digits:function(e){return(10>e?"0":"")+e},query:function(){var t,n,i=this,r=i.hasRun;if(i.hasRun=1,r)return i;if(n=e.getAXO(i.progID),n&&(i.installed=1),n&&i.IsVersionSupported(n,i.mindigit)){var o,a=[].concat(i.mindigit),s=0;for(t=0;t<i.maxdigit.length;t++){for(o=0;i.maxdigit[t]-i.mindigit[t]>1&&20>o;)o++,s++,a[t]=Math.round((i.maxdigit[t]+i.mindigit[t])/2),i.IsVersionSupported(n,a)?i.mindigit[t]=a[t]:i.maxdigit[t]=a[t];a[t]=i.mindigit[t]}i.version=i.format(a)}return i}}};e.addPlugin("silverlight",a);var s={compareNums:function(t,n){var i,r,o,a,s,c,l=t.split(e.splitNumRegx),u=n.split(e.splitNumRegx);for(i=0;i<Math.min(l.length,u.length);i++){if(c=/([\d]+)([a-z]?)/.test(l[i]),r=parseInt(RegExp.$1,10),a=2==i&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,c=/([\d]+)([a-z]?)/.test(u[i]),o=parseInt(RegExp.$1,10),s=2==i&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,r!=o)return r>o?1:-1;if(2==i&&a!=s)return a>s?1:-1}return 0},setPluginStatus:function(t,n,i){var r=this;r.installed=n?1:i?i>0?.7:-.1:t?0:-1,n&&(r.version=e.formatNum(n)),r.getVersionDone=.7==r.installed||r.installed==-.1?0:1},getVersion:function(t){var n,i,r=this,o=null;return n&&!e.dbug||!r.nav.query().installed||(n=1),o&&!e.dbug||!r.nav.query().version||(o=r.nav.version),n&&!e.dbug||!r.axo.query().installed||(n=1),o&&!e.dbug||!r.axo.query().version||(o=r.axo.version),o&&!e.dbug||!(i=r.codebase.isMin(t))?((!o||e.dbug)&&(i=r.codebase.search(),i&&(n=1,o=i)),void r.setPluginStatus(n,o,0)):void r.setPluginStatus(0,0,i)},nav:{hasRun:0,installed:0,version:null,mimeType:["application/x-vlc-plugin","application/x-google-vlc-plugin","application/mpeg4-muxcodetable","application/x-matroska","application/xspf+xml","video/divx","video/webm","video/x-mpeg","video/x-msvideo","video/ogg","audio/x-flac","audio/amr","audio/amr"],find:"VLC.*Plug-?in",find2:"VLC|VideoLAN",avoid:"Totem|Helix",plugins:["VLC Web Plugin","VLC Multimedia Plug-in","VLC Multimedia Plugin","VLC multimedia plugin"],query:function(){var t,n,i=this,r=i.hasRun||!e.hasMimeType(i.mimeType);return i.hasRun=1,r?i:(n=e.pd.findNavPlugin({find:i.find,avoid:i.avoid,mimes:i.mimeType,plugins:i.plugins}),n&&(i.installed=1,n.description&&(t=e.getNum(n.description+"","[\\d][\\d\\.]*[a-z]*")),t&&(i.version=t)),i)}},axo:{hasRun:0,installed:0,version:null,progID:"VideoLAN.VLCPlugin",query:function(){var t,n,i=this,r=i.hasRun;return i.hasRun=1,r?i:(t=e.getAXO(i.progID),t&&(i.installed=1,n=e.getNum(e.pd.getPROP(t,"VersionInfo"),"[\\d][\\d\\.]*[a-z]*"),n&&(i.version=n)),i)}},codebase:{classID:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",isMin:function(t){return this.$$=s,e.codebase.isMin(this,t)},search:function(){return this.$$=s,e.codebase.search(this)},DIGITMAX:[[11,11,16]],DIGITMIN:[0,0,0,0],Upper:["999"],Lower:["0"],convert:[1]}};e.addPlugin("vlc",s);var c={OTF:null,setPluginStatus:function(){var t=this,n=t.OTF,i=t.nav.detected,r=t.nav.version,o=t.nav.precision,a=o,s=r,c=i>0,l=t.axo.detected,u=t.axo.version,d=t.axo.precision,f=t.doc.detected,p=t.doc.version,h=t.doc.precision,m=t.doc2.detected,g=t.doc2.version,_=t.doc2.precision;s=g||s||u||p,a=_||a||d||h,c=m>0||c||l>0||f>0,s=s||null,t.version=e.formatNum(s),t.precision=a;var v=-1;if(3==n?v=t.version?.5:-.5:s?v=1:c?v=0:l==-.5||f==-.5?v=-.15:!e.browser.isIE||e.browser.ActiveXEnabled&&!e.browser.ActiveXFilteringEnabled||(v=-1.5),t.installed=v,1!=t.getVersionDone){var y=1;t.verify&&t.verify.isEnabled()||.5==t.installed||t.installed==-.5?y=0:1==t.doc2.isDisabled()&&(y=0),t.getVersionDone=y}},getVersion:function(t,n){var i=this,r=0,o=i.verify;return null===i.getVersionDone&&(i.OTF=0,o&&o.init()),e.file.save(i,".pdf",n),0===i.getVersionDone?(i.doc2.insertHTMLQuery(),void i.setPluginStatus()):(r&&!e.dbug||!i.nav.query().version||(r=1),r&&!e.dbug||!i.axo.query().version||(r=1),r&&!e.dbug||!i.doc.query().version||(r=1),i.doc2.insertHTMLQuery(),void i.setPluginStatus())},getPrecision:function(t,n,i){if(e.isString(t)){n=n||"",i=i||"";var r,o="\\d+",a="[\\.]",s=[o,o,o,o];for(r=4;r>0;r--)if(new RegExp(n+s.slice(0,r).join(a)+i).test(t))return r}return 0},nav:{detected:0,version:null,precision:0,mimeType:["application/pdf","application/vnd.adobe.pdfxml"],find:"Adobe.*PDF.*Plug-?in|Adobe.*Acrobat.*Plug-?in|Adobe.*Reader.*Plug-?in",plugins:["Adobe Acrobat","Adobe Acrobat and Reader Plug-in","Adobe Reader Plugin"],query:function(){var t,n=this,i=null;return n.detected||!e.hasMimeType(n.mimeType)?n:(t=e.pd.findNavPlugin({find:n.find,mimes:n.mimeType,plugins:n.plugins}),n.detected=t?1:-1,t&&(i=e.getNum(t.description)||e.getNum(t.name),i=e.getPluginFileVersion(t,i),i||(i=n.attempt3()),i&&(n.version=i,n.precision=c.getPrecision(i))),n)},attempt3:function(){var t=null;return 1==e.OS&&(e.hasMimeType("application/vnd.adobe.pdfxml")?t="9":e.hasMimeType("application/vnd.adobe.x-mars")?t="8":e.hasMimeType("application/vnd.adobe.xfdf")&&(t="6")),t}},activexQuery:function(t){var n,i,r,o,a="",s={precision:0,version:null};try{t&&(a=t.GetVersions()+"")}catch(l){}if(a&&e.isString(a)&&(n=/\=\s*[\d\.]+/g,o=a.match(n))){for(i=0;i<o.length;i++)r=e.formatNum(e.getNum(o[i])),r&&(!s.version||e.compareNums(r,s.version)>0)&&(s.version=r);s.precision=c.getPrecision(a,"\\=\\s*")}return s},axo:{detected:0,version:null,precision:0,progID:["AcroPDF.PDF","AcroPDF.PDF.1","PDF.PdfCtrl","PDF.PdfCtrl.5","PDF.PdfCtrl.1"],progID_dummy:"AcroDUMMY.DUMMY",query:function(){var t,n,i,r,o,a,s=this,l=c;if(s.detected)return s;for(s.detected=-1,n=e.getAXO(s.progID_dummy),n||(a=e.errObj),o=0;o<s.progID.length;o++)if(n=e.getAXO(s.progID[o])){if(s.detected=1,t=l.activexQuery(n),i=t.version,r=t.precision,!e.dbug&&i)break}else a&&e.errObj&&a!==e.errObj&&a.message!==e.errObj.message&&(s.detected=-.5);return i&&(s.version=i),r&&(s.precision=r),s}},doc:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",classID_dummy:"clsid:CA8A9780-280D-11CF-A24D-BA9876543210",DummySpanTagHTML:0,HTML:0,DummyObjTagHTML1:0,DummyObjTagHTML2:0,isDisabled:function(){var t=this,n=0;return t.HTML?n=1:e.dbug||e.DOM.isEnabled.objectTagUsingActiveX()||(n=1),n},query:function(){var t,n,i,r,o,a=this,s=c,l=e.DOM.altHTML,u=1,d=1;return a.isDisabled()?a:(t=e.DOM.iframe.insert(99,"Adobe Reader"),a.DummySpanTagHTML=e.DOM.insert("",[],[],l,s,d,t),a.HTML=e.DOM.insert("object",["classid",a.classID],[],l,s,d,t),a.DummyObjTagHTML2=e.DOM.insert("object",["classid",a.classID_dummy],[],l,s,d,t),e.DOM.iframe.close(t),o=e.DOM.getTagStatus(a.HTML,a.DummySpanTagHTML,a.DummyObjTagHTML1,a.DummyObjTagHTML2,0,0,u),n=s.activexQuery(a.HTML.obj()),i=n.version,r=n.precision,a.detected=o>0||i?1:o==-.1||o==-.5?-.5:-1,i&&(a.version=i),r&&(a.precision=r),a)}},doc2:{detected:0,version:null,precision:0,classID:"clsid:CA8A9780-280D-11CF-A24D-444553540000",mimeType:"application/pdf",HTML:0,count:0,count2:0,time2:0,intervalLength:50,maxCount:150,isDisabled:function(){var t,n,i,r=this,o=c,a=o.axo,s=o.nav,l=o.doc,u=0;return r.HTML?u=2:e.dbug||(e.DOM.isEnabled.objectTagUsingActiveX()?(t=(s?s.version:0)||(a?a.version:0)||(l?l.version:0)||0,n=(s?s.precision:0)||(a?a.precision:0)||(l?l.precision:0)||0,(!t||!n||n>2||e.compareNums(e.formatNum(t),e.formatNum("11"))<0)&&(u=2)):u=2),2>u&&(i=e.file.getValid(o),i&&i.full||(u=1)),u},handlerSet:0,onMessage:function(){var t=this;return function(n){t.version||(t.detected=1,e.isArray(n)&&(n=n[0]),n=e.getNum(n+""),n&&(/[.,_]/.test(n)||(n+="."),n+="00000",/^(\d+)[.,_](\d)(\d\d)(\d\d)/.test(n)&&(n=RegExp.$1+","+RegExp.$2+","+RegExp.$3+","+RegExp.$4),t.version=e.formatNum(n),t.precision=3,c.setPluginStatus()))}},isDefinedMsgHandler:function(e,t){try{return e?e.messageHandler!==t:0}catch(n){}return 1},queryObject:function(){var e=this,t=e.HTML,n=t?t.obj():0;if(n){if(!e.handlerSet&&e.isDefinedMsgHandler(n)){try{n.messageHandler={onMessage:e.onMessage()}}catch(i){}e.handlerSet=1,e.count2=e.count,e.time2=(new Date).getTime()}e.detected||(e.count>3&&!e.handlerSet?e.detected=-1:e.time2&&e.count-e.count2>=e.maxCount&&(new Date).getTime()-e.time2>=e.intervalLength*e.maxCount&&(e.detected=-.5)),e.detected&&-1!=e.detected}},insertHTMLQuery:function(){var t,n,i=this,r=c,o=e.DOM.altHTML,a=0;return i.isDisabled()?i:(r.OTF<2&&(r.OTF=2),t=e.file.getValid(r).full,n=e.DOM.iframe.insert(0,"Adobe Reader"),e.DOM.iframe.write(n,'<script type="text/javascript"></script>'),i.HTML=e.DOM.insert("object",["data",t].concat(e.browser.isIE?["classid",i.classID]:["type",i.mimeType]),["src",t],o,r,a,n),e.DOM.iframe.addHandler(n,i.onIntervalQuery),r.OTF<3&&i.HTML&&(r.OTF=3),e.DOM.iframe.close(n),i)},onIntervalQuery:function(){var t=c,n=t.doc2;n.count++,3==t.OTF&&(n.queryObject(),n.detected&&n.queryCompleted()),3==t.OTF&&e.ev.setTimeout(n.onIntervalQuery,n.intervalLength)},queryCompleted:function(){var t=c;4!=t.OTF&&(t.OTF=4,t.setPluginStatus(),e.ev.callArray(t.DoneHndlrs))},z:0},getInfo:function(){var e=this;e.setPluginStatus();var t={OTF:e.OTF<3?0:3==e.OTF?1:2,DummyPDFused:!1,version:e.version,precision:e.precision};return(1==e.doc2.detected||e.doc2.detected==-.5)&&(t.DummyPDFused=!0),t}};e.addPlugin("adobereader",c);var l={mimeType:["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"],classID:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",setPluginStatus:function(t,n){var i,r=this;n&&(r.version=e.formatNum(e.getNum(n))),r.installed=r.version?1:t?0:-1,i=-1==r.installed||r.instance.version,i=i||r.axo.version,r.getVersionDone=i?1:0},navObj:{hasRun:0,installed:null,version:null,find:"RealPlayer.*Plug-?in",avoid:"Totem|QuickTime|Helix|VLC|Download",plugins:["RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (32-bit) ","RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (64-bit) ","RealPlayer Plugin"],query:function(){var t,n=this,i=l,r=!n.hasRun&&e.hasMimeType(i.mimeType);return n.hasRun=1,r&&(t=e.pd.findNavPlugin({find:n.find,avoid:n.avoid,mimes:i.mimeType,plugins:n.plugins}),n.installed=t?1:0,t=e.getPluginFileVersion(t),t&&e.compareNums(e.formatNum(t),e.formatNum("15"))>=0&&(n.version=t)),n}},JS:{hasRun:0,version:null,regStr:"RealPlayer.*Version.*Plug-?in",mimetype:"application/vnd.rn-realplayer-javascript",q1:[[11,0,0],[999],[663],[663],[663],[660],[468],[468],[468],[468],[468],[468],[431],[431],[431],[372],[180],[180],[172],[172],[167],[114],[0]],q3:[[6,0],[12,99],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,46],[12,46],[12,46],[11,3006],[11,2806],[11,2806],[11,2804],[11,2804],[11,2799],[11,2749],[11,2700]],compare:function(e,t){var n,i,r,o=e.length,a=t.length;for(n=0;n<Math.max(o,a);n++){if(i=o>n?e[n]:0,r=a>n?t[n]:0,i>r)return 1;if(r>i)return-1}return 0},convertNum:function(t,n,i){var r,o,a,s=this,c=null;if(!t||!(r=e.formatNum(t)))return c;for(r=r.split(e.splitNumRegx),a=0;a<r.length;a++)r[a]=parseInt(r[a],10);if(0!==s.compare(r.slice(0,Math.min(n[0].length,r.length)),n[0]))return c;if(o=r.length>n[0].length?r.slice(n[0].length):[],s.compare(o,n[1])>0||s.compare(o,n[n.length-1])<0)return c;for(a=n.length-1;a>=1&&1!=a&&(0!==s.compare(n[a],o)||0!==s.compare(n[a],n[a-1]))&&!(s.compare(o,n[a])>=0&&s.compare(o,n[a-1])<0);a--);return i[0].join(".")+"."+i[a].join(".")},isEnabled:function(){var t=this;return!t.hasRun&&1==e.OS&&e.hasMimeType(t.mimetype)?1:0},query:function(){var t,n,i,r=this,o=r.isEnabled();if(r.hasRun=1,o&&(n=e.pd.findNavPlugin({find:r.regStr,mimes:r.mimetype}),n&&(t=e.formatNum(e.getNum(n.description))),t)){var a=t.split(e.splitNumRegx);i=1,r.compare(a,[6,0,12,200])<0?i=-1:r.compare(a,[6,0,12,1739])<=0&&r.compare(a,[6,0,12,857])>=0&&(i=-1),0>i&&(n=r.convertNum(t,r.q3,r.q1),r.version=n?n:t)}return r}},instance:{hasRun:0,version:null,HTML:null,isEnabled:function(){var t=this,n=l,i=1;return e.DOM.isEnabled.objectTag()?e.dbug||(t.hasRun||e.DOM.isEnabled.objectTagUsingActiveX()||!e.hasMimeType(n.mimeType)||e.browser.isGecko&&e.compareNums(e.browser.verGecko,e.formatNum("1,8"))<0||e.browser.isOpera&&e.compareNums(e.browser.verOpera,e.formatNum("10"))<0)&&(i=0):i=0,i},query:function(){var t,n=this,i=l,r=n.isEnabled();if(n.hasRun=1,r){n.HTML=e.DOM.insert("object",["type",i.mimeType[0]],["src","","autostart","false","imagestatus","false","controls","stopbutton"],"",i),t=n.HTML.obj();try{n.version=e.getNum(t.GetVersionInfo())}catch(o){}e.DOM.setStyle(t,["display","none"])}return n}},axo:{hasRun:0,installed:null,version:null,progID:["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],query:function(){var t,n,i,r=this;if(!r.hasRun)for(r.hasRun=1,n=0;n<r.progID.length;n++)if(t=e.getAXO(r.progID[n])){r.installed=1,i=0;try{i=t.GetVersionInfo()+""}catch(o){}if(i&&(r.version=i,!e.dbug))break}return r}},getVersion:function(t,n){var i=this,r=null,o=0;o&&!e.dbug||!i.axo.query().installed||(o=1),r&&!e.dbug||!i.axo.query().version||(r=i.axo.version),o&&!e.dbug||!i.navObj.query().installed||(o=1),r&&!e.dbug||!i.navObj.query().version||(r=i.navObj.version),r&&!e.dbug||!i.JS.query().version||(o=1,r=i.JS.version),(!o&&!r||n||e.dbug)&&i.instance.query().version&&(o=1,r=i.instance.version),i.setPluginStatus(o,r)}};e.addPlugin("realplayer",l);var u={storage:{},codebase:{isMin:function(t){return this.$$=u,e.codebase.isMin(this,t)},search:function(){return this.$$=u,e.codebase.search(this)},classID:"",DIGITMAX:[[100,100,100,0]],DIGITMIN:[0,0,0,0],Upper:["99999"],Lower:["0"],convert:[1]},clone:function(t,n){var i,r,o=this,a=0;if(e.isNum(t)||e.isString(t)||null===t||e.isFunc(t)||t===e||t===e.Plugins||t===o)return t;if(t.window||t.firstChild||t.appendChild)return t;
e.isArray(t)?r=[]:t&&(r={});for(i in t)e.hasOwn(t,i)&&(a++,r[i]=o.clone(t[i],i));return r},setPluginStatus:function(t,n,i){var r=this;r.getVersionDone=0,r.version=e.formatNum(n),r.installed=n?1:t?t>0?.7:-.1:i?-3:-1},getVersion:function(t,n,i){var r,o,a,s=this,c=null,l=null,u="";if(e.codebase.isDisabled())return void s.setPluginStatus(0,0);if(!(n&&e.isString(n)&&/[^\s]+/.test(n)))return void s.setPluginStatus(0,0,1);if(n=n.replace(/\s/g,""),u=n.replace(/[\:\-\/]/g,"$"),e.isArray(i)){for(i.length||i.push(0),r=0;r<i.length;r++)if(e.isDefined(i[r])||(i[r]=0),!e.isNum(i[r])||i[r]<0||i[r]>99999999)return void s.setPluginStatus(0,0,1);if(u&&s.storage[u]){for(o=s.storage[u].codebase,a=0,r=0;r<Math.max(i.length,o.DIGITMAX[0].length);r++)if((r<i.length?i[r]:0)>(r<o.DIGITMAX[0].length?o.DIGITMAX[0][r]:0)){a=1;break}if(a&&o.version)for(a=o.version.split(e.splitNumRegx),r=0;r<Math.max(a.length,o.DIGITMAX[0].length);r++)if((r<a.length?a[r]:0)===(r<o.DIGITMAX[0].length?o.DIGITMAX[0][r]:0)){s.storage[u]=null;break}}}else i=[0];u&&!s.storage[u]&&(s.storage[u]={codebase:s.clone(s.codebase)},s.storage[u].codebase.classID=n,e.isArray(i)&&i.length&&(s.storage[u].codebase.DIGITMAX=[[].concat(i)])),t?(c=s.storage[u].codebase.isMin(t),l=s.storage[u].codebase.version):(c=0,l=s.storage[u].codebase.search()),s.setPluginStatus(c,l)}};e.addPlugin("activex",u)}(),function(){var e,t,n,i,r,o,a,s,c,l,u,d,f,p,h,m,g,_,v,y,b,w,k,$,x=[].slice,j=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};e=window.jQuery||window.Zepto||window.$,e.payment={},e.payment.fn={},e.fn.payment=function(){var t,n;return n=arguments[0],t=2<=arguments.length?x.call(arguments,1):[],e.payment.fn[n].apply(this,t)},r=/(\d{1,4})/g,e.payment.cards=i=[{type:"elo",patterns:[401178,401179,431274,438935,451416,457393,457631,457632,504175,506699,5067,509,627780,636297,636368,650,6516,6550],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:r,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:r,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:r,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:r,length:[16],cvcLength:[3],luhn:!0}],t=function(e){var t,n,r,o,a,s,c,l;for(e=(e+"").replace(/\D/g,""),o=0,s=i.length;s>o;o++)for(t=i[o],l=t.patterns,a=0,c=l.length;c>a;a++)if(r=l[a],n=r+"",e.substr(0,n.length)===n)return t},n=function(e){var t,n,r;for(n=0,r=i.length;r>n;n++)if(t=i[n],t.type===e)return t},f=function(e){var t,n,i,r,o,a;for(i=!0,r=0,n=(e+"").split("").reverse(),o=0,a=n.length;a>o;o++)t=n[o],t=parseInt(t,10),(i=!i)&&(t*=2),t>9&&(t-=9),r+=t;return r%10===0},d=function(e){var t;return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")?!0:null!=("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)&&document.selection.createRange().text?!0:!1},k=function(e,t){var n,i,r,o,a,s;try{i=t.prop("selectionStart")}catch(c){o=c,i=null}return a=t.val(),t.val(e),null!==i&&t.is(":focus")?(i===a.length&&(i=e.length),a!==e&&(s=a.slice(i-1,+i+1||9e9),n=e.slice(i-1,+i+1||9e9),r=e[i],/\d/.test(r)&&s===""+r+" "&&n===" "+r&&(i+=1)),t.prop("selectionStart",i),t.prop("selectionEnd",i)):void 0},_=function(e){var t,n,i,r,o,a,s,c;for(null==e&&(e=""),i="\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19",r="0123456789",a="",t=e.split(""),s=0,c=t.length;c>s;s++)n=t[s],o=i.indexOf(n),o>-1&&(n=r[o]),a+=n;return a},g=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=_(e),e=e.replace(/\D/g,""),k(e,n)})},h=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=_(t),t=e.payment.formatCardNumber(t),k(t,n)})},s=function(n){var i,r,o,a,s,c,l;return o=String.fromCharCode(n.which),!/^\d+$/.test(o)||(i=e(n.currentTarget),l=i.val(),r=t(l+o),a=(l.replace(/\D/g,"")+o).length,c=16,r&&(c=r.length[r.length.length-1]),a>=c||null!=i.prop("selectionStart")&&i.prop("selectionStart")!==l.length)?void 0:(s=r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,s.test(l)?(n.preventDefault(),setTimeout(function(){return i.val(l+" "+o)})):s.test(l+o)?(n.preventDefault(),setTimeout(function(){return i.val(l+o+" ")})):void 0)},o=function(t){var n,i;return n=e(t.currentTarget),i=n.val(),8!==t.which||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==i.length?void 0:/\d\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s$/,""))})):/\s\d?$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d$/,""))})):void 0},m=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=_(t),t=e.payment.formatExpiry(t),k(t,n)})},c=function(t){var n,i,r;return i=String.fromCharCode(t.which),/^\d+$/.test(i)?(n=e(t.currentTarget),r=n.val()+i,/^\d$/.test(r)&&"0"!==r&&"1"!==r?(t.preventDefault(),setTimeout(function(){return n.val("0"+r+" / ")})):/^\d\d$/.test(r)?(t.preventDefault(),setTimeout(function(){var e,t;return e=parseInt(r[0],10),t=parseInt(r[1],10),t>2&&0!==e?n.val("0"+e+" / "+t):n.val(""+r+" / ")})):void 0):void 0},l=function(t){var n,i,r;return i=String.fromCharCode(t.which),/^\d+$/.test(i)?(n=e(t.currentTarget),r=n.val(),/^\d\d$/.test(r)?n.val(""+r+" / "):void 0):void 0},u=function(t){var n,i,r;return r=String.fromCharCode(t.which),"/"===r||" "===r?(n=e(t.currentTarget),i=n.val(),/^\d$/.test(i)&&"0"!==i?n.val("0"+i+" / "):void 0):void 0},a=function(t){var n,i;return n=e(t.currentTarget),i=n.val(),8!==t.which||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==i.length?void 0:/\d\s\/\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s\/\s$/,""))})):void 0},p=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=_(e),e=e.replace(/\D/g,"").slice(0,4),k(e,n)})},w=function(e){var t;return e.metaKey||e.ctrlKey?!0:32===e.which?!1:0===e.which?!0:e.which<33?!0:(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))},y=function(n){var i,r,o,a;return i=e(n.currentTarget),o=String.fromCharCode(n.which),/^\d+$/.test(o)&&!d(i)?(a=(i.val()+o).replace(/\D/g,""),r=t(a),r?a.length<=r.length[r.length.length-1]:a.length<=16):void 0},b=function(t){var n,i,r;return n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!d(n)?(r=n.val()+i,r=r.replace(/\D/g,""),r.length>6?!1:void 0):void 0},v=function(t){var n,i,r;return n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!d(n)?(r=n.val()+i,r.length<=4):void 0},$=function(t){var n,r,o,a,s;return n=e(t.currentTarget),s=n.val(),a=e.payment.cardType(s)||"unknown",n.hasClass(a)?void 0:(r=function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)o=i[e],n.push(o.type);return n}(),n.removeClass("unknown"),n.removeClass(r.join(" ")),n.addClass(a),n.toggleClass("identified","unknown"!==a),n.trigger("payment.cardType",a))},e.payment.fn.formatCardCVC=function(){return this.on("keypress",w),this.on("keypress",v),this.on("paste",p),this.on("change",p),this.on("input",p),this},e.payment.fn.formatCardExpiry=function(){return this.on("keypress",w),this.on("keypress",b),this.on("keypress",c),this.on("keypress",u),this.on("keypress",l),this.on("keydown",a),this.on("change",m),this.on("input",m),this},e.payment.fn.formatCardNumber=function(){return this.on("keypress",w),this.on("keypress",y),this.on("keypress",s),this.on("keydown",o),this.on("keyup",$),this.on("paste",h),this.on("change",h),this.on("input",h),this.on("input",$),this},e.payment.fn.restrictNumeric=function(){return this.on("keypress",w),this.on("paste",g),this.on("change",g),this.on("input",g),this},e.payment.fn.cardExpiryVal=function(){return e.payment.cardExpiryVal(e(this).val())},e.payment.cardExpiryVal=function(e){var t,n,i,r;return r=e.split(/[\s\/]+/,2),t=r[0],i=r[1],2===(null!=i?i.length:void 0)&&/^\d+$/.test(i)&&(n=(new Date).getFullYear(),n=n.toString().slice(0,2),i=n+i),t=parseInt(t,10),i=parseInt(i,10),{month:t,year:i}},e.payment.validateCardNumber=function(e){var n,i;return e=(e+"").replace(/\s+|-/g,""),/^\d+$/.test(e)?(n=t(e),n?(i=e.length,j.call(n.length,i)>=0&&(n.luhn===!1||f(e))):!1):!1},e.payment.validateCardExpiry=function(t,n){var i,r,o;return"object"==typeof t&&"month"in t&&(o=t,t=o.month,n=o.year),t&&n?(t=e.trim(t),n=e.trim(n),/^\d+$/.test(t)&&/^\d+$/.test(n)&&t>=1&&12>=t?(2===n.length&&(n=70>n?"20"+n:"19"+n),4!==n.length?!1:(r=new Date(n,t),i=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>i)):!1):!1},e.payment.validateCardCVC=function(t,i){var r,o;return t=e.trim(t),/^\d+$/.test(t)?(r=n(i),null!=r?(o=t.length,j.call(r.cvcLength,o)>=0):t.length>=3&&t.length<=4):!1},e.payment.cardType=function(e){var n;return e?(null!=(n=t(e))?n.type:void 0)||null:null},e.payment.formatCardNumber=function(n){var i,r,o,a;return n=n.replace(/\D/g,""),(i=t(n))?(o=i.length[i.length.length-1],n=n.slice(0,o),i.format.global?null!=(a=n.match(i.format))?a.join(" "):void 0:(r=i.format.exec(n),null!=r?(r.shift(),r=e.grep(r,function(e){return e}),r.join(" ")):void 0)):n},e.payment.formatExpiry=function(e){var t,n,i,r;return(n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(t=n[1]||"",i=n[2]||"",r=n[3]||"",r.length>0?i=" / ":" /"===i?(t=t.substring(0,1),i=""):2===t.length||i.length>0?i=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,i=" / "),t+i+r):""}}.call(this),function(){var e={},t=document.getElementsByTagName("body")[0].className.split(/\s+/);_.each(t,function(t){e[t]=!0}),root.device_idioms=e}(),function(){root.KSR=root.KSR||{},root.KSR.Money={string_to_money:function(e,t){return e?(t=_.defaults({},t,{precision:2}),parseFloat(e.replace(/[^0-9.,-]/g,"").replace(new RegExp("[\\.,](\\d{1,"+_.max([2,t.precision])+"}$)","g"),".$1").replace(new RegExp("[\\.,](?!\\d{1,"+_.max([2,t.precision])+"}$)","g"),""))):0}}}(),function(){root.KsrJSON={get:function(e,t,n,i){return n.hasClass("loading")?!1:(n.trigger("before_ksrjson",[n,i]),$.ajax({url:e,type:t||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){n.addClass("loading")},success:function(e){KsrJSON.parse_response(e,n)},complete:function(){n.removeClass("loading")}}),!1)},enable_form:function(e,t){e.on("submit",function(n){n.preventDefault(),e.trigger("ajaxForm:beforeSerialize"),$.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),dataType:"json",beforeSend:function(){var n=e.find("input.confirmation");return e.is(".submitting")?(growl({error:I18n.t("library.ksr_json.Sorry_still_waiting_for_a_response_Please_try_refreshing_if")}),!1):n.length&&!n.prop("checked")?!1:(t.addClass("loading"),void e.addClass("submitting"))},success:function(n){KsrJSON.parse_response(n,t,e),t.trigger("ksr_json:afterSuccess")},error:function(n){KsrJSON.parse_error(n,t,e),t.trigger("ksr_json:afterError")},complete:function(){t.removeClass("loading"),e.removeClass("submitting"),t.trigger("ksr_json:afterComplete")}})})},parse_response:function(e,t,n){var i,r,o,a={open:function(){$(n).trigger("jGrowl.open_"+e.status)},close:function(){$(n).trigger("jGrowl.close_"+e.status)}};switch(t.trigger("ksr_json:complete",e),$.isArray(e.flash)&&$.isArray(e.flash[0])?growl($.map(e.flash,function(e){return e[e.length-1]}),a):e.flash&&growl(e.flash,a),parseInt(e.status,10)){case 200:case 406:i=$(e.data),e.data&&e.data.length>0&&(e.modal?(o=$.create_modal_dialog("",e.data),o.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(o.find(".modal_dialog_body")[0])):(i.find("a.cancel").length>0?(r=t.contents().detach(),i.find("a.cancel").one("click",function(){return t.contents().remove(),r.appendTo(t),!1})):t.contents().remove(),t.html(i),t.trigger("size_change"),"undefined"!=typeof FB&&FB.XFBML.parse(t[0]))),$('meta[name="csrf-token"]').attr("content",e.auth_token);break;case 204:t.remove();break;case 302:window.location.href=e.data.replace(/.json$/,"");break;case 303:t.load(e.data,function(){$('meta[name="csrf-token"]').attr("content",e.auth_token)});break;case 304:break;case 500:growl({error:I18n.t("library.ksr_json.Sorry_something_went_wrong_Weve_been_notified_and_are_looking")});break;case 422:growl({error:I18n.t("library.ksr_json.Sorry_something_went_wrong_Your_form_may_have_explired")});break;default:$.console.log(e.status)}return e},parse_error:function(e,t,n){KsrJSON.parse_response({flash:{},status:e.status,data:e.body},t,n)}}}(),function(e){function t(t,n){this.$elem=t,this.$close_a=t.find("a.modal_dialog_close");var i=t.children(),r=i.children(),o=r.children(),a=t.add(i).add(r).add(o).add(this.$close_a);this.options=e.extend({close_link:a,scroll_margin:20,ignore_parent:!1,prevent_close:!1},n),this.prevent_close=this.options.prevent_close,this.prevent_close&&this.$close_a.hide(),this.options.ignore_parent||this._bind_parent_modal(),this._remember_original_css(),this._attach()}function n(t,n){var r,o=e([]);return e.each(i,function(e){url_equals(t,e,{include_query:!0})&&(r=this)}),r||(o=e.create_modal_dialog(n.title||"","spinner",n),o.addClass("spinning"),r=o.data("modal_dialog"),r.remote_url=t,r.remote_xhr=e.ajax({url:t,type:"get",dataType:n.dataType,beforeSend:n.beforeSend,success:function(i){var r=e(i);n.remote_modal_dialog_contents_loaded&&n.remote_modal_dialog_contents_loaded.apply(this,[r,n,t]),o.find(".modal_dialog_body").html(r),o.removeClass("spinning"),o.trigger("size_change"),o.trigger("modal_dialog:remote_dialog_loaded")},error:function(){o.trigger("modal_dialog:errored",arguments),o.remove(),delete i[t]}}),n.do_not_cache||(i[t]=r)),r}e.fn.modal_dialog=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("modal_dialog");i||(i=new t(e(this),n),e(this).data("modal_dialog",i)),i.open()})};var i={};e.create_modal_dialog=function(n,i,r){r=r||{},n.length&&(n="<h4>"+n+"</h4>");var o,a=e('<div class="modal_dialog '+(void 0!==r.theme?r.theme:"dark")+(void 0!==r.class_name?" "+r.class_name:"")+'"'+(void 0!==r.id?' id="'+r.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+n+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+i+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');return e("body").append(a),o=new t(a,r),a.data("modal_dialog",o),a},e.create_login_modal=function(t,n){track("Application Login or Signup",{context:"Login",type:"modal",intent:n});var i=e.create_modal_dialog("",t);i.data("modal_dialog").open(),"undefined"!=typeof FB&&FB.XFBML.parse(i.find(".modal_dialog_body")[0])},e.open_remote_modal_dialog=function(t,i){var r=e(".modal_dialog:visible");if(!r.data("modal_dialog")||r.data("modal_dialog").remote_url!==t){i=i||{};var o=n(t,i);return o.open(),o}},e.extend(t.prototype,{_attach:function(){if(!this._attached){var t=this,n=e(this.options.close_link);this._attached=!0,this.overflow_scroll="scroll"===this.$elem.css("overflow"),this.$elem.on("close.modal_dialog",function(){t.close()}),this.$elem.on("size_change.modal_dialog",function(){t._on_size_changed()}),this.$elem.on("prevent_close.modal_dialog",function(){t._set_prevent_close(!0)}),this.$elem.on("allow_close.modal_dialog",function(){t._set_prevent_close(!1)}),e(window).on("resize.modal_dialog",function(){t._on_size_changed()}),n.on("click.modal_dialog",function(e){-1!==n.index(e.target)&&(t.close(e),e.preventDefault())}),this.$elem.keydown(function(e){27===e.keyCode&&(t.close(e),e.preventDefault())})}},_detach:function(){this._attached=!1,e(this.options.close_link).off("click.modal_dialog"),this.$elem.off("size_change.modal_dialog"),e(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=e([]),this.$elem.on("before_close.modal_dialog",function(){var t=e(this).data("modal_dialog").$parent_modal;t.show(),t=e([])})},_on_size_changed:function(e){var t=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&t.height()>this._get_viewport_height()?this._resize_to_position_absolute(e):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(t){var n=e(document).height(),i=document.documentElement&&document.documentElement.scrollTop||e("body")[0].scrollTop+e("html")[0].scrollTop,r=this.$elem.find("div.modal_dialog_inner"),o=r.height(),a=this.options.scroll_margin,s=i+o+2*a,c=s>n?s:n,l=c-i-o-2*a,u="absolute"===this.$elem.css("position");this.$elem.css("position","absolute"),this.$elem.css("top","0"),this.$elem.css("height",n),(!u||t)&&(r.css("margin-top",i+a),r.css("margin-bottom",l))},_remember_original_css:function(){this._elem_original_css={},this._inner_original_css={};var t=this.$elem.find("div.modal_dialog_inner"),n=["position","top"],i=["margin-top","margin-bottom"],r=this;e.each(n,function(e){var t=n[e];r._elem_original_css[t]=r.$elem.css(t)}),e.each(i,function(e){var n=i[e];r._inner_original_css[n]=t.css(n)})},_get_viewport_height:function(){return e.browser.msie?window.document.documentElement.clientHeight:window.innerHeight},_apply_original_css:function(){var e,t,n=this.$elem.find("div.modal_dialog_inner");for(e in this._elem_original_css)this._elem_original_css.hasOwnProperty(e)&&(t=this._elem_original_css[e],this.$elem.css(e,t));for(e in this._inner_original_css)this._inner_original_css.hasOwnProperty(e)&&(t=this._inner_original_css[e],n.css(e,t));this.$elem.css("height","100%")},_set_prevent_close:function(e){this.prevent_close=e,e?this.$close_a.hide():this.$close_a.show()},open:function(){var t=this.$elem.parents("body");t.length&&t.append(this.$elem),this.options.ignore_parent||(this.$parent_modal=e(".modal_dialog:visible"),this.$parent_modal.hide()),this.$elem.show(),this._on_size_changed(!0),this.overflow_scroll&&e("html").css("overflow","hidden"),this.$elem.trigger("modal_dialog:opened",[this]),this._attach()},close:function(t){this.prevent_close||(this.$elem.trigger("before_close.modal_dialog",[t]),t&&t.isDefaultPrevented()||(this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&e("html").css("overflow","scroll"),this.$elem.trigger("closed.modal_dialog",[t])))}}),e.modal_confirm=function(t,n){var i,r,o,a={message:I18n.t("library.modal_dialog.Do_you_really_want_to_do_this"),confirm_text:I18n.t("library.modal_dialog.Confirm"),cancel_text:I18n.t("library.modal_dialog.Cancel"),title:I18n.t("library.modal_dialog.Are_you_sure")};n=e.extend({},a,n),i='<div style="max-width:600px;">'+n.message+'<p class="clearfix"><a class="confirm btn btn--blue left" href="#">'+n.confirm_text+'</a><a class="cancel button-space left ml1 lh40 grey-dark" href="#">'+n.cancel_text+"</a></p></div>",r=e.create_modal_dialog(n.title,i),o=r.data("modal_dialog"),r.find(".cancel").click(function(e){e.preventDefault(),o.close()}),r.find(".confirm").click(function(e){e.preventDefault(),t.call(r),o.close()}),o.open()}}(jQuery),function(e){function t(t,n){this.$elem=t,this.options=n,this.$target=this.options.target||t,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.offset=this.$target.width():this.offset=this.$target.height(),this.index=0,this.playing=!0,this.options.index_control?this.$index_control_children=this.options.index_control.children():this.$index_control_children=e([]),this.options.should_autoadvance_callback||(this.options.should_autoadvance_callback=function(){return!0}),this.number=this.options.number||this.$index_control_children.length,this.update_offset(),this._attach(),n.play_delay&&this.playing_timer()}e.fn.spriteshow=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("spriteshow");i||(i=new t(e(this),n),e(this).data("spriteshow",i))})},e.extend(t.prototype,{_attach:function(){var t=this;this.$index_control_children.click(function(n){n.preventDefault(),t.set_index(e(this).index()),t.pause()}),this.options.controls&&(this.options.controls.children(".left").click(function(e){e.preventDefault(),t.page_left(),t.pause()}),this.options.controls.children(".right").click(function(e){e.preventDefault(),t.page_right(),t.pause()}),this.options.controls.children(".play-pause").click(function(){t.playing?t.pause():t.play()}))},update_offset:function(){var t=e([]);"fade"===this.options.effect&&(t=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(t),this.$target.fadeOut(function(){e(this).remove()}),this.$target=t),this.current_offset=this.index*this.offset,this.options.sprite_orientation&&"horizontal"===this.options.sprite_orientation?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(e){this.index=e,this.$index_control_children.removeClass("selected"),this.$index_control_children.filter(":eq("+e.toString()+")").addClass("selected"),this.$target.trigger("spriteshow:index",[e]),this.update_offset()},page_left:function(){var e=this.index-1;0>e&&(e=this.number-1),this.set_index(e)},page_right:function(){var e=this.index+1;e>=this.number&&(e=0,this.options.play_once&&this.pause()),this.set_index(e)},playing_timer:function(){var e=this;this.play_timeout=setTimeout(function(){if(e.playing&&e.options.should_autoadvance_callback()&&e.page_right(),e.options.pause_when_behind_by){var t=(new Date).getTime();e.last_play_date&&Math.abs(e.last_play_date-t-e.options.play_delay)>e.options.pause_when_behind_by?(e.slow_strikes?e.slow_strikes+=1:e.slow_strikes=0,e.slow_strikes>3&&e.pause()):e.slow_strikes=0,e.last_play_date=t}e.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1,this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})}(jQuery),$.fn.validate=function(){var e=!0;return this.length?this.is(":input")?(this.each(function(){var t,n=$(this),i=!1,r=n.data("validations");r&&r.length&&(_.each(r,function(r){var o=r[0],a=r[1]||{};return"function"!=typeof a.when||a.when.call(n)?o.call(n,n.val())?void 0:(e=!1,i=!0,"string"==typeof a.error&&(t=a.error),!1):void 0}),i?$.each($.fn.validate.defaults.on_invalid,function(e,i){i(n,t)}):$.each($.fn.validate.defaults.on_valid,function(e,t){t(n)}))}),e):this.find(":input").validate():!0},$.fn.validate.defaults={on_valid:[function(e){$(e).trigger("validate:valid")}],on_invalid:[function(e,t){$(e).trigger("validate:invalid",[t])}]},function(e){function t(t,n){var i=e(this);i.data("validations")||i.data("validations",[]),i.data("validations").push([t,n])}function n(e){return function(n){return this.each(function(){t.call(this,e,n)}),this}}e.fn.validates_custom=function(e,n){return this.each(function(){t.call(this,e,n)}),this},e.fn.validates_format=n(function(t){return t.match(new RegExp(e(this).data("format")))}),e.fn.validates_min_length=n(function(t){return t.length>=parseInt(e(this).data("minlength"),10)}),e.fn.validates_max_length=n(function(t){return t.length<=parseInt(e(this).data("maxlength"),10)}),e.fn.validates_presence=n(function(t){return!!e.trim(t)}),e.fn.validates_email=n(function(e){return e.match(/^.+@.+\..{2,4}$/)}),e.fn.validates_luhn_check=n(function(e){var t,n,i,r=String(e).replace(/[^\d]/g,""),o=0;for(n=r.length-1;n>=0;n-=1)t=parseInt(r[n],10),i=n%2+1,o+=t>4&&2===i?t*i%10+1:t*i;return o%10===0}),e.fn.validates_routing_number=n(function(t){var n,i,r,o=String(t).replace(/[^\d]/g,""),a=e(this).closest("form").attr("data-country"),s=(o+"").split(""),c=0,l=[0,3,6];switch(a){case"US":for(i=0,r=l.length;r>i;i+=1)n=l[i],c+=3*parseInt(s[n],10),c+=7*parseInt(s[n+1],10),c+=parseInt(s[n+2],10);return 0!==c&&c%10===0;case"CA":return 8===o.length;case"AU":return 6===o.length;case"NZ":return 6===o.length;default:return!0}}),e.fn.validates_vat_format=n(function(e){var t=String(e).toUpperCase(),n=t.substr(0,2);switch(n){case"NL":return/^\w{2}\d{9}B\d{2}$/.test(t);default:return/^\w{2}[\w\d]{6}/.test(t)}}),e.fn.validates_postal_code=n(function(t){var n=e(this).closest("form").data("country"),i=!1,r={US:[/(^\d{5}$)|(^\d{5}-\d{4}$)/]};return void 0===r[n]?!0:(e.each(r[n],function(e,n){n.test(t)&&(i=!0)}),i)}),e.fn.validates_business_id=n(function(t){var n=String(t).toUpperCase().replace(/\s+/g,""),i=e(this).closest("form").attr("data-country"),r=!1,o={AU:[/^\d{9}$/,/^\d{11}$/],BE:[/^(BE)?[A-Z0-9]{12}$/],CA:[/^\d{9,10}$/],CH:[/^(CHE-?)?[0-9]{3}\.?[0-9]{3}(\.?[0-9]{3})?(TVA|MWST|IVA|VAT)?$/],ES:[/^[ABCDEFGHJNPQRSUVW][0-9]{7}[A-Z0-9]$/],FI:[/^\d{7}\-\d$/],FR:[/^\d{14}$/],GB:[/^\d{7,8}$/,/^(AC|E[NS]|FC|G[ENS]|I[CP]|LP|N[ACFILOPRVZ]|OC|R[0C]|S[ACEFILOPRZ]|ZC)\d{5,6}[A-Z]?$/i],IE:[/^\d{5,6}$/,/^[A-Z]{2}\d{5,6}$/i,/^R\d{3}$/i,/^\d{2,4}(?:SAL|F|R|T|SA)$/],LU:[/^\d{4,8}$/,/^B\d{4,8}$/i,/^F\d{3,8}$/i],NL:[/^\d{8}$/],US:[/^\d{2}-?\d{7}$/]};return""===n?!0:void 0===o[i]?!0:(e.each(o[i],function(e,t){t.test(n)&&(r=!0)}),r)})}(jQuery),function(e){e.fn.confirm_submit=function(t){return t=t||{},e(this).each(function(){var n=e(this);n.on("submit.confirm_submit",function(i){i.preventDefault();var r=t.copy||I18n.t("library.confirm_submit.Really_buddy"),o='<div class="modal_delete_confirmation"><p class="copy">'+r+'</p><div class="buttons"><a href="#" class="yes btn btn--green">'+(t.yes_copy||I18n.t("library.confirm_submit.Yes"))+'</a><a href="#" class="no btn btn--gray">'+(t.no_copy||I18n.t("library.confirm_submit.No_Thanks"))+"</a></div></div>",a=e.create_modal_dialog(t.title||"Are you sure?",o);n.removeClass("submitting-non-ajax"),a.find("a.yes").on("click",function(e){e.preventDefault(),n.off("submit.confirm_submit"),t.on_confirm_submit&&t.on_confirm_submit(),n[0].submit()}),a.find("a.no").on("click",function(t){t.preventDefault(),e(this).trigger("close")}),a.data("modal_dialog").open()})})}}(jQuery),function(){$.fn.composed=function(e,t){var n=$(this);return"undefined"==typeof n.data("topics")&&n.data("topics",{}),(n.data("topics")[e]||[]).reduce(function(e,t){return t.call($,e)},t)},$.fn.composable=function(e,t){var n=$(this);return"undefined"==typeof n.data("topics")&&n.data("topics",{}),n.data("topics")[e]||(n.data("topics")[e]=[]),n.data("topics")[e].push(t),[e,t]}}(),function(e){var t,n=function(){},i=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];if(root.console)e.console=root.console;else for(e.console={},t=0;t<i.length;t+=1)e.console[i[t]]=n}(jQuery),function(){$.fn.in_place_editor=function(){return $(this).each(function(){function e(){a.css("fontSize",n.css("fontSize")),n.hide(),i.removeClass("inactive"),a.focus()}function t(){i.addClass("inactive"),n.show()}var n=$(this),i=n.next("form.in_place_editor"),r=i.find(".js-in-place-editor-cancel"),o=n.siblings(".trigger_editor")||n,a=i.find("input.text"),s=!1;o.on("click",function(){e()}),r.on("click",function(){a.val(n.text()),t()}),i.on("submit",function(e){e.preventDefault(),s||(i.addClass("submitting"),s=!0,$.ajax({url:i.attr("action").replace(/(\.\w+)?$/,".js"),data:i.serialize(),type:"POST",complete:function(){i.removeClass("submitting"),s=!1},success:function(){var e=a.val();n.html(e),t(),s=!1,i.siblings(".clipster").data("text",e)},error:function(e){var t=JSON.parse(e.responseText),n="<p>"+I18n.t("library.in_place_editor.Oops_there_was_a_problem_with_your_submission");i.removeClass("submitting"),s=!1,t.errors?(n+=":<br/>"+$.map(t.errors,function(e,t){return t+": "+e}),n+="</p>"):n+=". "+I18n.t("library.in_place_editor.Please_refresh_the_page_before_trying_again")+"</p>",growl({error:$(n).html()})}}))})})}}(),function(){$("span.in_place_editor").in_place_editor()}(),function(){var e=root.eventNormalizer={};e.pageX=function(e){var t;return t=e.originalEvent&&e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX}}(),function(e){function t(e,t){return eventNormalizer.pageX(e)-t.offset().left}e.fn.draggable_bar=function(n,i){return i||(i=n,n=null),this.each(function(){var r=e(this),o=null,a=0;r.on("mousedown touchstart",n,function(n){var i=e(n.target);o=n.target,a=t(n,i)}),r.on("mousedown touchstart mousemove touchmove",n,function(e){var n;o&&(n=t(e,r)/r.width(),n>0&&1>n&&i(n,o,a))}),e(document).on("mouseup touchend",function(){o=null})})}}(jQuery),function(e){function t(t){this.$c=e(t),this.video_data=this.$c.data("video")||{},this.autostarting=!1;var n=this.$c.find("video");n.get(0)&&n.get(0).canPlayType&&(n.get(0).canPlayType("video/mp4")||n.hasClass("has_webm"))&&(this.$video=n,this.video=n.get(0),e.browser.chrome&&this.$video.attr("controls","controls").removeAttr("controls"),this.$c.addClass("vertically_center")),this.initialize(),(window.location.search.match("play="+(this.$c.attr("id")||this.video_data.id))||this.$c.hasClass("autoplay"))&&(this.autostarting=!0,this.play()),this.$c.hasClass("muted")&&this.mute(),this.add_size_class(),this.bind_events()}e.fn.ksr_video=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("ksr_video",n))})},e.extend(t.prototype,{overlay:function(){var t=this;this.$c.children(":not(video)").hide(),this.$overlay=e('<div class="overlay"><span class="button-playvideo"></span></div>'),this.$overlay.on("click",function(e){t.initialize_flash(),t.$overlay.remove(),e.preventDefault()}),this.$c.append(this.$overlay)},bind_events:function(){var e=this;this.$c.on("ksr_video:play",function(){e.play()}),this.$c.on("ksr_video:pause",function(){e.pause()}),this.$c.on("ksr_video:mute",function(){e.mute()}),this.$c.on("ksr_video:unmute",function(){e.unmute()}),this.$c.on("ksr_video:destroy",function(){e.destroy()}),this.$c.on("ksr_video:seek",function(t,n,i){e.seek(n,i)})},add_size_class:function(){this.$c.removeClass("small medium large"),this.$c.width()>600?this.$c.addClass("large"):this.$c.width()>400?this.$c.addClass("large"):this.$c.addClass("small")},bind_video_element:function(){var e=this,t=this.$video,n=!0;this.$video.on("loadedmetadata",function(){e.$c.trigger("ksr_video:loaded")}),t.bind("ended",function(){e.$c.trigger("ksr_video:ended")}),t.on("play",function(){e.$c.trigger("ksr_video:playing",[n]),e.$c.addClass("has_played"),e.autostarting?e.autostarting=!1:e.focus_playpause_button(),n=!1}),t.on("pause",function(){e.$c.trigger("ksr_video:paused"),e.focus_playpause_button()}),t.on("progress",function(){var t,n,i,r=e.video.buffered,o=[];if(r.length)for(t=0;t<r.length;t+=1)o.push(r.end(t));n=_.max(o),i=n/e.video.duration*100,e.$c.trigger("ksr_video:buffer_change",[n,i])}),t.on("timeupdate",function(){e.$c.trigger("ksr_video:time_update",[e.video.currentTime])})},bind_controls:function(){function t(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t+":"+(10>n?"0":"")+n}function n(){i()?(m.removeClass("visible"),m.trigger("ksr_video:controls_hidden")):a()}function i(){return!m.is(":hover")}function r(){m.addClass("visible"),m.trigger("ksr_video:controls_shown")}function o(){clearTimeout(I)}function a(){o(),I=setTimeout(n,2e3)}function s(){var e=h.video.duration;e&&(h.$c.find(".total_time").text(t(e)).attr("datetime","PT"+Math.floor(e)+"S"),b.attr("aria-valuenow",h.video.currentTime).attr("aria-valuemin","0").attr("aria-valuemax",e))}function c(e){return e.which===KEY.LEFT?-1:e.which===KEY.RIGHT?1:null}function l(e,t,n){return Math.min(n,Math.max(t,e))}function u(e,t){var n=t.delta,i=t.direction,o=t.max,s=h.video[e];i&&(s=l(s+n*i,0,o),h.video[e]=s,r(),a())}function d(){E=h.video.volume;var e=h.video.volume;KSR.store.setItem("ksr_video_volume",e),h.video.muted?(e=0,j.addClass("muted").attr("aria-label",I18n.t("library.ksr_video.Unmute"))):j.removeClass("muted").attr("aria-label",I18n.t("library.ksr_video.Mute"));var t=100*e+"%";k.width(t),$.css("left",t),$.attr("aria-valuenow",e)}function f(t){var n=T.find(".js-track"),i=t?n.filter('[data-language="'+t+'"]'):e();0===i.length&&(i=n.filter(".js-captions-off"),t=void 0),n.removeClass("selected"),i.addClass("selected"),i.is(".js-captions-off")?m.find(".ksr-icon__closed-caption").removeClass("is-on"):m.find(".ksr-icon__closed-caption").addClass("is-on"),
h.$c.data("language",t),_.each(h.video.textTracks,function(e){e.mode=e.language===t?"showing":"hidden"})}function p(){h.$c.trigger("ksr_video:volume_adjusted")}var h=this,m=this.$c.find(".player_controls"),g=m.find(".progress_container .progress_bg"),v=g.find(".buffer"),y=g.find(".progress"),b=g.find(".progress_handle"),w=m.find(".volume_container .progress_bg"),k=w.find(".progress"),$=w.find(".progress_handle"),x=m.find(".current_time"),j=m.find(".volume"),C=m.find(".playpause"),S=m.find(".video_track_list"),T=m.find(".js-caption-dropdown"),D={x:0,y:0},I=!1;this.$c.on("mousemove touchstart touchmove",function(e){var t={x:e.pageX,y:e.pageY};h.playing()&&("touchstart"===e.type||Math.abs(t.x-D.x)+Math.abs(t.y-D.y)>20)&&(r(),a(),D=t)}),s(),this.$video.on("click",function(){h.playpause()}),this.$c.find(".play_button_big, img.poster").on("click",function(e){h.play(),e.preventDefault()}),this.$c.on("focus click",":tabbable",function(){h.playing()&&(r(),a())}),this.$c.on("keydown",'[role="button"]',function(t){(t.which===KEY.ENTER||t.which===KEY.SPACE)&&(e(this).click(),t.preventDefault())}),this.$c.on("keydown",'.progress_container [role="slider"]',function(e){u("currentTime",{delta:.05*h.video.duration,direction:c(e),max:h.video.duration})}),this.$c.on("keydown",'.volume_container [role="slider"]',function(e){u("volume",{delta:.05,direction:c(e),max:1})});var E=null;this.$c.on("ksr_video:loaded",function(){s(),$.attr("aria-valuemin","0").attr("aria-valuemax","1"),d()}),this.$video.on("volumechange",function(){d()}).on("play",function(){C.removeClass("play").addClass("pause").attr("aria-label",I18n.t("library.ksr_video.Pause")),a()}).on("pause",function(){C.removeClass("pause").addClass("play").attr("aria-label",I18n.t("library.ksr_video.Play")),r(),o()}),C.on("click",function(e){h.playpause(),e.preventDefault()}),m.on("mouseenter focus",".video_dropdown",function(t){var n=e(t.currentTarget);n.addClass("open"),m.on("mouseleave.leave_dropdown blur.leave_dropdown",".video_dropdown",function(){n.removeClass("open"),m.off(".leave_dropdown")})}),S.on("click","li",function(){var t=e(this),n=t.data("language");T.removeClass("open"),n?KSR.store.setItem("last_track_language",n):KSR.store.removeItem("last_track_language"),f(n),h.$c.trigger("ksr_video:change_track",n)}),h.video.textTracks&&0!==h.video.textTracks.length?f(KSR.store.getItem("last_track_language")):this.$c.find(".js-remove-unless-text-tracks").remove();var A=null;e(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;!e&&A&&h.$c.css("height",A)}),m.find(".fullscreen").on("click",function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled){var t=h.$c.get(0);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(A=h.$c.css("height"),h.$c.css("height","auto"),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen())}else h.$c.toggleClass("fullscreen");e.preventDefault()}),g.draggable_bar(function(e){var t=h.video.duration*e;h.video.currentTime=t}),w.draggable_bar(function(e){h.video.muted&&h.unmute(),h.video.volume=e}),w.find(".progress_bar_bg").on("mouseup",p),k.on("mouseup",p),$.on("mouseup",p),e("body").is(".touchable")?k.hide():j.on("click",function(){h.mute_toggle()}),this.$c.on("ksr_video:buffer_change",function(e,t,n){v.width(n+"%")}),this.$c.on("ksr_video:time_update",function(e,n){var i=n/h.video.duration*100;y.width(i+"%"),b.css("left",i+"%"),x.text(t(n)).attr("datetime","PT"+Math.floor(n)+"S"),b.attr("aria-valuenow",n)})},play:function(){this.video?(this.$video.show(),this.video.play()):this.jwplayer&&this.jwplayer.play()},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer&&this.jwplayer.pause())},playpause:function(){return this.playing()?this.pause():this.play(),this.playing()},focus_playpause_button:function(){var t=this.$c.find(".playpause"),n=e(window),i=t[0].getBoundingClientRect();i.top>=0&&i.left>=0&&i.bottom<=n.height()&&i.right<=n.width()&&t.focus()},seek:function(e,t){var n=this;if("undefined"==typeof t&&(t=!1),this.video){if(this.video.readyState<1)return this.video.load(),void this.$c.one("ksr_video:loaded",function(){n.seek(e,t)});this.video.currentTime=e,t?this.pause():this.play()}else this.jwplayer&&(this.jwplayer.seek(e),this.jwplayer.pause(t))},mute_toggle:function(){return this.video&&(this.video.muted?this.unmute():this.mute()),this.video.muted},mute:function(){this.$c.trigger("ksr_video:muted"),this.jwplayer?this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.$c.trigger("ksr_video:unmuted"),this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty(),this.$c.removeData("ksr_video")},current_position:function(){return this.video?this.video.currentTime:this.jwplayer?this.jwplayer.getPosition():void 0},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){return this.video?!this.video.paused:this.jwplayer?"playing"===this.jwplayer.getState().toLowerCase():void 0},initialize_flash:function(){var e="v"+parseInt(1e8*Math.random(),10),t=this.$c.data("external_flashvars")||{},n=this;this.$c.append('<div id="'+e+'"></div>'),swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",e,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",_.extend(t,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video-url")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+e,"class":"ksr_player",name:"ksr_player_"+e},function(e){var t=!0;root.player_reference=e.ref,e.success?(n.$c.find("video").remove(),n.jwplayer=jwplayer(e.ref),n.jwplayer.onReady(function(){n.$c.trigger("ksr_video:loaded")}),n.jwplayer.onPlay(function(){n.$c.trigger("ksr_video:playing",[t]),t=!1}),n.jwplayer.onPause(function(){n.$c.trigger("ksr_video:paused")}),n.jwplayer.onComplete(function(){n.$c.trigger("ksr_video:ended")}),n.jwplayer.onBufferChange(function(e){var t=e.duration*(e.bufferPercent/100);isNaN(t)||n.$c.trigger("ksr_video:buffer_change",[t,e.bufferPercent])})):(n.$video=n.$c.find("video"),n.video=n.$video.get(0),n.$overlay.remove(),n.$c.children().show(),n.$c.find(".play_button_big").removeAttr("style"),n.video&&(n.initialize(),n.play()))})},initialize:function(){var e=this;this.video?(e.bind_controls(),e.bind_video_element(),KSR.store.getItem("ksr_video_volume")&&(this.video.volume=KSR.store.getItem("ksr_video_volume")),this.$video.css({height:"100%"}).removeAttr("style")):this.overlay()}})}(jQuery),function(e){function t(t){this.$container=e(t),this.embed()}e.fn.sound_player=function(){return e(this).each(function(){var n=e(this).data("ksr_video");n||(n=new t(e(this)),e(this).data("sound_player",n))})},e.extend(t.prototype,{embed:function(t){var n="v"+parseInt(1e8*Math.random(),10),i=this;this.$container.find("span").attr("id",n),swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",n,this.$container.width(),this.$container.height(),"9.0.115","https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:t,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+n,"class":"ksr_player",name:"sound_player_"+n},function(n){if(n.success)i.jwplayer=jwplayer(n.ref);else{var r=e("<audio />",{src:i.$container.attr("data-file"),controls:!0,autoplay:t});i.$container.html(r),i.$audio=r}}),this.initialized=!0}})}(jQuery),function(e){function t(t,n){this.$elem=t,this.xhr=!1,this.paused=n.paused||!1,this.options=e.extend({threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:e(window),default_page:1,page_by:function(e){return"undefined"!=typeof e?e+1:this.default_page},page_param:"page",url:!1},n),this.current_page=this.options.page_by(),this.bind_events()}e.fn.mobius=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("mobius");i||(i=new t(e(this),n),e(this).data("mobius",i))})},e.extend(t.prototype,{bind_events:function(){var t=this;"string"==typeof this.options.trigger_next?(this.options.$context.on(this.options.trigger_next,function(){t.check_for_more()}),t.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(n){n.preventDefault(),e(this).addClass("loading_next"),t.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(e,t){this.options.extra_params[e]=t},set_extra_params:function(e){this.options.extra_params=e},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){if(!this.paused){var e=this.options.$context.scrollTop()+this.options.$context.height(),t=this.$elem.offset().top,n=this.$elem.get(0).scrollHeight,i=e-t,r=n-this.options.threshold,o=i>r;o&&this.load_next()}},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(t,n,i){var r=parseInt(t,10),o=this;isNaN(r)||(n&&n.length||(n=!1),this.xhr||(this.$elem.trigger("mobius:loading_page"),this.xhr=e.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(r),success:function(t){if(o.xhr=!1,"html"===o.options.dataType){var a=e("<div>"+t+"</div>"),s=a.find(".mobius").children();if(!s.length)return void o.$elem.trigger("mobius:error",[I18n.t("library.mobius.No_mobius_found_in_page",{page:r})]);n?n.after(s):o.options.prepend_next?o.$elem.prepend(s):o.$elem.append(s),o.options.trigger_next.jquery&&o.options.trigger_next.removeClass("loading_next"),o.$elem.trigger("mobius:loaded_page",[r,s])}else o.$elem.trigger("mobius:loaded_page",[r,t]);(i||!n)&&(o.current_page=r)},error:function(){o.xhr=!1}})))},build_paged_url:function(t){var n=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),i="undefined"==typeof this.options.extra_params?"":"string"==typeof this.options.extra_params?this.options.extra_params:e.param(this.options.extra_params),r=/(.*)#$/;r.test(n)&&(n=r.exec(n)[1]),i&&(i="&"+i),this.options.url&&(n=this.options.url);var o=-1!==n.indexOf("?")?"&":"?";return n.toString()+o+this.options.page_param+"="+t+i}})}(jQuery),function(e){function t(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:t.parent(),attach_to:"top",lock_to_bottom:!0},n),this.options.parent&&this.options.parent.length||e.console.log("WARNING: sticky bar has no parent"),this.paused=!1,this.last_scroll_top=0,this.last_up=!1,this.fixed=!1,this.original_top=t.offset().top,this.original_bottom=this.original_top+t.height(),this.update_window_larger_then_elem(),this.attach_to_top="top"===this.options.attach_to,this.attach_to_bottom=!this.attach_to_top,this.bind_events(),this.reposition()}function n(t,n){this.$elem=t,this.options=e.extend({},{adjust_on:"shifted scroll resize load hashchange"},n),this.original_top=t.offset().top,this.bind_events(),this.reposition()}e.fn.sticky_bar=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("stickybar");i?e(this).trigger("shifted"):(i=new t(e(this),n),e(this).data("stickybar",i))})},e.fn.simple_sticky_bar=function(t){return t=t||{},e(this).each(function(){var i=e(this).data("simple_stickybar");i?e(this).trigger("shifted"):(i=new n(e(this),t),e(this).data("simple_stickybar",i))})},e.extend(n.prototype,{bind_events:function(){var t=this;e(window).on(this.options.adjust_on,function(e){t.reposition(e)})},reposition:function(){var t=e(window).scrollTop();t<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}}),e.extend(t.prototype,{bind_events:function(){var t=this;e(window).resize(function(e){e.target===window&&t.update_window_larger_then_elem()}),e(document).on("shifted",function(){t.fixed=!1,t.$elem.css("position","static"),t.$elem.css("top","auto"),t.$elem.css("bottom","auto"),t.original_top=t.$elem.offset().top,t.original_bottom=t.original_top+t.$elem.height(),t.reposition()}),e(window).on(this.options.adjust_on,function(e){t.paused||t.reposition(e)}),this.$elem.on("sticky_bar:fix_to_bottom",function(){t.fixed=!0,t.$elem.css("position","fixed"),t.$elem.css("top",-(t.$elem.height()-e(window).height()))}),this.$elem.on("sticky_bar:pause",function(){t.paused=!0}),this.$elem.on("sticky_bar:unpause",function(){t.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=e(window).height()>this.$elem.height()},lockToBottom:function(e){this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",e-this.$elem.outerHeight()-this.$elem.offsetParent().offset().top)},reposition:function(t){var n=this,i=e(window).scrollTop(),r=i+e(window).height(),o=n.$elem.offset().top,a=o+n.$elem.height(),s=n.options.parent,c=s.offset().top+s.outerHeight(),l=t&&"scroll"===t.type,u=i>n.last_scroll_top?!1:!0,d=u!==n.last_up?!0:!1;e("body").width()<640||n.attach_to_top&&i<n.original_top||n.attach_to_bottom&&r>n.original_bottom?(n.fixed=!1,n.$elem.css("position","static"),n.$elem.css("top","auto"),n.$elem.css("bottom","auto")):n.options.lock_to_bottom&&!n.window_larger_then_elem&&r>c?n.lockToBottom(c):n.options.lock_to_bottom&&n.window_larger_then_elem&&i+n.$elem.height()>c?n.lockToBottom(c):d&&l?n.window_larger_then_elem||(n.fixed=!1,n.$elem.css("position","absolute"),n.$elem.css("top",o),n.$elem.css("bottom","auto")):n.fixed||(n.attach_to_top?n.window_larger_then_elem||(!l||u)&&o>i?(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("top",0)):l&&u||!(r>a)||(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("top",-(n.$elem.height()-e(window).height()))):(n.window_larger_then_elem||(!l||!u)&&r>a)&&(n.fixed=!0,n.$elem.css("position","fixed"),n.$elem.css("bottom",0))),n.was_fixed!==n.fixed&&n.$elem.trigger("sticky_bar:fixed_changed",[n.fixed]),n.last_scroll_top=i,n.last_up=u}})}(jQuery),function(e){function t(e){root.history&&root.history.replaceState?history.replaceState(null,null,e):window.location.replace(e)}e.fn.persistent_paging=function(n){return n=n||{},e(this).each(function(){function n(){var t=[];e.each(r,function(){t.push([this[0],this[2].offset().top,this[2]])}),r=t}var i=e(this),r=[[1,0,i.find(".page")]],o=[],a=!1,s=i.data("mobius"),c=/^#p(\d*)/,l=c.exec(window.location.hash);l&&1!==parseInt(l[1],10)&&(i.one("mobius:loaded_page",function(t,n,i){e.scrollTo(i.offset().top+70)}),s.load_page(parseInt(l[1],10))),i.on("mobius:loaded_page",function(t,o,a){function c(){return this[0]===u?(l=!0,!1):void 0}var l,u,d=[];for(r.push([o,!1,a]),n(),u=1;u<=r[r.length-1][0];u+=1)l=!1,e.each(r,c),l||d.push(u);d.length?e.each(d,function(){var t=r[0],n=parseInt(this,10),o=e([]),a=[],c=e([]),l=e([]);e.each(r,function(){this[0]>t[0]&&this[0]<n&&(t=this)}),o=t[2].next(".missing"),o.length?(a=o.data("missing_pages"),-1===e.inArray(n,a)&&(a.push(n),o.data("missing_pages",a))):(o=i.siblings(".missing").clone(),c=o.find(".loading"),l=o.find(".load_more"),o.data("missing_pages",[n]),o.find("a").click(function(e){var t=o.data("missing_pages"),n=t.pop();e.preventDefault(),t.length&&o.data("missing_pages",t),l.addClass("loading"),s.load_page(n,o),i.one("mobius:loaded_page",function(){l.removeClass("loading")})}),t[2].after(o),c.hide(),o.show())}):i.find("div.missing").remove()}),e(document).scroll(function(){var n=e(window).scrollTop();e.each(r,function(){var e=this[1];n>e&&(o=this)}),o[0]!==a&&(t("#p"+o[0]),e(document).trigger("infinite_scroll:scrolled_to",[o[0]]),a=o[0])})})}}(jQuery),function(e){function t(e,t){this.$elem=e,this.options=t,this.total_elements=e.find(t.items).length,e.serialScroll(t),this.bind_events()}e.fn.infinite_carousel=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("infinite_carousel");i||(i=new t(e(this),n),e(this).data("infinite_carousel",i))})},e.extend(t.prototype,{bind_events:function(){var e=this;this.$elem.on("notify.serialScroll",function(t,n){e.total_elements=e.$elem.find(e.options.items).length+1,n+1>=e.total_elements-e.options.step&&e.$elem.trigger("infinite_carousel:last_page")})}})}(jQuery),function(){$.fn.tabs=function(){return $(this).each(function(){var e=$(this);e.on("activate",function(t,n){var i=$(n),r=$("#"+i.data("pane"));e.data("pane")&&e.data("pane").trigger("deactivated"),e.data("pane",r.trigger("activated"))}),e.children().on("click",function(){$(this).parent().trigger("activate",$(this))})})},$.fn.panes=function(){var e=$(this);return e.each(function(){e.children().on("activated",function(){$(this).show()}).on("deactivated",function(){$(this).hide()})})}}(),function(e){function t(t,n){this.$elem=t,this.val=0,this.options=e.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},n),this.val=this.$elem.attr("rel"),this.keyframes=this.options.keyframes,this.framesets=this.options.framesets;var i;for(this.framesets||this.init_framesets(),i=0;i<this.options.max_digits;i+=1)this.init_digit(i);this.write(this.val,!0)}e.fn.ticker=function(n){return n=n||{},e(this).each(function(){var i=e(this).data("ticker");i||(i=new t(e(this),n),e(this).data("ticker",i))})},e.extend(t.prototype,{read:function(){return this.val},write:function(t,n){this.val=String(t||""),this.$elem.attr("rel",this.val);var i,r,o,a,s,c,l,u,d=(this.options.format_numbers?formatters.format_number(this.val,{precision:0}):this.val).split(""),f=this.$elem.find(".ticker_digit");for(u=0;u<d.length-f.length;u+=1)this.init_digit(u+f.length);for(f=this.$elem.find(".ticker_digit"),u=0;u<f.length;u+=1){if(i=e(f[u]),r=i.html(),o=d[u]?String(d[u]):"",a=e.inArray(o,this.keyframes),s=this.framesets[a][0],c=e.inArray(i.html(),this.keyframes),l=[],i.html(o).data("tween_id",i.data("tween_id")+1),!o||o===r||n)l=l.concat(s);else for(;c!==a;)l=l.concat(this.framesets[c]),c+=1,c=c>=this.keyframes.length?1:c;this.tween(i.data("tween_id"),i,l)}},init_framesets:function(){var e,t;for(this.framesets=[],e=0;e<this.keyframes.length;e+=1)for(this.framesets.push([]),t=0;t<this.options.frame_count;t+=1)this.framesets[e].push(e*this.options.frame_count*this.options.frame_step+t*this.options.frame_step)},init_digit:function(t){var n=e(this.$elem.find(".ticker_digit").get(t));n.length||(n=e('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem)),n.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(e){e.remove(),this.pad_digits()},tween:function(e,t,n){if(n.length){if(t.data("tween_id")!==e)return!1;var i=this;setTimeout(function(){var r=n.shift();t.css({"background-position":"0px "+-1*r+"px"}),i.tween(e,t,n)},this.options.frame_duration)}}})}(jQuery),function(e){function t(e){var t=e.css("backgroundImage"),n=/[("]([^()"]+)[")]/;try{return n.exec(t)[1]}catch(i){return!1}}e.fn.preload_background_image=function(){return this.each(function(){var n=t(e(this));n&&((new Image).src=n)})}}(jQuery),function(e){e.fn.serialize_without_blank=function(){var t,n=this,i=[];return n.find(":input").each(function(){""!==e.trim(this.value)||this.disabled||(i.push(this),this.disabled=!0)}),t=n.serialize(),_.each(i,function(e){e.disabled=!1}),t}}(jQuery),function(e){e.fn.term_form=function(){return this.each(function(){var t=e(this);t.find(".text").on("input keydown paste cut",function(){e.trim(e(this).val())?e("form.term .ss-delete").show():e("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){t.submit()}),t.find(".ss-delete").on("click",function(){e("form.term .text").val("").trigger("input").focus(),t.submit()}),t.find(".text").on("focus",function(){e(this).addClass("focused")}),t.find(".text").on("blur",function(){var t=e(this);t.val()||t.removeClass("focused")})}),this}}(jQuery),$(function(){$.fn.sync_form=function(e){var t=$(this),n=function(){};return e=e||{},t.data("updating")?void t.data("dirty",(t.data("dirty")||[]).concat(e)):(t.data("updating",!0),void $.ajax({type:e.type||t.attr("method"),url:e.url||t.attr("action"),data:e.data||t.serialize(),dataType:"json",global:!1,context:t,beforeSend:e.beforeSend,success:function(i){(e.success||n).apply(this,arguments),t.trigger("form_synced",[i]),t.data("dirty")&&t.data("dirty").length&&setTimeout(function(){for(var e={};$.isEmptyObject(e)&&t.data("dirty").length;)e=t.data("dirty").shift();t.sync_form(e)},100),i.url&&t.attr("action",i.url)},error:e.error,complete:function(){(e.complete||n).apply(this,arguments),t.data("updating",!1)}}))}}),function(){function e(e,t){return e.split(".").reduce(function(e,t){var n=typeof e,i="function"===n||"object"===n&&!!e;return i?e[t]:e},t)}function t(e,t){var n,i=parseInt(t.count,10);return"number"!=typeof i||isNaN(i)||(n=Object.keys(s).filter(function(e){return-1!==s[e].indexOf(i)?e:void 0}),0===n.length&&(n="other")),e[n]}function n(e,t){return e.replace(/\{\{\{\s*(\w+)\s*\}\}\}/g,function(e,n){return void 0==t[n]?e:t[n]}).replace(/\{\{\s*(\w+)\s*\}\}/g,function(e,n){return void 0==t[n]?e:i(t[n])})}function i(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function r(e){var t=e.split("."),n=t[t.length-1];return n=n.replace(/_/g," "),n=n.replace(/(\w+)/g,function(e){return e.charAt(0).toUpperCase()+e.slice(1)})}function o(i,o){if(o=o||{},"undefined"!=typeof a.translations){var s=e(i,a.translations[a.locale])||o["default"];return"undefined"==typeof s&&(s=e(i,a.translations[a.default_locale])),"object"==typeof s&&(s=t(s,o)),"string"==typeof s&&(s=n(s,o)),"undefined"==typeof s&&(s=r(i),a.debug&&window.console.log("I18n key is missing: ",i)),s}}var a=window.I18n=window.I18n||{},s={zero:[0],one:[1],two:[2],few:[3],many:[],other:[]},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};try{a.debug=1===parseInt(localStorage.getItem("i18n_debug"),10)}catch(l){}a.t=o}(),function(){function e(e){return e.html}function t(e){return e.data("href")||e.prop("href")}function n(n,i,r,o,a){var s=n.mobius($.extend({url:t(i),dataType:"json",trigger_next:i,load_next_after:r},a)).data("mobius");n.on("mobius:loading_page",function(){var e=n.data("exclude-ids"),t=s.options.perPage||6;e&&s.add_param("exclude_ids[]",e.split(",")),t&&s.add_param("per_page",t),i.prop("disabled",!0),i.data("previousHTML",i.html()),i.html(I18n.t("library.load_more.Loading"))}),n.on("mobius:loaded_page",function(t,n,a){var c=s.options.responseToHTML||e,l=c(a),u=$(l).hide();r.append(u),u.slideDown(),i.html(i.data("previousHTML")),i.prop("disabled",!1),"has_more"in a&&!a.has_more&&o.remove()})}$.fn.loadMore=function(e){$(this).each(function(){var t=$(this),i=t.find(".js-load-more--appendable"),r=t.find(".js-load-more--removable"),o=t.find(".js-load-more--button");r.length||(r=o),n(t,o,i,r,e)})}}(),function(e){var t={};e.publish=function(){var n=Array.prototype.slice.call(arguments),i=n.shift();t[i]&&e.each(t[i],function(){this.apply(e,n)})},e.subscribe=function(e,n){return t[e]||(t[e]=[]),t[e].push(n),[e,n]},e.unsubscribe=function(){var n=arguments[0];t[n]&&e.each(t[n],function(e){this===arguments[1]&&t[n].splice(e,1)})}}(jQuery),function(e){e.support.textTracks=function(){return!(!window.VTTCue&&!window.TextTrackCue)}}(jQuery),function(){function e(e,t){return _.template(e,t)}_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},root.render_raw=e}(),function(e){e.fn.render=function(t){return e(this).each(function(){e(this).data("renderer")(t)}),this},e.fn.define_renderer=function(t){return e(this).data("renderer",t),this}}(jQuery),$.fn.option_values=function(e){var t=$(this).first().find("option").map(function(t,n){var i=n.value;return"function"!=typeof e||e(i)?i:!1});return _(t).without(!1)},$.fn.select_machine=function(e,t){var n={default_control:function(e){e.hide()}};return $(this).each(function(){select_machine(this,e,$.extend(n,t))}),this};var Kicksend={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],run:function(e){e.domains=e.domains||Kicksend.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||Kicksend.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||Kicksend.sift3Distance,e.ignoreTLDs=e.ignoreTLDs||!1;var t=Kicksend.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction,e.ignoreTLDs);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,i,r){e=e.toLowerCase();var o,a,s,c,l=this.splitEmail(e),u=this.findClosestDomain(l.domain,t,i);for(s=0;s<this.whitelistRegexes.length;s+=1)if(c=this.whitelistRegexes[s],c.exec(l.domain))return!1;if(u){if(u!==l.domain)return{address:l.address,domain:u,full:l.address+"@"+u}}else if(!r&&(o=this.findClosestDomain(l.topLevelDomain,n),l.domain&&o&&o!==l.topLevelDomain))return a=l.domain,u=a.substring(0,a.lastIndexOf(l.topLevelDomain))+o,{address:l.address,domain:u,full:l.address+"@"+u};return!1},findClosestDomain:function(e,t,n){var i,r,o=99,a=null;if(!e||!t)return!1;for(n||(n=this.sift3Distance),r=0;r<t.length;r+=1){if(e===t[r])return e;i=n(e,t[r]),o>i&&(o=i,a=t[r])}return o<=this.threshold&&null!==a?a:!1},sift3Distance:function(e,t){var n,i=0,r=0,o=0,a=0,s=5;if(null===e||0===e.length)return null===t||0===t.length?0:t.length;if(null===t||0===t.length)return e.length;for(;i+r<e.length&&i+o<t.length;){if(e.charAt(i+r)===t.charAt(i+o))a+=1;else for(r=0,o=0,n=0;s>n;n+=1){if(i+n<e.length&&e.charAt(i+n)===t.charAt(i)){r=n;break}if(i+n<t.length&&e.charAt(i)===t.charAt(i+n)){o=n;break}}i+=1}return(e.length+t.length)/2-a},splitEmail:function(e){var t,n,i,r=e.split("@"),o="";if(r.length<2)return!1;for(t=0;t<r.length;t+=1)if(""===r[t])return!1;if(n=r.pop(),i=n.split("."),0===i.length)return!1;if(1===i.length)o=i[0];else{for(t=1;t<i.length;t+=1)o+=i[t]+".";i.length>=2&&(o=o.substring(0,o.length-1))}return{topLevelDomain:o,domain:n,address:r.join("@")}}}};root.jQuery&&!function(e){e.fn.mailcheck=function(e){var t,n,i=this;e.suggested&&(t=e.suggested,e.suggested=function(e){t(i,e)}),e.empty&&(n=e.empty,e.empty=function(){n.call(null,i)}),e.email=this.val(),Kicksend.mailcheck.run(e)}}(jQuery),$(function(){$(document).on("click","ul.faqs_alt li .question",function(e){$(this).parent("li").toggleClass("expanded"),track("FAQ Toggle",{question:$(this).text().trim()}),e.preventDefault()})}),$(function(){var e=$(".toggle_box_nav li"),t=$(".toggle_box_content");e.length&&t.length&&e.on("click",function(){var n=$(this),i=e.index(n);return t.removeClass("current"),e.removeClass("current"),$(t[i]).addClass("current"),n.addClass("current"),!1})}),function(){function e(e){var t=e.css("line-height");return"normal"===t?1.2*parseInt(e.css("font-size"),10):parseInt(t,10)}function t(e){var t=e.children(":not(.fade)").last(),n=0;n=parseInt(t.css("padding-bottom"),10)+parseInt(t.css("margin-bottom"),10),e.css("margin-bottom",n),t.css("padding-bottom",0),t.css("margin-bottom",0)}function n(t,n){var i=e(t)*n;return t.css("max-height",i+"px"),r(t[0])}function i(e){e.css("max-height",e[0].scrollHeight+"px")}function r(e){return e.clientHeight<e.scrollHeight}function o(e,t){var n=e.parents(":hidden:last"),i=n.attr("style");n.length&&n.show(),t(),n.length&&(void 0===i?n.removeAttr("style"):n.attr("style",i))}$(".js-line-clamp").livequery(function(){var e=$(this),r=$(this).find(".clamped"),a=e.find(".fade,.expand");o(e,function(){t(r),n(r,e.data("lines"))&&(a.show(),a.one("click",function(e){e.preventDefault(),e.stopPropagation(),i(r),a.hide()}))})})}(),function(){function e(){return URI(History.getState().url)}var t=Model.extend();t.uri=t.prototype.uri=function(){return e()},t.on_initialize(function(t,n,i,r){this.$view=n,this.template=i,r.url?URI(r.url).equals(e().clone().query(""))?this.original_uri=e():this.original_uri=URI(r.url):this.original_uri=e(),this.current_params="",this.param_change_listeners=[],this.options=r,e().equals()?t&&this.change_params(e().query()):this.set_params(e().query(),!0),this.bind_events()}),t.prototype.on_change_params=function(e){this.param_change_listeners.push(e)},t.prototype.change_params=function(t){this.$view.html(render(this.template,this.get())),this.options.mobius_on&&!this.mobius&&(this.mobius=this.init_mobius(this.options.mobius_on)),this.current_params=t,t!==e().query()?History.pushState({params:t},null,this.original_uri.query(t).hash("").toString()):History.replaceState({params:t},null,e().query(t).hash("").toString()),this.mobius&&function(){var e=this.$mobius_context();this.mobius.current_page=1,this.mobius.set_extra_params(t),this.mobius.$elem=this.$mobius_on(),e.get(0)!==this.mobius.options.$context.get(0)&&(this.mobius.options.$context=e,this.mobius.bind_events()),this.get("total_pages")>1?(this.mobius.play(),this.mobius.check_for_more(),$(".mobius_load_more").show()):(this.mobius.pause(),$(".mobius_load_more").hide())}.apply(this),_.each(this.param_change_listeners,function(e){"function"==typeof e&&e(t)}),this.change()},t.prototype.set_params=function(e,t){var n=this.original_uri.clone().query(e||!1),i=this;return t||e!==this.current_params?($.ajax({url:n.suffix("json").toString(),dataType:"json",success:function(t){i.set(t,{overwrite:!0}),i.change_params(e)},error:function(e){growl({error:e.responseText})}}),!0):!1},t.prototype.bind_events=function(){var e=this;$(window).on("statechange",function(){var t=History.getState().data;t&&"string"==typeof t.params&&e.set_params(t.params)})},t.prototype.$mobius_on=function(){var e=this.$view.find(".mobius_on");return e.length||(e=this.$view),e},t.prototype.$mobius_context=function(){var e=this.$view.find(".mobius_context");return e.length||(e=$(window)),e},t.prototype.init_mobius=function(e){var t=this,n=this.$mobius_on(),i=this.$mobius_context();return this.$view.on("mobius:loaded_page",function(n,i,r){r[e]=t.get(e).concat(r[e]),i>=r.total_pages?(t.mobius.pause(),$(".mobius_load_more").hide()):(t.mobius.play(),$(".mobius_load_more").show()),delete r.params.page,t.set(r,{overwrite:!0})}),n.mobius({dataType:"json",url:this.original_uri.clone().query("").toString(),$context:i,paused:!0}).data("mobius")},root.Location=t}(),function(){var e=ApplicationModel.extend(),t={},n={};"undefined"!=typeof window.project_profile_color_defaults&&(n=$.parseEscapedJSON(window.project_profile_color_defaults)),e.prototype.COLOR_DEFAULTS=n,e.prototype.publishSuccess=function(){this.syncDiscardState(),this.get("feature_image_attributes._destroy")&&this.replace("feature_image_attributes",{}),this.get("background_image_attributes._destroy")&&this.replace("background_image_attributes",{})},e.prototype.syncDiscardState=function(){this.setDiscardState(this.data)},e.prototype.setDiscardState=function(e){t=$.extend(!0,{},e)},e.prototype.discard=function(){this.set(t,{overwrite:!0})},e.prototype.tryFixValidationErrors=function(e){var t=this;e=e||{};var n=e.default_url;["name","blurb","link_text","link_url"].forEach(function(e){var n=t.get(e);n&&t.set(e,n.trim())});var i=this.get("link_url"),r=this.get("link_text");if(!i&&/^http|^www/.test(r)){var o=this.validateURL(r);this.set("link_url",o),this.set("link_text",this.trimURL(o))}else!i&&r?this.set("link_url",n):i&&!/^http/.test(i)&&this.set("link_url","http://"+i)},e.prototype.validateURL=function(e){return/^http/.test(e)?e:"http://"+e},e.prototype.trimURL=function(e){var t=new URI(e);return t.hostname()},e.prototype.validate=function(){var e={};return""===this.get("name").trim()&&(e.name=!0),e},e.prototype.data_for_rails=function(){return _.reduce(this.data,function(e,t,n){return e["project_profile["+n+"]"]=t,e},{})},e.set_computed_value("background_image_opacity_percent",function(){
return 100*this.background_image_opacity},{changes_on:["background_image_opacity"]}),e.set_computed_value("text_color_or_default",function(){return this.text_color?"#"+this.text_color:"#"+e.prototype.COLOR_DEFAULTS.text_color},{changes_on:["text_color"]}),e.set_computed_value("link_text_color_or_default",function(){return this.link_text_color?"#"+this.link_text_color:"#"+e.prototype.COLOR_DEFAULTS.link_text_color},{changes_on:["link_text_color"]}),e.set_computed_value("background_color_or_default",function(){return""!==this.background_color?"#"+this.background_color:this.background_image_attributes.id&&!this.background_image_attributes._destroy?"#"+e.prototype.COLOR_DEFAULTS.background_color_with_image:"#"+e.prototype.COLOR_DEFAULTS.background_color},{changes_on:["background_image_attributes","background_color"]}),e.set_computed_value("link_background_color_or_default",function(){var t=this.link_background_color;return t?"#"+t:"#"+e.prototype.COLOR_DEFAULTS.link_background_color},{changes_on:["link_background_color"]}),root.CurrentProjectProfile=e}(),function(){var e=History.isTraditionalAnchor;"undefined"!=typeof History&&(History.isTraditionalAnchor=function(t){return 0===t.indexOf("remote_modal_dialog")?!0:e.apply(this,arguments)})}(),$(function(){$(".modal_dialog").livequery(function(){var e=$(this),t=e.attr("id");$(document).on("click",".link_to_"+t,function(t){e.modal_dialog({event:t}),t.preventDefault()}),e.closest(".pop_modal_on_load").length&&e.modal_dialog()}),$(document).on("click",".remote_modal_dialog",function(e){if(e.preventDefault(),!$(this).is(".disabled")){var t=$.open_remote_modal_dialog(URI($(this).attr("href")).suffix("js").toString(),{title:_.escape($(this).attr("data-modal-title")),id:$(this).attr("data-modal-id"),event:e,do_not_cache:$(this).attr("data-do_not_cache")?!0:!1,class_name:$(this).attr("data-modal-class"),theme:$(this).attr("data-modal-theme"),ignore_parent:$(this).attr("data-ignore_parent")?!0:!1,remote_modal_dialog_contents_loaded:function(e){var t=e.find(".move_to_head");t.length&&($("head").append(t.children()),t.remove())},dataType:"html"});$(this).data("modal_dialog",t),t.$elem.on("modal_dialog:remote_dialog_loaded",function(){try{"undefined"!=typeof FB&&FB.XFBML&&FB.XFBML.parse()}catch(e){$.console.log(e)}})}}).each(function(){var e=$(this);e.is(".pop_modal_on_load")&&e.click()}),$(document).on("click",".modal_dialog_close",function(e){e.preventDefault(),$(this).trigger("close.modal_dialog")}),$(document).on("closed.modal_dialog",function(e){$(e.target).find(".video-player").trigger("ksr_video:pause")}),$(document).on("click",".modal_dialog .pagination a",function(e){var t=$(this).closest(".modal_dialog_body"),n=$(this);t.height(t.height()),e.preventDefault(),$.ajax({url:n.attr("href"),type:"get",dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")},success:function(e){t.html(e),$.scrollTo(t),t.css("height","auto")}})});var e,t=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/,n=/^#remote_modal_dialog:(.*)$/,i=t.exec(window.location.hash),r=n.exec(window.location.hash);i&&(e=i[1],$("#"+e).modal_dialog(),window.location.replace("#")),r&&($(".remote_modal_dialog").each(function(){url_equals(decodeURIComponent(r[1]),decodeURIComponent($(this).attr("href")))&&$(this).click()}),window.location.replace("#")),$(".generate_modal_dialog").livequery(function(){var e=$(this),t=_.pick(e.data(),"id");$.create_modal_dialog(e.data("title"),e.data("content"),t)}),$(document).on("modal_dialog:opened",function(e,t){var n={};n={modal_class:t.options.class_name,modal_title:t.options.title,modal_id:t.options.id},track("Modal Dialog View",n)})}),$(function(){function e(e){$(e).ksr_video()}$.videos_changed=function(){$(".video-player:visible").each(function(){e(this)})},$(document).on("ksr_video:pause_all_videos",function(){$(".video-player").trigger("ksr_video:pause")}),$(".video-player:visible").livequery(function(){e(this)})}),$(document).on("timer_added",".ksr_page_timer",function(){new ProjectTimer(this,window.ksr_page_clock)}),$(".ksr_page_timer").livequery(function(){this.ksr_page_timer||$(this).trigger("timer_added")}),$("span.character_counter").livequery(function(){var e=$(this);$(document).on("keyup",e.attr("rel"),function(){e.html(parseInt($(this).attr("maxlength"),10)-$(this).val().length)})}),$("form:not([data-ksrjson])").livequery("submit",function(e){var t=$(this);t.is(".submitting-non-ajax")?e.preventDefault():t.attr("target")||($(window).unload(function(){t.removeClass("submitting-non-ajax")}),t.addClass("submitting-non-ajax"))}),$(function(){$(document).tipsy({gravity:"s",html:!0,live:"a.tip",fade:!0}),$(document).tipsy({gravity:"n",html:!0,live:".tipsy_n",fade:!0}),$(document).tipsy({gravity:"s",html:!0,live:".tipsy_s",fade:!0}),$(document).tipsy({gravity:"se",html:!0,live:".tipsy_se",fade:!0})}),$(document).on("click","input#share_a_link",function(){$("#share_a_link").focus().select()}),$(".keep-or-delete").livequery(function(){var e=$(this).closest("li"),t=$(this).find("a"),n=$(this).find(".checkbox").hide();t.attr("disabled")||t.show(),t.on("click",function(i){t.attr("disabled")||(n.prop("checked",!1),e.hide(),e.trigger("nested_attributes_list:removed")),i.preventDefault()})}),$("a.add-another").livequery(function(){var e=$(this),t=e.data("context")?e.closest(e.data("context")):$(document),n=t.find(e.attr("rel")).hide();e.attr("disabled")||e.show(),e.on("click",function(i){if(!e.attr("disabled")){var r=n.clone_form_template();r.find(".keep_box").val(0).prop("checked",!0),n.trigger("form_fields_cloned",r),e.attr("data-target-selector")?t.find(e.attr("data-target-selector")).append(r):n.before(r),r.trigger("nested_attributes_list:added")}i.preventDefault()})}),$("form.requires-confirmation").livequery("submit",function(e){var t=$(this),n=$(this).find("input.confirmation");n.is(":checked")||(setTimeout(function(){t.removeClass("submitting-non-ajax")},100),growl({error:I18n.t("onloads.initializers.form_requires_confirmation.Please_accept_the_Rules")}),e.preventDefault())}),$(document).on("click",".js-removeable .js-remove",function(){var e=$(this);return e.data("confirm")&&!confirm(e.data("confirm"))?!1:($.post(e.attr("href"),{_method:"delete"},function(){e.parents(".js-removeable").fadeOut(400,function(){$(this).remove()})}),!1)}),$(function(){$(document).on("click",".location_list .big_locations li",function(){window.location=$(this).find(".name a").attr("href")})}),$(function(){$(document).on("click",".ksr-dropdown",function(){var e=$(this);e.toggleClass("open"),setTimeout(function(){$(window).on("click",function(t){$(t.target).closest(e).length||e.removeClass("open")})},0)})}),$(function(){function e(e){var i=$(e.currentTarget);if(!i.hasClass("ksr-popover-excluded")){var r=$('.ksr-popover[data-target-id="#'+i.attr("id")+'"]');return r.is(".visible")?void n():(t(r),!1)}}function t(e){var t=e.data("ksr_popover_override");if("function"!=typeof t||t(e)){var o=$(e.data("targetId"));o.addClass("ksr-popover-active"),r&&n(),r=e,e.addClass("visible"),$("body").addClass("ksr-popover-visible"),device_idioms.mobile&&$("body, html").addClass("ksr-mobile-popover-visible"),i(e),$(document).trigger("ksr_popover:opened",{$popover:e})}}function n(e){e=e||{};var t=e.update_focus||!1;if(r){var n=$(r.data("targetId"));n.removeClass("ksr-popover-active"),r.removeClass("visible"),$("body").removeClass("ksr-popover-visible"),$("body, html").removeClass("ksr-mobile-popover-visible"),t&&n.find(".ksr-icon__arrow-down").focus(),$(document).trigger("ksr_popover:closed",{$popover:r}),r=!1}}function i(e){if(!device_idioms.mobile){var t=e.data("targetId"),n=$(t),i=n.offset().left-32;i-=Math.max(0,i+e.outerWidth()-($(window).width()-32)),i=Math.max(4,i),e.offset({left:i,top:n.offset().top+n.outerHeight()+20}),e.find(".arrow").css({left:n.offset().left-e.offset().left+n.outerWidth()/2})}}var r,o={};$(".ksr-popover").livequery(function(){var t=$(this).data("targetId");o[t]||($(document).on("click",t,e),o[t]=!0)}),$(document).on("click",".ksr-popover .close",function(e){n(),e.preventDefault()}),$(document).on("ksr_popover:reposition",".ksr-popover",function(){i($(this))}),$(document).on("ksr_popover:close",".ksr-popover",function(){n()}),$(document).on("click",function(e){var t=$(e.target);t.closest(r).length||n()}),$(document).on("keydown",function(e){e.keyCode===KEY.ESC&&n({update_focus:!0})}),$(document).on("ksr_popover:opened",function(e,t){t.$popover.aria_set_visible().aria_focus_first_element().aria_activate_keyboard_tabindex()}),$(document).on("ksr_popover:closed",function(e,t){t.$popover.aria_set_hidden().aria_deactivate_keyboard_tabindex()})}),$(function(){$(".mobius.click").livequery(function(){function e(){n=r.find("*[data-cursor]:last")}var t,n,i,r=$(this),o=r.parent().find("a.load_more"),a=r.parent().find(".loading");e(),i=n.length,r.mobius({trigger_next:o,prepend_next:r.data("mobius_append")?!1:!0,url:r.data("mobius_url")||!1,page_param:i?"cursor":"page",extra_params:r.data("mobius_extra_params"),page_by:function(t){return i?(e(),n.data("cursor")):t?t+1:1}}),t=r.data("mobius"),r.on("mobius:loading_page",function(){a.show(),o.parent().hide()}),r.on("mobius:loaded_page",function(e,t,n){r.parent().find(".count .current").text(r.find("li.item").length),a.hide(),n.data("last_page")?o.parent().hide():o.parent().show()})}),$(".mobius:not(.click)").livequery(function(){function e(){o=s.find("*[data-cursor]:last")}var t,n,i,r,o,a,s=$(this);s.find(".page").data("last_page")||(e(),a=o.length,t=s.mobius({url:s.data("url"),paused:s.is(".paused"),page_param:a?"cursor":"page",extra_params:s.data("extra_params")||"",page_by:function(t){return a?(e(),o.data("cursor")):t?t+1:1}}).data("mobius"),s.length&&(n=$(".js-mini-footer--sticky"),r=$(".js-mini-footer__links"),r.mouseenter(function(){n.addClass("is-visible")}),n.mouseleave(function(){n.removeClass("is-visible")}),s.on("mobius:loaded_page",function(e,r,o){o.data("last_page")?(t.pause(),s.siblings(".load_more").hide(),i=n.clone(),n.remove()):(t.play(),s.siblings(".load_more").show(),$("body").append(i))})))})}),$(function(){$.clipster(".clipster")}),$(function(){$(document).on("click",".js-click_select",function(e){var t=document.createRange(),n=window.getSelection();t.setStartBefore(this.firstChild),t.setEndAfter(this.lastChild),n.removeAllRanges(),n.addRange(t),e.preventDefault()})}),$(function(){$(".overlabels .field label.overlabel").livequery(function(){var e=$(this),t=e.siblings("input:not([type=hidden]), textarea, .wym_box");return t.length||(t=e.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea")),t.length?(e.addClass("overlabel-apply"),t.val()&&e.hide(),t.focus(function(){$(this).val()&&e.hide(),e.addClass("field_focused")}).blur(function(){$(this).val()||e.show(),e.removeClass("field_focused")}).on("keydown input change paste cut",function(){var t=$(this);setTimeout(function(){t.val()?e.hide():e.show()},1)}),void e.click(function(){t.attr("disabled")||t.focus()})):void e.hide()})}),$(function(){var e=["history","banner_canada_projects_animated","banner_canada_hide","banner_iphone_animated","banner_iphone_hide","banner_social_animated","banner_social_hide","banner_stripe_build_transition_hide","banner_verified_identity_hide","banner_yir_animated","ppjun2016","yir_banner_hide","yir_launch_banner","yir_takeover_hide","history_v1","video_mode_projects_seen","video_mode_seen"];_.each(e,function(e){KSR.store.removeItem(e)}),KSR.store.getItem("dismiss_post_funding_onboarding")&&KSR.store.setItem("dismiss_spotlight_onboarding","true"),KSR.store.removeItem("dismiss_post_funding_onboarding")}),$(document).ready(function(){$(".sortable_table").tablesorter({textExtraction:function(e){var t;return t=$(e).closest("td").data("table-value"),"undefined"!=typeof t?t:e.innerHTML.replace(/[,?!\s,%$]/g,"")}})}),define_namespace(".NS_projects__project_share",function(){$.getScript("//platform.tumblr.com/v1/share.js")}),$(".sound_player:visible").livequery(function(){$(this).sound_player()}),$.fn.validate.defaults.on_valid.push(function(e){$(e).removeClass("errored")}),$.fn.validate.defaults.on_invalid.push(function(e){$(e).addClass("errored")}),$(function(){$(document).on("click",".js-read_more",function(e){var t=$(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),r=t.find(".js-more");i.addClass("hide"),i.find(".video-player").trigger("ksr_video:pause"),r.removeClass("hide"),$.scrollTo(t),n&&track(n+" Read More"),e.preventDefault()}),$(document).on("click",".js-read_less",function(e){var t=$(this).closest(".js-read_more_context"),n=t.data("mixpanel_context"),i=t.find(".js-less"),r=t.find(".js-more");i.removeClass("hide"),r.addClass("hide"),r.find(".video-player").trigger("ksr_video:pause"),$.scrollTo(t),n&&track(n+" Read Less"),e.preventDefault()})}),function(){$.fn.spin.presets.ksr={className:"",lines:8,length:4,width:2,radius:5,speed:2}}(),window.placeHolderConfig={autoInit:!1},$(function(){"placeholder"in $("<input>")[0]||"placeHolder"in $("<input>")[0]||$("input[placeholder], textarea[placeholder]").livequery(function(){$(this).placeHolder()})}),$(function(){"autofocus"in document.createElement("input")||$(".js-auto_focus").first().focus()}),define_namespace(".js-launch-banner",function(e){e.each(function(){function e(){KSR.store.setItem(r,!0)}function t(){i.addClass("banner-hidden")}function n(){i.removeClass("banner-hidden")}var i=$(this),r=i.data("id"),o=i.data("one_time");KSR.store.getItem(r)||(i.on("click",".js-close",function(n){e(),t(),n.preventDefault()}),o&&e(),n())})}),function(e){function t(t){var n=t.data("status-url");n&&e.pollster(n,function(n){var i,r=t.data("track-label");return n.ok?(i=e(n.html),t.replaceWith(i),growl({success:I18n.t("library.video_tracks_editor.Successfully_imported_label",{label:r})}),!0):n.error?(i=e(n.html),t.replaceWith(i),growl({error:I18n.t("library.video_tracks_editor.Something_went_wrong_while_importing_label",{label:r,error:n.error})}),!0):!1},{delay:1e3})}e.fn.videoTracksEditor=function(){var n=e(this);n.on("click",".js-add-track",function(t){var n,i=e(t.currentTarget),r=i.closest(".js-subtitles"),o=r.find(".js-language-select"),a=r.find(".js-track-list"),s=o.find("option:selected").val();n=e.ajax({method:"POST",url:i.data("create-track-path"),data:{language:s,captionable_type:i.data("captionable-type"),captionable_id:i.data("captionable-id")},dataType:"json"}),n.success(function(e){a.append(e.html),r.find(".js-empty-tracks").hide(),o.find('option[value="'+s+'"]').prop("disabled",!0),o.ksr_val(o.find("option").not("[disabled]").first().val())}),t.preventDefault()}),n.on("click",".js-captionable--destroy-track",function(t){var n,i=e(t.currentTarget),r=i.closest(".js-subtitles"),o=r.find(".js-language-select"),a=i.data("path");t.preventDefault(),confirm(I18n.t("library.video_tracks_editor.Are_you_sure_you_want_to_delete_this_track"))&&(n=e.ajax({method:"DELETE",url:a}),n.success(function(e){var t=i.data("language");e.ok&&(o.find('option[value="'+t+'"]').prop("disabled",!1),i.closest(".js-captionable--track-item").remove(),0===r.find(".js-captionable--track-item").length&&r.find(".js-empty-tracks").show())}))}),n.on("change",".js-importer--input",function(){var n,i=e(this),r=i.closest(".js-importer"),o=i.closest(".js-captionable--track-item"),a=r.find(".js-importer--text"),s=this.files&&this.files[0],c=new FormData;s&&(i.hide(),a.text(I18n.t("library.video_tracks_editor.Uploading")),c.append("track[file]",s),n=e.ajax({url:i.data("url"),type:"PUT",processData:!1,contentType:!1,data:c}),n.success(function(n){var i;n.ok?(i=e(n.html),o.replaceWith(i),t(i)):growl({error:n.error})}),n.error(function(){growl({error:I18n.t("library.video_tracks_editor.Something_went_wrong_while_uploading_file",{file:s.name})}),i.show()}))}),n.find(".js-captionable--track-item").each(function(){var n=e(this);t(n)})}}(jQuery),define_namespace(".js-asset-uploads",function(e){var t=e.find(".js-asset-uploads--tracks");e.on("ksr_uploader:uploaded",function(e,n){var i,r=$(this),o=r.data("subtitles-path");o&&0!==t.length&&(t.empty(),i=$.ajax({url:o,method:"GET",data:{captionable_id:n.id,captionable_type:n.type}}),i.success(function(e){t.html(e.html)}))}),e.on("ksr_uploader:remove",function(){t.empty()})}),$(".js-asset-uploads--tracks").livequery(function(){$(this).videoTracksEditor()}),define_namespace(".js-nav--subnav",function(e){e.on("change_current",function(e,t){var n=$(this),i=$(t);n.has(t).length&&(n.find(".current").removeClass("current"),i.addClass("current"),n.find(".js-nav--subnav__selected-indicator").css({left:i.position().left,width:i.outerWidth()})),$(window).resize(function(){n.find(".js-nav--subnav__selected-indicator").css({left:i.position().left,width:i.outerWidth()})})});var t=window.location.pathname,n=e.find(".nav--subnav__item__link").filter(function(){return URI(this.href).path()===t});e.trigger("change_current",n)}),function(e){e.fn.unveil=function(t,n){function i(){var t=l.filter(function(){var t=e(this);if(!t.is(":hidden")){var n=o.scrollTop(),i=n+o.height(),r=t.offset().top,s=r+t.height();return s>=n-a&&i+a>=r}});r=t.trigger("unveil"),l=l.not(r)}var r,o=e(window),a=t||0,s=window.devicePixelRatio>1,c=s?"data-src-retina":"data-src",l=this;return this.one("unveil",function(){var e=this.getAttribute(c);e=e||this.getAttribute("data-src"),e&&(this.setAttribute("src",e),"function"==typeof n&&n.call(this))}),o.scroll(i),o.resize(i),i(),this}}(window.jQuery||window.Zepto),$(function(){$(".js-lazy-image").livequery(function(){$(this).unveil(500,function(){var e=$('<div class="loader-dots loader-dots--mega loader-dots--inline loader-dots--overlay" />').css("visibility","hidden");$(this).after(e);var t={x:$(this).offset().left+this.clientWidth/2-e.width()/2,y:$(this).offset().top+this.clientHeight/2-e.height()/2};e.css("top",parseInt(t.y)+"px").css("left",parseInt(t.x)+"px").css("visibility","visible"),$(this).load(function(){return e.remove()})})})}),function(e){e.fn.whenNear=function(t,n){function i(){var t=_.filter(a,function(t){var n=e(t);if(!n.is(":hidden")){var i=r.scrollTop(),a=i+r.height(),s=n.offset().top,c=s+n.height();return c>=i-o&&a+o>=s}});a=a.not(t),_.each(t,n)}var r=e(window),o=t||0,a=this;return r.on("scroll.whenNear resize.whenNear",_.throttle(i,25)),i(),this}}(window.jQuery),$(function(){$(".js-lazy-video").livequery(function(){var e=this,t=$(this);t.whenNear(500,function(){e.src=t.data("src")})})}),$(function(){$(".js-score-tracking a").livequery("click",function(e){var t=$(this),n=t.data("score"),i=t.data("version"),r=t.data("pid"),o=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target;i&&(o||e.preventDefault(),track("Rec BBall Card Score click",{"rec-score":n,"rec-version":i,pid:r}),o||setTimeout(function(){window.location=t.attr("href")},50))})}),function(){function e(e){var t=I18n.t("onloads.views.follows.follow_button.Follow"),n=I18n.t("onloads.views.follows.follow_button.Following")+'<svg class="svg-icon__check ml1"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#check"></use></svg>';e.data("is-following")?(e.html(n),e.removeClass("btn--border-green"),e.addClass("btn--green")):(e.html(t),e.removeClass("btn--green"),e.addClass("btn--border-green")),e.removeClass("hidden")}function t(e){e.data("is-following")&&(e.data("previous-html",e.html()),e.html(I18n.t("onloads.views.follows.follow_button.Unfollow")))}function n(e){var t=e.data("previous-html");e.data("is-following")&&t&&e.html(t)}function i(t,n){t.data("is-following")?(t.data("is-following",!1),e(t),n&&t.trigger("ksr:unfollow_user")):(t.data("is-following",!0),e(t),n&&t.trigger("ksr:follow_user"))}function r(e,t,n){$(".js-follow-user").each(function(){$(this).data("is-following")||i($(this),!1)}),e.unbind("click"),e.html(I18n.t("onloads.views.follows.follow_all_button.Following_all")),e.addClass("btn--disabled"),e.trigger("ksr:follow_all",[t,n])}$(".js-follow-all").livequery("click",function(){var e=$(this),t=e.data("url"),n=$('<span class="spinner" />').spin("ksr","#000"),i=e.data("type");$.ajax({url:t,dataType:"json",method:"post",data:{type:i},beforeSend:function(){e.addClass("btn--disabled"),e.prepend(n)}}).success(function(t){200===t.status?(r(e,t.user_count,t.project_count),growl({success:t.message})):(e.removeClass("btn--disabled"),growl({success:t.message}))}).complete(function(){n.remove()})}),$(".js-follow-user").livequery(function(){var r=$(this);r.on("click",function(e){var t=r.data("is-following"),n=t?r.data("unfollow-path"):r.data("follow-path");r.prop("disabled",!0),$.ajax({url:n,dataType:"json",method:"post"}).success(function(e){200===e.status?i(r,!0):growl({error:e.message})}).complete(function(){r.prop("disabled",!1)}),e.preventDefault()}),r.on("mouseenter focus",function(){t(r)}),r.on("mouseleave blur",function(){n(r)}),r.on("ksr:set_to_follow",function(){r.data("is-following")&&i(r,!0)}),e(r)})}(),function(){function e(e){e.data("is-blocking")?(e.text(I18n.t("onloads.views.user_blocks.block_button.Blocked")),e.removeClass("btn btn--text grey-dark btn--small"),e.addClass("btn btn--gray")):(e.text(I18n.t("onloads.views.user_blocks.block_button.Block")),e.removeClass("btn btn--gray"),e.addClass("btn grey-dark btn--small")),e.removeClass("hidden")}function t(e){e.data("is-blocking")&&(e.data("previous-html",e.html()),e.html(I18n.t("onloads.views.user_blocks.block_button.Unblock")))}function n(e){var t=e.data("previous-html");e.data("is-blocking")&&t&&e.html(t)}function i(t){t.data("is-blocking")===!0?(t.data("is-blocking",!1),e(t),t.trigger("ksr:unblock_user")):(t.data("is-blocking",!0),e(t),t.trigger("ksr:block_user"))}$(".js-block-user").livequery(function(){var r=$(this);r.on("click",function(e){var t=r.data("is-blocking"),n=t?r.data("unblock-path"):r.data("block-path");r.prop("disabled",!0),$.ajax({url:n,dataType:"json",method:"post"}).success(function(e){200===e.status?i(r):growl({error:e.message})}).complete(function(){r.prop("disabled",!1)}),e.preventDefault()}),r.on("mouseenter focus",function(){t(r)}),r.on("mouseleave blur",function(){n(r)}),r.on("ksr:unblock_user",function(){r.addClass("hidden")}),e(r)})}(),function(){function e(e){var t=e.find(".js-block-user").data("is-blocking"),n=e.find(".js-follow-user");t?n.addClass("hidden"):n.removeClass("hidden")}$(".js-social-actions").livequery(function(){var t=$(this);e(t),t.on("ksr:block_user ksr:unblock_user",function(){t.find(".js-follow-user").trigger("ksr:set_to_follow"),e(t)})})}(),$(function(){$(document).on("click",".js-tabbed-nav-link",function(e){$(".js-tabbed-nav-link").removeClass("is-active"),$(this).addClass("is-active"),$(".js-tabbed-nav-panel").removeClass("is-active"),$(".js-tabbed-nav-panel[data-panel="+$(this).data("panel")+"]").addClass("is-active"),track($(this).closest(".js-tabbed-nav").data("tracking_name"),{toggled_to:$(this).data("panel")}),e.preventDefault()})}),function(){presenters["assets/_uploaded_item"]=function(e){return e.short_filesize=formatters.number_to_human_size(e.data_file_size,{precision:1}),e}}(),function(){function e(e){return e.project.disputed>0&&(e.filters.disputed={"true":{count:e.project.disputed}}),e}function t(e){return _.each(_.keys(e.aggregations),function(t){_.each(_.keys(e.aggregations[t]),function(n){var i=e.aggregations[t][n];e.aggregations[t][n]={count:i}})}),e}function n(e){return e.params&&(_.each(_.keys(e.params),function(t){_.has(e.aggregations,t)?(e.aggregations[t][e.params[t]]||(e.aggregations[t][e.params[t]]={}),e.aggregations[t][e.params[t]].selected=!0):_.has(e.filters,t)?e.filters[t][e.params[t]].selected=!0:(e.aggregations[t]={})[e.params[t]]={selected:!0}}),e.params.sort_by&&(e.params["sort_by_"+e.params.sort_by]=" "+(e.params.asc_or_desc||"asc")),e.actual_reward_selected=!1,e.params.reward_id&&(e.actual_reward_selected=!0,e.selected_reward=_.findWhere(e.rewards,{id:parseInt(e.params.reward_id,10)}),e.selected_reward||(e.actual_reward_selected=!1,e.selected_reward=_.findWhere(e.rewards,{id:"none"})),e.selected_reward.selected=!0),_.each(["survey_answered","completed","must_have_creator_note","status","backer_banned","disputed"],function(t){e.params[t]&&(e.not_filtered=!1)})),e}function i(e){return e.show_aggregations=e.total_entries>0||!(e.params&&e.params.term&&!e.params.creator_note&&!e.params.creator_note_not),e}function r(e){return _.each(e.rewards,function(e){e.formatted_minimum=formatters.money(e.minimum,{currency:current_project.get("currency"),precision:0}),e.reward.length>35?e.truncated_description=e.reward.substring(0,35)+"\u2026":e.truncated_description=e.reward}),e}presenters["backer_report/_index"]=function(o){return o.filters={},o=e(o),o=t(o),o.aggregations.must_have_creator_note={"true":{},"false":{}},o.not_filtered=!0,o=n(o),"successful"===o.project.state&&(o.project.is_successful=!0),o=i(o),o.formatted_total_entries=formatters.format_number(o.total_entries,{precision:0}),o.count=o.total_entries,o=r(o),o.message_url=URI(o.urls.web.message_batches).segment("new").query(o.params),o.isCreator=current_project.get("creator.id")===current_user.get("id"),o.showMessages=o.isCreator||o.showMessages,o}}(),function(){presenters["backer_report/_row"]=function(e){return e.formatted_pledged_at=moment(1e3*e.pledged_at).format("ll"),e.formatted_survey_answered_at=moment(1e3*e.survey_answered_at).format("ll"),e.formatted_amount=formatters.money(e.amount,{precision:2,currency:current_project.get("currency")}),e.isCreator=current_project.get("creator.id")===current_user.get("id"),e.showMessages=e.isCreator||e.showMessages,e}}(),function(){var e=function(e){switch(e.project.state){case"canceled":return I18n.t("presenters.backings.row.Canceled");case"failed":return I18n.t("presenters.backings.row.Unsuccessful");case"live":return I18n.t("presenters.backings.row.In_progress");case"successful":return I18n.t("presenters.backings.row.Successful");case"suspended":return I18n.t("presenters.backings.row.Suspended");default:return""}};presenters["backings/_row"]=function(t){if(t.completed=!!t.completed_at,t["is_"+t.status]=!0,t.formatted_deadline=moment(1e3*t.project.deadline).format("ll"),t.formatted_money=formatters.money(t.amount,{currency:t.project.currency}),t.formatted_status=I18n.t("presenters.backings.row.status."+t.display_status),t.project_state=e(t),t.reward){var n=57,i=t.reward.reward;t.formatted_reward=i.length>n?i.substring(0,n)+"\u2026":i,t.reward.estimated_delivery_on&&(t.formatted_estimated_delivery_on=moment(1e3*t.reward.estimated_delivery_on).utc().format("MMM YYYY"))}return t.messages&&(t.formatted_messages_count=I18n.t("presenters.backings.row.messages_count",{count:t.messages.count,formatted_count:formatters.format_number(t.messages.count,{precision:0})}),t.formatted_messages_last_activity_at=moment(1e3*t.messages.last_activity_at).format("ll")),t}}(),function(){presenters["backings/_table"]=function(e){return e.show_more_backings=e.total>e.backings.length,e.count=e.total,e.backings=_.map(e.backings,function(e){return presenters["backings/_row"]($.extend({},e.get()))}),e}}(),function(){presenters["discover/_location_li"]=function(e){return e.json=JSON.stringify(e),e}}(),function(){presenters["discover/_location_options"]=function(e){return e.ancestor_locations=e.ancestor_locations||[],e.ancestor_locations=e.ancestor_locations.reverse(),e.nearby_locations=e.nearby_locations||[],e}}(),function(){presenters["discover/_project_baseball_card_li"]=function(e){return presenters["projects/_baseball_card_tall"](e)}}(),function(){presenters["discover/_search_location_li"]=function(e){return e.json=JSON.stringify(e),e}}(),function(){presenters["funnels/_backing"]=function(e){return e.formatted_pledged_at=moment(1e3*e.pledged_at).format("ll"),e.project_successful="successful"===e.project.state,e.project_live="live"===e.project.state,e.project_failed="failed"===e.project.state,e.project_canceled="canceled"===e.project.state,e.project_suspended="suspended"===e.project.state,e}}(),function(){presenters["funnels/_backing_details"]=function(e){return e.formatted_created_at=moment(1e3*e.pledged_at).format("ll"),e.project.formatted_deadline=moment(1e3*e.project.deadline).format("ll"),e.reward&&e.reward.reward.match(/^no reward$/i)&&(e.reward=void 0),e.reward&&(e.reward.formatted_estimated_delivery_on=moment(1e3*e.reward.estimated_delivery_on).utc().format("MMM YYYY")),e.pledged_live="pledged"===e.status&&"live"===e.project.state,e.pledged_failed_or_canceled="pledged"===e.status&&("failed"===e.project.state||"canceled"===e.project.state),e.collected="collected"===e.status,e.errored="errored"===e.status,e.canceled_or_dropped="canceled"===e.status||"dropped"===e.status,e.project_successful="successful"===e.project.state,e.project_live="live"===e.project.state,e.project_failed="failed"===e.project.state,e.project_canceled="canceled"===e.project.state,e.project_suspended="suspended"===e.project.state,e.show_status_tooltip="pledged"===e.status&&("failed"===e.project.state||"canceled"===e.project.state||"suspended"===e.project.state),e.formatted_amount=formatters.money(e.amount,{currency:e.project.currency,precision:0}),e.reward&&(e.reward.formatted_minimum=formatters.money(e.reward.minimum,{currency:e.project.currency,precision:0})),e}}(),function(){presenters["funnels/_project_details"]=function(e){return e.formatted_money=formatters.money(e.pledged,{currency:e.currency}),e.launched_at&&(e.formatted_launched_at=moment(1e3*e.launched_at).format("ll")),e.formatted_created_at=moment(1e3*e.created_at).format("ll"),e.formatted_deadline=moment(1e3*e.deadline).format("ll"),e.successful="successful"===e.state,e.live="live"===e.state,e.failed="failed"===e.state,e.started="started"===e.state,e.submitted="submitted"===e.state,e.canceled="canceled"===e.state,e.suspended="suspended"===e.state,e.ended="successful"===e.state||"failed"===e.state||"canceled"===e.state,e.preview_link=new URI(e.urls.web.edit).fragment("preview").toString(),e.isCreator=current_user.get("id")===e.creator.id,e.canEdit=-1!==e.permissions.indexOf("edit_project"),e.canPost=-1!==e.permissions.indexOf("post"),e.canViewPledges=-1!==e.permissions.indexOf("view_pledges"),e}}(),function(){window.presenters["funnels/_text"]=function(e){return e.backing&&(e.backing.formatted_amount=formatters.format_number(e.backing.amount,{precision:2})),e.rendered_body=render_raw(e.text.body,e),e}}(),function(){presenters["funnels/_ticket_error"]=function(e){var t={"Ticket_requester ":"Email","Ticket_requester_email_param ":"Email","Ticket_requester_name ":"Name","Base Description: ":"Details"},n=new RegExp(_.keys(t).join("|"),"g");return e.errors=_.map(e.errors,function(e){return e.replace(n,function(e){return t[e]+" "})}),e}}(),function(){presenters["funnels/contact"]=function(e){var t=e.user,n=root.funnel_user_backings?root.funnel_user_backings.length-_.compact(root.funnel_user_backings).length:0;return e.projects=_.map(t.get_created_projects(),function(e){var t=e.get();return t.launched_at&&(t.formatted_launched_at=moment(1e3*t.launched_at).format("ll")),t.formatted_created_at=moment(1e3*t.created_at).format("ll"),t.formatted_deadline=moment(1e3*t.deadline).format("ll"),t.successful="successful"===t.state,t.live="live"===t.state,t.failed="failed"===t.state,t.started="started"===t.state,t.submitted="submitted"===t.state,t.canceled="canceled"===t.state,t.suspended="suspended"===t.state,t}),e.project_groups=_.map(_.groupBy(e.projects,function(e){return"live"===e.state?I18n.t("presenters.funnels.contact.Live_projects"):e.ended?I18n.t("presenters.funnels.contact.Ended_projects"):I18n.t("presenters.funnels.contact.Started_projects")}),function(e,t){return{k:t,v:e}}),e.backings=_.map(t.get_backings().slice(0,32),function(e){var t=e.get();return t.project.formatted_deadline=moment(1e3*t.project.deadline).format("ll"),t.formatted_pledged_at=moment(1e3*t.pledged_at).format("ll"),t.project_successful="successful"===t.project.state,t.project_live="live"===t.project.state,t.project_failed="failed"===t.project.state,t.project_canceled="canceled"===t.project.state,t.project_suspended="suspended"===t.project.state,t.formatted_amount=formatters.money(t.amount,{currency:t.project.currency,precision:0}),t.reward&&(t.reward.formatted_minimum=formatters.money(t.reward.minimum,{currency:t.project.currency,precision:0})),t}),e.any_subjects=e.projects.length+e.backings.length,e.repeat_creator=e.projects.length>1,e.repeat_backer=t.get("backings_count")>1,e.backings_count=t.get("backings_count")-n,e.show_more_backings=t.get("backings_count")>32-n,e.my_stuff=!!t.get("id"),e.projects.length&&!e.backings.length?(e.select_phrase_one=I18n.t("presenters.funnels.contact.Select_your_project"),e.select_phrase_two=I18n.t("presenters.funnels.contact.your_project")):!e.projects.length&&e.backings.length?(e.select_phrase_one=I18n.t("presenters.funnels.contact.Select_your_pledge"),
e.select_phrase_two=I18n.t("presenters.funnels.contact.a_pledge")):e.projects.length&&e.backings.length&&(e.select_phrase_one=I18n.t("presenters.funnels.contact.Select_a_pledge_or_project"),e.select_phrase_two=I18n.t("presenters.funnels.contact.one_of_your_projects_or_pledges")),t.data.avatar&&!t.data.avatar.thumb.match(/\/missing_user_avatar\.png/)&&(t.show_avatar=!0),e.o=JSON.stringify(e),e}}(),function(){presenters["funnels/index"]=function(e){e.sections=[],e.funnels=_.map(e.funnels,function(e){return e.breadcrumbs=_.compact([e.section_title,e.item_title]).join(" > "),e.section_title?e.item_title||(e.item_title=e.section_title):e.section_title=e.item_title,e});var t,n=_.groupBy(e.funnels,function(e){return e.section_title||e.item_title}),i=$(".current a[data-topic]").data("topic");return e.sections=[],t=e.funnels[0]&&"variant"===e.funnels[0].version?[I18n.t("presenters.funnels.index.Requirements"),I18n.t("presenters.funnels.index.Building_a_project"),I18n.t("presenters.funnels.index.Editing_my_project"),I18n.t("presenters.funnels.index.Project_tips"),I18n.t("presenters.funnels.index.Image_video_and_audio"),I18n.t("presenters.funnels.index.Identity_verification"),I18n.t("presenters.funnels.index.Collecting_funds"),I18n.t("presenters.funnels.index.Backers"),I18n.t("presenters.funnels.index.Fees_and_taxes"),I18n.t("presenters.funnels.index.Pledging"),I18n.t("presenters.funnels.index.Amazon_Payments"),I18n.t("presenters.funnels.index.Payments"),I18n.t("presenters.funnels.index.Payment"),I18n.t("presenters.funnels.index.Reward"),I18n.t("presenters.funnels.index.Survey"),I18n.t("presenters.funnels.index.Project_submission"),I18n.t("presenters.funnels.index.Project_suspension"),I18n.t("presenters.funnels.index.Account_settings")]:{project:[I18n.t("presenters.funnels.index.Project_idea_and_tips"),I18n.t("presenters.funnels.index.Creator_requirements"),I18n.t("presenters.funnels.index.Tips"),I18n.t("presenters.funnels.index.Starting_a_new_project"),I18n.t("presenters.funnels.index.Funds_and_payments"),I18n.t("presenters.funnels.index.Identity_verification"),I18n.t("presenters.funnels.index.Editing_my_project"),I18n.t("presenters.funnels.index.My_submission"),I18n.t("presenters.funnels.index.My_backers"),I18n.t("presenters.funnels.index.Project_updates"),I18n.t("presenters.funnels.index.Why_would_a_project_be_suspended"),I18n.t("presenters.funnels.index.What_happens_when_a_project_is_suspended"),I18n.t("presenters.funnels.index.Using_the_site")],pledge:[I18n.t("presenters.funnels.index.Why_is_my_pledge_dropped"),I18n.t("presenters.funnels.index.What_happened_to_my_pledge"),I18n.t("presenters.funnels.index.Pledge_problems"),I18n.t("presenters.funnels.index.Money_and_payments"),I18n.t("presenters.funnels.index.My_reward"),I18n.t("presenters.funnels.index.Survey"),I18n.t("presenters.funnels.index.Using_the_site")],projects:[I18n.t("presenters.funnels.index.Project_idea_and_tips"),I18n.t("presenters.funnels.index.Creator_requirements"),I18n.t("presenters.funnels.index.Editing_my_project"),I18n.t("presenters.funnels.index.Tips"),I18n.t("presenters.funnels.index.Funds_and_payments"),I18n.t("presenters.funnels.index.My_backers"),I18n.t("presenters.funnels.index.Project_updates"),I18n.t("presenters.funnels.index.Using_the_site")],backings:[I18n.t("presenters.funnels.index.Pledge_problems"),I18n.t("presenters.funnels.index.Money_and_payments"),I18n.t("presenters.funnels.index.Rewards"),I18n.t("presenters.funnels.index.Using_the_site")],other:[I18n.t("presenters.funnels.index.Using_the_site"),I18n.t("presenters.funnels.index.Press"),I18n.t("presenters.funnels.index.Jobs"),I18n.t("presenters.funnels.index.Copyright"),I18n.t("presenters.funnels.index.Stats"),I18n.t("presenters.funnels.index.Partnerships")]}[i],_.each(t,function(t){n[t]&&(e.sections.push({section_title:t,funnels:_.sortBy(n[t],function(e){return e.importance})}),delete n[t])}),_.each(n,function(t,n){e.sections.push({section_title:n,funnels:_.sortBy(t,function(e){return e.importance})})}),e.sections=_.map(e.sections,function(e){return 1===e.funnels.length&&e.funnels[0].item_title===e.section_title?e.funnels[0]:e}),e}}(),function(){presenters["message_threads/_index"]=function(e){var t=[],n=e.aggregations.read?e.aggregations.read[e.user]:0,i=e.total_entries-n;return e.aggregations.read={},n>0&&(e.aggregations.read["true"]=n),i>0&&(e.aggregations.read["false"]=i),_.each(_.keys(e.aggregations),function(t){_.each(_.keys(e.aggregations[t]),function(n){var i=e.aggregations[t][n];e.aggregations[t][n]={count:i}})}),"undefined"==typeof current_project?(_.each(e.projects,function(n){var i=e.aggregations.projects?e.aggregations.projects[n[1]]:void 0,r=parseInt(e.params.project,10)===n[1],o={name:n[0],truncated_name:n[0].substring(0,35)+(n[0].length>35?"\u2026":""),id:n[1],count:i||0,selected:r};t.push(o),r&&(e.selected_project=o)}),e.projects=t,e.has_projects=e.projects&&e.projects.length>0):e.has_projects=!1,e.params&&(_.each(_.keys(e.params),function(t){_.has(e.aggregations,t)?(e.aggregations[t][e.params[t]]||(e.aggregations[t][e.params[t]]={}),e.aggregations[t][e.params[t]].selected=!0):(e.aggregations[t]={})[e.params[t]]={selected:!0}}),"other"===e.params.project&&(e.selected_project={truncated_name:I18n.t("presenters.message_threads.index.Other_projects"),other:!0})),e}}(),function(){presenters["message_threads/_row"]=function(e){return e.formatted_sent_at=moment(1e3*e.sent_at).format("ll"),e}}(),function(){window.presenters["message_threads/_show"]=function(e){return e.is_creator=e.project.creator.id===current_user.get("id"),e.project.is_live="live"===e.project.state,e.backing&&(e.backing.reward.formatted_estimated_delivery_on=moment(1e3*e.backing.reward.estimated_delivery_on).utc().format("ll"),e.backing.is_creator=e.is_creator,e.backing.formatted_amount=formatters.money(e.backing.amount,{currency:e.backing.project.currency,precision:0})),e.messages=_.map(e.messages,function(t){return t.sender=_.findWhere(e.participants,{id:t.sender_id}),presenters["messages/_show"](t)}),e}}(),function(){window.presenters["messages/_show"]=function(e){return e.formatted_created_at=moment(1e3*e.created_at).format("ll"),e.is_recipient="undefined"!=typeof current_user?current_user.get("id")===e.recipient_id:!1,e}}(),function(){presenters["projects/_baseball_card_grid"]=function(e){var t=$.extend({},e);return t.projects=t.projects.map(function(e){return e.map(function(e){return presenters["projects/_baseball_card_tall"](e)})}),t}}(),define_namespace(".NS_accounts__edit",function(e){function t(){return $(n+" :input:not(.optional)").validates_presence(),$(n+" #account_street_address_postal_code").validates_postal_code(),1===$(n+' input[name="account[type]"][value="business"]:checked').length&&($(n+" input.required_business").validates_presence(),$(n+' input[name="account[business_id]"]').validates_business_id()),$(n).validate()}var n="#project_account_form";$(document).on("phone_number:added",function(){0===$(".needs_verification:visible").length&&e.closest(".collapsed").removeClass("collapsed")}),e.livequery(function(){var e=$(this);e.on("blur",".errored",function(){t()}),e.on("submit",n,function(n){var i=$(this),r=$("#account_errors"),o=$('<div class="spinner" />').spin("ksr","#fff");n.preventDefault(),t()&&(i.after(o),$.ajax({type:i.attr("method"),url:i.attr("action"),dataType:"json",data:i.serialize(),success:function(t){r.addClass("hide").removeClass("flash-error"),e.closest("#account-setup-panel").html(t.data),$(window).trigger("project_edit:check_all_panels_for_completion")},error:function(e){void 0!==e.responseJSON.error&&(r.removeClass("hide").addClass("flash-error"),r.find("ul").html("<li>"+e.responseJSON.error+"</li>"),void 0!==e.responseJSON.state_reason&&r.find("ul").html("<li>"+e.responseJSON.state_reason+"</li>"),$.scrollTo(r))},beforeSend:function(){$(".js-account-form-submit").prop("disabled",!0),e.addClass("loading")},complete:function(){$(".js-account-form-submit").prop("disabled",!1),e.removeClass("loading"),o.remove()}}))}),e.on("change",'input[name="account[type]"]',function(){var t=e.find("#business_id_section");$("#account_type_business").is(":checked")?t.show():(t.hide(),t.find(":input").each(function(){$(this).data("validations",[])}))})})}),$(function(){function e(){$("#account-setup-panel").trigger("project_build:refresh")}$("#account-setup-panel .NS_accounts__edit .account-pending").livequery(function(){$.pollster($(this).attr("data-url"),function(t){var n=t.identity.state;if("passed"===n)growl({success:I18n.t("onloads.views.accounts.processing_state.Your_identity_and_banking_information_has_been_approved")});else{if("failed"!==n)return!1;growl({error:I18n.t("onloads.views.accounts.processing_state.We_need_more_information_to_verify_your_identity")})}return e(),!0})})}),define_namespace("body#accounts_edit",function(){var e="https://api.stripe.com/v1/tokens",t=$("#edit-account-form");$(".js-stripe_form").on("submit",function(n){n.preventDefault();var i=$(n.target),r={};i.find("input[type=submit]").attr("disabled","disabled"),i.find(".js-stripe_input").each(function(){var e=$(this);r[e.data("stripe")]=e.val()}),$.ajaxSetup({headers:{Authorization:"Bearer "+i.data("stripe-public-key")}}),$.post(e,{pii:r}).done(function(e){t.find("#account_personal_id_token").val(e.id),t.submit()}).fail(function(e){i.find("input[type=submit]").attr("disabled",null),i.find(".errored").text(e.responseJSON.error.message).removeClass("hide")})})}),$(function(){var e={};$(".NS-activity-card-_backing").livequery(function(){var t=$(this),n=t.data("project_id"),i=t.data("user"),r=e[n]||[],o=[i];_.each(r,function(e){e.$div.hide(),o.push(e.user)}),o.length>1&&(t.find(".js-backers").html(formatters.to_sentence(_.map(o,function(e){return'<a href="'+e.urls.web.user+'" class="link-green-dark bold">'+e.name+"</a>"}))),t.find(".js-avatar").replaceWith(render("activity/card/_backing_avatars",{backers:_.sample(o,3)}))),r.push({$div:t,user:i}),e[n]=r})}),define_namespace("body#activity_index",function(e){function t(e){var t=e.find(".timeline_header:first"),i=t.data("time_bucket");-1===n.indexOf(i)&&(n.push(i),t.find(".timeline_header_name:first").css({display:"block"}))}var n=[];$(".dashboard_activities .activity",e).livequery(function(){t($(this))}),$(document).on("click",".NS_post_likes__button form .js-like",function(){track("Activity Like")})}),$(function(){$(document).on("click",".activity_mini_comment .excerpt a",function(e){e.preventDefault();var t=$(this),n=t.parents("blockquote.excerpt"),i=n.siblings("blockquote.everything");n.hide(),i.css("display","inline")})}),define_namespace(".NS-assets__list",function(e){var t=new root.AssetsListController(e.data("assets"),e.data("assets_list_options"));e.on("assets_list:item_added",function(e,n){t.add_item(n)}),e.define_renderer(function(t){e.html(t.map(function(t,n){var i=t.get();i.item_index=n;var r=render(e.data("assets_list_options").item_template,i,["assets/_fields_template"]),o=$(r);return o.on("click",".js-asset-destroy",function(e){e.preventDefault(),t.set("_destroy",!0)}),o}))}),t.attach(e)}),$(function(){var e=".NS_backer_backing_notes__form";$(document).on("submit",e,function(){var e=$(this);e.trigger("backer_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})}),define_namespace("body#backer_report_index",function(e){function t(e,t){t.closest(n).addClass("generating"),$.pollster(e,function(e){return e.email_url&&$(n+" a.email_me").attr("href",e.email_url).show(),e.uploaded||"completed"===e.state?($(n+" .progress .bar").width("100%"),$(n+" .success a.download").attr("href",e.download_url),$(n).removeClass("generating").addClass("success"),!0):("undefined"!=typeof e.percent&&$(n+" .progress .bar").width(e.percent+"%"),!1)},{delay:500,continue_on_error:!0})}var n=".NS-backer_report_export";e.on("submit",n+" form",function(e){var n=$(this),i=n.find(".report_type select").val(),r=n.find(".select.report_type").data("all_reports_url"),o=n.find(".report_format select").val();e.preventDefault(),i&&("all"===i?(track("Backer Report Export",{export_type:"all"}),$.ajax({type:"post",url:r,data:{report_format:o},dataType:"json",success:function(e){t(e.poll_url,n)}})):(track("Backer Report Export",{export_type:"tier"}),$.ajax({type:"get",url:i,data:{"new":"true",report_format:o},dataType:"json",success:function(e){t(e.poll_url,n)}})))}),e.on("click",n+" a.email_me",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(e){e&&200!==e.status?this.error():$(n+" .email_me_container").empty().html(I18n.t("onloads.views.backer_report.export.Well_send_you_an_email_when_this_report_is_ready"))},error:function(){$(n+" .email_me_container").empty().html(I18n.t("onloads.views.backer_report.export.There_was_an_error_requesting_the_email"))}})}),e.on("click",n+" a.reset",function(e){track("Backer Report Another Export"),$(n).removeClass("generating").removeClass("success"),$(n+" .email_me_container").empty().html(I18n.t("onloads.views.backer_report.export.Email_me_when_ready")),$(n+" .bar").css("width","0%"),e.preventDefault()}),e.on("click",n+" .js-export-warning--continue",function(e){e.preventDefault();var t=$(this).closest(n),i=t.find(".js-export-warning"),r=t.find(".js-export-form");i.hide(),r.show()})}),$(function(){function e(){return URI(History.getState().url)}function t(){$("form.term").term_form().bind("submit",function(e){e.preventDefault();var t=$(this);a.set_params(t.serialize_without_blank()),track("Backer Report Search",{term:t.find(":input").val()})})}function n(){var e=$(".dropdown a.selected"),t={};e.each(function(){var e=$(this);_.extend(t,URI(e.attr("href")).query(!0))}),a.set_params($.param(t),!0)}function i(e){e.is(".selected")||($("#main tbody tr").removeClass("selected"),e.addClass("selected"),l=!0,$(".NS_backers__info:visible").trigger("close").length&&e.find(".backer a").click(),l=!1,e.index()>e.parent().children().length-10&&!a.mobius.paused&&a.mobius.load_next())}function r(){var e=$("#main tbody tr.selected");i(e.length?e.next():$("#main tbody tr:first"))}function o(){var e=$("#main tbody tr.selected");i(e.length?e.prev():$("#main tbody tr:last"))}if(root.backers){var a,s=[],c=e(),l=!1,u=c.query(!0).show_responses||KSR.store.getItem("backer_report_show_responses");a=new Location(null,$("#main"),"backer_report/_index",{mobius_on:"backers"}),track("Backer Report View"),_.has(c.query(!0),"show_responses")&&KSR.store.setItem("backer_report_show_responses",c.query(!0).show_responses),"string"==typeof u&&(u="true"===u),a.on_change_params(function(){s=[],t(),function(){var t=e().query(!0).reward_id,n=$(".NS-backer_report__header .remote_modal_dialog");t&&n.attr("href",URI(n.attr("href")).removeSearch("reward_id").addSearch("reward_id",t))}(),$("form.term .text").trigger("keydown"),a.get("params.reward_id")||"dropped"===a.get("params.status")||($("#reward, #reward_message, ul.dropdown li.all").remove(),$(".reward_tiers .title > span.reward b").text(I18n.t("onloads.views.backer_report.index.All_rewards")));var n=$("#main input[name=note]:visible, #main input[name=note_not]:visible");n.focus(),n.val(n.val()),a.change()}),$(document).on("click","#main table th",function(t){var n,i=$(this).data("sort"),r=e(),o=r.search(!0);i&&(t.preventDefault(),"asc"===o.asc_or_desc&&o.sort_by===i?(n="desc",r.removeSearch("asc_or_desc").addSearch("asc_or_desc",n)):(n="asc",r.removeSearch("asc_or_desc").addSearch("asc_or_desc",n)),r.removeSearch("sort_by").addSearch("sort_by",i),track("Backer Report Sort",{selected_sort:i,selected_order:n}),a.set_params(r.query()))}),a.on_change(function(){var e=$("#main");_.each(this.get("backers"),function(t){_.contains(s,t.id)||(s.push(t.id),t.project_is_successful="successful"===a.get("project.state"),t.showMessages=a.get("showMessages"),t.showRewards=a.get("showRewards"),t.show_responses=u,e.find("table tbody").append(render("backer_report/_row",t)))})}),$(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.params&&a.set_params(e.params),"string"==typeof e.modal_url?$.open_remote_modal_dialog(e.modal_url):(l=!0,$(".modal_dialog:has(.NS_backers__info):visible").trigger("close"),l=!1))}),$(window).on("set_params",function(e,t){a.set_params(t)}),$(document).on("click","#main .dropdown a",function(e){var t=$(this),i=t.closest(".dropdown"),r=i.closest(".ksr-dropdown");i.find("a").removeClass("selected"),t.addClass("selected"),n(),e.preventDefault(),r.hasClass("reward_tiers")?track("Backer Report Reward Filter",{selected_tier:$.trim($(this).find("b").text())}):r.hasClass("views")&&track("Backer Report Views Filter",{selected_tier:$.trim($("#main .reward_tiers .title b").text()),selected_view:$.trim($(this).find("span").text())})}),$(document).on("keyup","form.aggregations input[name=note], form.aggregations input[name=note_not]",function(e){13===e.which&&$(this).trigger("change")}),$(document).on("click","#main table tbody tr a",function(){var e=$(this);i(e.closest("tr"))}),$(window).on("backer_completed",function(e,t,n){var i=$("#main table tbody tr td.completed a, .NS_backers__info a.completed_toggle").filter("[data-backer_id="+t+"]");i.toggleClass("completed",n)}),$(window).on("creator_backing_note:added",function(e,t,n){$("#main table tbody tr[data-backing_id="+t+"] td.notes a").text(n)}),$(window).on("message_sent",function(e,t,n){$("#main table tbody tr[data-backing_id="+t+"] td.actions a").html('<span class="ss-icon ss-mail"></span> ('+n+")")}),$(window).on("modal_dialog:opened",function(t){var n=$(t.target),i=n.data("modal_dialog");History.busy()||History.pushState({modal_url:i.remote_url},null,e().hash("").toString())}),$(window).on("modal_dialog:remote_dialog_loaded",function(e){var t=$(e.target),n=t.data("modal_dialog"),i=n.$elem.find("div[data-backing_id]").data("backing_id"),a=$('tr[data-backing_id="'+i+'"]'),s=a.prev("tr"),c=a.next("tr"),l=t.find(".NS_backers__info");c.length&&$('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),r(),track("Backer Info Modal Next",{event_type:"click"})}).prependTo(l.find(".controls")),s.length&&$('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),o(),track("Backer Info Modal Previous",{event_type:"click"})}).prependTo(l.find(".controls"))}),$(window).on("closed.modal_dialog",function(){if(!l){var e=$.param(a.get("params")),t=c.clone();History.pushState({params:e},null,t.query(e).hash("").toString())}}),$(window).on("keydown",function(e){if(!$(e.target).is(":input"))switch(e.keyCode){case KEY.J:case KEY.RIGHT:r(),track("Backer Info Modal Next",{event_type:"keyboard"});break;case KEY.K:case KEY.LEFT:o(),track("Backer Info Modal Previous",{event_type:"keyboard"});break;case KEY.ENTER:$(".NS_backers__info:visible").trigger("close").length||$("#main tbody tr.selected td.backer a").click();break;case KEY.ESC:$(".NS_backers__info:visible").trigger("close")}}),$(window).on("message_thread_read",function(e,t){$("#backer_report_backing_"+t.backing.id+" .notification-indicator").removeClass("notification-indicator--active")}),$(window).on("message_thread_unread",function(e,t){$("#backer_report_backing_"+t.backing.id+" .notification-indicator").addClass("notification-indicator--active")}),$(".NS_message_batches__new").livequery(function(){var e=$(".NS_message_batches__new"),t=e.find("form");t.find("textarea").validates_presence(),t.on("submit",function(n){n.preventDefault(),t.validate()&&(track("Message Tier Sent"),$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(){e.find("textarea").val(""),t.hide(),e.find(".success").show()},error:function(e){growl({error:e.statusText})}}))})}),a.set($.parseEscapedJSON(root.backers)),a.change_params(c.query()),root.backers=a}}),$(function(){var e=".NS_backers__info";$(document).on("click",e+" .pledge .reward_details",function(e){e.preventDefault();var t=$(this).closest(".pledge");t.find(".description").toggle(),t.find(".description_short").toggle(),t.trigger("resize")}),$(document).on("click",e+" a.completed_toggle, #backer_report_index #main table tbody tr td.completed a",function(e){var t,n=$(this),i=n.is(".completed");$.ajax({url:n.attr("href"),type:"put",dataType:"json",data:{"backer[completed]":!i},success:function(e){n.trigger("backer_completed",[n.data("backer_id"),!i,e.completed_at]),n.toggleClass("completed",!i),e.completed_at&&n.find("span.date").text(e.completed_at)}}),n.closest(".modal_dialog").length?t="backer_modal":n.closest("td.completed").length&&(t="backer_row"),i?track("Rewards Sent Unchecked",{context:t}):track("Rewards Sent Checked",{context:t}),e.preventDefault()}),$(document).on("click",e+" .tab-nav a",function(t){t.preventDefault();var n=$(this).attr("rel"),i=$("."+n);$(e+" .panel").hide(),i.show(),$(".tab-nav li").removeClass("selected"),$(this).closest("li").addClass("selected"),track("Backings Show Toggle Tab",{toggled_to:n})}),$(document).on("ksr_json:complete",e+" .messages_panel",function(){var e=$(this),t=e.find(".message").length+1;e.trigger("message_sent",[e.data("backing-id"),t])}),$(document).on("message_sent",e+" .messages_panel",function(t,n,i){var r=$(this);r.closest(e).find(".messages_link").html(I18n.t("onloads.views.backers.info.Messages_count",{count:i}))})}),$(function(){var e=".NS_backings__info";$(document).on("message_sent",e+" .messages_panel",function(t,n,i){var r=$(this);r.closest(e).find(".messages_link").html(I18n.t("onloads.views.backings.info.Messages_count",{count:i}))}),$(document).on("click",e+" .js-backing-complete form",function(t){var n=$(this),i=n.find("label.with_data"),r=n.find(".checkbox"),o=!i.data("completed");t.preventDefault(),$.ajax({url:n.attr("action"),data:{"backing[backer_completed]":o},dataType:"json",type:"PUT",success:function(t){n.trigger("backer_completed",[n.closest(e).data("backing_id"),t.backing.completed_at]),r.prop("checked",o),i.data("completed",o)}})})}),define_namespace("#backings_index",function(e){function t(){return URI(History.getState().url)}function n(e){return e.closest("section").data("collection_state")}function i(e){return e.closest("section").find("table")}function r(t){e.find("#backing_"+t.get("id")).each(function(){var e=$(this),i=n(e);e.replaceWith(o(t,i))})}function o(e,t){return render("backings/_row_"+t,presenters["backings/_row"]($.extend({},e.get())))}function a(e,t){return render("backings/_"+t,presenters["backings/_table"]($.extend({},e)),["backings/_row_"+t])}function s(e){i(e).removeClass("table_loading")}function c(e){i(e).addClass("table_loading")}function l(e){var t=i(e);return t.hasClass("table_loading")}function u(e){l(e)||e.is(".selected")||($("#main tbody tr").removeClass("selected"),e.addClass("selected"),m=!0,$(".NS_backings__info:visible").trigger("close").length&&e.find("a.more").click(),m=!1)}function d(){var e=$("#main tbody tr.selected");u(e.length?e.next():$("#main tbody tr:first"))}function f(){var e=$("#main tbody tr.selected");u(e.length?e.prev():$("#main tbody tr:last"))}var p,h=["active","collected","uncollected"],m=!1,g=t(),v=150;e.on("backer_completed",function(e,t,n){var i=Backing.find(t);i.set("completed_at",n),r(i)});var y=!1;e.on("click","a.backer_completed_at",function(e){e.preventDefault(),setTimeout(function(){y=!0,e.target.checked=!e.target.checked,$(e.target).change()},0)}),e.on("change","a.backer_completed_at input.checkbox",function(e){if(!y)return void e.preventDefault();y=!1;var t=$(this),n=t.closest("a"),i=t.is(":checked");l(t)||$.ajax({url:n.attr("href"),data:{"backing[backer_completed]":i},dataType:"json",type:"PUT",success:function(e){e.backing&&n.trigger("backer_completed",[e.backing.id,e.backing.completed_at])}})}),e.on("message_sent",function(e,t,n){var i=Backing.find(t);i.set("messages",{count:n,last_activity_at:moment().unix()}),r(i)}),e.on("click","#main table tbody tr",function(e){var t=$(this),n=$(e.target);return l(t)?void e.preventDefault():void(n.closest("input, label, a.more, a.messages").length>0||(track("Backings Show Modal",{how_triggered:"row"}),t.find("td a.more").click()))}),e.on("click","a.more span.ss-icon",function(){track("Backings Show Modal",{how_triggered:"icon"})}),e.on("click","table th.sortable",function(e){var t=$(this),i=t.closest("table"),r=n(t),a=t.hasClass("asc")?"asc":"desc",l=Math.min(i.find("tbody tr").length,v),u=t.data("sort"),d=URI(i.data("url"));e.preventDefault(),track("Backings "+formatters.capitalize(r)+" Sort",{selected_sort:u}),d.addSearch({direction:a,sort:u,page:1,per_page:l}),p&&p.abort(),p=$.ajax({url:d.toString(),dataType:"json",beforeSend:function(){c(t)},complete:function(){s(t),p=void 0},success:function(e){var n;n=_.map(e.backings,function(e){return o(new Backing(e),r)}),i.find("tbody").html(n),i.data({sort:u,direction:a}),i.find("th").not(t).removeClass("active asc").addClass("desc"),t.addClass("active").removeClass(a).addClass("desc"===a?"asc":"desc"),i.find("tbody tr").length<e.total&&t.closest("section").find("a.show_more_backings").show()}})}),$(document).on("click","a.show_more_backings",function(e){var t=$(this),r=i(t),a=n(t),s=r.data("sort");e.preventDefault(),l(t)||(track("Backings "+formatters.capitalize(a)+" More",{selected_sort:s}),p&&p.abort(),p=$.ajax({url:r.data("url"),data:{direction:r.data("direction"),page:Math.floor(r.find("tbody tr").length/v)+1,per_page:v,sort:s},beforeSend:function(){t.addClass("loading")},complete:function(){t.removeClass("loading"),p=void 0},success:function(e){var i,a=n(t),s=r.find("tbody tr").length,c=0;v>s&&(c=s),i=_.chain(e.backings).rest(c).map(function(e){return o(new Backing(e),a)}).value(),r.find("tbody").append(i),r.find("tbody tr").length>=e.total&&t.hide()}}))}),$(window).on("statechange",function(){var e=History.getState().data;e&&("string"==typeof e.modal_url?$.open_remote_modal_dialog(e.modal_url):(m=!0,$(".modal_dialog:has(.NS_backings__info):visible").trigger("close"),m=!1))}),e.on("click","#main table tbody tr a.remote_modal_dialog",function(){u($(this).closest("tr"))}),$(window).on("modal_dialog:opened",function(e){var n=$(e.target),i=n.data("modal_dialog");History.busy()||History.pushState({modal_url:i.remote_url},null,t().hash("").toString())}),$(window).on("modal_dialog:remote_dialog_loaded",function(t){var n=$(t.target),i=n.data("modal_dialog"),r=i.$elem.find("div[data-backing_id]").data("backing_id"),o=e.find("#backing_"+r),a=o.prev("tr"),s=o.next("tr"),c=n.find(".NS_backings__info");s.length&&$('<a class="next btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(e){e.preventDefault(),d()}).prependTo(c.find(".controls")),a.length&&$('<a class="prev btn btn--dark-green btn--large" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(e){e.preventDefault(),f()}).prependTo(c.find(".controls"))}),$(window).on("closed.modal_dialog",function(){if(!m){var e=g.clone();History.pushState(null,null,e.hash("").toString())}}),$(window).on("keydown",function(e){if(!$(e.target).is(":input"))switch(e.keyCode){case KEY.J:case KEY.RIGHT:d();break;case KEY.K:case KEY.LEFT:f();break;case KEY.ENTER:$(".NS_backings__info:visible").trigger("close").length||$("#main tbody tr.selected td a.more").click()}}),_.each(h,function(e){var t=JSON.parse(_.unescape(root[e]));t.backings=_.map(t.backings,function(e){return new Backing(e)}),$("#"+e).append(a(t,e))})}),define_namespace("#NS_banners__password_reset",function(e){var t=!1,n=e.closest("li");t=KSR.store.getItem("password_reset_dismissed"),t||n.show(),e.find("a.dismiss").on("click",function(e){KSR.store.setItem("password_reset_dismissed",!0),n.hide(),e.preventDefault()})}),define_namespace("body#blog_posts_category",function(e){var t,n;t=$("#sidebar",e),t.sticky_bar({parent:t.closest("#content")}),n=$(".mobius",e),$("div.load_more",e).show(),$("div.pagination",e).hide(),n.persistent_paging()}),define_namespace(".NS_blogs__blog_header",function(){$(".js-show-blog-search").on("click",function(e){$(".js-blog-search").addClass("is-visible"),$(".js-blog-search input.text").focus(),e.preventDefault()}),$(".js-blog-search input.text").on("blur",function(){$(".js-blog-search").removeClass("is-visible")})}),define_namespace("body#checkouts_thanks",function(e){$(".short_url",e).click(function(){$(this).select(),track("Checkout Share",{share_type:"copy_link"})}),$(".verifying",e).livequery(function(){$.pollster($(this).data("poll_url"),function(e){return"verifying"!==e.state?(window.location.reload(),!0):void 0},{delay:2500})}),e.find(".js-facebook-share").click(function(e){if(e.preventDefault(),"undefined"!=typeof FB){$.ajax($(this).data("ks-share-url")),track("Checkout Show Share",{share_type:"facebook"});var t=$(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&"undefined"==typeof e.error_code?(growl({success:I18n.t("onloads.views.checkouts.thanks.Facebook_post_was_published")}),track("Checkout Share",{share_type:"facebook"})):growl({notice:I18n.t("onloads.views.checkouts.thanks.Facebook_post_was_not_published")})})}}),twttr.ready(function(t){t.events.bind("click",function(){track("Checkout Show Share",{share_type:"twitter"}),$.ajax(e.find(".js-twitter-share").data("ks-share-url"))})})}),define_namespace("body#claims_new",function(){$(".js-not-contacted").on("click",function(){$(".js-not-contacted-message").show(),$(".js-claim-info").hide(),$(".js-owner-section").hide(),$(".js-yes-contacted").hide()}),$(".js-contacted").on("click",function(){$(".js-not-contacted-message").hide(),$(".js-claim-info").show()}),$(".js-type-owner").on("click",function(){$(".js-trademark-section").length?($(".js-none-of-the-above-error").hide(),$(".js-trademark-section").show(),$(".js-contacted").prop("checked",!1),$(".js-not-contacted").prop("checked",!1),$(".js-not-contacted-message").hide(),$(".js-claim-info").hide(),$(".js-owner-name").hide(),$(".js-owner-name-text").val(""),$(".js-owner-name").hide()):($(".js-none-of-the-above-error").hide(),$(".js-not-contacted-message").hide(),$(".js-claim-info").show(),$(".js-owner-name").hide(),$(".js-owner-name-text").val(""))}),$(".js-type-representative").on("click",function(){$(".js-trademark-section").length?($(".js-none-of-the-above-error").hide(),$(".js-trademark-section").show(),$(".js-contacted").prop("checked",!1),$(".js-not-contacted").prop("checked",!1),$(".js-not-contacted-message").hide(),$(".js-owner-name").show(),$(".js-claim-info").hide(),$(".js-owner-name").show()):($(".js-none-of-the-above-error").hide(),$(".js-not-contacted-message").hide(),$(".js-claim-info").show(),$(".js-owner-name").show())}),$(".js-type-none").on("click",function(){$(".js-trademark-section").length?($(".js-none-of-the-above-error").show(),$(".js-trademark-section").hide(),$(".js-not-contacted-message").hide(),$(".js-claim-info").hide()):($(".js-none-of-the-above-error").show(),$(".js-claim-info").hide())})}),$(function(){var e=".NS_comments__comment";$(".js-could-have-comments").length&&($(document).on("click",e+" a.report_spam",function(e){e.preventDefault();var t=$(this),n=this,i=t.closest(".comment");$.modal_confirm(function(){return KsrJSON.get(t.data("url"),"post",i.find(".ajax-container"),n)},{message:I18n.t("onloads.views.comments.comment.We_review_all_reports_with_care_but_please_keep_in_mind"),title:I18n.t("onloads.views.comments.comment.Report_this_comment_to_Kickstarter"),confirm_text:I18n.t("onloads.views.comments.comment.Yes_report_as_spam")})}),$(document).on("ksr_json:complete",e+" .spam_reported",function(e,t){var n=$(this).closest(".comment"),i=n.find(".report_spam");i.hide(),200!==t.status||i.is(".admin")||n.find(".body").hide()}))}),$(function(){var e="form#new_comment";$(e).livequery(function(){function e(){var e=t.closest(".js-comments").find(".list-comments li.comment:first");return current_project&&current_project.get("comments_loaded")&&e.length?parseInt(e.attr("id").match(/\d+/)[0],10):void 0}var t=$(this);t.on("click",":submit",function(n){if(current_project&&current_project.get("comments_loaded")&&current_project.get("comments_count")-current_project.get("comments_loaded")>50)return!0;n.preventDefault();var i=t.find("input.submit"),r=i.val(),o=e(),a=_.reduce(t.serializeArray(),function(e,t){return e[t.name]=t.value,e},{});o&&(a.cursor=o),i.hasClass("disabled")||(i.addClass("disabled"),i.val(I18n.t("onloads.views.comments.form.Posting")),$.ajax({type:t.attr("method"),url:t.attr("action"),dataType:"json",data:a,success:function(e){var n=t.closest(".js-comments"),i=n.find(".list-comments"),r=n.find("header");_.isArray(e.flash)&&_.isArray(e.flash[0])&&(e.flash=_.object(e.flash)),growl(e.flash),e.html&&(t.each(function(){
"undefined"!=typeof this.reset&&this.reset()}),i.length||(i=$('<ol class="list-comments click"><li class="page"><ol class="comments"></ol></li></ol>'),r.length?r.after(i):n.append(i)),e.comments_count&&current_project&&current_project.get("comments_loaded")&&(current_project.set("comments_loaded",current_project.get("comments_loaded")+$(e.html).length),current_project.set("comments_count",e.comments_count)),$("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)+1}),i.closest(".project_preview_comments").addClass("has_comments"),$("body#proposals_show").length?i.append(e.html):i.find(".page ol.comments").prepend(e.html))},complete:function(){i.removeClass("disabled"),i.val(r)}}))})})}),function(){$(".js-could-have-comments").length&&$(".load_new_comments").livequery(function(){function e(e){"undefined"==typeof e&&(e={});var t=e.comments_count||current_project.get("comments_count"),i=e.comments_loaded||current_project.get("comments_loaded"),r=t-i;n.text(r),s.find(".pluralize").text(formatters.pluralize("comment",r)),r>0?s.show():s.hide()}function t(e,t){var n,i=$(this),r=new URI(this.href).removeQuery("cursor").addQuery({cursor:e});"asc"===t&&r.addQuery({direction:t}),n=r.toString(),$.ajax({url:n,beforeSend:function(){i.addClass("loading")},complete:function(){i.removeClass("loading")},success:function(e){var n="asc"===t?"prepend":"append";"asc"===t&&current_project.set("comments_loaded",e.comments_count),current_project.set("comments_count",e.comments_count),$("ol.list-comments ol.comments:first")[n](e.comments)},error:function(){growl({error:I18n.t("onloads.views.comments.list.Sorry_we_couldnt_load_comments_just_now")})}})}var n,i,r,o,a,s=$(".load_new_comments");s.length&&(n=s.find("span.new_comments_count"),i=s.find("a"),r=$(".Project"+current_project.get("id")+'[itemprop="Project[comments_count]"]'),o=$.trim(r.text()),o=o.replace(/\D/g,""),current_project.set("comments_count",parseInt(o,10)),$(".latest_comment").livequery(function(){a||(a=!0,current_project.on_change("comments_count",e),current_project.on_change("comments_loaded",e)),current_project.set("comments_loaded",current_project.get("comments_count")),e()}),$(".earliest_comment").livequery(function(){$("a.older_comments").hide()}),$(".comment").livequery(function(){var e,t,n=$(this).find('[itemprop="Comment[created_at]"]'),i={};n.each(function(e,n){var r,o=$(n);o.attr("itemprop")&&(r=o.attr("itemprop").match(/Comment\[(\w+)\]/),r&&(i[r[1]]=JSON.parse(o.data("value")),t||(t=o.attr("class").match(/Comment(\d+)/)[1])))}),e=Comment.find(t)||new Comment({id:t}),e.set(i)}),i.click(function(e){if(!$(this).hasClass(".loading")){e.preventDefault();var n=$(".comments li:first");track("Project Comment Load New"),current_project.get("comments_count")-current_project.get("comments_loaded")>50?window.location.href=window.location.href:t.call(this,n.attr("id").match(/\d+/)[0],"asc")}}),$(document).on("click",".older_comments",function(e){e.preventDefault();var n=$(".comments li:last");!$(this).hasClass(".loading")&&n.length&&(track("Project Comment Load Older"),t.call(this,n.attr("id").match(/\d+/)[0],"desc"))}),$(".comment-moderation, .backer_info","ol.list-comments").livequery(function(){$(this).removeClass("hidden")}),$(document).on("submit","ol.list-comments form.delete_comment",function(e){e.preventDefault();var t=$(this),n=t.closest(".comment");$.ajax({url:t.attr("action"),dataType:"json",type:"delete",success:function(){n.hide(),$("#project-edit-nav .preview .count").text(function(e,t){return parseInt(t,10)-1}),$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments")}})}))})}(),$(function(){$(document).on("submit","#beneficiary_container form.beneficiary_reset",function(e){var t=$(this),n=$('<div class="spinner" />').spin("ksr","#fff");t.closest("#beneficiary_container").append(n),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"html",success:function(e){t.closest("#account-setup-panel").html(e)}}),e.preventDefault()})}),define_namespace("body#country_signups_netherlands",function(e){function t(){var e=$(window).height()-$("#header-wrap").height(),t=$(window).width(),i=t/e;n.css({height:e,"min-height":"660px"}),1.777777>i?n.find("video").css({height:e,width:"auto",left:"50%",top:0,"margin-top":0,"margin-left":-n.find("video").width()/2}):(n.find("video").css({height:"auto",width:t,left:0,"margin-left":0,top:"50%","margin-top":-n.find("video").height()/2}),620>e&&n.find("video").css({"margin-top":-360}))}var n=e.find(".video-banner");$(document).resize(function(){t()}),t()}),define_namespace("body.country_signups",function(){$("input#signup_email").validates_presence().validates_email(),$("form#new_signup").on("submit",function(e){var t=$(this);return e.preventDefault(),t.validate()?void $.ajax({url:t.attr("action"),data:t.serialize(),type:t.attr("method"),dataType:"json",success:function(){$(".error_message").hide(),$(".submitting").hide(),$(".submitted").show()},error:function(){t.find("#signup_email").addClass("errored")}}):($("#signup_email").addClass("errored"),$(".error_message").show(),!1)})}),$(function(){var e=".NS_creator_backing_notes__form";$(document).on("submit",e,function(){var e=$(this);"undefined"!=typeof ga&&ga("send","event","Backing Notes","Save",$("body").attr("id")),e.trigger("creator_backing_note:added",[e.data("backing_id"),e.find("textarea").val()])})}),function(){function e(e,t){return function(n,i){return i.error?(t.hide(),track("Stripe Error",{error_message:i.error.message}),i.error.message):(e.find("#stripe_token").val(i.id),void e.submit())}}root.stripeResponseHandler=e}(),define_namespace("#credit_card_form.js-ksr-stripe",function(e){function t(e){return"string"==typeof e?$.trim(e):e}function n(e){var t=e.data("error");"undefined"!=typeof t&&j.hasOwnProperty(t)&&(e.attr("aria-invalid",!0).closest("li").addClass("invalid").find(".js-error-messages").html("<li>"+j[t]+"</li>"),track("Checkout Error",{type:t}))}function i(e){var t;return t=/^(450823|450875|450878)/.test(e)?"visa":$.payment.cardType(e)}function r(e){return _.include(w,e)}function o(e){return $.payment.validateCardNumber(e)}function a(e,t){return $.payment.validateCardCVC(e,t)}if(0===$("#react-cc-form").length){var s=e.find("form"),c=$("#saving-layer"),l=e.find(".errored"),u=s.find("#name"),d=s.find("#number"),f=s.find("#cvc"),p=s.find("#exp_month"),h=s.find("#exp_year"),m=s.find("#reusable"),g=$("#js-stripe_form"),v=g.find("#stripe_token"),y=g.find("#stripe_reusable"),b=g.find("#payment_type"),w=s.data("accepted-card-types"),k="new",x="stored",j={name_presence:I18n.t("onloads.views.credit_cards.form.Cardholder_name_must_be_present"),number_presence:I18n.t("onloads.views.credit_cards.form.Card_number_must_be_present"),number_invalid:I18n.t("onloads.views.credit_cards.form.Card_number_format_is_invalid"),type_invalid:I18n.t("onloads.views.credit_cards.form.Card_type_is_not_accepted"),security_code_presence:I18n.t("onloads.views.credit_cards.form.Card_security_code_must_be_present"),security_code_invalid:I18n.t("onloads.views.credit_cards.form.Card_security_code_format_is_invalid"),exp_month_presence:I18n.t("onloads.views.credit_cards.form.Card_expiration_month_must_be_present"),exp_month_invalid:I18n.t("onloads.views.credit_cards.form.Card_expiration_date_must_be_in_the_future"),exp_year_presence:I18n.t("onloads.views.credit_cards.form.Card_expiration_year_must_be_present"),exp_year_invalid:I18n.t("onloads.views.credit_cards.form.Card_expiration_date_must_be_in_the_future"),stripe_timeout:I18n.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")},C=k;u.validates_presence({error:"name_presence"}),d.validates_presence({error:"number_presence"}),d.validates_custom(function(e){return o(e)},{error:"number_invalid",when:function(){return $.trim(d.val()).length>0}}),d.validates_custom(function(e){return r(i(e))},{error:"type_invalid",when:function(){return $.trim(d.val()).length>0&&o(d.val())}}),f.validates_presence({error:"security_code_presence"}),f.validates_custom(function(e){return a(e,i(d.val()))},{error:"security_code_invalid",when:function(){return $.trim(f.val()).length>0}}),p.validates_presence({error:"exp_month_presence"}),p.validates_custom(function(e){return parseInt(e,10)>=(new Date).getMonth()+1},{error:"exp_month_invalid",when:function(){return parseInt(h.val(),10)<=(new Date).getFullYear()}}),h.validates_presence({error:"exp_year_presence"}),h.validates_custom(function(e){return parseInt(e,10)>=(new Date).getFullYear()},{error:"exp_year_invalid"}),u.add(d).add(f).on("keyup input paste cut",function(){$(this).validate()}).on("blur",function(){n($(this))}),p.on("change",function(){p.validate(),n(p),h.validate(),n(h)}),h.on("change",function(){h.validate(),n(h),p.validate(),n(p)}),s.find(":input").on("validate:valid",function(){$(this).data("error",null).attr("aria-invalid",!1).closest("li").removeClass("invalid")}).on("validate:invalid",function(e,t){$(this).data("error",t)}),d.on("validate:valid",function(){e.find("#js-card_type_list").addClass("selected").find(".js-"+i(d.val())).addClass("selected")}).on("validate:invalid",function(){e.find("#js-card_type_list").removeClass("selected").find("li").removeClass("selected")}),d.payment("formatCardNumber"),f.payment("formatCardCVC"),s.on("submit",function(e){if(e.preventDefault(),s.validate()){l.html("").addClass("hide"),c.show();var i=setTimeout(function(){var e="stripe_timeout";c.find(".modal_dialog_body").html(j[e]),c.removeClass("spinning"),track("Checkout Error",{type:e}),$.ajax({url:"/client_error",type:"post",data:{error:"stripe timeout",url:window.location.toString()}})},3e4);Stripe.setPublishableKey(s.data("public-key")),Stripe.card.createToken({name:t(u.val()),number:t(d.val()),exp_month:t(p.val()),exp_year:t(h.val()),cvc:t(f.val())},function(e,t){t.error?(clearTimeout(i),c.hide(),l.html("<li>"+t.error.message+"</li>").removeClass("hide"),track("Checkout Error",{type:"stripe_token",context:t.error.message})):(v.val(t.id),y.val(m.is(":checked")),b.val("credit_card"),g.submit())})}else s.find(":input").each(function(){n($(this))})}),function(){function t(e){e.preventDefault(),$(".payment_option.selected").find(".account_toggle.radio").length?n=$("#sepa-account-info"):$(".js-credit-card-choice").length||(n=$("#new_card_form").find("form")),track("Submitted Payment Source Form",{type:C,checkout_reward_id:r,checkout_amount:o}),n.submit()}var n=$("#new_card_form").find("form"),i=$(".selected input.card_toggle"),r=e.data("checkout-reward-id"),o=parseFloat(e.data("checkout-amount"));$("#credit_card_form .errored").not(".hide").length&&(i=$("#new-card input.card_toggle")),i.length||(i=$("input.card_toggle:first")),$(document).on("change click","input.card_toggle",function(e){e.preventDefault();var t,i=$(this),r=$("#new_card_form");i.is("input.card_toggle")||(i=i.find("input.card_toggle")),t=$("input.card_toggle").not(i),t.prop("checked",!1),i.prop("checked",!0),t.closest(".payment_option").removeClass("selected"),i.closest(".payment_option").addClass("selected"),i.closest("#new-card").length?(r.slideDown(400,"easeOutQuad"),n=r.find("form"),C=k):(r.slideUp(400,"easeOutQuad"),n=i.closest("form"),C=x),track("Selected Payment Source",{type:C})}),$(document).on("click",".js-pledge-submit",t),i.prop("checked",!0).trigger("change")}()}}),$(function(){function e(){var e=!0;return $("#sepa-account-info .required :input:not(#sepa_account_number)").each(function(){var t=$(this);$.trim(t.val())?t.closest("li").removeClass("invalid"):(t.closest("li").addClass("invalid"),e=!1)}),$("#accept_terms").is(":checked")?$("#accept_terms").closest("li").removeClass("invalid"):($("#accept_terms").closest("li").addClass("invalid"),e=!1),IBAN.isValid($("#sepa_account_number").val())&&0===$("#sepa_account_number").val().indexOf("DE")?$("#sepa_account_number").closest("li").removeClass("invalid"):($("#sepa_account_number").closest("li").addClass("invalid"),e=!1),e}function t(){var e=$("#reusable").is(":checked"),t=$("#saving-layer"),n=$("#js-stripe_form");n.find("#stripe_reusable").val(e);var i=root.stripeResponseHandler(n,t);Stripe.setPublishableKey(r),Stripe.bankAccount.createToken({country:"DE",account_number:$("#sepa_account_number").val(),currency:"eur",account_holder_name:$("#account_name").val(),address_line1:$("#sepa_address_line1").val(),address_line2:$("#sepa_address_line2").val(),address_city:$("#sepa_address_city").val(),address_zip:$("#sepa_address_zip").val(),usage:"credit_debit"},i)}var n,i=$("#sepa_account_form.js-ksr-stripe"),r=i.find("form").attr("data-public-key"),o=$("#sepa-account-info"),a=o.find(".errored"),s=$("#saving-layer"),c=3e4;$(document).on("change click","input.account_toggle",function(){$(this).closest(".payment_option").addClass("selected");var e=$("input.card_toggle");e.closest(".payment_option").removeClass("selected"),e.prop("checked",!1);var t=$("#new_payment_bank_account");t.slideDown(400,"easeOutQuad"),$("#new_card_form").slideUp(400,"easeOutQuad")}),$(document).on("change click","input.card_toggle",function(){$("input.account_toggle").prop("checked",!1);var e=$("#new_payment_bank_account"),t=$("input.account_toggle");t.closest(".payment_option").removeClass("selected"),e.slideUp(400,"easeOutQuad")}),$(document).on("click",".sepa-terms__toggle",function(e){e.preventDefault(),$(".sepa-terms__mandate").toggleClass("sepa-terms__mandate--expanded")}),o.on("submit",function(i){if(e()){a.hide(),s.show(),$("input#payment_type").val("bank_account");var r=t()||"";r.length&&(clearTimeout(n),a.html(r),a.show(),track("SEPA error",{error_type:"tokenization_error"})),i.preventDefault(),n=setTimeout(function(){s.find(".modal_dialog_body").html(I18n.t("onloads.views.credit_cards.form.Well_this_is_embarrassing_Processing_your_pledge")),s.removeClass("spinning"),$.ajax({url:"/client_error",type:"post",data:{error:"stripe timeout",url:window.location.toString()}})},c)}else i.preventDefault()})}),define_namespace("#credit_cards_index",function(e){var t=e.find(".js-add-source"),n=e.find(".payment_form");t.on("click",function(){n.removeClass("hide"),$(this).addClass("hide")})}),define_namespace("#credit_cards_new",function(e){var t,n=e.find(".js-new-card-form"),i=e.find(".js-credit-card-choice"),r=e.find(".js-edit-ccs"),o=I18n.t("onloads.views.credit_cards.new.This_card_will_not_be_shown_again"),a=I18n.t("onloads.views.credit_cards.new.Edit_credit_cards"),s=I18n.t("onloads.views.credit_cards.new.Cancel"),c=I18n.t("onloads.views.credit_cards.new.Looks_like_something_went_wrong");i.on("click",".js-remove-cc-btn",function(e){t=$(e.delegateTarget)}),$(document).on("click",".js-yes-remove-btn",function(e){e.preventDefault();var r=$(this),a=r.attr("href");$.getJSON(a,function(){if($(".modal_dialog").trigger("close.modal_dialog"),t.remove(),growl({success:o}),$(".js-credit-card-choice").length){var e=i.find(".js-credit-card-info").first();e.click()}else $(".js-stored-card-form").html(n),n.show()}).fail(function(){$(".modal_dialog").trigger("close.modal_dialog"),growl({error:c})})}),r.on("click",function(e){e.preventDefault(),i.find(".js-remove-cc-btn").toggle(),r.toggleClass("js-editing-inactive"),r.hasClass("js-editing-inactive")?($(this).text(a),track("Collapsed Edit Payment Sources Form")):($(this).text(s),track("Expanded Edit Payment Sources Form"))})}),$(".NS-curated_page_projects-new").livequery(function(){var e=$(this),t=e.find("form.curated_pages_form"),n=parseInt($("div.blurb .character_counter .number:first",e).text(),10);$(".blurb textarea",e).validates_max_length().validates_presence(),$(".blurb",e).on("validate:invalid",function(){$(this).addClass("errored")}),$(document).on("validate:valid",".blurb, .meta h1",function(){$(this).removeClass("errored")}),$("div.blurb",e).on("keypress cut paste input",function(){var e=$(this),t=e.find("textarea").val().length,i=n-t;e.find("textarea").validate(),e.find(".character_counter .number").text(i)}),e.find(".save").click(function(){var e=t.find(".buttons .loading");$("div.blurb textarea").validate()&&(e.show(),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"json",global:!1,success:function(n){t.trigger("close.modal_dialog"),t.trigger("project_added_to_curated_page",[n]),e.hide()}}))}),e.find(".cancel").click(function(){$(this).trigger("close.modal_dialog")})}),define_namespace("#curated_pages_reorder",function(e){function t(){$(".js-project").each(function(e){$(this).find("input.text").val(e+1)})}$(".js-project input.text").on("blur",function(){var e=$(this),n=parseInt(e.val(),10),i=e.closest(".js-project");isNaN(n)||($(".js-project").not(i).eq(n-1).before(i),t())}).on("focus",function(){this.select()}),e.find("form ol").sortable({containment:"document",tolerance:"pointer",items:"> li",stop:t})}),$(function(){var e=$("#curated_pages_show"),t="#curated_pages_show form.curated_pages_form",n=$(t);n.length&&(!function(){function i(e){var t=e.siblings(".value"),n=e.children("span.add_prompt");if(!t.siblings("textarea:visible, input:visible").length)return""===$.trim(t.text())?(n.show(),e.addClass("empty")):(n.hide(),e.removeClass("empty")),e}function r(){var e=$("li.curated_page_project:visible:not(.new)"),t=e.length-e.find("div.blurb.errored").length;return""===$.trim($("#curated_page_title:not(:visible)").val())?!1:""===$.trim($("#curated_page_description:not(:visible)").val())?!1:1>t?!1:!0}function o(){var e=$(".submit.launch, #add_shortcut_url");r()?e.removeAttr("disabled").removeClass("disabled"):e.attr("disabled",!0).addClass("disabled")}function a(e){var t=$('<div class="buttons"></div>'),n=e.val(),i=$('<div class="save btn btn--green btn--small">'+I18n.t("onloads.views.curated_pages.show.Save")+"</div>"),r=$('<div class="cancel btn btn--gray btn--small">'+I18n.t("onloads.views.curated_pages.show.Cancel")+"</div>"),o=$('<span class="loading icon-loading-small"></span>');return i.click(function(){e.trigger("close")}),r.click(function(){e.val(n),e.trigger("close")}),o.hide(),t.append(i),t.append(r),t.append(o),t}function s(e){var t={};return e.data("livesearch_result")?(t.html=e.data("livesearch_result").html,t.id=e.data("livesearch_result").id):(t.html=e.data("html"),t.id=e.data("id")),t.card='<div class="project-card-wrap">'+$(t.html).find("div.project-card-wrap").html()+"</div>",t}var c,l=$("#main.published"),u=$("ul.project-card-list.live",e),d=$(".tools .delete").closest("form"),f=!!l.length,p=".find_projects .project-results ul.result_list li",h=$(".find_projects .project-results ul.result_list",e).clone(),m=$(".find_projects .project-results div.instructions",e).clone(),g=!!h.length;$(document).on("form_synced","form.header_form",function(e,t){var n,r=$(this);t.curated_page&&t.curated_page.description&&(n=r.find(".description .value").html(t.curated_page.description),i(n.siblings(".edit_prompt")))}),$(document).on("form_synced","li.curated_page_project > form",function(e,t){var n,r=$(this);t.curated_page_project&&t.curated_page_project.blurb&&(n=r.find(".blurb .value").html(t.curated_page_project.blurb),i(n.siblings(".edit_prompt")))}),e.on("click",".value:not(.image), .edit_prompt",function(){function e(t){t.target===n[0]||$(t.target).is("a.cancel, a.save")||$(document).off("click",e)}var t=$(this),n=$(this).siblings("input, textarea");n.is(":visible")||(n.show().focus(),n.parent().append(a(n)),setTimeout(function(){$(document).on("click",e)},100),t.is(".empty")?t.find(".add_prompt").hide():t.hide(),t.siblings(".value").hide(),t.trigger("field_opened"))}),$(".edit_prompt",n).each(function(){i($(this))}),e.on("close","input:not(.not_edit_in_place), textarea",function(){function e(){r.show(),f||n.show(),t.siblings(".buttons").remove(),t.hide(),t.trigger("field_closed")}var t=$(this),n=t.siblings(".edit_prompt"),r=t.siblings(".value");return t.validate()?void(t.is("textarea")?(t.siblings(".buttons").find(".loading").css("display","inline-block"),t.closest("form").sync_form({success:function(t){t.valid&&e()},complete:function(){t.siblings(".buttons").find(".loading").hide()}})):(r.text(t.val()),i(n),e(),t.closest("form").sync_form())):void t.focus()}),$(document).on("keydown",t+" input:not(.not_edit_in_place)",function(e){13===e.keyCode&&(e.preventDefault(),$(this).trigger("close")),27===e.keyCode&&(e.preventDefault(),$(this).siblings(".buttons").find(".cancel").click())}),$(document).on("click","li.curated_page_project a.remove",function(e){e.preventDefault();var t,n,i=$(this),r=i.closest("form"),a=parseInt(r.find("input.project_id").val(),10);h.find("li").each(function(){$(this).attr("data-id")===a&&$(this).show()}),r.sync_form({type:"delete",success:function(){n&&i.closest("li.curated_page_project").remove(),t=!0}}),i.closest("li.curated_page_project").fadeOut(function(){o(),t&&$(this).remove(),n=!0})}),$(".blurb textarea, .meta .description textarea").livequery(function(){$(this).validates_max_length().validates_presence()}),$("#curated_page_title").data("validations",[[function(e){return e.length||!f?!0:!1}]]),$(document).on("field_opened",".blurb",function(){$(this).find(".label").show(),$(this).find(".character_counter").show()}),$(document).on("field_closed",".blurb",function(){$(this).find(".label").hide(),$(this).find(".character_counter").hide()}),$(document).on("field_opened",".meta .description",function(){$(this).find(".character_counter").show()}),$(document).on("field_closed",".meta .description",function(){$(this).find(".character_counter").hide()}),$(document).on("validate:invalid",".blurb, .meta h1, .meta .description",function(){$(this).addClass("errored")}),$(document).on("validate:valid",".blurb, .meta h1, .meta .description",function(){$(this).removeClass("errored")}),$(document).on("keypress cut paste input field_opened","div.blurb, .meta .description",function(e){var t=$(this),n=t.find("textarea").val().length,i=parseInt(t.find("textarea").data("maxlength"),10)-n;"field_opened"!==e.type&&t.find("textarea").validate(),t.find(".character_counter .number").text(i)}),$(document).on("form_synced","li.curated_page_project",function(e,t){var n=$(this),i=n.find("form");t.valid&&(i.attr("action",t.url),i.attr("method","put"),i.find("#curated_page_project_id").val(t.curated_page_project.id),n.css("border","0"))}),$(document).on("click",".image a.remove",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(e){var n=t.closest(".image");n.find("img").attr("src",e)}})}),e.on("click",".add_project",function(){var e=$(this).closest("li.curated_page_project").find(".find_projects");e.show(),e.find(".input-search").focus()}),$(document).on("livesearch:soft_select livesearch:unselect",p,function(e){var t,n,i=$(this),r=$(this).closest("li.curated_page_project").find(".project");if("livesearch:soft_select"===e.type){if(t=s(i),!t.card)return;n=$(t.card),r.children(".add_project").hide(),r.find(".project-card-wrap").remove(),r.append(n)}else r.find(".project-card-wrap").remove(),r.children(".add_project").show()}),$(document).on("livesearch:selected",p,function(e){e.preventDefault();var t,n,i=$(this),r=s(i),o=$('<li class="curated_page_project">'+r.html+"</li>"),a=i.closest("li.curated_page_project");i.trigger("livesearch:unselect"),h.find("li").each(function(){$(this).attr("data-id")===r.id&&$(this).hide()}),g?(a.find("ul.result_list").replaceWith(h.clone()),a.find(".project-results > h2").text("My Backed Projects"),c.bind_results()):(a.find("ul.result_list").empty().before(m.clone()),a.find(".project-results > h2").text("Adding Projects")),c.livesearch.last_search=!1,a.find("input.input-search").val("").blur(),t=a.find("input.exclude"),n="",u.children("li.curated_page_project").each(function(){var e=$(this).find("input.project_id").val();e&&(n+=e+",")}),n+=o.find("input.project_id").val(),t.val(n),a.hide(),a.after(o),o.find(".blurb .value").click()}),$(document).on("livesearch:results",".find_projects",function(){$(this).find(".project-results > h2").text("Search Results"),$(this).find(".project-results > .instructions").remove()}),$(".find_projects input.input-search").livequery(function(){var e=$(this),t=$(this).siblings("input.exclude"),n=e.siblings(".ss-search");c=e.livesearch_input_dropdown({url:e.data("livesearch-url"),serialize:e.add(t),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(e){return e.name}}).data("livesearch.input_dropdown"),e.on("livesearch:searching",function(){n.removeClass("ss-search").addClass("icon-loading-small")}),e.on("livesearch:results livesearch:ajax_error",function(){n.removeClass("icon-loading-small").addClass("ss-search")})}),$(document).on("form_synced",o),o(),f&&($(document).on("mouseenter","li.curated_page_project, .image.value",function(){$(this).find("a.remove").show()}).on("mouseleave","li.curated_page_project, .image.value",function(){$(this).find("a.remove").hide()}),$(document).on("mouseenter","ul.project-card-list.live .value, .value ~ textarea, .value ~ input",function(){$(this).siblings(".edit_prompt").show()}).on("mouseleave",".value, .value ~ textarea, .value ~ input",function(){$(this).siblings(".edit_prompt:not(.empty)").hide()})),$(document).on("click","#new_root_slug .cancel",function(e){e.preventDefault(),$(this).trigger("close.modal_dialog")}),$(document).on("submit","#new_root_slug",function(e){e.preventDefault();var t=$(this),n=t.find(".shortcut.url");n.addClass("processing"),n.removeClass("invalid"),n.find(".error_message").text(""),$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),dataType:"json",success:function(e){if(n.removeClass("processing"),e.valid){t.trigger("close.modal_dialog");var i=$(".tools .launch");i.length&&i.closest("form").submit(),$("#add_shortcut_url").replaceWith('<a class="btn btn--red shortcut_url" href="'+e.url+'">'+e.url+"</a>")}else t.removeClass("submitting-non-ajax"),n.addClass("invalid"),n.find(".error_message").text(e.errors.slug[0])}})}),d.confirm_submit({title:I18n.t("onloads.views.curated_pages.show.Delete_your_Curated_Page"),copy:I18n.t("onloads.views.curated_pages.show.Are_you_sure_you_want_to_delete_your_current_Curated_Page"),yes_copy:I18n.t("onloads.views.curated_pages.show.Yes_delete"),no_copy:I18n.t("onloads.views.curated_pages.show.Nevermind")})}(),$(".js-add_project").on("click",function(e){var t=$("li.new");t.is(":visible")?t.hide():t.show().find(".add_project").click(),e.preventDefault()}))}),define_namespace("body.discover",function(e){var t,n=$(".mobius",e);n.length&&(t=$("#sidebar",e),t.sticky_bar({parent:t.closest("#content")}),$("div.load_more",e).show(),$("div.pagination",e).hide(),n.persistent_paging())}),define_namespace("#NS_discover__categories",function(e){function t(){var t=e.find("ul.expanded");t.length?e.height(Math.max(r.height(),t.height())):e.height(r.height())}var n=e.find(".categories"),i=e.find(".subcategories_container"),r=e.find(".root-categories");n.find("> li > a").on("click",function(r){var o=$(this),a=o.closest("li"),s=a.data("category")||{},c=s.id||0,l=e.find("#category_"+c+"_subcategories");n.find(".selected").removeClass("selected"),a.addClass("selected"),device_idioms["not-mobile"]&&t(),i.find("ul.expanded").removeClass("expanded"),l.addClass("expanded"),l.length?(e.addClass("expanded"),l.find("li.subcategory > a").first().trigger("click")):($(document).trigger("discovery:categories:changed",s),e.trigger("ksr_popover:close"),e.removeClass("expanded")),r.preventDefault()}),i.find("li > a").on("click",function(t){var n=$(this),i=n.closest("li"),r=n.closest("ul"),o=i.data("category");r.find(".selected").removeClass("selected"),i.addClass("selected"),$(document).trigger("discovery:categories:changed",o),t.originalEvent?e.trigger("ksr_popover:close"):e.trigger("ksr_popover:reposition"),t.preventDefault()}),e.on("ksr_popover:opened",function(){device_idioms["not-mobile"]&&t()}),$(document).on("discovery:sentence:changed",function(t,n){n.category_id||(e.removeClass("expanded").find(".selected, .expanded").removeClass("selected expanded"),e.find("li:first").addClass("selected"))}),$(document).on("discovery:categories:load_sample",function(t,n){var i=(n.category||{}).id;e.find("#category_"+i).trigger("click")})}),define_namespace("#NS_discover__filters",function(e){function t(){var e={};return e.term=r.val(),e.recommended=s.is(".selected"),e.staff_picks=a.is(".selected"),e.starred=c.is(".selected"),e.social=l.is(".selected"),e.backed=u.is(".selected"),e.state=d.find("select").val(),e.goal=f.find("select").val(),e.pledged=p.find("select").val(),e.raised=h.find("select").val(),e.tag_id=(m.find(".selected").data("tag")||{}).id,e}function n(e){r.val(e.term);var t={recommended:s,staff_picks:a,starred:c,social:l,backed:u};_.forEach(t,function(t,n){e[n]?t.addClass("selected"):t.removeClass("selected")}),m.find(".selected").removeClass("selected"),m.find("#tag_"+(e.tag_id||0)).addClass("selected"),d.find("select").ksr_val(e.state||""),f.find("select").ksr_val(e.goal||""),p.find("select").ksr_val(e.pledged||""),h.find("select").ksr_val(e.raised||"")}var i,r=e.find(".search_term input"),o=e.find(".featured"),a=o.find(".staff_picks"),s=o.find(".recommended"),c=o.find(".starred"),l=o.find(".social"),u=o.find(".backed"),d=e.find(".states"),f=e.find(".goals"),p=e.find(".pledged"),h=e.find(".raised"),m=e.find(".tags");r.on("cut paste input keydown",function(n){n.keyCode===KEY.ENTER?(e.trigger("ksr_popover:close"),$(document).trigger("discovery:filters:changed",t())):-1===_.indexOf(KEY.NOT_INPUT,n.keyCode)&&($(document).trigger("discovery:filters:term_changed",t()),e.trigger("ksr_popover:reposition"))}),o.find("li > a").on("click",function(n){var i=$(this),r=i.closest("li");r.toggleClass("selected"),$(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition"),n.preventDefault()}),m.find("li > a").on("click",function(n){var i=$(this),r=i.closest("li");r.siblings(".selected").removeClass("selected"),r.toggleClass("selected"),$(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition"),n.preventDefault()}),e.find("select").on("change",function(){$(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition")}),$(document).on("discovery:sentence:changed",function(e,t){n(t)}),$(document).on("discovery:sentence:term_changed",function(e,t){r.val(t.term)}),$(document).on("discovery:filters:load_sample",function(e,t){var i=(t.tag||{}).id;n({tag_id:i})}),e.on("ksr_popover:opened",function(){i=r.val()||"",device_idioms["not-touchable"]&&r.focus()}),e.on("ksr_popover:closed",function(){var n=r.val()||"";$.trim(n)!==$.trim(i)&&($(document).trigger("discovery:filters:changed",t()),e.trigger("ksr_popover:reposition"))})}),define_namespace(".NS_discover__hero",function(e){function t(){$.each(r,function(){var e=$(this);e.height(e.find("a").outerHeight(!0))}),$.each(o,function(){var e=$(this);e.find("a.current").closest(".js-category").addClass("has-children-is-current"),e.closest(r).width(e.find("a.current .js-name-prop").outerWidth()),e.css({marginTop:-e.find("a.current").position().top,opacity:1})})}function n(){e.find(".js-discover-hero-subtitle").show()}var i=e.data("category"),r=e.find(".js-interactive-title"),o=e.find(".js-interactive-title-group"),a=e.find(".js-interactive-title-content-fade"),s=$("#NS__discover_advanced_sentence");r.length&&(window.setTimeout(function(){t(),n()},300),r.find("a").on("click",function(e){var t=$(this);return t.parents(".js-discovery-overlay-enabled").length>0?(e.preventDefault(),void $("#js-discovery-expand").click()):($(".interactive-title-group-visible").length||(t.closest(r).find(".js-interactive-title-content-fade").fadeIn(300),s.removeClass("clip"),e.preventDefault()),r.not(t.closest(r)).addClass("other-interactive-title-group-visible"),t.closest(r).addClass("interactive-title-group-visible"),void track("Discover Switch Modal",{modal_type:t.closest(r).data("modal_type")}))}),$(document).on("keyup",function(e){27===e.keyCode&&$(".interactive-title-group-visible").length&&a.click()}),a.on("click",function(e){var t=$(this),n=t.closest(r);r.not(n).removeClass("other-interactive-title-group-visible"),n.removeClass("interactive-title-group-visible"),t.fadeOut(200),s.addClass("clip"),track("Discover Switch Modal Close"),e.preventDefault()}),$(document).resize(function(){t()})),e.find("a.subcategory").on("click",function(t){var n=$(this),i=n.data();n.hasClass("current")?(n.removeClass("current"),$(document).trigger("discovery:hero:unselect_subcategory",i),track("Discover Subcategory Deselected",namespace_keys("discover_category",i)),$(document).trigger("discovery:sentence:update_params",{category_id:i.parent_id||i.id})):(n.siblings().removeClass("current"),n.addClass("current"),
$(document).trigger("discovery:hero:select_subcategory",i),$(document).trigger("discovery:sentence:update_params",{category_id:i.id}),track("Discover Subcategory Selected",namespace_keys("discover_category",i))),$(document).scrollTop()<e.offset().top&&$.scrollTo(e.offset().top,300,"easeOutExpo"),t.preventDefault()}),$(".js-refine-and-sort").on("click",function(){i&&track("Discover Refine Search Clicked",namespace_keys("discover_category",i))})}),define_namespace("#NS_discover__landing",function(e){var t=e.data("category"),n=e.find(".js-load-more");n.loadMore({default_page:0,perPage:12,responseToHTML:function(e){var t=3,n=_.groupBy(e.projects,function(e,n){return Math.floor(n/t)}),i={projects:_.values(n),columnClass:"col-4 mb2"};return render("projects/_baseball_card_grid",i,["projects/_baseball_card_tall","projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])}}),n.on("mobius:loading_page",function(){track("Discover Category See More Clicked",_.extend(namespace_keys("discover_category",t),{discover_module_type:n.data("type")}))})}),define_namespace("#NS_discover__locations",function(e){function t(){r&&r.abort(),s.addClass("loading"),clearTimeout(a),a=setTimeout(function(){r=$.ajax({url:s.attr("action"),dataType:"json",data:s.serialize(),success:function(t){s.addClass("results_visible"),l.empty(),_.each(t.locations,function(e){l.append(render("discover/_search_location_li",e))}),e.find("ul.locations").addClass("results_visible"),track("Discover Location Search Results",{discover_location_search_term:c.val(),discover_location_search_hits:t.total_hits})},complete:function(){s.removeClass("loading"),r=!1}})},p)}function n(){i(current_location.get())}function i(e){var t=$(render("discover/_location_li",e));d.empty(),u.children("li:not(:first-child)").remove(),u.append(t),f.find("li.selected").removeClass("selected"),t.addClass("selected"),$(document).trigger("discovery:locations:updated",e),$(document).trigger("discovery:locations:changed",e),o&&o.abort(),o=$.ajax({url:e.urls.web.location,dataType:"json",success:function(e){d.children().remove(),_.each(e.nearby_locations,function(e){d.append(render("discover/_location_li",e))}),u.children("li:not(:first-child)").remove(),_.each(e.ancestor_locations.reverse(),function(e){u.append(render("discover/_location_li",e))}),u.append(t),$(document).trigger("discovery:locations:updated",e)},complete:function(){o=!1}})}var r,o,a,s=e.find("form"),c=s.find("input"),l=s.find("ul.results"),u=e.find(".broader-locations ul"),d=e.find(".nearby-locations ul"),f=e.find(".broader-locations ul, .nearby-locations ul"),p=500;s.on("submit",function(e){e.preventDefault()}),f.on("click","li > a",function(t){var n=$(this),i=n.closest("li"),r=i.data("location")||{};f.find(".selected").removeClass("selected"),i.addClass("selected"),$(document).trigger("discovery:locations:changed",r),e.trigger("ksr_popover:close"),t.preventDefault()}),c.on("blur",function(){setTimeout(function(){s.removeClass("results_visible")},500)}),c.on("cut paste input keydown",function(e){e.keyCode===KEY.ESC?($(this).val(""),s.removeClass("results_visible")):-1===_.indexOf(KEY.NOT_INPUT,e.keyCode)&&t()}),e.on("ksr_popover:opened",function(){device_idioms["not-touchable"]&&c.focus()}),e.find(".current_location").on("click",function(e){n(),c.val(""),track("Discovery Current Location Click",{discover_used_html5:!1}),e.preventDefault()}),l.on("click","li > a",function(e){var t=$(this),n=t.closest("li"),r=n.data("location")||{};i(r),s.removeClass("results_visible"),track("Discover Location Search Click",{discover_location_search_term:c.val()}),e.preventDefault()}),$(document).on("discovery:sentence:changed",function(t,n){e.find(".selected").removeClass("selected"),n.woe_id&&parseInt(n.woe_id,10)>0?e.find("#location_"+n.woe_id).addClass("selected"):e.find("li:first").addClass("selected")}),$(document).on("discovery:locations:load_sample",function(e,t){t.location&&i(t.location),e.preventDefault()})}),define_namespace("#NS__discover_advanced_sentence",function(e){function t(e,t){return t=_.defaults({},t),$('<span class="'+_.compact(_.flatten(["text",t.classes])).join(" ")+'">'+e+"</span>")}function n(e,t){return $('<span class="inline-block mobile-block"></span>').append(e).append(t)}function i(e){var i=$("<div></div>"),o=[],a=[];e=e||r(),e.state=e.state||"all",e.term=$.trim(e.term||""),i.append(t(I18n.t("onloads.views.discover.sentence.Show_me"))),"all"===e.state&&0===e.term.length?(i.append(d),i.append(t(I18n.t("onloads.views.discover.sentence.projects"),{classes:["fr-hide","es-hide"]})),d.find("option:first").data("alt-label",I18n.t("onloads.views.discover.sentence.all"))):("all"!==e.state&&i.append(y),e.term.length>0&&i.append(u),i.append(t(I18n.t("onloads.views.discover.sentence.projects_in"),{classes:["fr-hide","es-hide"]})),i.append(d),d.find("option:first").data("alt-label",I18n.t("onloads.views.discover.sentence.All_Categories"))),e.category_id&&parseInt(e.category_id,10)>0?(d.addClass("selected"),d.find("select").ksr_val(e.category_id)):(d.removeClass("selected"),d.find("select").ksr_val("")),y.find("select").ksr_val(e.state),u.find("input").val(e.term),u.find(".term").text(e.term),e.woe_id&&parseInt(e.woe_id,10)>0?(x.addClass("selected"),x.find("select").ksr_val(e.woe_id),i.append(n(t(I18n.t("onloads.views.discover.sentence.from"),{classes:["fr-hide","es-hide"]}),x))):(x.removeClass("selected"),x.find("select").ksr_val("0"),i.append(n(t(I18n.t("onloads.views.discover.sentence.on"),{classes:["fr-hide","es-hide"]}),x))),e.tag_id>0&&(v.find("select").ksr_val(e.tag_id),i.append(n(t(I18n.t("onloads.views.discover.sentence.tagged_with"),{classes:["fr-hide","es-hide"]}),v))),e.recommended&&o.push(f),e.staff_picks&&o.push(p),e.social?o.push(g):g.find("select").ksr_val("1"),e.starred?o.push(h):h.find("select").ksr_val("1"),e.backed?o.push(m):m.find("select").ksr_val("1"),o=_.compact(o),o.length>0&&(o[0]===m||o[0]===h?i.append(t(I18n.t("onloads.views.discover.sentence.that"),{classes:["fr-hide","es-hide"]})):i.append(t(I18n.t("onloads.views.discover.sentence.that_are"),{classes:["fr-hide","es-hide"]})),i.append(o)),_.isUndefined(e.pledged)||_.isNull(e.pledged)||""===e.pledged||(w.find("select").ksr_val(e.pledged),a.push(w)),_.isUndefined(e.goal)||_.isNull(e.goal)||""===e.goal||(b.find("select").ksr_val(e.goal),a.push(b)),_.isUndefined(e.raised)||_.isNull(e.raised)||""===e.raised||(k.find("select").ksr_val(e.raised),a.push(k)),a.length>0&&i.append(n(t(I18n.t("onloads.views.discover.sentence.with"),{classes:["fr-hide","es-hide"]}),a)),j.find("select").ksr_val(e.sort),i.append(n(t(I18n.t("onloads.views.discover.sentence.sorted_by")),j)),i.append(S),c.children().detach(),c.empty(),c.html(i)}function r(){var e=URI("?"+c.serialize()).query(!0);return e.category_id=e.category_id&&parseInt(e.category_id,10),e.tag_id=e.tag_id&&parseInt(e.tag_id,10),e.woe_id=e.woe_id&&parseInt(e.woe_id,10),e}function o(e){var t={discover_interaction_param:e.param,discover_interaction_action:e.action,discover_interaction_value:e.value};_.extend(t,namespace_keys("discover",r())),track("Discover Sentence Parameter Interaction",t)}function a(){e.css({height:D.outerHeight()}),setTimeout(function(){e.addClass("transition-all-bezier"),T.removeClass("hide"),e.css({height:l.outerHeight()}),I.css({marginTop:-D.outerHeight()})},1),setTimeout(function(){I.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),T.aria_set_visible(),I.aria_set_hidden()},1e3)}function s(){e.css({height:l.outerHeight()}),setTimeout(function(){I.removeClass("hide"),e.addClass("transition-all-bezier"),e.css({height:D.outerHeight()}),I.css({marginTop:0})},1),setTimeout(function(){T.addClass("hide"),e.removeClass("transition-all-bezier"),e.css({height:"auto"}),T.aria_set_hidden(),I.aria_set_visible()},1e3)}var c=e.find("form"),l=e.find(".js-sentence"),u=e.find(".filter.search"),d=e.find(".filter.category"),f=e.find(".filter.recommended"),p=e.find(".filter.staff_picks"),h=e.find(".filter.starred"),m=e.find(".filter.backed"),g=e.find(".filter.social"),v=e.find(".filter.tag"),y=e.find(".filter.state"),b=e.find(".filter.goal"),w=e.find(".filter.pledged"),k=e.find(".filter.raised"),x=e.find(".filter.location"),j=e.find(".filter.sorts"),C=e.find(".js-close"),S=e.find(".js-filter-spotlight"),T=$(".js-sentence-container"),D=$(".js-category-hero"),I=$(".NS_discover__hero");$(document).on("discovery:filters:term_changed",function(e,t){$.trim(t.term).length&&u.closest(c).length?u.find("input").val(t.term).siblings(".term").text(t.term):i(_.extend(r(),{term:t.term}))}),$(document).on("discovery:categories:changed",function(e,t){d.find("select").ksr_val(t.id||0),i(),$(document).trigger("discovery:sentence:changed",r())}),$(document).on("discovery:locations:changed",function(e,t){x.find("select").ksr_val(t.id||0),i(),$(document).trigger("discovery:sentence:changed",r())}),$(document).on("discovery:sorts:changed",function(e,t){j.find("select").ksr_val(t),i(),$(document).trigger("discovery:sentence:changed",r())}),$(document).on("discovery:locations:updated",function(e,t){x.find("select").children().remove(),x.find("select").append(render("discover/_location_options",t)),x.find("select").ksr_val(t.id)}),$(document).on("discovery:filters:changed",function(e,t){i(_.extend(r(),t)),$(document).trigger("discovery:sentence:changed",r())}),e.find("#filters").on("click",function(e){track("Discovery Add Filter Pressed"),e.preventDefault()}),e.on("change","select",function(){var e=$(this);i(),$(document).trigger("discovery:sentence:changed",r()),o({param:e.attr("name"),action:"change",value:e.val()})}),e.on("click",".filter .ss-delete",function(e){var t=$(this);t.closest(".filter").detach(),i(),$(document).trigger("discovery:sentence:changed",r()),o({param:t.siblings("input").attr("name"),action:"remove"}),e.preventDefault()}),e.on("keypress cut paste input blur",".search span[contenteditable]",function(e){var t=$(this),n=t.siblings("input"),a=$.trim(t.text()||"");"blur"===e.type||"focusout"===e.type?(i(),o({param:n.attr("name"),value:n.val(),action:"change"})):"keypress"!==e.type||e.keyCode!==KEY.ENTER&&e.keyCode!==KEY.TAB?(n.val(a),$(document).trigger("discovery:sentence:term_changed",r())):(t.blur(),e.preventDefault())}),e.find(".term").on("focus",function(){u.addClass("focused")}).on("blur",function(){u.removeClass("focused")}),$(document).on("discovery:sentence:changed",function(){T.is(":visible")&&C.hide()}),$(document).on("discovery:sentence:load_sample",function(e,t){i(t),$(document).trigger("discovery:sentence:changed",r())}),$(document).on("discovery:sentence:update_params",function(e,t){var n=_.extend(r(),t);i(n),$(document).trigger("discovery:sentence:changed",n)}),$(document).on("discovery:sentence:show_sentence",function(){a(),C.hide()}),i(),I.length&&(e.find(".js-sentence-edit").on("click",function(e){a(),e.preventDefault()}),C.on("click",function(e){s(),track("Discover Sentence Close Clicked"),e.preventDefault()}))}),define_namespace("#NS_discover__sorts",function(e){e.find("li > a").on("click",function(t){var n=$(this),i=n.closest("li");e.find(".selected").removeClass("selected"),i.addClass("selected"),$(document).trigger("discovery:sorts:changed",i.data("sort")),e.trigger("ksr_popover:close"),t.preventDefault()}),$(document).on("discovery:sentence:changed",function(t,n){e.find(".selected").removeClass("selected"),e.find('li[data-sort="'+(n.sort||"magic")+'"]').addClass("selected")}),$(document).on("discovery:sorts:load_sample",function(t,n){e.find(".selected").removeClass(),n.sort?e.find('li[data-sort="'+n.sort+'"]').addClass("selected"):e.find('li[data-sort="magic"]').addClass("selected")})}),define_namespace("#discover_advanced",function(e){function t(){return _.map(y.find(".row > li > .project-card"),function(e){return $(e).data("pid")})}function n(e){var n=t();return _.filter(e,function(e){return-1===_.indexOf(n,e.id)})}function i(e){return _.map(e,r)}function r(e){return render("discover/_project_baseball_card_li",e,["projects/_baseball_card_tall","projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])}function o(e,t){var r=(t||{}).append_results;r||(y.children().remove(),T=e.seed,b.show(),y.siblings(".title").find(".count").text(formatters.format_number(e.total_hits,{precision:0})+formatters.pluralize(" project",e.total_hits)).siblings(".category").hide()),e.projects.length>0?(c(),_.chain(n(e.projects)).groupBy(function(e,t){return Math.floor(t/p)}).values().map(i).map(function(e){return $('<div class="row"></div>').append(e)}).each(function(e){return y.append(e)})):(b.hide(),r||s())}function a(e,t){t=t||{},j=!0,e=e||URI("?"+v.serialize()).query(!0),e.seed=T,e=_.pick(e||{},_.filter(_.keys(e),function(t){return!!e[t]})),u&&u.abort(),t.paging?(e.page=D+1,m.addClass("loading-pagination")):(e.page=D=1,m.addClass("loading")),clearTimeout(d),d=setTimeout(function(){u=$.ajax({url:"/discover/advanced?google_chrome_workaround",data:e,dataType:"json",success:function(n){o(n,{append_results:t.paging}),n.projects.length<20&&b.hide(),History.replaceState({},document.title,"/discover/advanced?"+$.param(e)),D=e.page},complete:function(e){0!==e.status&&m.removeClass("loading loading-pagination"),u=!1,j=!1}})},x)}function s(){var e=URI().query(!0);m.addClass("no_results"),(e.social||e.backed||e.starred)&&_.isUndefined(root.current_user)?(m.find(".requires_login_empty_state").show(),m.find(".general_empty_state").hide()):(m.find(".requires_login_empty_state").hide(),m.find(".general_empty_state").show())}function c(){m.removeClass("no_results")}function l(){var e=f;f=h.scrollTop(),!j&&f>e&&h.height()-f<2e3&&a(void 0,{paging:!0})}var u,d,f,p=4,h=$(document.body),m=e.find("#advanced_container"),g=e.find("#NS_discover__landing"),v=$("#NS__discover_advanced_sentence").find("form"),y=e.find("#projects_list"),b=e.find(".load_more"),w=e.find(".NS_discover__spotlight_projects"),k=e.find(".NS_discover__footer"),x=500,j=!1,C=URI().query(!0)||{},S=C.ref,T=y.data("seed"),D=1;b.on("click",function(e){e.preventDefault(),f=h.scrollTop(),$(document).on("scroll",l),a(void 0,{paging:!0}),y.children().show()}),e.find(".login, .signup").on("click",function(e){window.location=$(this).data("url")+"?then="+encodeURIComponent(window.location.href),e.preventDefault()}),e.find("li.sample_search a").on("click",function(e){var t=$(this).closest("li").data("sample")||{};t.category_id=(t.category||{}).id,t.location_id=(t.location||{}).id,t.tag_id=(t.tag||{}).id,$(document).trigger("discovery:sentence:load_sample",t),$(document).trigger("discovery:categories:load_sample",t),$(document).trigger("discovery:locations:load_sample",t),$(document).trigger("discovery:sorts:load_sample",t),$(document).trigger("discovery:filters:load_sample",t),$(document).trigger("discovery:sentence:show_sentence",t),g.hide(),w.hide(),k.hide(),track("Discovery Sample Sentence Click",{discover_sample_sentence_ref:t.mp_ref}),e.preventDefault()}),e.on("click",".project-card-wrap .project-meta li a",function(e){var t=$(this).data("location");$(document).trigger("discovery:locations:load_sample",{location:t}),S="city",track("Discover Baseball Card Location Clicked"),e.preventDefault()}),$(document).on("discovery:sentence:changed",function(e,t){S=!1,1===parseInt(t.social,10)?y.addClass("social"):y.removeClass("social"),0===t.category_id?(g.hide(),w.hide()):v.is(":visible")&&(g.remove(),w.remove()),a(t)}),$(document).on("discovery:sentence:term_changed",function(e,t){a(t)}),$(document).on("discovery:hero:select_subcategory",function(){g.hide(),w.hide()}),$(document).on("discovery:hero:unselect_subcategory",function(){g.show(),w.show()}),device_idioms.mobile||($("#projects_list").waypoint(function(e){"down"===e?$(".js-back-to-top").fadeIn():"up"===e&&$(".js-back-to-top").fadeOut("fast")}),$(".js-back-to-top a").on("click",function(t){$.scrollTo(e.find("#NS__discover_advanced_sentence").offset().top,1e3,"easeOutExpo"),t.preventDefault()}));var I=t().length;I||s(),8>I&&b.hide()}),define_namespace("body#discover_index",function(e){function t(t){t=t||{},p=!0,u.cycle({autoHeight:0,timeout:0,slides:".slide",speed:600,fx:"scrollHorz",easing:"easeOutExpo",startingSlide:t.starting_slide||u.children().length-1,next:e.find(".js-next"),prev:e.find(".js-previous"),allowWrap:!1,log:!1})}function n(){p=!1,u.cycle("destroy")}function i(){var e=$(window).width();p&&f>e?n():!p&&e>=f&&t()}function r(){var e=l.find(".js-adjective").eq(m);l.find(".js-adjective").removeClass("active"),e.addClass("active"),c.css({height:e.outerHeight(!0),width:e.find("span").width()}),l.css({top:-e.position().top})}function o(){clearInterval(s),s=setInterval(function(){a()},5e3)}function a(){m+=1,m>=l.find(".js-adjective").length&&(m=0),r()}var s,c=e.find(".js-adjectives-container"),l=e.find(".js-adjectives-list"),u=e.find(".slides"),d=e.find(".js-potd"),f=640,p=!1,h=!0,m=6;u.on("cycle-before",function(e,i){h&&2===i.nextSlide&&$.ajax({url:d.data("potds"),data:{page:parseInt(u.children().length/10+1,10)},dataType:"json",success:function(e){h=10===e.results.length,n();var i=u.children().length;_.each(e.results,function(e){u.prepend(e)});var r=u.children().length;t({starting_slide:r-i+2})}})}),u.on("cycle-next",function(e,t){track("Discover POTD Next Clicked",{discover_potd_slide:u.children().length-1-t.nextSlide})}),u.on("cycle-prev",function(e,t){track("Discover POTD Previous Clicked",{discover_potd_slide:t.slideCount-1-t.nextSlide})}),device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1}),$(document).resize(function(){i(),r()}),window.setTimeout(function(){c.removeClass("opacity-0"),r()},500),i(),o()}),define_namespace("body.email_previews",function(e){e.find("#index").on("change",function(){this.submit()}),e.find("#show").on("submit",function(t){t.preventDefault(),e.find("#email_preview").attr("src",$(t.target).attr("action")+"?"+$(t.target).serialize())})}),define_namespace("body.events",function(){$(".js-scroll_to").on("click",function(e){e.preventDefault(),$.scrollTo($(this).attr("href"),1e3,{easing:"swing"})})}),define_namespace("body#events_blockparty.not-touchable",function(){skrollr.init()}),define_namespace("body#events_filmfest2014",function(){var e=document.location.protocol+"//",t="embed.vhx.tv",n=function(n,i){var r={},o=$('iframe[src*="'+t+'"]');"undefined"==typeof i&&(i=null),r=JSON.stringify({method:n,params:i}),o.length&&o[0].contentWindow.postMessage(r,e+t)},i={play:function(){n("play")},pause:function(){n("pause")},seekTo:function(e){"undefined"==typeof e&&(e=null),n("seekTo",e)}};$(window).on("message",function(n){var i;if(n.originalEvent.origin===e+t)switch(i=JSON.parse(n.originalEvent.data),i.event_type){case"start":track("2014 Kickstarter Film Festival Start Program");break;case"play":track("2014 Kickstarter Film Festival Play Program");break;case"pause":track("2014 Kickstarter Film Festival Pause Program");break;case"finish":track("2014 Kickstarter Film Festival Finish Program");break;case"fullscreen":track("2014 Kickstarter Film Festival Fullscreen Program")}}),track_links(".download_booklet","2014 Kickstarter Film Festival Download Booklet"),$(".js-open_video").on("click",function(e){var t=$(this),n=t.closest("section");n.find(".js-content").fadeOut(600,function(){n.closest("section").find(".js-video").fadeIn(function(){var e=URI(),t=$('<iframe width="100%" height="auto" frameborder="0" webkitallowfullscreen="" src="//embed.vhx.tv/videos/8138?parent_url='+e.protocol()+"://"+e.host()+'" mozallowfullscreen="" id="host_player" class="video" allowfullscreen=""></iframe>');$(this).find(".videowrapper").html(t),t.on("load",function(){i.play()})})}),e.preventDefault()}),$(".js-video_close").on("click",function(e){var t=$(this),n=t.closest("section");n.find(".js-video").fadeOut(600,function(){n.closest("section").find(".js-content").fadeIn()}),i.pause(),e.preventDefault()})}),define_namespace("body#events_filmfest2014_brooklyn",function(){track_links(".download_booklet","2014 Kickstarter Film Festival Download Booklet")}),define_namespace("#events_fourth_birthday",function(){function e(e){$(e).each(function(){(new Image).src=this})}$("#the_right_way").hover(function(){$("body").addClass("reveal")},function(){$("body").removeClass("reveal")}),e(["https://d3mlfyygrfdi2i.cloudfront.net/5429/rsvp-awful.gif"])}),define_namespace("#faqs_show",function(e){function t(e){i.removeClass("current"),r.find('a[data-name-short="'+e+'"]').addClass("current")}var n=e.find(".sidebar"),i=$(".subcat").find("a"),r=e.find("a.anchor.current").siblings(".subcat-list"),o=e.find(".js-category"),a=!1;n.sticky_bar({parent:n.closest(".main")}),i.on("click",function(){var e=$(this).data("name-short");a=!0,t(e),$.scrollTo("#"+e,800,{easing:"easeOutExpo",onAfter:function(){a=!1}})}),o.add(i).on("click",function(){var e=$(this).data("name-full");track("Viewed "+e)}),n.find("a.anchor.current").siblings(".subcat-list").find("li:first-child a").addClass("current"),$(".list-faqs > li").waypoint(function(){a||t($(this).attr("id"))}),device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1})}),define_namespace(".NS-features__toggle",function(e){e.find(".js-featured-toggle").on("click",function(e){e.preventDefault();var t=$(this),n=t.closest(".NS-features__toggle"),i=t.closest(".featured, .unfeatured");$.ajax({type:i.data("method"),url:i.data("url"),data:i.find(":input").serialize(),dataType:"json",success:function(e){n.toggleClass("featured",e.featured),e.remove_featurings_path&&n.find(".featured").data("url",e.remove_featurings_path)},error:function(){growl({error:"Unable to complete your request"})}})})}),define_namespace(".js-could-have-report-project",function(e){var t="#NS_flaggings__new_project form .expandable";e.on("click",t,function(e){e.stopPropagation(),$(this).trigger("ksr_expand:activate")}),e.on("ksr_expand:activate",t,function(e){e.stopPropagation();var t=$(this),n=t.children(".detail");t.children(".choice").find("input.radio").prop("checked",!0),n.show(),t.find("textarea,select,input:not(.radio)").prop("disabled",!1),n.find("textarea").focus(),t.siblings(".expandable").trigger("ksr_expand:deactivate")}).on("ksr_expand:deactivate",t,function(e){e.stopPropagation();var t=$(this),n=t.children(".detail");n.hide(),t.find("textarea,select,input:not(.radio)").prop("disabled",!0).blur()})}),define_namespace(".NS-forms_categorization_field",function(e){e.each(function(){function e(e){var t=$('<a class="remove" href="#">'+I18n.t("onloads.views.forms.categorization_field.remove")+"</a>");e.append(t)}var t=$(this),n=t.find(".template"),i=t.find("ol.selected");i.find("li").each(function(){e($(this))}),i.on("click","a.remove",function(e){var t=$(this).closest("li"),n=t.find(".destroy");e.preventDefault(),t.fadeOut(function(){n.length?n.val("1"):t.remove()})}),t.find(".new a").on("click",function(e){e.preventDefault(),i.append(n.clone_form_template())})})}),define_namespace(".NS-social--follow-friends",function(e){$.pollster(window.location.href,function(t){return 200===t.status?(e.html(t.html),!0):!1},{delay:1e3})}),define_namespace(".NS-friends",function(e){var t=e.data("follows_count"),n=e.data("follows_backings_count"),i=e.find(".js-friend-count"),r=e.find(".js-backed-projects-count");e.on("ksr:follow_user",function(e){t+=1,n+=$(e.target).closest(".js-backer-count").data("backed_projects"),i.text(formatters.format_number(t,{precision:0})),r.text(formatters.format_number(n,{precision:0})),t>0&&$(".js-friends-tout").removeClass("friends-tout--no-friends")}),e.on("ksr:unfollow_user ksr:block_user",function(e){t-=1,n-=$(e.target).closest(".js-backer-count").data("backed_projects"),i.text(formatters.format_number(t,{precision:0})),r.text(formatters.format_number(n,{precision:0})),0>=t&&$(".js-friends-tout").addClass("friends-tout--no-friends")}),e.on("ksr:follow_all",function(e,o,a){t+=parseInt(o,10),n+=parseInt(a,10),i.text(formatters.format_number(t,{precision:0})),r.text(formatters.format_number(n,{precision:0}))}),$(document).on("mobius:loaded_page",function(){$(document).trigger("shifted")}),device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1})}),define_namespace("#funnels_contact",function(e){function t(e){var t;e.project?(t=Project.find(e.project.id),t?t.set(e.project):t=new Project(e.project),window.current_project=t):Project.find(e.id)&&(t=Project.find(e.id),t.set(e),window.current_project=t)}function n(e,t){"function"==typeof e.offset&&(e=e.offset().top),"undefined"==typeof t&&(t={}),_.defaults(t,{close_enough:100});var n=Math.max.apply(this,$("html, body").map(function(e,t){return t.scrollTop}).get()),i=n+$(window).height()-t.close_enough<e,r=n>e+t.close_enough;(t.force||i||r)&&$("html, body").animate({scrollTop:e-20},500,"easeOutExpo")}function i(){var e;return"string"==typeof u?u:_.isObject(u)?(e=_.keys(u)[0],_.compact([e,u[e].id]).join("_")):void 0}function r(){$("#open_ticket .container").find(".success, .error").remove()}function o(){return moment()-l}function a(e,t){track("Contact "+e,_.extend({time_on_page:o()},f,d.data,t))}var s,c,l,u,d=new Model,f={texts_loaded:0},p=0,h=!0,m=!0;l=moment(),root.funnel_user&&("undefined"==typeof root.funnel_user._broadcast&&("string"==typeof root.funnel_user&&(c=JSON.parse(_.unescape(root.funnel_user))),c=new User(c)),f.uid=c.get("id"),"string"==typeof funnel_user_backings&&(root.funnel_user_backings=JSON.parse(_.unescape(funnel_user_backings)),p=_.compact(funnel_user_backings).length,c._broadcast({backings_fetched:funnel_user_backings})),"string"==typeof funnel_user_created_projects&&(root.funnel_user_created_projects=JSON.parse(_.unescape(funnel_user_created_projects)),c._broadcast({created_projects_fetched:funnel_user_created_projects})),a("Page Load"),History.Adapter.bind(window,"statechange",function(){var e=_.extend({topic:null,subject:null,funnel:null},History.getState().data);m&&(h=!1,e.subject||"pledge"!==e.topic&&"project"!==e.topic||d.set("topic",null),d.set(e),h=!0)}),d.on_change(function(e){if(h){var t,n=_.pick(e,"funnel","subject","topic");_.each(n,function(e,n){e&&(t=n)}),t&&(m=!1,History.pushState(this.data,"",""),m=!0)}}),d.on_change({topic:function(t){var i,r,o=$('a[data-topic="'+t.topic+'"]');if($("#summary, #pledge_project_summary, #answers").addClass("hide"),e.find(".options li").removeClass("current"),d.set("subject",null),o.length)if($("#funnels_main").addClass("started"),a("Select Topic"),i=o.closest("li"),i.addClass("current"),o.is('[data-subjects="true"]')){if(r=new URI(o.attr("href")),1===$("#"+r.fragment()+" li").length)return void $("#"+r.fragment()).find('li a[data-fetch="subject"]').click();$("#subjects").show(),n($("#subjects")),$(".side").addClass("hide"),$("#"+r.fragment()).removeClass("hide")}else $("#subjects").hide(),u={},u[$.trim(o.text())]={},"subject"===o.data("fetch")&&(h=!1,d.set("subject",o.attr("href")),h=!0);else $("#funnels_main").removeClass("started"),$("#subjects").hide(),$("#new_zendesk_ticket").removeClass("open closed none")},subject:function(e){$("#text").html("");try{delete window.current_project}catch(i){window.current_project=void 0}if(!e.subject)return $("#pledge_project_summary").addClass("hide"),$("#pledge_project_summary .container").html(""),$("#answers").addClass("hide"),void $("#funnels").html("");a("Select Subject");var r=new URI(window.location.url).query(!0),o=new URI(e.subject),l=r.funnels_structure,d=r.version;l&&o.addQuery({funnels_structure:l}),d&&o.addQuery({version:d}),$.ajax({type:"GET",dataType:"JSON",url:o.toString(),beforeSend:function(){$("#answers").addClass("loading")},complete:function(){$("#answers").removeClass("loading")},success:function(e){var i,r,o;if(e.subject){for(r in e.subject)if(e.subject.hasOwnProperty(r)){u=e.subject,i=e.subject[r],t(i);break}$("#pledge_project_summary").removeClass("hide"),o=_.extend({},i,{other_backings:c.backings.length>=1,other_projects:c.created_projects.length>=1}),$("#pledge_project_summary .container").html(render("funnels/_"+r+"_details",o)),$("#subjects").hide()}s=_.map(e.funnels,function(e){return e.funnel}),$("#answers").removeClass("hide"),$("#funnels").html(render("funnels/index",{funnels:s})),e.subject?n($("#pledge_project_summary"),{force:!0}):n($("#funnels"),{force:!0})}})},funnel:function(e){if(!e.funnel)return $("#text").html(""),$("#new_zendesk_ticket").find("textarea, input.text").attr("value",""),$("#zendesk_ticket_ticket_requester_id").attr("value",""),$("#zendesk_ticket_ticket_tags").attr("value",""),$("#zendesk_ticket_funnel_id").attr("value",""),$("#zendesk_ticket_funnel_subject").attr("value",""),void $("#new_zendesk_ticket").removeClass("open closed none");var t=$('[data-funnel_id="'+e.funnel+'"]'),r=_.find(s,function(t){return t.id===e.funnel});$.ajax({type:"GET",url:t.data("json-href"),beforeSend:function(){$("#text").addClass("loading")},complete:function(){$("#text").removeClass("loading")},success:function(e){var t=_.extend(u,{text:e.funnel_text,user:c.data,funnel:r});$(document).trigger("got_json",[t]),$("#text").html(render("funnels/_text",t)),a("Funnel",{funnel_name:r.item_title||r.section_title,funnel_section:r.section_title,funnel_text_name:e.funnel_text.title,ticketable:"none"!==r.ticketable,texts_loaded:f.texts_loaded+=1,funnel_test_version:r.version}),$("#zendesk_ticket_ticket_requester_id").attr("value",c.get("email")||""),$("#zendesk_ticket_ticket_tags").attr("value",r.zendesk_tag),$("#zendesk_ticket_funnel_id").attr("value",r.id),$("#zendesk_ticket_funnel_subject").attr("value",i()),$("#new_zendesk_ticket").removeClass("open closed none").addClass(r.ticket_field),n($("#text"))}})}}),$(document).on("click",".quick_links a",function(){var e=$(this);a("Click Quick Link",{text:e.text(),href:e.attr("href")})}),d.on_change(function(){r()}),$(document).on("click",".options a",function(e){e.preventDefault(),d.set("topic",null),d.set("topic",$(this).data("topic"))}),$(document).on("click",'#subjects a[data-fetch="subject"]',function(e){e.preventDefault(),d.set("subject",this.href)}),$(document).on("click","a.select_new",function(e){e.preventDefault(),a("Select Different Subject");var t=d.get("topic");d.set("topic",null),d.set("topic",t)}),$(document).on("click","a.funnel",function(e){e.preventDefault(),d.set("funnel",$(this).data("funnel_id"))}),$(document).on("click","li.open > span, li.open > a",function(e){e.preventDefault();var t=$(this).parent(),n=t.find("> ul");n.length?(t.closest(".side_container").addClass("opened"),a("Select Section",{section_title:$(this).text()})):t.closest(".side_container").removeClass("opened"),$("li.open:not(.stay_open) > ul").hide(),n.show()}),$(document).on("click","a.show_more_backings",function(e){e.preventDefault();var t=this,n=new URI(t.href+"?"+(new URI).query()).toString(),i=_.last(c.get_backings()).get("pledged_at");a("Load More Pledges"),$.ajax({url:n,data:{cursor:i},beforeSend:function(){$(t).addClass("loading")},complete:function(){$(t).removeClass("loading")},success:function(e){var n,r;c._broadcast({backings_fetched:e.backings}),r=_.select(c.get_backings(),function(e){return e.get("pledged_at")<i}),n=_.map(r,function(e){var t=e.get();return t.formatted_created_at=moment(1e3*t.created_at).format("ll"),render("funnels/_backing",t)}).join(""),$(t).before(n),c.get_backings().length>=c.get("backings_count")&&$(t).remove()}})}),$(document).on("click","#funnels a",function(e){e.preventDefault();var t=$(this).closest("li");t.siblings().removeClass("selected"),t.addClass("selected")}),$(document).on("click",".open_a_ticket",function(e){e.preventDefault(),a("Open Ticket Form"),$("#new_zendesk_ticket").removeClass("closed").addClass("open")}),$(document).on("click","#new_zendesk_ticket input:submit",function(e){e.preventDefault();var t=$(this),i=t.closest("form");i.is(".submitting")||(i.addClass("submitting"),t.data("original_text",t.val()),t.val("Submitting..."),$("#zendesk_ticket_time_on_page").attr("value",o()),c&&c.data&&window.current_user&&window.current_user.data&&c.data.id!==window.current_user.data.id&&$("#zendesk_ticket_ticket_requester_id").attr("value",c.get("email")+".ksr"),_.each(["description","subject"],function(e){var t=$("#zendesk_ticket_ticket_"+e);t.val()===t.attr("placeholder")&&t.val("")}),$.ajax({type:"POST",data:i.serialize(),url:$(this).closest("form").attr("action"),beforeSend:function(){r(),a("Submit Ticket")},complete:function(){i.removeClass("submitting"),t.val(t.data("original_text"))},success:function(){$(".funnels .contact_funnels").html(render("funnels/_ticket_success")),$("html, body").animate({scrollTop:0},800,"easeOutExpo"),a("Ticket Success")},error:function(e){var t=_.flatten(_.compact(_.map(JSON.parse(e.responseText),function(e,t){var n={base:"",requester:"email",subject:"question",description:"details"}[t]||t;return _.map(e,function(e){return _.compact([formatters.capitalize(n),e]).join(" ")});
})));a("Ticket Error",t),$("#open_ticket .container").prepend(render("funnels/_ticket_error",{errors:t})),n($("#open_ticket"))}}))}),$(".prompt_login").length&&($(".contact_funnels").hide(),$(".prompt_login a.anonymously").on("click",function(e){e.preventDefault(),$(".prompt_login").hide(),$(".contact_funnels").show()})),$(".contact_funnels").prepend(render("funnels/contact",{user:c},["funnels/_backing","funnels/_project"])),$(document).on("click","a.login",function(){a("Select Log In")}),$(document).on("click","a.anonymously",function(e){e.preventDefault(),a("Select No Account")}),$(document).on("click",".helpfulness [data-score]",function(){var e=$(this).data("score");a("Funnel Rating",{helpfulness_score:e}),$(this).closest(".helpfulness").html('<span class="green">'+I18n.t("onloads.views.funnels.contact.Thanks_got_it")+"</span>")}))}),define_namespace(".NS_guest_checkouts__new",function(e){var t=e.find(".js-guest-checkout-email-fields form");t.on("submit",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("action"),method:t.attr("method"),data:t.serialize(),success:function(e){window.location.href=window.location.pathname.replace(location.pathname,e.redirect_path)},error:function(e){growl({error:e.responseJSON.message}),window.location.href=window.location.pathname.replace(location.pathname,e.responseJSON.redirect_path)}})})}),define_namespace("#happening_layouts_show",function(e){var t=e.find(".js-load-more");t.loadMore(),t.on("mobius:loading_page",function(){track("Happening See More Click")}),device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1})}),function(){var e=$("body.faqs").find(window.location.hash),t="#term.help",n=$(t);e.length&&!e.find(".subcat").length&&e.animate({backgroundColor:"#ffffc9"},{duration:2e3,complete:function(){$(this).animate({backgroundColor:"#ffffff"},{duration:2500})}}),$(".NS_help__search_box").livequery(function(){$(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})}),$(document).on("livesearch:selected","#js-search .results li",function(e,t){t&&t[1]&&(window.location.href=t[1])}),$(document).on("click","body.help form.search .submit",function(){$(this).closest("form").submit()}),$(document).on("livesearch:revealed_results",t,function(){$(this).addClass("expanded"),$(this).parents("#js-search").children(".submit").addClass("expanded")}),$(document).on("livesearch:close_results",t,function(){$(this).removeClass("expanded"),$(this).parents("#js-search").children(".submit").removeClass("expanded")}),$("body.help").click(function(e){var t=$(e.target);t.is("#term")||t.closest("#js-search").length||n.trigger("livesearch:close_results")}),n.on("focus",function(){var e=n.data("livesearch");e&&e.search_xhr&&4===e.search_xhr.readyState&&n.trigger("livesearch:reveal_results")})}(),$(function(){var e="body#help_copyright";$(document).on("change",e+" form.select_country",function(){$(this).submit()})}),$(function(){var e="body#help_fees";$(e+" form.select_country").on("change",function(){$(this).submit()})}),define_namespace("body#help_images",function(){device_idioms["not-touchable"]&&skrollr.init({forceHeight:!1})}),define_namespace("#help_index",function(e){var t=e.find(".js-subcat"),n=e.find(".js-category");n.add(t).on("click",function(){var e=$(this).data("name-full");track("Viewed "+e)})}),define_namespace("#help_stats",function(){function e(e){e.find(".category_row").slideToggle("fast"),e.find(".default_sort").toggleClass("tablesorter-headerDesc"),e.closest("table").toggleClass("collapsed"),e.find(".arrow").toggleClass("flipped"),e.hasClass("collapsed")?(e.find(".details").text(I18n.t("onloads.views.help.stats.See_Categories")),ga("send","event","Help Stats","Collapsed",e.attr("name"))):(e.find(".details").text(I18n.t("onloads.views.help.stats.Hide_Categories")),ga("send","event","Help Stats","Expanded",e.attr("name")))}function t(e){var t=e.offset(),n=e.closest("table, .explanation").offset(),i=o.width(),r=o.height(),a=parseInt(o.css("padding-right").replace("px",""),10);e.closest(".explanation").length&&(t.left=t.left-50),o.css({position:"absolute",left:t.left-i-(a-1)+90,top:n.top-r-20}),o.find(".nipple").css({left:i+5,top:r+12,position:"absolute"})}function n(){o.fadeIn("fast")}function i(){o.fadeOut("fast")}function r(e,r,a){"undefined"!=typeof a?(o.find(".content").html('<span class="num date">'+r+"</span>"+a),t($(e)),n()):i()}var o=$(".bubble");$(".toggle_details").click(function(){var t=$(this).closest("table");e(t)}),$("th").click(function(){var t=$(this).closest("table");t.hasClass("collapsed")&&e(t)}),$("td, th").hover(function(){var e=$(this).closest("table").find("th").eq($(this).index()),t=e.data("header-explanation"),n=e.html().replace("<br>"," ");r(this,n,t)}),$(".explanation").hover(function(){var e=$(this),t=e.find("[data-header-explanation]"),n=t.data("header-explanation"),i=e.find("p").text();r(t,i,n)}),$("table, .explanation").mouseleave(function(){i()})}),$(function(){function e(){$("#account-setup-panel").trigger("project_build:refresh")}$("#account-setup-panel .identity-verification .identity-documents-pending").livequery(function(){$.pollster($(this).attr("data-url"),function(t){var n=t.documents[t.documents.length-1],i=t.user_identity_name,r=n.identity;switch(n.state){case"pending":return!1;case"successful":if(!r)return!1;switch(r.state){case"started":return!1;case"passed":return i?(growl({success:I18n.t("onloads.views.identity_documents.processing_state.Your_identity_documents_have_been_approved")}),e(),!0):!1;case"failed":return growl({error:I18n.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}break;case"failed":return growl({error:I18n.t("onloads.views.identity_documents.processing_state.Your_Identity_documents_were_not_approved_We_will_email_you")}),e(),!0}})})}),$(function(){$(document).on("click","#account-setup-panel a.document-form-link",function(e){$.open_remote_modal_dialog($(this).attr("href"),{id:"jumio-modal",class_name:"identity-document",do_not_cache:!0,prevent_close:!0}),e.preventDefault()})}),$(function(){var e=$("#projects_edit");e.length&&(e.on("click",".jumio-modal-close",function(e){e.preventDefault(),$(this).trigger("allow_close.modal_dialog"),$(this).trigger("close.modal_dialog")}),$(document).on("before_close.modal_dialog",".modal_dialog.identity-document",function(){$("#account-setup-panel").trigger("project_build:refresh")}))}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=0,n=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(a){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,a,s,c={},l=t.split(".")[0];return t=t.split(".")[1],r=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(c[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(c[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},c,{constructor:a,namespace:l,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var i,r,o=n.call(arguments,1),a=0,s=o.length;s>a;a++)for(i in o[a])r=o[a][i],o[a].hasOwnProperty(i)&&void 0!==r&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=n.call(arguments,1),c=this;return a?this.each(function(){var n,i=e.data(this,r);return"instance"===o?(c=i,!1):i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s),n!==i&&void 0!==n?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new i(o,this))})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(r=a[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var c=i.match(/^([\w:-]*)\s*(.*)$/),l=c[1]+o.eventNamespace,u=c[2];u?r.delegate(u,l,s):n.bind(l,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}});e.widget}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,r,o,a=n.initialIframeSrc||"javascript:false;";return{send:function(s,c){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+o+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+o+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),t+=1,r=e('<iframe src="'+a+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var t;try{if(t=r.contents(),!t.length||!t[0].firstChild)throw new Error}catch(n){t=void 0}c(200,"success",{iframe:t}),e('<iframe src="'+a+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var r=e(t[n]);e(i).prop("name",r.prop("name")).attr("form",r.attr("form")),r.replaceWith(i)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",a),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(e){"use strict";function t(t){var n="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var r=i.dataTransfer;r&&-1!==e.inArray("Files",r.types)&&this._trigger(t,e.Event(t,{delegatedEvent:i}))!==!1&&(i.preventDefault(),n&&(r.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){return t.isDefaultPrevented()?!1:void((n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,r=t.files[0],o=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:a,value:t.blob}):e.each(t.files,function(i,r){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||a,value:r})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(a,t.blob,r.name):e.each(t.files,function(r,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append("array"===e.type(t.paramName)&&t.paramName[r]||a,o,o.uploadName||o.name)})),t.data=n):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var r=e.Deferred(),o=r.promise();return n=n||this.options.context||o,t===!0?r.resolveWith(n,i):t===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,n){var i=this,r=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,o){return(t||o)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).then(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():r(arguments)}).then(t,o)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,r,o=this,a=t.files[0],s=a.size,c=t.uploadedBytes,l=t.maxChunkSize||s,u=this._blobSlice,d=e.Deferred(),f=d.promise();return this._isXHRUpload(t)&&u&&(c||s>l)&&!t.data?n?!0:c>=s?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(r=function(){var n=e.extend({},t),f=n._progress.loaded;n.blob=u.call(a,c,c+l,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+c+"-"+(c+n.chunkSize-1)+"/"+s,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&e.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,a,l){c=o._getUploadedBytes(l)||c+n.chunkSize,f+n.chunkSize-n._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:c-n.uploadedBytes,total:c-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=c,n.result=i,n.textStatus=a,n.jqXHR=l,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),s>c?r():d.resolveWith(n.context,[i,a,l])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),d.rejectWith(n.context,[e,t,i])})},this._enhancePromise(f),f.abort=function(){return i.abort()},r(),f):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=t,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(e,t,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=e,r.textStatus=i.textStatus=t,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,r,o,a,s=this,c=s._getAJAXSettings(n),l=function(){return s._sending+=1,c._bitrateTimer=new s._BitrateTimer,i=i||((r||s._trigger("send",e.Event("send",{delegatedEvent:t}),c)===!1)&&s._getXHRPromise(!1,c.context,r)||s._chunkedUpload(c)||e.ajax(c)).done(function(e,t,n){s._onDone(e,t,n,c)}).fail(function(e,t,n){s._onFail(e,t,n,c)}).always(function(e,t,n){if(s._onAlways(e,t,n,c),s._sending-=1,s._active-=1,c.limitConcurrentUploads&&c.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,c),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),a=o.then(l)):(this._sequence=this._sequence.then(l,l),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(c.context,r),l())},this._enhancePromise(a)):l()},_onAdd:function(t,n){var i,r,o,a,s=this,c=!0,l=e.extend({},this.options,n),u=n.files,d=u.length,f=l.limitMultiFileUploads,p=l.limitMultiFileUploadSize,h=l.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(l),_=0;if(!d)return!1;if(p&&void 0===u[0].size&&(p=void 0),(l.singleFileUploads||f||p)&&this._isXHRUpload(l))if(l.singleFileUploads||p||!f)if(!l.singleFileUploads&&p)for(o=[],i=[],a=0;d>a;a+=1)m+=u[a].size+h,(a+1===d||m+u[a+1].size+h>p||f&&a+1-_>=f)&&(o.push(u.slice(_,a+1)),r=g.slice(_,a+1),r.length||(r=g),i.push(r),_=a+1,m=0);else i=g;else for(o=[],i=[],a=0;d>a;a+=f)o.push(u.slice(a,a+f)),r=g.slice(a,a+f),r.length||(r=g),i.push(r);else o=[u],i=[g];return n.originalFiles=u,e.each(o||u,function(r,a){var l=e.extend({},n);return l.files=o?a:[a],l.paramName=i[r],s._initResponseObject(l),s._initProgressObject(l),s._addConvenienceMethods(t,l),c=s._trigger("add",e.Event("add",{delegatedEvent:t}),l)}),c},_replaceFileInput:function(t){var n=t.fileInput,i=n.clone(!0),r=n.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),n.after(i).detach(),r&&i.focus(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?i[0]:t}),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,n){var i,r=this,o=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])},s=function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){o.resolve(e)}).fail(a)},c=function(){i.readEntries(function(e){e.length?(l=l.concat(e),c()):s(l)},a)},l=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,o.resolve(t._file)):t.file(function(e){e.relativePath=n,o.resolve(e)},a):t.isDirectory?(i=t.createReader(),c()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i),n._trigger("change",e.Event("change",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)!==!1&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,r={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)!==!1&&n._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=this.element.data();e.each(this.element[0].attributes,function(e,r){var o,a=r.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),o=i[a],t._isRegExpOption(a,o)&&(o=t._getRegExp(o)),n[a]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){
t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,r=this,o=e.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return void o.reject();t.files=e,n=r._onSend(null,t),n.then(function(e,t,n){o.resolve(e,t,n)},function(e,t,n){o.reject(e,t,n)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),define_namespace("#js-identity-verification",function(e){function t(e){u.addClass("flash-error").html("<li>"+e+"</li>").removeClass("hide")}var n=e.find("form"),i=n.data("stripe-upload-url"),r=n.data("public-key"),o=n.data("id-post-url"),a=n.data("provider-key"),s=e.find("#js-identity-document-upload"),c=e.find("#js-processing-state"),l=$("#saving-layer"),u=$("#account_errors"),d=8e6,f=!0;n.fileupload({url:i,sequentialUploads:!0,formData:{key:r,purpose:"identity_document"}}).bind("fileuploadadd",function(e,n){u.addClass("hide"),l.show(),n.files[0].size>d?(t("Maximum file is 8MB.  Please try a smaller file."),l.hide(),f=!1):f=!0,1==f&&n.submit().success(function(e,t,n){var i=$.ajax({type:"POST",url:o,data:{provider_key:a,foreign_key:e.id}});i.done(function(e,t){s.hide(),c.show(),l.hide()})})}).bind("fileuploadfail",function(e,n){t("Sorry!  Your file upload failed.  Please try your upload again.")}),n.on("submit",function(e){e.preventDefault(),$("#js-hidden-file-upload").click()})}),define_namespace("body.identity_documents",function(){$(document).on("click","#identity_documents_thanks a.jumio-modal-close-from-iframe",function(e){e.preventDefault(),window.top.postMessage(JSON.stringify({close_jumio_modal:!0}),"*")})}),define_namespace(".js-language-banner",function(e){var t="undefined"!=typeof I18n.locale?I18n.locale:void 0;e.find(".js-yes").on("click",function(){write_cookie("dismiss_language_banner","1"),track("Language Banner Yes",{lang:t})}),e.find(".js-no").on("click",function(n){n.preventDefault();var i=$(n.currentTarget).closest("form");$.ajax({method:i.attr("method"),url:i.attr("action"),data:i.serialize()}),e.addClass("is-hidden"),write_cookie("dismiss_language_banner","1"),track("Language Banner No",{lang:t})}),e.removeClass("is-hidden"),track("Language Banner View",{lang:t})}),function(){$(function(){$("#learn_more_panel").livequery(function(){function e(){$("#learn_more_dialog_content").removeClass("page0 page1 page2 page3").addClass("page"+i)}function t(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}var n=$(this),i=0;n.closest(".modal_dialog").attr("id","learn_more_modal"),n.serialScroll({items:".panel",lazy:!0,lock:!1,step:1,cycle:!1,duration:500,easing:"easeOutExpo"}),e(),n.on("click",".next",function(){n.trigger("next"),i+=1,t("Learn more modal next"),e()}),n.on("click",".prev",function(){n.trigger("prev"),i-=1,t("Learn more modal previous"),e()}),n.closest(".modal_dialog").on("modal_dialog:opened",function(){$.fx.off=!0,n.trigger("goto",[i]),$.fx.off=!1})})})}(),$(function(){var e=".video_player";$(e).livequery(function(){$(this).ksr_video()})}),function(){function e(e,t){var n=e.add(t);n.siblings().removeClass("current_tab"),n.addClass("current_tab"),$(document).trigger("tab")}function t(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"able":e+"able"})}function n(e){return"string"!=typeof e?"":e.replace(/.$/,function(e){return"e"===e?"ed":e+"ed"})}function i(e){if("string"!=typeof e)return"";var t=e.match(/\d+/);return t?t[0]:null}$("body.admin").delegate(".tab","click",function(){var t,n=$(this),i=n.attr("class").match(/tab_\d+/),r=n.find("a");i&&(t=$("."+i[0].replace(/tab/,"pane"))),i&&t.length&&(r.length&&""===$.trim(t.html())?(n.addClass("submitting"),t.html($('<div class="spinner" />').spin("ksr","#000")),$.ajax({url:r.attr("href")+".js",type:"GET",complete:function(i){n.removeClass("submitting"),t.html(i.responseText),e(n,t)}})):e(n,t),history.pushState(null,null,r.attr("href")))}),$("body.admin").delegate(".tab_label a","click",function(e){e.preventDefault()}),$("body.admin").delegate(".expand, .collapse","click",function(e){e.preventDefault(),$(this).add($(this).siblings(".expand, .collapse, .expandable")).toggle()});var r=["user","project","task","message","backing"];_.each(r,function(e){$(document).on("click",".js-"+e+"_notes_hider, .js-"+e+"_notes_shower",function(){$(".js-"+e+"_note").toggle(),$(".js-"+e+"_notes_shower").toggle(),$(".js-"+e+"_notes_hider").toggle()})}),$(".js-admin_notes_expand").one("click",function(e){var t=$(this);e.preventDefault(),$.ajax({url:t.prop("href"),type:"GET",dataType:"html",success:function(e){t.closest(".js-notes").find(".expandable.ajax-container").html(e)}})}),$("body.admin").delegate(".batch_action .select_all","click",function(e){e.preventDefault();var t=$(this),n=t.closest(".batch_action"),i=n.parent(),r=i.find("input.checkbox:not([disabled])");return r.length?void("Select all"===t.text()?(r.prop("checked",!0),t.text("Deselect all")):(r.prop("checked",!1),t.text("Select all"))):void growl({error:"Nothing to select."})}),$("body.admin").delegate(".batch_action input.submit","click",function(e){e.preventDefault();var r=$(this),o=r.closest("form"),a=r.closest(".batch_action"),s=a.parent(),c=s.find("input.checkbox:checked"),l=c.map(function(e,t){return i(t.id)}).get(),u=r.attr("name"),d=o.attr("action"),f=a.data("type"),p=a.data("terse_type"),h=f.replace(/s$/,""),m={},g=s.find(".batch_"+u+"_info").data("confirm_url");if(s.find("input.checkbox:not(checked)").each(function(){$(this).parent().removeClass("highlight")}),!c.length)return void growl({error:"No "+p+" selected to "+u+"."});var _=[];return c.each(function(){$(this).hasClass(t(u))?$(this).parent().removeClass("highlight"):(_.push($(this)),$(this).parent().addClass("highlight"))}),_.length?void growl({error:"You selected "+_.length+" "+formatters.pluralize(p,_.length)+" that cannot be "+n(u)+". Please unselect those and try again."}):(m[f]=l,void $.ajax({url:g,data:m,type:"get"}).done(function(e){$.modal_confirm(function(){$.ajax({type:"PUT",url:d,data:m,success:function(){c.each(function(){var e=$(this);e.attr({checked:!1,disabled:!0}),e.closest("."+h).addClass(n(u)).find(".status").html(n(u))}),growl({success:"Selected "+p+" were "+n(u)})},error:function(){growl({error:"There was a problem "+u+"ing one or more of those "+p+". Please refresh the page and try again."})}})},{title:"Batch "+u,message:e,confirm_text:formatters.capitalize(u)+" "+l.length+" "+formatters.pluralize(p,l.length),cancel_text:"cancel"===u?"never mind":"cancel"})}))}),$(document).on("submit",".zendesk_ticket form",function(e){var t=$(this);t.find(".submit").hide(),t.find(".loading").show(),e.preventDefault(),$.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),dataType:"JSON",success:function(e){var n="https://kickstarter.zendesk.com/tickets/"+e.id,i=$("<a/>");i.attr("href",n),i.text(n),i.addClass("associated_zendesk_ticket right"),t.closest(".modal_dialog").trigger("close"),growl({success:"Ticket sent successfully!"}),$("#send_to_zendesk").append(i)},complete:function(){t.find(".submit").show(),t.find(".loading").hide()}})})}(),$(function(){var e=".ksr_toggle",t=$(e);t.length&&($(e+" a").on("click",function(t){var n=$(this);n.closest(e).find("a").removeClass("selected"),n.addClass("selected"),n.closest(e).find(".bg").css({left:n.position().left}),t.preventDefault()}),$(e+" a.selected").click(),$(e+" .bg").addClass("show"))}),define_namespace("body.profile",function(){function e(e){e=e||$(".mobius"),e.each(function(){var e=$(this).data("mobius");if(e){e.clear_extra_params();for(var n in t)t.hasOwnProperty(n)&&e.add_param(n,t[n])}})}$("body#users_show").length&&"undefined"!=typeof history.pushState&&history.pushState(null,null,window.location.pathname);var t=URI().query(!0);e(),$(".mobius").livequery(function(){e($(this))})}),$(function(){function e(){function e(e){var n,r=e.responseText;if("string"==typeof r)try{r=JSON.parse(r)}catch(a){}r.project&&(n=Project.find(r.project.id),o=r.poll_interval_override||t(o,n,r.project),n.set(r.project)),i(o)}function t(e,t,n){var i;return t.get("pledged")!==n.pledged||t.get("comments_count")!==n.comments_count?(i=e-Math.ceil((e-s)/2),Math.max(i,s)):(i=e+10,Math.min(i,c))}var i,r=$(this),o=parseInt(r.data("dynamic"),10),a=r.data("poll_url"),s=5,c=60;a&&"number"==typeof o&&!isNaN(o)&&(i=function(t){n[a]=setTimeout(function(){n[a]=$.ajax({global:!1,url:a,complete:e})},1e3*t)})(o)}function t(){var e=n[$(this).data("poll_url")];"number"==typeof e?clearTimeout(e):"function"==typeof e.abort&&e.abort()}$(document).on("project_added_to_curated_page",function(e,t){var n=$("#add_to_curated_page_widget .button-curate");n.addClass("on"),n.attr("href",t.edit_url)}),"undefined"!=typeof current_project&&current_project.on_change("pledged",function(){var e=$("#stats"),t=e[0].className.match(/digits_\d+/),n="digits_"+Math.floor(current_project.get("pledged")).toString().length;t&&t[0]!==n&&e.removeClass(t[0]).addClass(n)}),$(".js-checkout-poller").livequery(function(){var e=$(this),t=$('<span class="spinner" />').spin("ksr","#333");e.append(t),$.pollster(e.data("href"),function(t){return"successful"===t.state?(window.location.reload(),!0):"failed"===t.state?(growl({error:t.state_reason}),e.closest(".notification-message").remove(),!0):void 0},{delay:2500})});var n={};$(".poll[data-dynamic]").livequery(e,t)}),$(function(){function e(e){return e.closest("#preview, .render_mustache, .js-message-thread").data("data")}function t(e){var t=e.find('input[type="submit"]');e.addClass("submitting"),t.addClass("btn--disabled")}function n(e){var t=e.find('input[type="submit"]');e.removeClass("submitting"),t.removeClass("btn--disabled")}function i(t){var i="messages";"undefined"!=typeof current_project&&(i="project_messages"),t.closest(".modal_dialog").length&&(i="backer_modal"),"backers_show"===$("body").attr("id")&&(i="backer_page"),("backings_show"===$("body").attr("id")||"backings_index"===$("body").attr("id"))&&(i="backings_show"),$.ajax({url:t.attr("action"),type:t.attr("method"),dataType:"json",data:t.serialize()+"&"+$.param({"mp[message_context]":i}),success:function(i){var o=e(t),a=t.closest(r).find("ul.messages");i.errors?_.each(_.keys(i.errors),function(e){growl({error:e+": "+i.errors[e]})}):(a.append(render("messages/_show",i)).trigger("message_sent",o?[o.backing?o.backing.id:void 0,a.children().length]:[]),$(document).trigger("resize")),t.get(0).reset(),n(t)}})}var r=".NS_message_threads__show";$(document).on("click",r+" .pledge_details_link",function(e){$(r).find(".pledge_details").toggleClass("visible"),$(document).trigger("resize"),$(this).toggleClass("selected"),track("Message Info Toggle",{text:$.trim($(this).text())}),e.preventDefault()}),$(r+":visible").livequery(function(){function t(e){$.ajax({url:o.urls.web.read,type:"put"}),i.trigger("message_thread_read",[o]),e&&e.preventDefault()}function n(e){$.ajax({url:o.urls.web.unread,type:"put"}),i.trigger("message_thread_unread",[o]),e&&e.preventDefault(),track("Message Read Toggle",{toggled_to:"unread"})}var i=$(this),o=e(i);o.unread_messages_count>0&&t(),$(r+" .mark_as_unread").on("click",n),$(r+" .mark_as_read").on("click",t)}),$(document).on("submit",r+" form.reply",function(e){var n=$(this),r=n.find('[name="message[body]"]');r.val()?n.is(".submitting")||(t(n),i(n)):growl({error:"Please add a message"}),e.preventDefault()}),$(document).on("focus",r+" form.reply textarea",function(){var e=$(this),t=e.closest("form.reply");t.addClass("replying"),e.removeAttr("placeholder")}),$(document).on("click",r+" .respond_link",function(e){$(r+" form.reply textarea").focus(),track("Message Reply Click"),e.preventDefault()})}),$(function(){function e(){$("form.term").term_form().on("submit",function(e){e.preventDefault();var t=$(this);c.set_params(t.serialize_without_blank())&&track("Message Inbox Search",{selected_project:$.trim($("#content .projects .title b").text()),term:t.find("input#term").val()})})}function t(e){a=$("#preview"),a.html(render("message_threads/_show",e,"messages/_show")).data("data",e),o=$(r),s=o.find(".messages_container");var t=$("form.reply"),n=$(r).find(".respond_shortcut");$("#message_threads").removeClass("full_width"),setTimeout(function(){$("#preview_container").fadeIn(function(){if(i(),$("#content ul.threads").height()>a.height()&&$("#preview").simple_sticky_bar(),e.messages.length>1){var t=$(r+" ul.messages li:last-child .message");s.scrollTo(t)}})},250),s.scroll(function(){var e=$(this),i=t.position()||{top:0};e.height()-i.top+220<=0?n.removeClass("hidden"):n.addClass("hidden")}).scroll(),track("Message Thread View")}function n(){var e=$(".dropdown a.selected"),t={};e.each(function(){var e=$(this);_.extend(t,URI(e.attr("href")).query(!0))}),c.set_params($.param(t),!0)}function i(){if(a.length){var e,t=a.get(0).offsetTop-$(window).scrollTop(),n=$(window).height(),i=o.find(".backing").height();0>t&&(t=0),e=n-i-t,s.height(e),a.css("margin-bottom",$(window).height()-e-60),o.trigger("shifted"),$(r+" ul.messages").height()>=s.height()?$(r+" .respond").removeClass("hidden"):$(r+" .respond").addClass("hidden")}}if($("#message_threads_index, #message_threads_show").length&&root.threads){var r=".NS_message_threads__show",o=$(r),a=$([]),s=$([]);track("Message Inbox View");var c=new Location($.parseEscapedJSON(root.threads),$("#content"),"message_threads/_index",{url:$("#content").data("message_threads_url"),mobius_on:"message_threads"});c.on_change(function(e){var t=$("#content ul.threads"),n=!(!this.get("params")||!this.get("params.debug"));_.each(e.message_threads||this.get("message_threads"),function(e){n||delete e.debug,e.id&&t.append(render("message_threads/_row",e))})}),c.change(),e(),c.on_change_params(e),$(document).on("change","form.params",function(e){e.preventDefault();var t=$(this);c.set_params(t.serialize_without_blank())}),$(document).on("click","li.thread > a",function(e){var t=$(this),n=t.data("api_url");n&&($.ajax({url:oauth_url(n),dataType:"json",success:function(e){$("li.thread").removeClass("selected"),t.closest("li.thread").addClass("selected"),History.pushState({selected_thread:e},null,"undefined"!=typeof current_project?e.urls.web.project_message_thread:e.urls.web.message_thread)}}),e.preventDefault())}),$(window).on("statechange",function(){var e=History.getState().data;e&&"undefined"!=typeof e.selected_thread&&t(e.selected_thread)}),window.selected_thread&&t($.parseEscapedJSON(window.selected_thread)),c.get("params.flag")&&$(".message_"+c.get("params.flag")+" .report-spam a").click(),$(document).on("click","#content .dropdown a",function(e){var t=$(this),i=t.closest(".dropdown"),r=i.closest(".ksr-dropdown");i.find("a").removeClass("selected"),t.addClass("selected"),n(),r.hasClass("projects")?track("Message Inbox Project Filter",{selected_project:$.trim($(this).text())}):r.hasClass("views")&&track("Message Inbox Views Filter",{selected_project:$.trim($("#content .projects .title b").text()),selected_view:$.trim($(this).text())}),e.preventDefault()}),$(document).on("message_thread_read",function(e,t){$("#thread_"+t.id).removeClass("unread")}),$(document).on("message_thread_unread",function(e,t){$("#thread_"+t.id).addClass("unread")}),$(document).on("scroll",i),$(document).on("focus",r+" #message_body",function(){s.animate({scrollTop:$("ul.messages").height()+60},1200,"easeOutExpo")}),$(document).add(window).resize(function(){i()}),root.threads=c}}),function(e){e(document).on("click",".message .report-spam a",function(t){t.preventDefault();var n=e(this),i=this,r=n.closest(".message"),o=r.clone(),a=e('<p class="flagged_message"><em class="spam_reported"></em></p>');o.find("span.report-spam").remove(),e.modal_confirm(function(){return r.find(".body").before(a),KsrJSON.get(n.data("url"),"post",a.find("em"),i)},{message:o.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})}),e(document).on("ksr_json:complete",".message .spam_reported",function(t,n){var i=e(this).closest(".message"),r=i.find(".report-spam");n.modal||(r.hide(),200!==n.status||r.is(".admin")||i.find(".body").hide())})}(jQuery),define_namespace(".NS_mobile__universal_app_hero",function(e){function t(){var e=$(".js-ipad-inner"),t=.81836*s.outerWidth(),i=.86634*s.outerHeight(),r=$(".js-ipad-inner-content"),o=$(".js-ipad-inner-content > div");e.css({width:t,height:i,left:(s.outerWidth()-t)/2,top:(s.outerHeight()-i)/2}),r.css({width:t*o.length}),o.css({width:t,height:i}),n()}function n(){var e=$(".js-iphone-container"),t=$(".js-iphone-frame"),n=$(".js-iphone-inner"),i=$(".js-iphone-inner-content"),r=$(".js-iphone-inner-content > div");$(window).width()<$(".js-device-container").width()+.35*t.outerWidth()?e.css({right:0}):e.css({right:-(.35*t.outerWidth())}),t.css({height:.8141*s.outerHeight(),right:-(.35*t.outerWidth())});var o=.86585*t.outerWidth(),a=.7537*t.outerHeight();n.css({width:o,height:a,left:(t.outerWidth()-o)/2,top:(t.outerHeight()-a)/2}),i.css({width:o*r.length}),r.css({width:o,height:a}),$(".js-iphone-video").css({width:o,height:a})}function i(){$(".js-ipad-inner-content").css({marginLeft:-(100*c)+"%"}),c+=1,c>=$(".js-ipad-inner-content > div").length&&(c=0)}function r(){$(".js-iphone-inner-content").css({marginLeft:-(100*l)+"%"}),l+=1,l>=$(".js-iphone-inner-content > div").length&&(l=0)}function o(){clearInterval(a),a=setInterval(function(){i(),r()},5e3)}var a,s=$(".js-ipad-frame"),c=1,l=1,u=$(".js-form-message",e),d=!1;$(document).on("submit","#send_mobile_link_form",function(e){e.preventDefault();var t=$(this);d||(d=!0,$.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find("#email_or_phone").val()},success:function(e){e.success?(u.show().removeClass("error").html(e.success),t.remove()):e.error&&u.show().addClass("error").html(e.error)},complete:function(){d=!1}}))}),$(document).on("closed.modal_dialog","#send_mobile_link_dialog",function(t){t.preventDefault(),$("#send_mobile_link_form",e).length||u.html(I18n.t("onloads.views.mobile.universal_app_hero.You_should_already_have_a_link_from_us"))}),device_idioms["not-ios"]&&$(".js-get-the-app-button").on("click",function(e){track("Mobile Promo Reveal Form"),$(".js-get-the-app-button-container").css({marginTop:-$(this).outerHeight()}),setTimeout(function(){$(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),$(document).resize(function(){t()}),setTimeout(function(){t(),e.removeClass("loading")},500),o()}),define_namespace("body#mobile_index",function(){function e(){var e=$(".js-tablet"),n=$(".js-tablet-item"),i=$(".js-tablet-screenshots"),r=.875*$(".js-device-container").outerWidth();.75*$(window).width()<=640?$(".js-device-container").css({width:"100%",height:Math.round(.65625*$(".js-device-container").width())}):$(".js-device-container").css({width:640,height:Math.round(420)}),e.css({width:r}),i.css({width:"100"*n.length+"%"}),n.css({width:100/n.length+"%"}),t()}function t(){var e=$(".js-phone"),t=$(".js-phone-item"),n=$(".js-phone-screenshots");e.css({height:.78*$(".js-tablet").outerHeight(),width:Math.round(.78*$(".js-tablet").outerHeight()*.5625)}),n.css({width:"100"*t.length+"%"}),t.css({width:100/t.length+"%"})}function n(){$(".js-tablet-screenshots").css({marginLeft:-(100*s)+"%"}),s+=1,s>=$(".js-tablet-item").length&&(s=0)}function i(){$(".js-phone-screenshots").css({marginLeft:-(100*c)+"%"}),c+=1,c>=$(".js-phone-item").length&&(c=0)}function r(){clearInterval(o),o=setInterval(function(){n(),i()},5e3)}var o,a=$(".js-device-container"),s=1,c=1,l=!1;$(document).on("submit",".js-send-mobile-link-form",function(e){e.preventDefault();var t=$(this);""===t.find(".js-email-or-phone").val()?growl({error:I18n.t("onloads.views.mobile.index.phone_cant_be_blank")}):l||(l=!0,$.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:t.find(".js-email-or-phone").val(),platform:t.find(".js-platform").val()},success:function(e){e.success?(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().removeClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.success),t.closest(".js-get-the-app-form-container").find(".js-form-retry").hide(),t.hide()):e.error&&(t.closest(".js-get-the-app-form-container").find(".js-form-message").show().addClass("error"),t.closest(".js-get-the-app-form-container").find(".js-form-text").html(e.error))},complete:function(){l=!1}}))}),device_idioms["not-ios"]&&($(".js-get-the-app-button").on("click",function(e){var t=$(this).closest(".js-get-the-app-container");track("Mobile Promo Reveal Form"),t.find(".js-get-the-app-button-container").css({marginTop:-$(this).outerHeight()}),t.addClass("is-open"),setTimeout(function(){t.find(".js-get-the-app-form-container").find("input[type=text]").focus()},600),e.preventDefault()}),$(".js-email-or-phone").on("focusout",function(){var e=$(this).closest(".js-get-the-app-container");""===$(this).val()&&e.is(".is-open")&&(e.find(".js-get-the-app-button-container").css({marginTop:0}),e.removeClass("is-open"),track("Mobile Promo Close Form"))}),$(".js-form-retry").on("click",function(e){var t=$(this).closest(".js-get-the-app-container");t.find(".js-get-the-app-button-container").css({marginTop:-$(".js-get-the-app-button").outerHeight()}),t.removeClass("is-open"),t.find(".js-form-text").html(""),t.find(".js-form-message").hide(),track("Mobile Promo Form Retry"),e.preventDefault()})),$(document).resize(function(){e()}),setTimeout(function(){e(),a.removeClass("is-loading")},1400),r()}),define_namespace("body#newsletters_index",function(e){function t(e){var n=e.data("frame")||0,i=e.data("timeout");e.data("animating")&&(e.find("img").hide(),e.find("img").eq(n).show(),e.data("frame",2>n?n+1:0),i&&clearTimeout(i),i=setTimeout(function(){t(e)},200),e.data("timeout",i))}e.find("li.newsletter-item").livequery("mouseenter",function(){$(this).data("animating",!0),t($(this))}).livequery("mouseleave",function(){$(this).data("animating",!1)})}),$(function(){var e="ol.admin-notes";$(document).on("submit",e+" form",function(){var e,t=$("#admin-menu .note_count"),n=t.text().match(/^(\d+)/);n&&(e=parseInt(n[1],10),t.text(e+1+" notes"))})}),$(function(){function e(){$(r+" .verification_error").html("").addClass("hide"),$(".field_with_errors").children().unwrap()}function t(){var e=$(".js-country"),t=e.closest(r),n=t.find("#phone_number");n.attr("placeholder",function(){var t=I18n.countries[e.val().toLowerCase()];return t&&t.phone_example?"Ex: "+t.phone_example:""})}function n(t){var n=$(t.target).closest(r),i=n.find("#phone_number"),o=n.find("input.radio[name=verify]:checked").val(),a=n.find(".js-country").val();return"sms"!==o&&"call"!==o?!1:($.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:o,number:i.val(),country:a},success:function(t){e(),_.isUndefined(t.error)?(n.find(".token").val(""),n.find(".highlight strong").html(t.number+".").end().find(".phone_section, .options_section").addClass("hide").end().find(".code_section").removeClass("hide").trigger("shifted").find(".js-sms_show, .js-call_show").addClass("hide").filter(".js-"+o+"_show").removeClass("hide").end().end().end()):(i.wrap('<div class="field_with_errors" />').focus(),n.find(".phone_section .verification_error").html(t.error).removeClass("hide").trigger("shifted"))},beforeSend:function(){n.addClass("loading").trigger("shifted")},complete:function(){n.removeClass("loading").trigger("shifted")}}),void t.preventDefault())}function i(t){if("keypress"!==t.type||t.which===KEY.ENTER){var n=$(this),i=n.closest(r),o=i.find("#token"),a=i.find(".js-country").val();$.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{token:o.val(),country:a},success:function(t){if(e(),_.isUndefined(t.error)){if(!_.isUndefined(t.html)){var n=$(t.html),r=i.closest(".NS-phone_numbers__verify"),a=i.closest(".NS-two_factor_authentication_show").find(".js-change_number");r.length?(r.replaceWith(n),n.trigger("phone_number:added")):a.length?(window.location.reload(!0),growl({success:"Your two factor authentication phone fallback number has changed"})):i.trigger("phone_number:added")}}else o.wrap('<div class="field_with_errors" />').focus(),i.find(".code_section .verification_error").html(t.error).removeClass("hide").trigger("shifted")},beforeSend:function(){i.addClass("loading")},complete:function(){i.removeClass("loading")}}),t.preventDefault()}}var r=".NS-phone_numbers__edit";$(document).on("click",r+" #resend_token",function(){$(this).closest(r).find(".code_section").addClass("hide").end().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")}),$(document).on("change",r+" .js-country",t),$(r).livequery(t),$(document).on("click","#send_verification",n),$(document).on("keypress",r+" #phone_number",function(e){e.which===KEY.ENTER&&n(e)}),$(document).on("click",r+" #verify_code",i),$(document).on("keypress",r+" #token",i),$(document).on("click",r+" #change_number",function(e){var t=$(this);$.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(e){_.isUndefined(e.html)||t.closest(r).replaceWith(e.html)}}),e.preventDefault()})}),define_namespace(".pledges__checkout_faqs",function(e){e.on("click",".faq-question a",function(e){var t=$(this).closest(".faq");t.toggleClass("expanded"),track("Toggled Pledge Checkout FAQ",{pledge_faq_question:t.find(".question").text()}),e.preventDefault()}),$("body#pledges_edit").length&&setTimeout(function(){$(".faqs li#change_my_pledge_amount").addClass("expanded"),$(".faqs li#change_my_reward_selection").addClass("expanded"),$(".faqs li#cancel_my_pledge").length&&$(".faqs li#cancel_my_pledge").addClass("expanded")},800)}),function(){var e=function(e,t){this.reward_data=t,this.id=this.reward_data.id||this.constants.NO_REWARD_ID,this.shipping_rules=this.reward_data.shipping_rules||[],this.pledge_url=t.urls?new URI(t.urls.api.reward):void 0,this.shipping_enabled=this.reward_data.shipping_enabled||!1,this.index=t.index,this.closed_height=t.closed_height,this.prefilledNoRewardVal=e.data("prefillAmount"),this.el={$rw:e,$select:e.find("select"),$form:e.find("form"),$form_wrapper:e.find(".js-form-wrapper"),$description:e.find("div.pledge__reward-description"),$truncate_link:e.find("a.pledge__reward-description-toggle"),$truncate_link_span:e.find("a.pledge__reward-description-toggle span"),$pledge_input:e.find('input[name="backing[amount]"]'),$radio:e.find(".js-pledge-radio"),$submit:e.find(".js-reward-continue-button"),$continueAndApplePayButtons:e.find(".js-pledge-button")},this.state={is_selected:!1,is_truncated:!1,is_truncate_worthy:this.el.$description.height()>=this.constants.TRUNCATE_HEIGHT,submit_halted:!1,is_shipping_populated:this.shipping_rules.length?!0:!1},e.data("reward",this),this.el.$form_wrapper.aria_set_hidden()};e.prototype.constants=Object.freeze({MAX_FETCH_RETRIES:3,FETCH_TIMEOUT:1e3,TRUNCATE_HEIGHT:80,TRUNCATE_LINK_TEXT:I18n.t("library.controllers.reward_controller.More"),UNTRUNCATE_LINK_TEXT:I18n.t("library.controllers.reward_controller.Less"),NO_REWARD_ID:0}),e.prototype.toggle_description_truncation=function(){var e=this.el.$truncate_link.text().trim();return this.state.is_truncate_worthy||this.state.is_truncated?(this.state.is_truncated=!this.state.is_truncated,this.el.$description.toggleClass("pledge__reward-description--truncated"),this.el.$description.toggleClass("pledge__reward-description--expanded"),this.el.$truncate_link_span.text(e===this.constants.TRUNCATE_LINK_TEXT?this.constants.UNTRUNCATE_LINK_TEXT:this.constants.TRUNCATE_LINK_TEXT),void this.el.$truncate_link.toggleClass("more")):void this.el.$truncate_link.addClass("hide")},e.prototype.hide_truncation_link=function(){this.el.$truncate_link.addClass("hide")},e.prototype.show_truncation_link=function(){this.el.$truncate_link.removeClass("hide")},e.prototype.toggle_pledge_form=function(){if(this.state.is_selected=!this.state.is_selected,this.toggle_pledge_form_classes(),this.el.$radio.length&&this.toggle_checkout_elements(),this.state.is_selected){this.inject_csrf_token(),this.handle_shipping_rules();var e=$(document).scrollTop();this.preselect_shipping_country(),this.focus_shipping_select(),$(document).scrollTop(e),this.id===this.constants.NO_REWARD_ID&&($(".js-no-reward-form-input").val()||$(".js-no-reward-form-input").val(this.prefilledNoRewardVal).select())}else this.el.$form_wrapper.aria_deactivate_keyboard_tabindex().aria_set_hidden()},e.prototype.toggle_pledge_form_classes=function(){this.el.$rw.toggleClass("pledge--available").toggleClass("pledge--selected"),this.el.$form_wrapper.toggleClass("pledge__checkout--is-visible")},e.prototype.reset_pledge_form=function(){this.el.$pledge_input.hasClass("error")&&(this.el.$pledge_input.removeClass("error"),this.el.$submit.removeClass("btn--disabled").addClass("btn--green"),this.update_pledge_total())},e.prototype.toggle_checkout_elements=function(){this.state.is_selected?this.el.$radio.prop("checked")||(this.el.$radio.prop("checked",!0),this.el.$radio.trigger("change")):this.el.$radio.prop("checked",!1)},e.prototype.handle_shipping_rules=function(){!this.state.is_shipping_populated&&this.shipping_enabled&&(this.show_loader(),this.shipping_rules.length?this.render_reward_select():this.fetch_reward_shipping_rules())},e.prototype.fetch_reward_shipping_rules=function(e){e=e||0,$.ajax({url:this.pledge_url,type:"get",dataType:"json",timeout:this.constants.FETCH_TIMEOUT,success:function(e){this.shipping_rules=e.shipping_rules,this.render_reward_select()}.bind(this),error:function(t,n){"timeout"===n&&e<this.constants.MAX_FETCH_RETRIES&&this.fetch_reward_shipping_rules(e+1)}.bind(this)})},e.prototype.show_loader=function(){this.el.$submit.addClass("is-loading").prop("disabled",!0)},e.prototype.hide_loader=function(e){setTimeout(function(){this.el.$submit.removeClass("is-loading").prop("disabled",!1)}.bind(this),e)},e.prototype.render_reward_select=function(){var e={select:this.el.$select,reward:this};this.state.is_selected&&setTimeout(function(){$(document).trigger("render_shipping_select",e),this.state.is_shipping_populated=!0,this.hide_loader(300)}.bind(this),this.transition_duration())},e.prototype.validate=function(){var e=this.is_country_selected(),t=this.is_pledge_high_enough();return this.shipping_enabled&&!e?this.throw_country_error():this.reset_country_error(),t?this.reset_pledge_error():this.throw_pledge_error(),!e&&this.shipping_enabled||!t?!1:(this.enable_submit_button(),!0)},e.prototype.transition_duration=function(){if(!$.support.transitionEvent())return 0;var e=this.el.$form_wrapper.css("transition-duration");return/ms$/.test(e)?parseFloat(e,10)||0:1e3*parseFloat(e,10)||0},e.prototype.focus_shipping_select=function(){this.el.$form_wrapper.aria_activate_keyboard_tabindex().aria_set_visible(),device_idioms["not-mobile"]?(this.el.$pledge_input.focus(),this.el.$pledge_input.val(this.el.$pledge_input.val())):this.el.$submit.focus()},e.prototype.inject_csrf_token=function(){var e=$("meta[name=csrf-param]").attr("content"),t=$("meta[name=csrf-token]").attr("content");this.el.$form.find("input[name="+e+"]").length||this.el.$form.append($("<input />",{type:"hidden",name:e,value:t}))},e.prototype.preselect_shipping_country=function(){this.el.$select.val()||this.el.$select.val(current_checkout.get("location_id"))},e.prototype.update_pledge_total=function(e){var t;t=e&&e.amount?e.amount:this.reward_data.minimum;var n=parseInt(this.el.$select.val(),10),i=this.get_shipping_rule(n),r=i.length?parseFloat(i[0].cost):0,o=t+r,a=formatters.format_number(o,{precision:0});this.id===this.constants.NO_REWARD_ID?this.el.$pledge_input.val(""):this.el.$pledge_input.val(a)},e.prototype.get_shipping_rule=function(e){return _.filter(this.shipping_rules,function(t){return t.location_id===e})},e.prototype.get_current_pledge_amount=function(){return KSR.Money.string_to_money(this.el.$pledge_input.val())},e.prototype.is_country_selected=function(){return!!this.el.$select.val()},e.prototype.throw_country_error=function(){this.el.$select.parent().addClass("error"),this.disable_submit_button()},e.prototype.reset_country_error=function(){this.el.$select.parent().removeClass("error")},e.prototype.is_pledge_high_enough=function(){var e,t=this.get_current_pledge_amount();if(this.shipping_rules.length){var n=parseInt(this.el.$select.val(),10),i=this.get_shipping_rule(n),r=i.length?parseFloat(i[0].cost):0;e=this.reward_data.minimum+r}else e=this.reward_data.minimum;return t>=e},e.prototype.reset_pledge_error=function(){this.el.$pledge_input.removeClass("error")},e.prototype.throw_pledge_error=function(){
this.el.$pledge_input.addClass("error"),this.disable_submit_button()},e.prototype.disable_submit_button=function(){this.el.$submit.removeClass("btn--green").addClass("btn--disabled")},e.prototype.enable_submit_button=function(){this.el.$submit.addClass("btn--green").removeClass("btn--disabled")},root.RewardController=e}(),define_namespace(".pledges__checkout_rewards",function(e){function t(e){if(u=0,!e.state.is_selected){d&&s(!1);var t=r(),i=0;t.length>0&&t[0].index<e.index&&(i=t[0].el.$rw.height()-t[0].closed_height);var o=e.el.$rw.offset().top-i-p;$(document).scrollTo(o,100),a(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),n(e)}}function n(e){var t=e.get_shipping_rule(current_checkout.get("location_id"));t=t.length?t[0]:null,current_checkout.set({reward:e.reward_data,shipping_rule:t})}function i(e){current_checkout.set({amount:e})}function r(){return _.filter(h,function(e){return e.state.is_selected===!0})}function o(){$(".submitting-non-ajax").removeClass("submitting-non-ajax"),$(".js-desc-toggle").addClass("hide")}function a(){var e=r();if(e.length){var t=e[0];t.toggle_pledge_form(),t.reset_pledge_form(),t.state.is_truncated&&t.toggle_description_truncation(),t.hide_truncation_link()}}function s(e){$(h).each(function(t,n){return n.el.$radio.prop("checked")?(n.el.$rw.click(),o(),e&&current_checkout.set({reward:this.reward_data}),void(d=!1)):void 0})}var c=e.find(".js-reward-available"),l=c.length,u=0,d=!1,f=!device_idioms["not-mobile"],p=f?20:100,h=new Array(l);h=c.map(function(e,t){var n=$(t),i=n.data("reward")||current_project.get("rewards")[0],r=i.id===current_checkout.get("reward").id,o=r?current_checkout.get("net_amount"):null;i.closed_height=n.height(),i.index=n.index();var a=new root.RewardController(n,i);return(a.shipping_enabled||r)&&a.update_pledge_total({amount:o}),a}).get(),c.on("change","radio",function(){$(this).click()}),c.on("keydown",function(e){if(e.keyCode===KEY.ESC){var t=$(e.delegateTarget),n=t.data("reward");n.state.is_selected&&(a(),t.find('input[type="radio"]').focus())}}),c.on("keydown",'input[type="radio"]',function(e){e.keyCode===KEY.ENTER&&(e.preventDefault(),$(this).click())}),c.on("click",function(e){var n=$(e.currentTarget).data("reward");t(n)}),c.on("keyup",'input[name="backing[amount]"]',function(){var e=KSR.Money.string_to_money($(this).val());i(e)}),c.on("click",".js-desc-toggle",function(e){e.preventDefault();var t=$(e.delegateTarget).data("reward");t.toggle_description_truncation()}),c.on("submit","form",function(e){var t=$(e.delegateTarget).data("reward"),n=t.validate();if(t.state.submit_halted=!n,t.state.submit_halted&&o(),n){var i=t.get_current_pledge_amount();current_checkout.set("amount",i),d=!0,u=0}return n}),c.on("blur input",'input[name="backing[amount]"]',function(e){var t=$(e.delegateTarget).data("reward"),n=t.get_current_pledge_amount();t.validate(),current_checkout.set("amount",n)}),c.on("change blur",'select[name="backing[location_id]"]',function(e){var t=$(this),n=$(e.delegateTarget).data("reward"),i=parseInt(t.val(),10),r=n.get_shipping_rule(i);isNaN(i)||current_checkout.set("location_id",i),current_checkout.set("shipping_rule",r[0]),n.shipping_enabled&&n.update_pledge_total(),n.validate()}),$(document).on("click",function(){u+=1,3===u&&(a(),u=0)}),$("#confirm-adjust-pledge").on("click",function(){u=0}),"undefined"!=typeof current_checkout&&current_checkout.on_change("shipping_rule",function(){var e=current_checkout.get("shipping_rule"),t=e?parseFloat(e.cost):0;current_checkout.set("shipping_amount",t)}),s(!0),$(window).on("pageshow",function(e){f&&e.originalEvent.persisted&&o()})}),$(function(){$(".NS_pledges__no_ship").livequery(function(){var e=$(this),t=$("form.NS_pledges__form, form.manage_pledge"),n=t.find(".fields_and_submit"),i=t.closest(".modal_dialog"),r=i.data("modal_dialog");e.find("a.override").click(function(e){e.preventDefault(),$(this).trigger("close"),t.data("override",!0),t.removeClass("submitting-non-ajax"),t.find("#backing_location_id").val(null),t.submit()}),e.find("a.btn--green").click(function(t){t.preventDefault(),$(this).trigger("close"),r&&(e.hide(),n.show(),i.find("h1").show())})})}),define_namespace(".NS_pledges__shipping_select",function(){function e(e,r){n={},i.length||(i=e.clone());var o=i.clone();$(r.shipping_rules).each(function(e,t){n[t.location_id]=t}),o.find('option:not([value=""])').each(t),e.html(o.html()),e.val(current_checkout.get("location_id")),e.val(e.val()).trigger("change")}function t(){var e,t=$(this),i=t.val(),r=n[i];return r?(e=parseFloat(r.cost),t.text(e>0?I18n.t("onloads.views.pledges.checkout_shipping.location_name_and_shipping_amount",{name:t.data("name"),amount:formatters.money(e,{precision:0,currency:current_project.get("currency")})}):t.data(name))):t.remove(),t}var n,i=$();$(document).on("render_shipping_select",function(t,n){var i=n.select;e(i,n.reward)})}),define_namespace("body#pledges_edit",function(e){function t(e){var t=S[e],n=t.labelText;if(t.changed){var i=formatters.money(current_checkout.get(e),x),a=formatters.money(C[e],x);t.$new.html(i),t.$old.html(a),n+=" "+A,o(e)}else t.$old.html(w()),r(e);E&&t.$label.html(n)}function n(){var e=S.converted_amount;if(S.amount.changed){var t=current_checkout.get("amount")*current_project.get("static_usd_rate"),n=formatters.money(t,j);e.$new.html(n),e.$container.removeClass("hide")}else e.$container.addClass("hide")}function i(){var e=S.reward;if(e.changed){var t;t=current_checkout.get("reward").id?formatters.paragraphize(current_checkout.get("reward").description):k(),e.$description.html(t),e.$display_title.html(current_checkout.get("reward").title_for_backing_tier),a()}else e.$description.html(w()),s()}function r(e){S[e].$new.addClass("hide"),v=S[e].$icon.attr("class")+" hide",S[e].$icon.attr("class",v)}function o(e){S[e].$new.removeClass("hide"),v=S[e].$icon.attr("class").replace(/hide/g,""),S[e].$icon.attr("class",v)}function a(){S.reward.$description.parent().removeClass("pledge__detail-comparison__old").addClass("pledge__reward-description-wrap")}function s(){S.reward.$description.parent().addClass("pledge__detail-comparison__old").removeClass("pledge__reward-description-wrap")}function c(){S.reward.$truncate_link.parent().addClass("hide")}function l(){S.reward.$truncate_link.parent().removeClass("hide")}function u(){S.reward.$description.addClass("pledge__reward-description--truncated").removeClass("pledge__reward-description--expanded"),S.reward.$truncate_link.text("More"),S.reward.$truncate_link.parent().addClass("more")}function d(){S.reward.$description.removeClass("pledge__reward-description--truncated").addClass("pledge__reward-description--expanded"),S.reward.$truncate_link.text("Less"),S.reward.$truncate_link.parent().removeClass("more")}function f(){g.removeClass("submitting-non-ajax"),$(document).off("submit",h),g.submit()}var p=e.find("#confirm-adjust-pledge"),h=e.selector+" form.manage_pledge",m=$(h);if(m.length){var g,v="",y=80,b=["net_amount","shipping_amount","amount"],w=function(){return I18n.t("onloads.views.pledges.edit.No_change")},k=function(){return I18n.t("onloads.views.pledges.edit.No_thanks_I_just_want_to_help_the_project")},x={type:"truncate_zeros",currency:current_project.get("currency")},j={type:"truncate_zeros",currency:"USD"},C=_.clone(current_checkout.get()),S={reward:{$display_title:p.find("#js-pledge__reward-title"),$description:p.find("#js-pledge__reward-description"),$truncate_link:p.find("#js-modal-desc-toggle span"),changed:!1},net_amount:{$old:p.find("#js-confirm-adjust-pledge-amount__old"),$new:p.find("#js-confirm-adjust-pledge-amount__new"),$icon:p.find("#js-pledge__detail-comparison__icon"),$label:p.find("#js-pledge__detail-label__pledge"),labelText:I18n.t("onloads.views.pledges.edit.Pledge_amount"),changed:!1},shipping_amount:{$old:p.find("#js-confirm-adjust-shipping-amount__old"),$new:p.find("#js-confirm-adjust-shipping-amount__new"),$icon:p.find("#js-shipping__detail-comparison__icon"),$label:p.find("#js-pledge__detail-label__shipping"),labelText:I18n.t("onloads.views.pledges.edit.Shipping"),changed:!1},amount:{$old:p.find("#js-confirm-adjust-total-amount__old"),$new:p.find("#js-confirm-adjust-total-amount__new"),$icon:p.find("#js-total__detail-comparison__icon"),$label:p.find("#js-pledge__detail-label__total"),labelText:I18n.t("onloads.views.pledges.edit.Total"),changed:!1},converted_amount:{$container:p.find("#js-confirm-adjust-total-converted-amount"),$new:p.find("#js-confirm-adjust-total-converted-amount__new"),changed:!1}},T=e.hasClass("convert-currency"),D=current_project.get("country")!==current_user.get("location").country,I=current_project.get("currency_symbol")===I18n.t("number.currency.format.unit"),E=D&&I,A=I18n.t("onloads.views.pledges.edit.in_currency",{currency:current_project.get("currency")});"undefined"!=typeof current_checkout&&(current_checkout.on_change("reward",function(e){S.reward.changed=e.reward.id!==C.reward.id}),current_checkout.on_change("shipping_amount",function(e){S.shipping_amount.changed=e.shipping_amount!==C.shipping_amount}),current_checkout.on_change("amount",function(e){S.net_amount.changed=current_checkout.get("net_amount")!==C.net_amount,S.amount.changed=e.amount!==C.amount})),$(document).on("submit",h,function(e){e.preventDefault(),g=$(e.target),i(),$.each(b,function(e,n){t(n)}),T&&n(),p.modal_dialog().find(".js-confirm-yes").focus(),S.reward.$description.prop("scrollHeight")<y?c():l()}),$(".flash-error").livequery(function(){var e,t=root.KSR.Money.string_to_money($(".text#backing_amount").attr("value"));e="undefined"!=typeof $(".radio:checked").attr("alt")?root.KSR.Money.string_to_money($(".radio:checked").attr("alt")):null,track("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(t,10)})}),$(document).on("click","body#pledges_edit #js-modal-desc-toggle",function(e){e.preventDefault(),$(e.currentTarget).hasClass("more")?d():u()}),$(document).on("click","body#pledges_edit .js-confirm-yes",function(e){e.preventDefault(),f()}),$(document).on("before_close.modal_dialog",function(){g.removeClass("submitting-non-ajax"),u()})}}),define_namespace("body#pledges_new",function(){track("Viewed Pledge Checkout Page"),$("a.show_all_rewards").click(function(e){$(this).parents(".checkout_rewards").find("li:hidden").show(),$(this).parents(".checkout_rewards").removeClass("clicked_reward"),$(this).parents(".show_all").hide(),e.preventDefault(),$(document).trigger("shifted"),track("Expanded Rewards")}),$(".flash-error").livequery(function(){var e,t=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);e="undefined"!=typeof $(".radio:checked").attr("alt")?parseInt($(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null,track("Errored Pledge Selection",{pledge_tier_amount:parseInt(e,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(t,10)})}),-1!==location.search.indexOf("edit_from_interstitial=shipping")?track("Clicked Edit Shipping",{shipping_enabled:$(".radio:checked").parent().data("shipping_enabled"),project_country:current_project.get("country")}):-1!==location.search.indexOf("edit_from_interstitial=amount")&&track("Clicked Edit Amount",{shipping_enabled:$(".radio:checked").parent().data("shipping_enabled"),project_country:current_project.get("country")})}),$(function(){var e=".NS_post_likes__button";$(document).on("click",e+" button",function(e){e.preventDefault();var t=$(this).closest("form");$.ajax({url:t.attr("action"),dataType:"json",type:"POST",success:function(e){if(e.modal&&$.create_login_modal(e.data,"post_like"),e.post){var t=Post.find(e.post.id)||new Post({id:e.post.id});t.set(e.post)}}})})}),$(function(){var e=".NS_post_likes__namepile";$(document).on("click",e+" a#full_namepile",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),dataType:"json",type:"GET",success:function(e){var n=_.map(e.users,function(e){return render_raw('<a href="{{url}}">{{name}}</a>',e)});n=formatters.to_sentence(n),t.parent().html(n+" like this update.")}})})}),define_namespace("body#posts_edit",function(e){var t;$(document).on("click",".wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"post_edit_body"})}),e.find(".notification_toggle a").on("click",function(){e.find(".radio_message").removeClass("visible"),e.find("."+$(this).attr("data-backers")+"_message").addClass("visible")}),e.find(".ksr_toggle a.all_backers").on("click",function(){t=e.find(".select_backers_message input:checkbox:not(:checked)"),t.prop("checked",!0),track("Update Notifications Toggle",{toggled_to:"all_backers"})}),e.find(".ksr_toggle a.select_backers").on("click",function(){t&&t.prop("checked",!1),track("Update Notifications Toggle",{toggled_to:"select_tiers"})}),e.find(".ksr_toggle a.public").on("click",function(){e.find("#post_public").val("1"),track("Update Visibility Toggle",{toggled_to:"anyone"})}),e.find(".ksr_toggle a.private").on("click",function(){e.find("#post_public").val("0"),track("Update Visibility Toggle",{toggled_to:"backers_only"})}),e.find(".email_notifications input.checkbox").on("change",function(){track("Update Tier Notification Change",{toggled_to:$(this).is(":checked")?"checked":"unchecked",selected_reward_id:$(this).data("reward-id"),selected_reward_minimum:$(this).data("reward-minimum")})})}),define_namespace(".NS-products__autocomplete",function(e){var t=e.find(".product_autocomplete"),n=t.closest(".field"),i=t.data("search-url"),r=t.data("create-url");n.livesearch_selector({url:i,serialize:t,process_data:function(e){return e+"&service="+t.data("service")},process_results:function(e){return _.map(e,function(e){return[e.name,e.service_id,e]})},cancel_copy:""}),n.on("livesearch:selected",e,function(n,i){var o=i[2],a=$('<div class="spinner" />').spin("ksr","#000");o&&$.ajax({method:"POST",url:r,data:{service:t.data("service"),service_id:o.service_id},beforeSend:function(){t.before(a)},complete:function(){a.remove()},success:function(n){e.find("#product_id").val(n.product.id),t.trigger("product:selected",n.product)}})}),n.on("livesearch_selector:unselect",e,function(){n.trigger("product:unselected")})}),define_namespace(".NS-project_faqs__edit",function(e){function t(){i.find("li.faq:not(.deleted) input.position").each(function(e,t){$(t).val(e+1)})}var n=$("#faq-template").children().clone(),i=e.find("ul.faqs");e.on("click","form .js-link-to-new-question",function(){var e=n.clone_form_template();return e.find(".js-delete").val(0),e.removeClass("hidden").appendTo(i),t(),!1}),e.on("click",".js-delete",function(){var e=$(this).closest("li.js-faq").find("input.js-delete").attr("id");$(".js-faq-delete-modal").find(".js-mark-to-delete").data("delete-input",e)}),$(".js-faq-delete-modal").on("click",".js-mark-to-delete",function(e){e.preventDefault();var t=$(this).closest(".js-faq-delete-modal"),n=$(this).data("delete-input"),i=$("#"+n),r=i.closest("li.js-faq");return i.val(1),r.addClass("deleted").fadeOut("slow"),t.trigger("close"),!1}),i.sortable({containment:".NS-project_faqs__edit",placeholder:"project-faq-placeholder",handle:".js-move",axis:"y",tolerance:"pointer",items:"li.js-faq",start:function(e,t){$(".project-faq-placeholder").css("height",t.item.height()+"px"),t.item.addClass("reordering")},stop:function(e,t){t.item.removeClass("reordering")},update:t})}),function(){function e(e){var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}function t(){var e=window.getSelection();e.removeAllRanges()}var n=["background_color","link_background_color","link_text","link_text_color","link_url","name","blurb","text_color","background_image_opacity","feature_image_attributes","background_image_attributes"],i=Model.extend();i.on_initialize(function(){this.on_change(function(){this.binder&&this.binder.refresh()})}),i.prototype.setupProfileDirtyWatchers=function(){var e=this,t=this.get("profile");n.forEach(function(n){t.listen(n,function(){e.set("dirty",!0),e.set("hasBeenDirty."+n,!0),e.binder.refresh()})})},i.prototype.$=function(e){return $(e,this.$NS)},i.prototype.setBinder=function(e){this.binder=e},i.prototype.toggleDirty=function(){this.set("dirty",!this.get("dirty"))},i.prototype.hasLink=function(){return Boolean(this.get("profile").get("link_url"))||this.get("linkToggled")},i.prototype.isImageProcessing=function(){return this.isImageState("feature","processing")||this.isImageState("background","processing")},i.prototype.isImageState=function(e,t){return this.get("images."+e+".state")===t},i.prototype.setImageState=function(e,t){this.set("images."+e+".state",t)},i.prototype.isImageRemoved=function(e){return!this.get("images."+e+".current")},i.prototype.showEditingTools=function(){return"prompting"===this.get("publishState")},i.prototype.isEditing=function(e){return this.get("activeSection")===e},i.prototype.otherEditing=function(e){var t=this.get("activeSection");return t&&t!==e},i.prototype.canEnterEditing=function(){return this.get("userPasswordVerified")},i.prototype.loginRedirect=function(){window.location=this.get("loginPath")},i.prototype.inlineEditToggle=function(e){this.isEditing(e)?this.inlineEditExit(e):this.inlineEditEnter(e)},i.prototype.inlineEditEnter=function(e){if(!this.canEnterEditing())return void this.loginRedirect();if(!this.isEditing(e)&&this.isPublishState("prompting")){this.inlineEditExit(),this.set("activeSection",e);var t=this[e+"Enter"];_.isFunction(t)&&t.call(this)}},i.prototype.inlineEditExit=function(e){if(e=e||this.get("activeSection")){this.set("activeSection","");var t=this[e+"Exit"];_.isFunction(t)&&t.call(this)}},i.prototype._enterContentEditable=function(t){var n=this.$(t);n.attr("contentEditable",!0),e(n[0]),setTimeout(function(){return n.focus()},0)},i.prototype._toggleIconTray=function(e){var t=this.$(".js-edit-icon--multiple-options"),n=this.$(e);t.not(n).removeClass("is-open"),n.toggleClass("is-open")},i.prototype.featureImageEnter=function(){this._toggleIconTray(".js-feature-image-edit-tray")},i.prototype.featureImageExit=function(){this._toggleIconTray(".js-feature-image-edit-tray")},i.prototype.themeEnter=function(){this._toggleIconTray(".js-theme-edit-tray")},i.prototype.themeExit=function(){this._toggleIconTray(".js-theme-edit-tray")},i.prototype._exitContentEditable=function(e){this.$(e).attr("contentEditable",!1),t()},i.prototype.blurbEnter=function(){this._enterContentEditable(".edit-profile-blurb")},i.prototype.blurbExit=function(){this._exitContentEditable(".edit-profile-blurb")},i.prototype.nameEnter=function(){this._enterContentEditable(".js-edit-profile-name")},i.prototype.nameExit=function(){this._exitContentEditable(".js-edit-profile-name")},i.prototype.linkEnter=function(){this.set("linkToggled",!0),this.set("dirty",!0),this._enterContentEditable(".js-profile-link")},i.prototype.linkExit=function(){this._exitContentEditable(".js-profile-link")},i.prototype.linkHasBeenDirty=function(){return["link_background_color","link_text","link_text_color","link_url"].some(function(e){return this.get("hasBeenDirty."+e)}.bind(this))},i.prototype.setImage=function(e,t){this.set("images."+e+".current",t)},i.prototype.changeImage=function(e,t){this.setImage(e,t),this.set("images."+e+".state","changed")},i.prototype.addImageVersion=function(e,t,n,i){this.set("images."+e+".versions."+t,{id:n,url:i})},i.prototype.canRevertFeatureImage=function(){return this.isImageRemoved("feature")||this.get("profile").get("show_feature_image")},i.prototype.syncPublishedImage=function(){var e=this.get("profile");if(this.setImageState("feature","published"),e.get("show_feature_image")){var t=e.get("feature_image_attributes.id");t=t?t:null,this.addImageVersion("feature","published",t,this.get("images.feature.current"))}else this.addImageVersion("feature","published",null,this.get("images.feature.versions.project.url"));this.setImageState("background","published");var n=e.get("background_image_attributes.id");n=n?n:null,this.addImageVersion("background","published",n,this.get("images.background.current"))},i.prototype.showDefaultBackgroundImageColor=function(){return!this.isImageRemoved("background")&&!this.get("profile").get("background_color")},i.prototype.isPublishing=function(){return this.isPublishState("publishing")},i.prototype.isPublishState=function(e){return this.get("publishState")===e},i.prototype.publishSuccess=function(){this.toggleDirty(),this.set("publishState","prompting"),growl({success:I18n.t("onloads.views.project_profiles.edit.Publish_successful")})},i.prototype.publishFailure=function(e){var t,n=I18n.t("onloads.views.project_profiles.edit.errors.Publish_failure");if(e.state)t=n;else{var i=this._translatePublishErrors(e.errors);t=n+": "+i.join(", ")}growl({error:t}),this.set("publishState","prompting")},i.prototype._translatePublishErrors=function(e){return _.reduce(e,function(e,t,n){switch(n){case"link_url":e.push(I18n.t("onloads.views.project_profiles.edit.errors.Invalid_link_url"));break;case"name":e.push(I18n.t("onloads.views.project_profiles.edit.errors.Invalid_name"));break;default:e.push(n+" "+t.join(", "))}return e},[])},i.prototype.publish=function(){var e=this;return new Promise(function(t,n){e.inlineEditExit(),e.set("publishState","prompting");var i=e.get("profile");i.tryFixValidationErrors({default_url:document.location.toString()});var r=i.validate();return _.isEmpty(r)?(e.set("publishState","publishing"),void $.ajax({url:e.get("profileURL"),method:"PUT",dataType:"json",data:i.data_for_rails()}).then(function(r){return r.success?(i.publishSuccess(),e.publishSuccess(r),e.syncPublishedImage(),void t()):(e.publishFailure(r),void n())},function(){e.publishFailure.bind(e),n()})):(e.publishFailure({errors:r}),n())})},i.prototype.discard=function(){this.set("dirty",!1),this.replace("hasBeenDirty",{}),this.set("linkToggled",!1);var e=this.get("images.feature.versions.published"),t=e.url;this.setImage("feature",t),this.setImageState("feature","published");var n=this.get("images.background.versions.published"),i=n.url;this.setImage("background",i),this.setImageState("background","published")},i.prototype.reset=function(){this.set({dirty:!1,hasBeenDirty:{},activeSection:"",publishState:"prompting",images:{feature:{state:"published",current:null,versions:{project:{},published:{}}},background:{state:"published",current:null,versions:{published:{}}}}})},root.ProjectProfileEditController=i}(),define_namespace(".NS_projects__hero_spotlight",function(e){function t(){var e=$.parseEscapedJSON(window.current_project_profile);if(e.feature_image_attributes||(e.feature_image_attributes={}),e.background_image_attributes||(e.background_image_attributes={}),"inactive"!==e.state)return e;e.blurb=current_project.get("blurb"),e.name=current_project.get("name");var t=$(".js-profile-link");return e.link_text=t.text().trim(),e}function n(){m.each(function(e,t){var n=$(t),i=n.prop("name"),r=l.get(i+"_or_default");n.spectrum("set",r)})}function i(e,t){var n=$(e.currentTarget);l.set(n.attr("name"),t.toHex())}function r(t,n){e.find(t).css("background-color",n)}function o(){a.find(".js-project-profile-controls__left").css({left:$(".js-expand-creator-nav").outerWidth()+20})}var a=$(".NS_project_profiles__edit");if(a.length){var s={background:"1600",feature:"large"},c=t(),l=new CurrentProjectProfile(c);l.setDiscardState(c);var u=new ProjectProfileEditController({profile:l,profileURL:a.data("url"),loginPath:a.data("login-path"),userPasswordVerified:a.data("user-password-verified")});u.reset(),u.setupProfileDirtyWatchers();var d=a.data("projectPhoto");if(u.addImageVersion("feature","project",null,d),l.get("show_feature_image"))if(l.get("feature_image_attributes.id")){var f=a.data("featureImage");u.addImageVersion("feature","published",l.get("feature_image_attributes.id"),f),u.setImage("feature",f)}else u.addImageVersion("feature","published",null,null);else u.addImageVersion("feature","published",null,d),u.setImage("feature",d);if(l.get("background_image_attributes.id")){var p=a.data("backgroundImage");u.addImageVersion("background","published",l.get("background_image_attributes.id"),p),u.setImage("background",p)}else u.addImageVersion("background","published",null,null);u.$NS=e;var h=Twine.reset(u,e.get(0)).bind();h.refresh(),u.setBinder(h),$(window).on("beforeunload.inlineedit",function(){return u.get("dirty")?I18n.t("onloads.views.project_profiles.edit.You_have_unsaved_changes"):void 0}),e.find('input[name="background_image_opacity"]').slider({from:0,to:100,step:1,scale:["0%","50%","100%"],limits:!1,onstatechange:function(e){l.set("background_image_opacity",e/100)},skin:"round_plastic"}),e.find("span.jslider").on("click",function(t){var n=$(this),i=t.pageX-n.offset().left,r=i/n.width();e.find('input[name="background_image_opacity"]').slider("value",Math.round(100*r))}),l.listen("background_image_opacity",function(){e.find(".js-profile-background-image").css("opacity",this.get("background_image_opacity"))}),$(".js-add-link-button").on("click",function(e){track("Spotlight Hero Add Link"),e.preventDefault()}),$(".js-remove-link-button").on("click",function(){l.set({link_url:null,link_text:null,link_background_color:null,link_text_color:null}),u.set("linkToggled",!1),u.inlineEditExit(),track("Spotlight Hero Remove Link")}),["feature","background"].forEach(function(t){var n=e.find(".js-inline-edit-"+t+"-image input.file");n.ksr_uploader(),n.on("ksr_uploader:uploaded",function(e,n){var i=n.image_urls[s[t]],r=n.id;l.replace(t+"_image_attributes",{id:r}),u.changeImage(t,i),track("Spotlight Hero Change Image",{image_type:t})}),n.on("file_queued",function(){return u.setImageState(t,"processing")})}),e.find(".js-inline-edit-feature-image input.file").on("ksr_uploader:uploaded",function(){return l.set("show_feature_image",!0)}),e.find(".js-inline-edit-background-image input.file").on("ksr_uploader:uploaded",function(){return n()}),u.listen("images.feature.current",function(){var t=this.get("images.feature.current");t?e.find(".js-feature-image").attr("src",t):(e.find(".js-feature-image").removeAttr("src"),$(".js-inline-edit-feature-image input.file").val(null))}),u.listen("images.background.current",function(){var t=this.get("images.background.current");t?e.find(".js-profile-background-image").css("backgroundImage",'url("'+t+'")'):(e.find(".js-profile-background-image").css("backgroundImage","none"),$(".js-inline-edit-background-image input.file").val(null),n())}),[{section:"link",attr:"link_text",selector:".js-profile-link"},{section:"blurb",attr:"blurb",selector:".js-edit-profile-blurb"},{section:"name",attr:"name",selector:".js-edit-profile-name"}].forEach(function(t){var n=t.section,i=t.attr,r=t.selector;e.find(r).on("keyup",function(e){return e.which===KEY.ESC?void u.inlineEditExit(n):void l.set(i,$(this).text())}),l.listen(i,function(){u.isEditing(n)||e.find(r).text(this.get(i))})}),[{section:"link",attr:"link_url",selector:"input[name=link_url]"}].forEach(function(t){var n=t.section,i=t.attr,r=t.selector;e.find(r).on("keyup",function(e){var t=$(e.currentTarget);l.set(i,t.val())}),l.listen(i,function(){u.isEditing(n)||e.find(r).val(this.get(i))})}),$(".js-remove-feature-image").on("click",function(){l.set("feature_image_attributes._destroy",!0),l.set("show_feature_image",!0),u.setImageState("feature","changed"),u.setImage("feature",null),track("Spotlight Hero Remove Image",{image_type:"feature"})}),$(".js-revert-feature-image").on("click",function(){var e=u.get("images.feature.versions.project"),t=e.url;l.set("feature_image_attributes._destroy",!0),l.set("show_feature_image",!1),u.setImageState("feature","project"),u.setImage("feature",t),track("Spotlight Hero Revert Image",{image_type:"feature"})}),$(".js-remove-background-image").on("click",function(){l.set("background_image_attributes._destroy",!0),u.setImageState("background","changed"),u.setImage("background",null),track("Spotlight Hero Remove Image",{image_type:"background"})});var m=e.find("input[name=link_background_color], input[name=link_text_color], input[name=background_color], input[name=text_color]");m.on("move.spectrum",i),m.on("change.spectrum, dragstop.spectrum",i),$(m).spectrum({showButtons:!1,showInput:!0,flat:!0,preferredFormat:"hex"}),$(document).unbind("click.spectrum"),e.find(".js-inline-edit-publish").on("click",function(){u.inlineEditExit(),u.set("publishState","confirming"),track("Spotlight Hero Start Publish")}),e.find(".js-inline-edit-publish-cancel").on("click",function(){u.set("publishState","prompting"),track("Spotlight Hero Cancel Publish")}),e.find(".js-inline-edit-publish-confirm").on("click",function(){u.publish().then(function(){track("Spotlight Hero Finish Publish Success")},function(){track("Spotlight Hero Finish Publish Failure")})}),e.find(".js-inline-edit-discard").on("click",function(t){t.stopPropagation(),e.find(".ksr-popover").trigger("ksr_popover:close"),u.inlineEditExit(),l.discard(),u.discard(),n(),e.find('input[name="background_image_opacity"]').slider("value",l.get("background_image_opacity_percent")),track("Spotlight Hero Discard Publish")}),e.find(".js-tray-control").on("click",function(e){var t=$(this),n=t.siblings(".js-tray");e.preventDefault(),n.slideToggle(200)}),l.listen("link_url",function(){e.find(".js-profile-link").attr("href",this.get("link_url"))}),l.listen("link_background_color_or_default",function(){var t=this.get("link_background_color_or_default"),n=e.find(".js-profile-link");n.css("background-color",t),r(".js-profile-link-background-color-swatch",t)}),l.listen("link_text_color_or_default",function(){var t=this.get("link_text_color_or_default"),n=this.get("link_background_color_or_default"),i=e.find(".js-profile-link");i.css("cssText","color: "+t+" !important; background-color: "+n),r(".js-profile-link-text-color-swatch",t)}),l.listen("background_color_or_default",function(){var e=this.get("background_color_or_default");$(".js-profile-hero, .js-profile-background-image").css("background-color",e),r(".js-profile-background-color-swatch",e)}),l.listen("text_color_or_default",function(){var t=this.get("text_color_or_default");e.add(".js-update-text-color").css("color",t),$(".js-update-border-color").css("background-color",t),r(".js-profile-text-color-swatch",t)}),$(document).resize(function(){o()}),o()}}),define_namespace(".NS_project_profiles__project_link",function(e){e.find(".js-profile-link").on("click",function(){track("Spotlight Hero Link Click")})}),define_namespace(".js-project-description-content, #description",function(){function e(e){$(".js-carousel-thumbnail").removeClass("cycle-slide-active"),$(".js-carousel-thumbnail:eq("+e+")").addClass("cycle-slide-active")}function t(e,t){var n=Math.floor(t/a)*a;e.trigger("goto",n)}function n(){return $(".cycle-slide-active .js-slide-media .video-player")}function i(){var e=n(),t=$(".cycle-slide-active .js-slide-media");e.height(t.height()).width(t.width())}function r(){n().trigger("ksr_video:pause")}function o(e){var t=$(".js-prototype-gallery-slide:eq("+e+")").data("slide-id");track("Viewed Prototype Gallery Slide",{slide_id:t})}var a=5,s=$(".js-open-supporting-material");s.click(function(){$("html").css("overflow","hidden")}),-1!==window.location.hash.indexOf("prototype-slide-")&&s.click(),$("#NS_project_supporting_material_showcase__show").livequery(function(){$(document).trigger("ksr_video:pause_all_videos");var n=$(this).closest(".modal_dialog");n.on("before_close.modal_dialog",function(){$(".js-prototype-slideshow").cycle("destroy"),window.location.hash="",$(window).off("resize.projectSupportingMaterials"),$("html").css("overflow","visible")}),$(window).on("hashchange",function(){""===window.location.hash&&n.trigger("close.modal_dialog")});var s=$(".js-prototype-carousel");$(".js-carousel-thumbnail").length>a?(s.serialScroll({items:".js-carousel-thumbnail",lock:!1,step:a,cycle:!1,duration:500,easing:"easeOutExpo"}),$(".prototype-carousel__next").click(function(){s.trigger("next")}),$(".prototype-carousel__previous").click(function(){s.trigger("prev")})):$(".js-prototype-carousel-pager").addClass("hide"),s.on("click",".js-carousel-thumbnail",function(){window.location.hash=$(this).data("slide-hash"),track("Selected Prototype Gallery Thumbnail")}),$(".js-prototype-gallery-pager").click(function(){track("Advanced Prototype Gallery Carousel")});var c=$(".js-prototype-slideshow");c.on("cycle-before",function(){r()}),c.on("cycle-after",function(n,r){e(r.nextSlide),t(s,r.nextSlide),o(r.nextSlide),i()}),c.on("cycle-post-initialize",function(n,r){e(r.currSlide),t(s,r.currSlide),o(r.currSlide),i(),$(window).on("resize.projectSupportingMaterials",i)}),c.cycle()})}),define_namespace("#admin-menu",function(e){var t=function(t,n){return $.ajax({url:t,
data:{project:{ksr_rating:n}},type:"PUT",dataType:"JSON"}).then(function(){e.find(".rating .ss-star").removeClass("selected"),e.find(".rating .ss-star").slice(0,n).addClass("selected")})};$(document).on("keydown",function(n){if(n.ctrlKey){var i,r;n.which>=49&&n.which<=53&&(i=n.which-48,r=e.find(".rating a")[0].href,t(r,i).then(function(){growl({info:i+"\u2605"})}))}}),e.find(".rating a").on("click",function(n){n.preventDefault(),t(this.href,$(this).data("rating")),e.trigger("ksr_admin:nav_open")})}),define_namespace(".NS-projects__admin_keyboard_control",function(e){$(document).on("keydown",function(t){if(t.ctrlKey){var n=e.find("#project_moderated_state"),i=e.find("form"),r="";switch(t.which){case 65:if("submitted"===current_project.get("state"))return;r="acceptable";break;case 84:r="tolerated";break;default:return}n.val(r),$.ajax({url:i.attr("action"),type:i.attr("method"),dataType:"json",data:i.serialize(),success:function(){growl({info:r})}}),$("#admin-nav-wrap span.moderation_status").text(r.substring(0,3))}})}),define_namespace(".js-project-community-content",function(e){function t(){$(".js-more-backers").fadeOut()}function n(){$(".js-more-backers").attr("disabled","disabled")}function i(){$(".js-more-backers").removeAttr("disabled")}function r(e,t){var n=e.clone();return n.find(".js-founding-backer-avatar img").removeAttr("src"),n.find(".js-founding-backer-avatar img").attr("src",t.avatar),n.find(".js-founding-backer-name").text(t.name),n.find(".js-founding-backer-backings").text(I18n.t("views.community_section.Backed_x_projects",{count:t.backings})),n}function o(e){return $.getJSON(FOUNDING_BACKERS_URL,{page:e}).then(function(e){if(e.length<4)return 0;var t=e.length<8?4:8,n=$(".js-founding-backers"),i=$(".js-founding-backer:first"),o=_(t).times(function(t){var n=e[t];return r(i,n)});return n.empty().append(o),t})}e.on("click",".js-hero-scroll",function(e){$.scrollTo($(".js-community-locations").offset().top-45,400,{easing:"easeOutExpo"}),e.preventDefault()});var a=1;e.on("click",".js-more-backers",function(){a+=1,a>25&&(a=1),n(),o(a).then(function(e){0===e&&2===a?t():0===e&&(a=1,o(a))}).always(function(){i()})})}),define_namespace(".NS_projects__creator_nav",function(){function e(){$("#creator_nav .js-livestream-link").length&&track("Showed Creator Nav Livestream Link")}var t=$("body");$(".js-expand-creator-nav").on("click",function(n){t.hasClass("creator_nav_visible")?(t.removeClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"hidden"})):(t.addClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"visible"}),e()),n.preventDefault()}),t.hasClass("creator_nav_visible")&&e(),track_links("#creator_nav a.track","Creator Nav Link Click")}),define_namespace(".js-could-have-report-project",function(e){e.on("click","#js-report_issue_link",function(e){var t=$(this);e.preventDefault(),$.ajax({url:t.prop("href"),type:"GET",success:function(e){var n=$(e);t.closest(".ajax-container").html(n),n.slideDown()}})})}),define_namespace("#account-setup-panel",function(e){function t(e){var t=e.find("input:not(.optional)"),n=!1;return t.validates_presence(),n=e.validate(),n&&e.removeClass("submitting-non-ajax"),n}function n(){var t=e.find(".collapsed.js-payment-source-form");t.removeClass("collapsed")}function i(){$.ajax({type:"GET",url:e.data("refresh_url"),data:{},success:function(t){e.html(t),n()},error:function(t){e.html(t.responseText)}})}var r="#bank_account_form",o="#account_errors";e.find(r).livequery(function(){function n(e){s.remove(),c.html("<ul>"+$.map(e,function(e){return"<li>"+e+"</li>"}).join()+"</ul>"),c.removeClass("hide").addClass("flash-error"),$.scrollTo(c)}function r(){s.remove(),c.html("").addClass("hide").removeClass("flash-error"),i()}var a=$(this),s=$('<div class="spinner"/>').spin("ksr","#fff"),c=e.find(o);a.on("submit",function(e){if(e.preventDefault(),!t(a))return!1;a.after(s),Stripe.setPublishableKey(a.data("public-key"));var i={country:a.data("country"),currency:a.data("currency"),account_number:a.find("input#account_account_number").val()},o=a.find("input#account_routing_number");o.length>0&&(i.routing_number=o.val()),Stripe.bankAccount.createToken(i,function(e,t){200!==e&&t.error?n([t.error.message]):$.ajax({type:a.attr("method"),url:a.attr("action"),dataType:"json",data:{account:{token:t.id}},success:function(){r()},error:function(e){n(e.responseJSON.errors)}})})})})}),$(function(){function e(e){var t=e.val(),n=$(".js-subcategories"),i=n.data("subcategories")[t];n.html(render("projects/_edit_subcategories",{root_id:t,subcategories:i}))}var t=".js-root_category",n=$(t);n.livequery(function(){var t=$(this);e(t),t.prop("disabled",!1)}),$(document).on("change",t,function(){e($(this))}),function(){function e(e){$("#duration_duration, #duration_deadline").each(function(){var n=$(this),i=n.is(":checked");n.is("#duration_duration")?i&&(e||(r=!0,$("#project_duration").focus()),$.browser.msie?$("#project-duration-calendar").hide():$("#project-duration-calendar").slideUp(200),$("#project_campaign_attributes_deadline").val("")):n.is("#duration_deadline")&&i&&($("#project_campaign_attributes_duration").val(""),$.browser.msie?$("#project-duration-calendar").show():$("#project-duration-calendar").slideDown(200),t&&$("#project-duration-calendar input.input-calendar-date").val(t._copy_date_with_time(t.selected_date,t.time).toString("yyyy-MM-dd HH:mm:ss")))})}var t,n=$("#project-duration-calendar"),i=n.find("div.calendar"),r=!1;i.livequery(function(){var n,i=$("#project-duration-calendar input.input-calendar-date");$(this).on("calendar_date_picker:date_selected",function(e,t){var n=moment(t).format("YYYY-MM-DD HH:mm:ss Z");i.val(n),i.trigger("change")}),n=""!==i.val()?moment(i.val(),"YYYY-MM-DD HH:mm:ss Z").toDate():moment().add("days",30).toDate(),t=$(this).calendar_date_picker({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:I18n.t("onloads.views.projects.edit_define_your_project.Time"),selected_date:n,time:{format:I18n.t("time.formats.simple"),am:I18n.t("time.am"),pm:I18n.t("time.pm")}}).data("calendar_date_picker"),e(!0)}),$("#the-basics-panel").on("focus","#project_duration",function(){return r?void(r=!1):($("#duration_duration").prop("checked",!0),void e())}),$(document).on("change click","#the-basics-panel .funding-duration input.radio",e),$(document).on("click","#the-basics-panel .funding-duration em.rec",function(){$(this).closest("li").find("input.text").focus()})}()});var _slicedToArray=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){r=!0,o=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(t,n){return _.flatten(Object.keys(n).map(function(i){var r=n[i],o=t+"["+i+"]";return _.isObject(r)?e(o,r):{name:o,value:r}}))}var t=function(e,t,n,i){this.$fields=e,this.$staticList=t,this.$selectList=n,this.backerRewardsItemTmpl="backer_rewards_items/_fields",this.staticListTmpl="backer_rewards_items/_list",this.selectTmpl="backer_rewards_items/_option",this.list=new Model({backerRewardsItems:i.backerRewardsItems}),this.rewardId=i.rewardId,this.formPrefix=i.formPrefix,this.project=current_project,this.list.on_change(this.onBackerRewardsItemsChange.bind(this)),this.project.on_change("items",this.onProjectItemsChange.bind(this)),this.bindSubmit(),this.render()};t.prototype.bindSubmit=function(){var t=this;this.$fields.length&&this.$getForm().composable("project_build_data",function(n){return n.concat(e(t.formPrefix,{backer_rewards_items_attributes:t.positionedItems()}))})},t.prototype.$getForm=function(){var e=this,t=["$fields","$staticList","$selectList"];return $(t.reduce(function(t,n){return t||e[n].closest("form")[0]},void 0))},t.prototype.positionedItems=function(){return this.list.get("backerRewardsItems").map(function(e,t){return _.extend(e,{position:t})})},t.prototype.onBackerRewardsItemsChange=function(){this.render(),this.$fields.trigger("dirty")},t.prototype.onProjectItemsChange=function(){var e=this.project.get("items"),t=this.list.get("backerRewardsItems").filter(function(t){return e.some(function(e){return t.item_id===e.id})});this.list.set("backerRewardsItems",t,{overwrite:!0})},t.prototype.cloneSelected=function(){return this.computeSelected().map(function(e,t){var n=t+"."+(new Date).getTime();return _.extend({},e,{id:null,identifier:n})})},t.prototype.computeSelected=function(){var e=this;return this.list.get("backerRewardsItems").filter(function(t){return e.project.get("items").some(function(e){return t.item_id===e.id})})},t.prototype.computeUnselected=function(){var e=this;return this.project.get("items").filter(function(t){return!e.list.get("backerRewardsItems").some(function(e){return e.item_id===t.id&&!e._destroy})})},t.prototype.presentBackerRewardsItem=function(e){var t=this.project.get("items").filter(function(t){return e.item_id===t.id})[0],n=_.extend({id:null,identifier:e.id,name:t.name,amount:t.amount,formattedAmount:t.formattedAmount,edit_path:t.edit_path},e);return this.rewardId||(n.id=null),n.showQuantity=e.quantity&&e.quantity>1,n},t.prototype.presentSelectItem=function(e){return _.extend(e,{formattedAmount:formatters.money(e.amount,{currency:this.project.get("currency")})})},t.prototype.renderItem=function(e){var t=this,n=this.presentBackerRewardsItem(e),i=$(render(this.backerRewardsItemTmpl,n));return i.find("a.js-items__sortable-list-destroy").click(function(e){e.preventDefault(),t.destroy(n.identifier)}),i.data("backerRewardsItem",e),i},t.prototype.renderSelectItem=function(e){var t=this.presentSelectItem(e),n=$(render(this.selectTmpl,t));return n},t.prototype.renderStaticList=function(){if(this.$staticList.length){var e=this.computeSelected().map(this.presentBackerRewardsItem.bind(this));this.$staticList.html(render(this.staticListTmpl,{items:e}))}},t.prototype.renderFields=function(){this.$fields.length&&this.$fields.html(this.computeSelected().map(this.renderItem.bind(this)))},t.prototype.renderSelectList=function(){this.$selectList.length&&this.$selectList.html(this.computeUnselected().map(this.renderSelectItem.bind(this)))},t.prototype.render=function(){this.renderFields(),this.renderSelectList(),this.renderStaticList()},t.prototype.destroy=function(e){var t=this,n=this.list.get("backerRewardsItems").map(function(n){return t.presentBackerRewardsItem(n).identifier===e&&(n._destroy=!0),n});this.list.set("backerRewardsItems",n,{overwrite:!0})},t.prototype.newBackerRewardsItem=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _.extend({identifier:(new Date).getTime(),item_id:e,quantity:1},t)},t.prototype.add=function(e){var t=this.list.get("backerRewardsItems").reduce(function(t,n){return t[n.item_id===e?0:1].push(n),t},[[],[]]),n=_slicedToArray(t,2),i=n[0],r=n[1];r=r.concat(this.newBackerRewardsItem(e,i[0]&&{id:i[0].id})),this.list.set("backerRewardsItems",r,{overwrite:!0}),this.$fields.closest(".js-items__sortable-list").sortable("refresh")},root.ItemListController=t}(),define_namespace(".NS-projects__edit_rewards",function(){function e(e){var t=e.siblings(".warning"),n=l.exec(e.val());n?(t.html(I18n.t("onloads.views.projects.edit_rewards.Reward_warning_Please_make_sure_you_are_not_offering",{word:n[0]})),t.slideDown(),t.trigger("shifted")):(t.slideUp(),t.trigger("shifted"))}function t(e){e.find(".js-rest_of_world .js-cost_label").each(function(){var t=$(this),n=!e.find("li.shipping-rule:not(.js-rest_of_world)").filter(function(e,t){return"none"!==$(t).css("display")}).length,i=t.data(n?"alt":"base");i&&t.text(i)})}function n(e){e.find("input.keep_box:checked").each(function(){var t=$(this).closest("li.shipping-rule").find(".js-location_id_input, .js-location_id_select").val();t&&e.find('select.js-location_id_select > option[value="'+t+'"]:not(:selected)').prop("disabled",!0)}),$(e.data("uneditable_shipping_location_ids")).each(function(t,n){e.find('select.js-location_id_select > option[value="'+n+'"]:not(:selected)').prop("disabled",!0);var i=e.find('input.js-location_id_input[value="'+n+'"]').closest("li.shipping-rule");i.find("input.js-cost_input").prop("disabled",!0),i.find(".keep-or-delete").hide()}),t(e)}function i(){$("ol.rewards > li:visible").each(function(e,t){$(t).find("span.reward_num").html(e+1)})}function r(e){var t=e.find("input[data-canonical-attribute]"),n=new RegExp("(.+\\[-?\\d+\\])\\["+t.data("canonicalAttribute")+"\\]$");return t.attr("name").match(n)[1]}function o(){var e=$(this),t=e.find(".js-items").data();if(t){var n=e.find(".js-reward-items-list"),i=e.find(".js-static-items-list"),o=e.find(".js-items-list"),a={backerRewardsItems:t.backer_rewards_items,rewardId:t.reward_id,formPrefix:r(e)},s=new window.ItemListController(n,i,o,a);e.find(".js-reward-items-controller").data("controller",s)}}function a(e){var t=e.closest(".js-reward-fields").find(".js-reward-items-controller");return t.length&&t.data("controller")}function s(e){return e.find(".js-items-list-item").length?!0:(e.find(".js-new-item-link").click(),!1)}function c(e){var t=$(this).closest(".js-backer-rewards-item").data("backerRewardsItem");t.quantity+e<1||(t.quantity+=e,a($(this)).list.change())}var l=/(?:(%)|\b(raffle|raffled|raffling|coupon|coupons|discount|discounts|discounted|reduced|percent|investor|investors|investment|invested|investments|investing|stake|stakes|sweepstake|sweepstakes|financial|equity|lottery|lotteries|gift certificate|gift card|wine|beer|alcohol|champagne|cocktail|contest|chance|charity|enter|prize|win|drinks|shot|booze|bubbly|pint|price|stock|percentage|knife|axe|knives|blade|charity|prototype|lifetime|life|forever|vacation|holiday|pipe|vaporizer|vape|gun|worth)\b)/i;$(".add-reward-action-toggle").click(function(){$(".action-wrap").toggle()}),$(".fields.rewards textarea").each(function(){e($(this))}),$(document).on("keyup paste cut",".fields.rewards textarea",function(){e($(this))}),$("li.reward .summary").livequery(function(){var e=$(this);e.closest(".reward").data("cloned")||e.show().siblings(".backer_rewards_fields").hide()}),$(document).on("click",".js-enable-limit-checkbox",function(e){var t=$(e.target);t.siblings(".js-limit-options:first").toggleClass("hidden")}),$(document).on("click",".js-backer-limit-checkbox",function(e){var t=$(e.target);t.siblings(".js-backer-limit-text-field").toggleClass("hidden")}),$(document).on("click",".js-duration-limit-checkbox",function(e){var t=$(e.target);t.siblings(".js-duration-calendars").toggleClass("hidden")}),$(document).on("click","li.reward .summary .edit",function(e){e.preventDefault(),$(this).parents(".summary").hide().siblings(".fields").show().trigger("shifted").find("input:first").focus(),track("Reward Edit")}),$(document).on("nested_attributes_list:added","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),$(document).on("nested_attributes_list:removed","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),$(document).on("change","li.reward .js-shipping_preference_select",function(){var e=$(this).val(),t=$(this).closest(".shipping").find("ul.shipping-rules"),i=t.find("li.shipping-rule:not(.template)"),r=i.filter(".js-rest_of_world");switch(e){case"restricted":t.show(),i.show().find(".keep_box").prop("checked",!0),r.hide().find(".keep_box").prop("checked",!1);break;case"unrestricted":t.show(),i.show().find(".keep_box").prop("checked",!0);break;default:t.hide(),i.find(".keep_box").prop("checked",!1)}n(t)}),$(document).on("change","li.shipping-rule > select.js-location_id_select",function(){var e=$(this),t=$(this).closest("li.shipping-rule").find("label.js-cost_label");e.hide(),t.text(e.find("option:selected").text()).show(),n(e.closest("ul.shipping-rules"))}),$(document).on("nested_attributes_list:added","li.shipping-rule",function(){n($(this).closest("ul.shipping-rules"))}),$(document).on("nested_attributes_list:removed","li.shipping-rule",function(){var e=$(this).find(".js-location_id_input, .js-location_id_select").val(),t=$(this).hasClass("js-persisted");e&&$(this).closest("ul.shipping-rules").find('option[value="'+e+'"]').prop("disabled",!1),t||$(this).remove()}),$(document).on("nested_attributes_list:removed","ul",function(){t($(this))}),$("ol.rewards").livequery(function(){i(!0),$("ol.rewards > li.reward:visible").each(function(){n($(this).find("ul.shipping-rules"))})}),$(document).on("nested_attributes_list:added nested_attributes_list:removed","li.reward",i),$(document).on("click","a.js-clone_reward",function(e){e.preventDefault();var t=$(e.target).closest("li.js-reward-fields"),n=t.clone_form_template({copy_values:!0,pattern:"-?\\d+"},function(){$(this).attr("name")&&$(this).attr("name").indexOf("[id]")>0&&$(this).val(null)});n.find("li.shipping-rule").each(function(){var e=$(this),t=(new Date).getTime();e.find("label,input,textarea,select").each(function(){var e=$(this);e.attr("for")&&e.attr("for").indexOf("_shipping_rules_attributes_")>0&&e.attr("for",e.attr("for").replace(/_shipping_rules_attributes_-?\d+_/,"_shipping_rules_attributes_"+t+"_")),e.attr("id")&&e.attr("id").indexOf("_shipping_rules_attributes_")>0&&e.attr("id",e.attr("id").replace(/_shipping_rules_attributes_-?\d+_/,"_shipping_rules_attributes_"+t+"_")),e.attr("name")&&e.attr("name").indexOf("[shipping_rules_attributes]")>0&&e.attr("name",e.attr("name").replace(/\[shipping_rules_attributes\]\[-?\d+\]/,"[shipping_rules_attributes]["+t+"]"))})});var i=n.find(".keep-or-delete");i.show(),i.find("a.delete").prop("disabled",!1),i.find(".keep_box").val(0),n.find("ul.shipping-rules").data("backed_locations",[]),n.find(":input").prop("disabled",!1),n.find(".has_backers").removeClass("has_backers"),n.find(".js-has_backers").hide(),n.find(".js-unless_has_backers").show(),n.find("span.num-backers").text("0 backers"),n.find("a.delete").removeAttr("disabled"),n.find("span.sold-out, span.limited").remove(),n.find(".shipping .js-shipping_preference_select option").removeAttr("disabled"),n.find(".shipping a.add-another").removeAttr("disabled").show(),n.find(".shipping label.js-cost_label").removeAttr("disabled"),t.trigger("form_fields_cloned",n),$("ol.rewards").append(n),n.find(".summary .edit").click(),n.data("cloned",!0),n.trigger("nested_attributes_list:added"),$.scrollTo(n.offset().top-20,300)}),$(document).on("form_fields_cloned",".js-reward-fields",function(e,t){if(this===e.target){var n=$(e.target),i=$(t),r="items__add-items-"+(new Date).getTime();i.find("a.js-reward-popover-target").attr("id",r),i.find(".ksr-popover").attr("data-target-id","#"+r).data("target-id","#"+r);var o=i.find(".js-items");o.length&&(o.data("backer_rewards_items",a(n).cloneSelected()),o.data("reward_id",null))}}),$("li.js-reward-fields").livequery(o),$(document).on("click",".js-add-item-link",function(e){e.preventDefault();var t=$(this),n=a(t);n.add(t.data("itemId"))}),$.subscribe("project_build_submit_preprocessors",function(){$(".js-limit").each(function(){var e=!$(".js-enable-limit-checkbox",this).prop("checked"),t=!$(".js-backer-limit-checkbox",this).prop("checked"),n=!$(".js-duration-limit-checkbox",this).prop("checked");(e||t)&&$(".js-backer-limit-text-field",this).val(""),(e||n)&&$(".js-duration-calendars input",this).val("")})}),$(document).on("click",".js-items .js-reward-popover-target",function(){track("Items Form Add Item Click",{reward_id:$(this).closest(".js-items").data("reward_id")})}),$(document).on("submit",".js-item-form",function(e){e.preventDefault();var t=$(this);t.find(".submit").addClass("btn--disabled").prop("disabled","disabled");var n=$.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),dataType:"json"});n.success(function(e){current_project.set("items",e.items,{overwrite:!0});var n=t.closest(".modal_dialog").data("modal_dialog"),i=$(n.options.event.target);i.is(".js-new-item-link")&&a(i).add(e.item.id),n.close()}),n.error(function(e){e.responseJSON&&t.find(".js-errors").html(e.responseJSON.join("<br/>"))}),n.complete(function(){t.find(".submit").removeClass("btn--disabled").prop("disabled",!1)})}),$(document).on("ajax:success",".js-item-delete",function(e,t){var n=current_project.get("items").filter(function(e){return e.id!==t.item.id});current_project.set("items",n,{overwrite:!0}),$(".modal_dialog:visible").each(function(e,t){$(t).data("modal_dialog").close()})}),$(document).on("click",".js-new-item-link",function(){track("Items Form New Item Click",{reward_id:$(this).closest(".js-items").data("reward_id")})}),$(".js-items .ksr-popover").livequery(function(){$(this).data("ksr_popover_override",s)}),$(document).on("sortupdate",".js-items__sortable-list",function(){var e=a($(this)),t=$(this).find("[data-item-id]").map(function(){var t=$(this).data("itemId");return e.list.get("backerRewardsItems").filter(function(e){return e.item_id===t})[0]}).get();e.list.set("backerRewardsItems",t,{silent:!0,overwrite:!0}),$(this).trigger("dirty")}),$(document).on("click","a.js-increment-quantity",function(e){e.preventDefault(),c.bind(this)(1)}),$(document).on("click","a.js-decrement-quantity",function(e){e.preventDefault(),c.bind(this)(-1)}),$(document).on("modal_dialog:remote_dialog_loaded",".modal_dialog",function(){var e=$(this).find("input.js-item-name");e.focus().val(e.val())}),$(".NS-projects__edit_rewards").livequery(function(){$(".js-ends-at-input, .js-starts-at-input").each(function(e,t){var n=$(t),i=n.siblings(".js-hidden-calendar-input:first"),r=i.val();r&&n.val(moment(r).format("l LT"))}),$(".js-local-tz-field").text(moment().zoneAbbr())})}),define_namespace(".NS_projects__edit_submission",function(e){e.on("click","a.reply",function(e){var t=$(".NS_projects__edit_submission .reply_container form");return e.preventDefault(),t.is(":visible")?t.slideUp(300,"easeOutQuad"):t.slideDown(300,"easeOutQuad",function(){$(this).find("textarea").focus()}),!1}),e.find(".js-continue-to-launch").on("click",function(e){var t=$("#content-wrap");t.find("#finished").hide(),e.preventDefault(),$(this).trigger("project_edit:toggle_tab",["launch"])})}),define_namespace(".js-project-faqs-content",function(e){e.on("click",".js-faq-question-toggle",function(e){e.preventDefault();var t=$(this).closest(".js-faq"),n=t.find(".js-faq-answer"),i=$(this).data("faq_id"),r=t.find(".js-arrow-icon");t.hasClass("js-expanded")?track("Clicked Project FAQ Question",{context:"expanded",which:i}):track("Clicked Project FAQ Question",{context:"collapsed",which:i}),t.toggleClass("js-expanded"),n.toggleClass("hide"),r.toggleClass("rotate-90")}),e.on("click",".js-ask-a-question",function(){track("Clicked Ask Question")}),e.on("click",".js-edit-faqs",function(){track("Edited FAQ Question")})}),define_namespace(".NS_projects__greenlit",function(e){function t(e){var t=e.attr("class"),n=e.attr("id"),i=e.data("title");e.modal_dialog({class_name:t,id:n,title:i})}var n=$("#review_modal");e.find(".js-continue-to-launch").click(function(e){e.preventDefault();var t=$("#content-wrap");t.find("#finished").hide(),$(this).trigger("project_edit:toggle_tab",["launch"])}),e.find(".button_preview").click(function(e){e.preventDefault(),$(this).trigger("project_edit:toggle_tab",["preview"])}),e.find(".button_review").click(function(e){e.preventDefault(),t(n)}),$(".NS_projects__greenlit_modal").on("submit","form",function(e){var t=$(this);return e.preventDefault(),t.validate()?void $.ajax({type:"PUT",url:$("#project-edit-nav .finished").data("submit_for_review_url"),data:t.serialize(),success:function(){t.trigger("close"),$("#saving-layer").show(),window.location.reload(!0)}}):!1})}),define_namespace(".NS_projects__project_nav .js-load-project-help_wanted",function(){$(document).on("click",".js-btn",function(){var e=$(this).closest(".js-skill");e.find(".js-skill-textarea").toggle(),e.find(".js-btn").toggle()})}),define_namespace(".NS_projects__hero_funding",function(e){function t(){var t=e.find(".video-player"),n=i.height(),r=t.height(),o=Math.abs(n-r)<=1;i.length&&n>0&&(o||e.find(".video-player").animate({height:n,maxHeight:screen.height},300,"easeOutExpo",function(){$(document).trigger("ksr:video_player_resize")}),i.css({minHeight:0}))}function n(){var t=e.find(".ksr_page_timer.poll");if(t.length){var i=window.ksr_page_clock,r=new Date(t.data("end_time")),o=r-i.get_remote_time();if(o>0){var a=Math.min(o,2147483647);setTimeout(n,a)}else e.find(".js-hide-unless-campaign-running").addClass("hidden")}}var i=e.find(".video-player .poster");t(),$(document).on("resize",function(){t()}),$("#project_share.js-disabled").on("click",function(e){growl({error:I18n.t("onloads.views.projects.hero_funding.Sharing_is_disabled_until_your_project_is_launched")}),e.preventDefault()}),current_project.listen("state",function(t){var n=t.state;e.find(".js-campaign-state").addClass("hidden"),e.find(".js-campaign-state__"+n).removeClass("hidden")}),"live"===current_project.get("state")&&n(),current_project.listen("state_changed_at",function(t){e.find(".js-state_changed_at").text(formatters.time_ago_in_words(t.state_changed_at))})}),$(function(){function e(e,n){var o=".js-project-"+n+"-content",a=u.find(o);i(e,n),t(n),u.find(".js-project-content").removeClass("visible").fadeOut(200,function(){$(this).empty(),window.setTimeout(function(){a.fadeIn()},200)}),$.ajax({url:e,cache:!1,success:function(e){a.html(e),r(),$(document).trigger("projectnav:"+n)}})}function t(e){var t=l.find(".js-load-project-"+e);d.removeClass("is-active"),t.addClass("is-active"),n()}function n(){var e=l.find("a.is-active");e.length?l.find(".js-selected-indicator").show().css({left:$(".js-project-nav-scroll").scrollLeft()+e.position().left+20,width:e.width()}):l.find(".js-selected-indicator").hide()}function i(e,t){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.hash=t}function r(){window.setTimeout(function(){$.scrollTo(u.position().top,"easeOutExp")},200)}function o(e,t,n){if(!p[e]&&!a(t)){var i=n?t.height():0,r=$(this).scrollTop()+$(this).height()>=s(t)+i;return r}}function a(e){return 0===e.length||e.is(":hidden")}function s(e){return e.offset().top}function c(e,t){track("Viewed Project Page Section",{context:e,page_pixel_length:$(document).height(),pixel_position:t}),p[e]=!0}var l=$(".NS_projects__project_nav"),u=$(".NS_projects__content"),d=l.find(".js-load-project-content");if(l.length&&u.length){if(function(){var e=window.location.pathname.replace(/\/\d*$/,""),t=_.map(d,function(e){return e.pathname.split("/").pop()});t.push("posts");var n=e.split("/").pop();_.contains(t,n)&&!window.location.hash&&r()}(),d.on("click",function(t){var n=$(this);if(t.preventDefault(),URI(n.prop("href")).pathname()!==URI(window.location).pathname()){var i=n.attr("data-content"),r=n.attr("href");e(r,i)}}),device_idioms["not-touchable"]){var f=skrollr.init({forceHeight:!1});$(document).one("ksr:video_player_resize",function(){f.refresh()})}$(document).resize(function(){n()});var p={about:!1,risks:!1,last_rewards:!1,recs:!1},h=_.debounce(function(){o("about",$(".js-project-nav"))&&c("about",s($(".js-project-nav"))),o("last_rewards",$(".js-project-rewards"),!0)&&c("last_rewards",s($(".js-project-rewards"))+$(".js-project-rewards").height()),o("risks",$(".js-risks"))&&c("risks",s($(".js-risks"))),o("recommended",$(".js-recs"))&&c("recommended",s($(".js-recs")))},1e3);$(document).scroll(h),n()}}),define_namespace(".NS_projects__rewards_list",function(){function e(e,n){if(u=0,"live"!==current_project.get("state")&&n.preventDefault(),!l&&!e.state.is_selected){var r=t(),o=0;r.length>0&&r[0].index<e.index&&(o=r[0].el.$rw.height()-r[0].closed_height);var a=e.el.$rw.offset().top-o-p;$(document).scrollTo(a,100),i(),e.toggle_pledge_form(),e.state.is_truncate_worthy&&(e.toggle_description_truncation(),e.el.$truncate_link.removeClass("hide")),track("Checkout Reward Click",{checkout_reward_id:e.id,checkout_amount:e.reward_data.minimum})}}function t(){return _.filter(s,function(e){return e.state.is_selected===!0})}function n(e){return _.filter(current_project.get("rewards"),function(t){return t.id===e})}function i(){var e=t();if(e.length){var n=e[0];n.toggle_pledge_form(),n.state.is_truncated&&n.toggle_description_truncation(),n.el.$truncate_link.addClass("hide"),n.reset_pledge_form(),n.reset_pledge_error(),n.reset_country_error()}}function r(){c=$(".js-reward-available"),window.rewards=c.map(function(e,t){var i=$(t),r=i.data("rewardId"),o=n(r)[0];return o.closed_height=i.height(),o.index=i.index(),new root.RewardController(i,o)}).get(),c.on("change","select",function(e){var t=$(e.delegateTarget).data("reward");t.shipping_rules.length&&(t.update_pledge_total(),t.reset_pledge_error()),t.validate()}),c.on("click",function(t){var n=$(this).data("reward");e(n,t)}),c.on("submit","form",function(e){var t=$(e.delegateTarget).data("reward"),n=t.validate();return t.state.submit_halted=!n,t.state.submit_halted&&$(e.target).removeClass("submitting-non-ajax"),n&&track("Checkout Reward Continue Click"),n}),c.on("blur input",'input[name="backing[amount]"]',function(e){var t=$(e.delegateTarget).data("reward");t.validate()}),c.on("click",".js-desc-toggle",function(e){var t=$(e.delegateTarget).data("reward");e.preventDefault(),t.toggle_description_truncation()})}var o,a;"undefined"!=typeof current_user&&(o=current_user.get("id")===current_project.get("creator.id"),a=current_project.get("is_backing"));var s,c,l=a||o,u=0,d=!device_idioms["not-mobile"],f=$(".js-project-nav").height(),p=20;d||(p+=f),$(document).on("click",function(){u+=1,3===u&&(i(),u=0)}),$(document).on("projectnav:rewards projectnav:description",function(){r()}),r()}),define_namespace(".NS_projects__project_share",function(e){var t=e.find(".js-facebook-share");t.click(function(e){if(e.preventDefault(),track("Project Show Share",{share_type:"facebook"}),"undefined"!=typeof FB){var t=$(this).attr("href");FB.ui({method:"share",href:t,display:"popup"},function(e){e&&"undefined"==typeof e.error_code?(growl({success:I18n.t("onloads.views.projects.share.Facebook_post_was_published")}),track("Project Share",{share_type:"facebook",facebook_post_id:e.post_id,share_url:t})):growl({notice:I18n.t("onloads.views.projects.share.Facebook_post_was_not_published")})})}});var n=e.find(".js-pinterest-share");n.click(function(){track("Project Show Share",{share_type:"pinterest"});var e="https://assets.pinterest.com/js/pinmarklet.js?r="+99999999*Math.random();$("<script type='text/javascript' charset='UTF-8' src="+e+"/></script>").appendTo("body")}),twttr.ready(function(e){e.events.bind("click",function(){track("Project Show Share",{share_type:"twitter"})})}),$(".js-tumblr-share").on("click",function(e){track("Project Show Share",{share_type:"tumblr"}),e.preventDefault()}),e.find(".js-embed-share").on("click",function(e){track("Project Show Share",{share_type:"embed"}),e.preventDefault()})}),define_namespace(".NS_projects__spotlight_onboarding",function(e){function t(){e.addClass("dismissed"),$("html,body").css("overflow","auto"),KSR.store.setItem("dismiss_spotlight_onboarding",!0),track("Spotlight Onboarding Hide")}KSR.store.isSupported()&&(KSR.store.getItem("dismiss_spotlight_onboarding")||(e.removeClass("dismissed"),$("html,body").css("overflow","hidden"),track("Spotlight Onboarding Show")),e.find(".js-close").on("click",function(e){t(),e.preventDefault()}))}),define_namespace(".NS_campaigns__stats",function(e){current_project.listen("backers_count",function(t){var n=t.backers_count;e.find(".js-backers_count").text(formatters.format_number(n,{precision:0}))}),current_project.listen("pledged",function(t){e.find(".js-pledged").text(formatters.shorter_money(t.pledged,{currency:current_project.get("currency")}))}),current_project.listen("usd_pledged",function(t){e.find(".js-usd_pledged").text(formatters.shorter_money(t.usd_pledged,{currency:"USD"}))})}),define_namespace(".js-project-description-content, #description",function(e){e.find(".js-open-supporting-material-modal").on("click",function(t){track("Viewed Prototype Gallery Tooltip"),e.find(".supporting-material-modal").fadeIn(200),$("body,html").addClass("supporting-material-modal-open"),t.preventDefault()}),e.find(".js-close-supporting-material-modal").on("click",function(e){var t=$(this).closest(".supporting-material-modal");t.fadeOut(200),$("body,html").removeClass("supporting-material-modal-open"),e.preventDefault()})}),define_namespace(".js-could-have-post-media",function(e){e.on("click",".js-post-media-link",function(e){var t=$(".js-post-media-content"),n=t.find(".js-image"),i=t.find(".js-link");n.html(""),i.text(""),n.append('<img src="'+$(this).data("large-image")+'" />'),i.text($(this).data("post-title")),i.attr("href",$(this).data("post-link")),
$("#post_media").modal_dialog(),e.preventDefault()})}),define_namespace("#country-select",function(e){e.livequery(function(){var t=$(this);t.find("a.btn--green").on("click",function(e){t.find("form").submit(),e.preventDefault()}),t.find("select#country").on("change",function(){var n=$(this).val().toLowerCase();t.find(".country").hide(),t.find("."+n).show(),e.removeClass().addClass(n)}).trigger("change")})}),define_namespace("body#projects_dashboard",function(){!function(){var e=$("#projects_dashboard #activity").find(".mobius").data("mobius");e.current_page=0,$(document).on("click","#projects_dashboard .activity-filters a",function(t){var n=$(this);n.closest(".activity-filters").find("a").removeClass("current"),n.addClass("current"),$.ajax({type:"get",dataType:"html",url:n.attr("href"),success:function(t){var i=$(t).find(".mobius").children();$("#activity .mobius").html(i).trigger("mobius:loaded_page",[1,i]),e.clear_extra_params(),e.add_param("cat",n.data("filter")),e.current_page=1}}),t.preventDefault()})}()}),$(function(){function e(e){var t=e.find(":input.required"),n=!0,i=!1;return $("body").is(".rejected, .appealed")&&!e.children().length?!0:(t.each(function(){$(this).val()||(n=!1)}),e.find(".js-asset-upload.required:not(.has_file)").length&&(n=!1),e.is("#the-basics-panel")&&(i=$(".js-campaign-goal").val(),i&&i.match(/[1-9]/)||(n=!1)),e.is("#rewards-panel")&&(e.find(".reward .summary").length||(n=!1)),e.is("#account-setup-panel")&&(n=0===e.find(".needs_verification").length),n)}function t(){var t=!0;$("#steps-nav a").each(function(){var n=$(this),i=$(n.attr("href")+"-panel");e(i)?n.addClass("completed").removeClass("errored"):(n.removeClass("completed"),t=!1)}),t?(A.find(".submit a").addClass("enabled"),N.length&&M.find("a").removeClass("bg-white border hover-bg-grey-light").addClass("bg-green white")):(A.find(".submit a").removeClass("enabled"),M.data("submitted")||M.find("a").removeClass("bg-green white").addClass("bg-white border hover-bg-grey-light"))}function n(){var e=$("#forms .flash-error");return $("#steps-nav a").removeClass("errored"),e.length?(e.find("li").each(function(){track("Project Edit Error",{error_message:$(this).text()})}),e.closest("li.panel").each(function(){var e=$(this).data("panel_id");$('#steps-nav a[href="#'+e+'"]').addClass("errored")}),!0):!1}function i(){return R.find("input.photo, input.video, input.avatar")}function r(){return _.any(i(),function(e){return $(e).data("uploading")})}function o(){return r()?new Promise(function(e,t){var n=$("#confirm-abandon-upload");n.modal_dialog();var r=function(){n.off("click",".save a"),n.off("click",".cancel a"),n.trigger("close")};n.on("click",".save a",function(e){e.preventDefault(),r(),t()}),n.on("click",".cancel a",function(t){t.preventDefault(),r(),e(),i().trigger("ksr_file_upload:cancel"),track("Project Edit Cancel Upload")})}):Promise.resolve()}function a(){if(!KSR.store.isSupported())return Promise.resolve();var e,t,n;return e=$.parseJSON(KSR.store.getItem("project_edit_display_rules")||"{}"),t=e[current_project.get("id")],_.isUndefined(t)||t===!0?new Promise(function(t){n=$.open_remote_modal_dialog(URI($("a.rules").data("interrupt")).addQuery("collapsed",!0).suffix("js").toString(),{dataType:"html",class_name:"rules"}),n.$elem.on("closed.modal_dialog",function(){t()}),e[current_project.get("id")]=!1,KSR.store.setItem("project_edit_display_rules",JSON.stringify(e))}):Promise.resolve()}function s(e){window.history&&window.history.replaceState?window.history.replaceState(null,null,e):window.location.replace(e)}function c(){P.addClass("on_continue_nav")}function l(){P.removeClass("on_continue_nav")}function u(){$(".tools").addClass("visible")}function d(){$(".tools").removeClass("visible")}function f(){return $(".tools").hasClass("visible")}function p(){return f()?new Promise(function(e){o().then(function(){var t=$("#confirm-abandon");t.modal_dialog();var n=function(){t.off("click",".save a"),t.off("click",".cancel a"),t.trigger("close")};t.on("click",".save a",function(t){t.preventDefault(),n(),S(R.find("form")).then(function(){track("Project Edit Save",{context:"modal"})}).then(e)}),t.on("click",".cancel a",function(t){t.preventDefault(),n(),T(R.find("form")).then(function(){track("Project Edit Discard Changes",{context:"modal"})}).then(e)})})}):Promise.resolve()}function h(e){var t=I.find("#steps-nav > li:eq("+e+") > a"),n=$("#running-board > .help-panels");if(!t.is(".disabled, .selected"))return p().then(function(){var i=$("ol.form-panels li.panel:eq("+e+")");R.off("resize"),i.on("resize",function(){F.height(i.height())}),i.trigger("resize"),$(window).scrollTop()>75&&$(window).scrollTop(60),F.trigger("goto",[e]),v(t),n.height(n.height()),n.children(".panel").hide(),$("#"+i.data("panel_id")+"-help").fadeIn(),n.css("height","auto"),$("#sidebar > .sidebar-help-panels > .panel").hide(),$("#"+i.data("panel_id")+"-sidebar-help").fadeIn(),I.find(".tools").show(),s("#"+i.data("panel_id")),L=e,R=i,$("body").removeClass("confirm_preview")})}function m(){var e=A.find("a.selected_last"),t=$("#steps-nav li:has(a.selected_last)").index();0===e.length&&(e=$("#steps-nav li a").first(),t=0),y("forms"),t>=0?h(t):A.find("a.selected_last").click()}function g(e){var t=$(".content-toggle > #"+e);return p().then(function(){var n=$("."+e+" .tab");"launch"===e&&c(),t.stop().fadeIn(),I.find(".tools").hide(),$(window).scrollTop()>75&&$(window).scrollTop(60),R.find("textarea.intermediate_editor, textarea.editor").each(function(){var e=$.wymeditors($(this).data("wym_index"));e&&$("object",e._doc).hide()}),v(n)})}function v(e){var t=A.find(".selected");t.removeClass("selected"),P.find("a").removeClass("selected_last"),t.is(".tab")||t.addClass("selected_last"),e.addClass("selected")}function y(e){var t=$("#content-wrap");t.find(".content.tabbed").fadeOut(),"finished"===e?(t.find("#forms").hide(),t.find("#finished").show()):"forms"===e&&(t.find("#finished").hide(),t.find("#forms").show())}function b(e){$.each(e,function(e,t){if(t){var n=$("#"+e.replace(/_/g,"-")),i=$(t);n.find("input.photo, input.video, input.avatar, textarea.intermediate_editor").trigger("destroy"),n.find("object").each(function(){swfobject.removeSWF(this.id)}),n.data("original_values",i.serialize()),n.html(i),n.find("form").update_form_cache(),"undefined"!=typeof FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(n[0])},E)}}),n()&&h($(".flash-error:first").closest(".panel").index())}function w(){var e=$(".NS_projects__edit_submission").find(".project_message_thread").data("read-messages-path"),t=M.data("greenlit");N.length?"auto_approved"===t?(c(),N.addClass("ready_to_go"),track("Project Edit Change Panel",{context:"submit_or_launch",selected_panel:"submit_or_launch"})):"review_required"===t||null===t?(c(),track("Project Edit Change Panel",{context:"submit",selected_panel:"submit"})):"auto_rejected"===t&&(N.hide(),location.reload()):(track("Project Edit Change Panel",{context:"status",selected_panel:"status"}),A.find("a").removeClass("selected").removeClass("selected_last"),A.find(".project_complete").addClass("selected"),e&&$.ajax({type:"put",url:e})),$("#saving-layer").hide(),y("finished")}function k(){var e=M.data("poll_url"),t=$("#progress_modal .progress_bar_progress"),n=new Date,i=500,r=20;return"undefined"!=typeof M.data("greenlit")?Promise.resolve():new Promise(function(o){$.pollster(e,function(e){var i=(new Date-n)/1e3,a=i/r*100;return t.width(a+"%"),i>=r?(track("Project Edit Greenlit Timeout"),o(),!0):_.isNull(e.greenlit)?!1:(track("Completed Project Edit Greenlit"),M.data("greenlit",e.greenlit),o(),!0)},{delay:i})})}function x(){var e=$("#progress_modal"),t=function(){e.hide()};s("#submission"),e.show(),j().then(k).then(w).then(t,t)}function j(){return M.data("submitted")?Promise.resolve():new Promise(function(e,t){var n=M.find("form").attr("action");$.ajax({type:"PUT",url:n,dataType:"json",contentType:"application/json",success:function(n){n.ok?(M.data("submit_for_review_url",n.submit_for_review_url).data("poll_url",n.poll_url).data("submitted","true"),e()):(b(n.panels),t())}})})}function C(){var e=A.find(".preview a").attr("href");e&&$.ajax({type:"get",url:e,dataType:"json",success:function(e){I.find("#preview .project-content").html(e.content),I.find("#preview #project-header").html(e.running_board),I.find("#project-card-preview").html(e.card)}})}function S(e){var n=I.find(".tools .save"),i=I.find(".tools li.cancel"),r=$("#saving-layer");return e.find(".editor.assets_processing").length?Promise.reject():o().then(function(){return new Promise(function(o,s){$.publish("project_build_submit_preprocessors"),n.addClass("disabled").find("a").text(I18n.t("onloads.views.projects.edit.Saving")),i.addClass("disabled"),r.show(),$.ajax({type:e.attr("method"),url:e.attr("action"),dataType:"json",data:$.param(e.composed("project_build_data",e.serializeArray())),global:!1,success:function(e){if(!_.has(e,"panels"))return growl({error:I18n.t("onloads.views.projects.edit.Could_not_save")}),void s();if(b(e.panels),e.errored)s();else{if("undefined"!=typeof current_user&&current_user.set("name",$("#project_creator_name").val()),d(),I.find("#preview .project-content").html(e.content),e.launch&&$("#launch").html(e.launch),I.find("#preview #project-header").html(e.running_board),I.find("#project-card-preview").html(e.card),e.category){var n=parseInt(I.find("#forms").attr("data-category_id"),10),i=e.category.id;n!==i&&track("Project Edit Change Category",{category_before:n,category_after:i}),I.find("#forms").attr("data-category_id",e.category.id),I.find("#category_name_rules").text(e.category.name)}else I.find("#forms").attr("data-category_id","");o(),a().then(function(){r.hide()}),t()}},error:function(){e.trigger("ajax_error"),growl({error:I18n.t("onloads.views.projects.edit.Could_not_save")}),s()},complete:function(t){n.removeClass("disabled").find("a").text("Save"),i.removeClass("disabled"),r.hide(),e.trigger("ajax_complete",[t])}})})})}function T(e){return o().then(function(){e.restore_form(),d()})}function D(e){if(!e.is(".disabled")){var t=e.text();e.addClass("disabled"),$.ajax({url:e.attr("href"),type:"put",dataType:"json",success:function(t){t.share_token?(e.closest("#share_preview_container").removeClass("no_token").addClass("has_token"),$("#sharing_enabled input.url").val(t.url),$(".project_preview_comments").addClass("has_token")):(e.closest("#share_preview_container").removeClass("has_token").addClass("no_token"),$(".project_preview_comments").removeClass("has_token"),$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments"))},complete:function(){e.removeClass("disabled"),e.text(t)}})}}var I=$("#projects_edit"),E=0,A=$("#project-edit-nav"),P=$(".NS_projects__edit_nav"),N=$(".NS_projects__greenlit"),M=A.find(".finished"),O=I.find("#main"),F=O.find(".window"),L=0,R=$("ol.form-panels li.panel:first");if(I.length){if($(window).on("project_edit:check_all_panels_for_completion",t),$(window).on("message",function(e){try{var t=JSON.parse(e.originalEvent.data);if(t.close_jumio_modal){var n=$("#jumio-modal");n.trigger("allow_close.modal_dialog"),n.trigger("close.modal_dialog")}}catch(i){}}),F.serialScroll({items:"li.panel",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"}),F.on("shifted",function(){R.trigger("resize")}),$(document).on("project_edit:toggle_tab",function(e,t){"launch"===t?(y("launch"),g("launch").then(function(){track("Project Edit Change Panel",{context:"launch",selected_panel:"Launch"})})):"preview"===t&&$("."+t+" .tab").click()}),P.find("a").click(function(e){e.preventDefault();var t=$(this);if(R.find("textarea.intermediate_editor, textarea.editor").each(function(){var e=$.wymeditors(t.data("wym_index"));e&&$("object",e._doc).show()}),$(document).trigger("ksr_video:pause_all_videos"),"#preview"===t.data("for")){var n=$(".content-toggle > #preview");n.is(":visible")?(n.stop().fadeOut(),m()):(y("preview"),g("preview").then(function(){track("Project Edit Preview")}))}else if(t.is(".view_project"))p().then(function(){window.location.href=t.attr("href")});else if(t.is(".project_complete"))p().then(x);else if(t.is(".project_build"))l(),m();else if(!t.is(".disabled")){y("forms"),h(t.parent("li").index());var i=$.trim(t.text());track("Project Edit Change Panel",{context:i,selected_panel:i})}}),$(document).on("click","#rewards-panel .add-another",function(e){e.preventDefault(),track("Project Edit Add Reward Click")}),$(document).on("click","#rewards-panel .js-clone_reward",function(e){e.preventDefault(),track("Project Edit Copy Reward Click")}),jQuery.fx.off=!0,window.location.hash?("#preview"===window.location.hash&&g("preview"),A.find("a[href="+window.location.hash+"]").click()):$("body").is(".rejected, .appealed, .pending")?A.find("a[href=#submission]").click():A.find("a[href=#the-basics]").click(),jQuery.fx.off=!1,$("#logo a, a.exit-link, a.rules, a.prototypes_warning").on("click",function(e){if(!e.metaKey&&!e.ctrlKey){e.preventDefault();var t=$(this);p().then(function(){window.location.href=t.attr("href")})}}),$(window).on("beforeunload",function(){return f()?I18n.t("onloads.views.projects.edit.You_have_unsaved_changes"):void 0}),$(document).on("submit","#launch_confirmation > form",function(e){var t=$(this).find("input.confirmation");t.is(":checked")||($(this).removeClass("submitting-non-ajax"),growl({error:I18n.t("onloads.views.projects.edit.Please_accept_Our_Rules")}),e.preventDefault())}),$(document).on("change","#launch_confirmation input.confirmation",function(){var e=$("#launch_confirmation");$(this).is(":checked")?e.find("input[type=submit]").removeClass("disabled"):e.find("input[type=submit]").addClass("disabled")}),t(),n()&&h($(".flash-error:first").closest(".panel").index()),function(){function e(e){var t=e.clone();return t.find(".location-search .field-selected").remove(),t}var i=I.find("form"),r={};i.each(function(){var t=$(this);r[t.closest(".panel").data("panel_id")]=e(t)}),$.fn.restore_form=function(){var i,o=$(this),a=o.closest(".panel").data("panel_id"),s=r[a];i=o.find(".js-asset-upload:first"),i.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel"),i=i.clone(),i.find("object").remove(),s.find(".js-asset-upload:first").replaceWith(i),o.find("input.photo, input.video, input.avatar, textarea.editor").trigger("destroy"),o.replaceWith(s),"undefined"!=typeof FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(s[0])},E),s.trigger("form_restored"),r[a]=e(s),t(),n()},$.fn.update_form_cache=function(){var t=$(this),n=t.closest(".panel").data("panel_id");r[n]=e(t)}}(),$(window).on("project_edit:update_preview",C),$(window).on("wymeditor:video_encoded",C),$(".edit_project input.photo, .edit_project input.video, .edit_project input.avatar").livequery(function(){var e="image",n=$(this),i=n.parent(),r=i.parent(),o=function(){},a={};n.is(".video")&&(e="video",o=function(){C()}),$.extend(a,{type:e,after_encode:o}),n.ksr_uploader(a),n.on("file_added",function(){r.closest(".grey-field").removeClass("error"),"video"===e&&r.addClass("encoding"),r.find("input.photo, input.video, input.avatar").trigger("resize"),C(),t()})}),$(document).on("click","body#projects_edit .js-asset-upload a.remove",function(e){e.preventDefault();var t=$(this).attr("href"),n=$(this).closest(".js-asset-upload");$.ajax({url:t,type:"delete",success:function(){n.removeClass("has_file"),n.find("input.photo, input.video, input.avatar").trigger("ksr_uploader:remove"),n.find("input.photo, input.video, input.avatar").trigger("resize"),C()},error:function(){growl({error:I18n.t("onloads.views.projects.edit.Could_not_delete_this_file")})}})}),$(document).on("click","body#projects_edit .js-asset-upload a.retry_upload",function(e){e.preventDefault();var t=$(this).closest(".js-asset-upload");t.removeClass("has_file encoding"),t.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel").trigger("resize")}),I.on("submit","form.edit_project",function(e){e.preventDefault()}),function(){var e=I.find(".tools"),t=e.find(".form-navigator");$(document).on("change keyup cut paste input dirty wym-documentHTMLUpdated","form.edit_project",_.debounce(function(e){var n=$(e.target),i=n.closest("form");_.each(WYMeditor.INSTANCES,function(e){e.update()}),i.serialize()===i.data("original_values")||n.is(".do_not_dirty")&&"dirty"!==e.type||(t.hide(),u())},100)),e.on("click",".form-tools .save a",function(e){e.preventDefault(),$(this).closest("li.save").is(".disabled")||S(R.find("form")).then(function(){track("Project Edit Save",{context:"toolbar"})})}),e.on("click",".form-tools .cancel a",function(e){e.preventDefault(),T(R.find("form")).then(function(){track("Project Edit Discard Changes",{context:"toolbar"})})})}(),function(){function e(e){var i;$.each(n,function(n){e.attr("id")===n&&(i=t.find(String(this)),i.text(e.val()))})}var t=I.find("#sidebar"),n={project_name:".project-card .project-title > a",project_blurb:".project-card .project-blurb"};$(window).on("form_restored",function(n){var i=$(n.target),r=i.find(".field.location-search input.text").val();i.closest("#the-basics-panel").length&&(i.find(":input").each(function(){e($(this))}),t.find("ul.project-meta > li > a > span.location-name").text(r))}),$(document).on("keyup input cut paste change","#the-basics-panel form :input",_.debounce(function(t){e($(t.target))},100)),$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:select",function(e,n){t.find("ul.project-meta > li > a > span.location-name").text(n)}),$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:unselect",function(){t.find("ul.project-meta > li > a > span.location-name").text("")}),$(document).on("file_added","#the-basics-panel form .project-image",function(e,n){t.find(".project-thumbnail img").attr("src",n.image_src)})}(),$(document).on("click",".panel label.primary.help",function(){var e=$(this).closest(".grey-field").find(".field-help-2");e.is(":visible")?e.slideUp(300,"easeOutQuad",function(){$(this).trigger("shifted")}):e.slideDown(300,"easeOutQuad",function(){$(this).trigger("shifted")})}),$(document).on("click","body#projects_edit #preview a#enable_sharing",function(e){var t=$(this);e.preventDefault(),track("Project Edit Preview Link Toggle",{toggled_to:"enabled"}),D(t)}),$(document).on("click","body#projects_edit #preview a#disable_sharing",function(e){var t=$(this);e.preventDefault(),track("Project Edit Preview Link Toggle",{toggled_to:"disabled"}),D(t)}),$(document).on("click","body#projects_edit #preview #sharing_enabled .url",function(e){this.focus(),this.select(),e.preventDefault(),track("Project Edit Preview Link Select")}),$(document).on("click","body#projects_edit .description .wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"project_edit_description"})}),$(document).on("click","#projects_edit .js-open-project-showcase",function(){track("Opened Prototype Gallery Editor")}),KSR.store.isSupported()){var H=$(".banner");H.each(function(){var e=$(this).data("banner-name"),t=$(".banner_"+e),n="banner_"+e+"_hide";KSR.store.getItem(n)||t.removeClass("hidden"),t.find(".dismiss").click(function(i){i.preventDefault(),KSR.store.setItem(n,!0),t.fadeOut(function(){t.addClass("hidden")}),track("Project Edit Banner Dismiss",{banner_name:e})})})}$("li.panel").on("project_build:refresh",function(){var e=$(this),t=e.data("refresh_url");$.ajax({type:"get",url:t,dataType:"html",success:function(t){e.html(t)},beforeSend:function(){e.addClass("loading")},complete:function(){e.removeClass("loading")}})}),$("#loading").hide(),$(document).on("click",".link_to_js-prohibited_projects_dialog",function(e){e.preventDefault(),track("Viewed Prohibited Rewards List",{context:"Project Reward Edit"})}),$(document).on("click",".link_to_js-school-video-dialog",function(e){e.preventDefault(),track("Viewed How To Make An Awesome Video",{context:"Project Story Edit"})})}}),define_namespace(".NS_projects_view_fees",function(){$(".js-view-fees").on("click",function(){track("Viewed Fees Breakdown",{project_pid:current_project.data.id})})}),define_namespace("#projects_learn",function(){function e(e){var t=$("#tools").find("video").get(0);t&&t.pause(),e.find("video").length&&e.find("video")[0].play()}function t(e,t){if(!s[e]){var i=$(this).scrollTop()+$(this).height()>=n(t);return i}}function n(e){return e.offset().top+e.height()}function i(e,t){track("Viewed Start Project Section",{context:e,page_pixel_length:$(document).height(),pixel_position:t}),s[e]=!0}var r=".categories ul",o=$("#interstitials"),a=0;$(r+" a").on("click",function(e){$(r+" a").addClass("dim"),$(r+" a").removeClass("selected"),$(this).removeClass("dim"),$(this).addClass("selected"),o.find(".category").removeClass("visible"),o.find('[data-name="'+$(this).attr("data-name")+'"]').addClass("visible"),o.find("video")[0].pause(),o.height(o.find('[data-name="'+$(this).attr("data-name")+'"]').height()+161),$("body").is(".touchable")||$(document).scrollTo($(".categories"),800),track("Learn More Project Category Select",{category_name:$(this).text()}),e.preventDefault()}),o.find(".category .close").on("click",function(e){$(r+" a").removeClass("dim selected"),o.find(".category").removeClass("visible"),o.height(0),e.preventDefault()}),$("#tools .right_side").on("cycle-after",function(t,n,i,r){var o=$(r);a>0&&track("Learn More Project Tool Select",{slide_description:o.attr("data-slide-description")}),a+=1,e(o)}),$("#quotes").find(".group .mirror").each(function(){$(this).html($(this).closest(".group").find(".regular").html())}),$("#bottom .js-play-button").on("click",function(e){e.preventDefault(),$(this).closest("section").addClass("video_expanded"),$(this).closest("section").find(".video-player").trigger("ksr_video:play")}),$("#bottom .close").on("click",function(e){e.preventDefault(),$(this).closest("section").removeClass("video_expanded"),$(this).closest("section").find(".video-player").trigger("ksr_video:pause")}),$("section#quotes").waypoint(function(){$(this).addClass("loaded")},{offset:150});var s={stats:!1,quotes:!1,tools:!1,faqs:!1},c=_.debounce(function(){Object.keys(s).forEach(function(e){t(e,$(".js-"+e))&&i(e,n($(".js-"+e))+$(".js-"+e).height())})},500);$(document).scroll(c)}),define_namespace(".projects_livestreams",function(){track_links(".js-create-livestream","Clicked Create Livestream")}),$(function(){var e=$("#projects_rules"),t=$("#project-edit-nav",e),n=$("#continue input[type=checkbox]",e),i=$("#continue input[type=submit]",e);e.length&&($(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),t.find("#steps-nav .first a").addClass("selected"),t.find("a").click(function(e){e.preventDefault()}),n.on("change",function(){$(this).is(":checked")?$(this).siblings("label").addClass("selected").removeClass("unselected"):$(this).siblings("label").addClass("unselected").removeClass("selected"),0===n.not(":checked").length?i.removeClass("disabled"):i.addClass("disabled")}),i.on("click",function(){return 0===n.not(":checked").length?($("#saving-layer").show(),!0):("undefined"!=typeof ga&&ga("send","event","Our Rules","Disabled Continue Click",""),!1)}))}),define_namespace("#projects_show",function(e){function t(e,t){var i,r=[];for(var o in n)o===t?i=n[o]:r.push(n[o]);e.removeClass(r.join(" ")),e.addClass(i)}var n={live:"aspect-ratio--16x9",replay:"aspect-ratio--4x1-lg aspect-ratio--3x1-md aspect-ratio--7x3-sm aspect-ratio--5x3",countdown:"aspect-ratio--2x1-lg aspect-ratio--5x3-md aspect-ratio--5x4-sm aspect-ratio--5x6"};$("#verifying-pledge.modal_dialog .remote_modal_dialog",e).click(function(){$(this).parents("div#verifying-pledge").trigger("close.modal_dialog")}),location.hash&&setTimeout(function(){$(location.hash).find(".faq-question a").click()},500),$("body").is(".touchable")&&(e.on("modal_dialog:opened",function(){$("video").length&&root.Touch&&($("#video-section",e).css("visibility","hidden"),$("video")[0].pause())}),e.on("close.modal_dialog",function(){$("#video-section",e).css("visibility","visible")}));var i=read_cookie("edit_survey_response");i&&$.open_remote_modal_dialog(URI.decode(i),{class_name:"backings-info__modal",remote_modal_dialog_contents_loaded:function(){destroy_cookie("edit_survey_response",URI.parse(window.location.href).path)},dataType:"html",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript, */*")}}),$(document).on("click",".js-view_your_pledge",function(){var e=current_project.get("backing"),t=e?e.urls.web.backing:null;$.open_remote_modal_dialog(URI(t).addQuery("ref","reward_view_pledge").addQuery("clicked_reward","true").suffix("js").toString(),{id:$(this).attr("data-modal-id"),class_name:"backings-info__modal",dataType:"html"})}),e.find(".js-livestream-notice").on("click",function(e){e.preventDefault(),$.scrollTo($("#huzza_livestream"),"easeOutExp")}),window.addEventListener("message",function(n){if(-1!==["https://huzza.io","https://live.kickstarter.com",window.location.origin].indexOf(n.origin)&&"object"==typeof n.data&&"huzza_state_change"===n.data.type){var i=n.data.value;t(e.find(".js-livestream-ratio"),i),"live"===i?e.find(".js-livestream-notice").removeClass("hidden"):("replay"===i||"countdown"===i)&&e.find(".js-livestream-notice").addClass("hidden")}},!1);var r=1;$(window).resize(function(){r>0&&(track("Window Resize Start"),r-=1)}),$(document).on("ksr_popover:opened",function(){$(".ksr-popover.visible").parent(".NS_projects__project_share")&&track("Project Show Share Sheet")})}),define_namespace(".NS_projects_start",function(){var e=$("#category_select");$(".category_select_el").on("change",function(){e.addClass("valid"),$("input.text").hasClass("valid")&&e.hasClass("valid")&&($(".js-project-start-button").removeClass("btn--gray"),$(".js-project-start-button").addClass("btn--green"))}),$("input.text").on("blur",function(){var t=$(this);t.val()?t.addClass("valid"):t.removeClass("valid"),$("input.text").hasClass("valid")&&e.hasClass("valid")&&($(".js-project-start-button").removeClass("btn--gray"),$(".js-project-start-button").addClass("btn--green"))}),$("#project_country").on("change",function(){var e=$(this),t=e.val();track("Project Country Changed",{changed_from:e.data("project-country"),changed_to:t}),e.data("project-country",t)}),$(".ksr-popover").find("ul a").on("click",function(t){e.find("select").ksr_val($(this).attr("data-id")),e.find("select").trigger("change"),$(this).closest(".ksr-popover").removeClass("visible"),e.addClass("category-id-"+$(this).attr("data-id")),t.preventDefault()}),$(".js-permanent-residence").hover(function(e){"undefined"!=typeof current_user&&track("Hovered Start Page Permanent Residence",{user_uid:current_user.data.id}),e.preventDefault()})}),define_namespace(".refund_checkouts_form",function(e){e.on("change","select#refund_checkout_amount",function(){var e=$(this),t=e.closest("li").find(".refund_amount_wrapper"),n=t.find("input#refund_checkout_amount"),i=!1;""===e.val()?(t.addClass("partial"),i=!0):t.removeClass("partial"),n.prop("disabled",!n.is(":visible")),i&&n.focus()}).trigger("change"),-1===$.inArray($("input#refund_checkout_amount").val(),[$("select#refund_checkout_amount").val(),""])&&e.find("select#refund_checkout_amount").val("").trigger("change")}),define_namespace("#stored_card_form",function(e){var t=e.find(".selected input.card_toggle");t.length||(t=$("input.card_toggle:first")),$(document).on("change click","input.card_toggle",function(e){e.preventDefault();var t=$(this),n=$("input.card_toggle").not(t);n.closest(".payment_option").removeClass("selected"),t.closest(".payment_option").addClass("selected"),"click"===e.type&&setTimeout(function(){t.prop("checked",!0)},0)}),t.prop("checked",!0).trigger("change")}),$(function(){var e="body.refund_checkouts_new_card #credit_card_form form",t=12e4,n=$("#saving-layer");$("body").append(n),$(document).on("submit",e,function(){n.show(),setTimeout(function(){n.find(".modal_dialog_body").html(I18n.t("onloads.views.refund_checkouts.new_card.Well_this_is_embarrassing_Processing_your_pledge")),n.removeClass("spinning")},t)})}),define_namespace(".NS_site__about_subnav",function(){$(".js-about-link").click(function(){track("About KSR Subnav About Click")}),$(".js-charter-link").click(function(){track("About KSR Subnav Charter Click")}),$(".js-press-link").click(function(){track("About KSR Subnav Press Click")}),$(".js-jobs-link").click(function(){track("About KSR Subnav Jobs Click")}),$(".js-team-link").click(function(){track("About KSR Subnav Team Click")}),$(".js-stats-link").click(function(){track("About KSR Subnav Stats Click")}),$(".js-happening-link").click(function(){track("About KSR Subnav Happening Click")})}),define_namespace(".NS_site__founding_story",function(e){function t(t,o){i.closest(n).toggleClass("expand-inline__container--show"),$(".js-read-hide").toggle(),o||("the-full-story"===r.fragment()?(history.replaceState({},document.title,r.fragment("").toString()),$.scrollTo(e)):history.replaceState({},document.title,r.fragment("the-full-story").toString()))}var n=$(".js-expand-inline__container"),i=$(".js-expand-inline__button"),r=URI();i.click(t),"the-full-story"===r.fragment()&&(t(null,!0),$.scrollTo(e))}),define_namespace(".NS_site__homepage_social",function(e){function t(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}function n(e,t){var n=e;return n.urls.web.project=e.urls.web.project+"?ref="+t,n.baseball_card_size="tall-big",$('<div class="project col col-4 mobile-scroll-row-item">'+render("projects/_baseball_card_tall",n,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</div>")}e.find(".js-slider").each(function(){function i(){a&&$.ajax({url:oauth_url(a),type:"get",dataType:"json",success:function(e){var t=o.find(".project-list");return o.find(".js-slider").removeClass("loading"),e.projects.length?void $.each(e.projects,function(){var e=this;t.append(n(e,s))}):void o.find(".js-slider").addClass("no-projects")}})}function r(){window.scrollY+1.5*$(window).height()<=o.offset().top||($(window).unbind("scroll",r),t("Social Module","Load"),i(),o.find("p.no-content").hide(),o.find(".js-slider").show())}var o=$(this).closest(e),a=o.data("url"),s=o.data("ref");window.api_oauth_token&&$(window).on("scroll",r)}),$(".js-facebook-login").click(function(){t("Social Module","Facebook connect")})}),define_namespace(".NS_site__homepage_staff_picks",function(){function e(e,t){"undefined"!=typeof ga&&ga("send","event","Homepage Events",e,t)}function t(e,t){n.scrollTo(e,t,{axis:"y",easing:"easeOutExpo"}),n.find(".video-player").trigger("ksr_video:pause"),$("body").is(".touchable")&&(n.find(".project-video").hide(),e.find(".project-video").show()),i.find(".nav li").removeClass("selected").eq(e.index()).addClass("selected"),n.find(".project").removeClass("selected").eq(e.index()).addClass("selected")}var n=$(".js-projects-slider"),i=$(".js-category-nav");i.find(".nav li a.link").click(function(i){e("Category select",$(this).text()),$.browser.msie&&$.browser.version<8||(t(n.find(".project").eq($(this).parent().index()),350),i.preventDefault())}),$.browser.msie&&$.browser.version<8||(n.find(".project").show(),t(n.find(".project.potd"),0)),$(".project-image .video-player").click(function(){$(this).parent().siblings(".project-badge").fadeOut("slow")}),$(document).on("resize",function(){$.browser.msie&&$.browser.version<8||t(n.find(".selected").eq($(this).parent().index()),350)})}),define_namespace(".js-project-cards-module",function(e){function t(e){return i&&(e.urls.web.project+="?ref="+i),e.baseball_card_size="tall-big",$('<div class="project col col-4 mobile-scroll-row-item">'+render("projects/_baseball_card_tall",e,["projects/_baseball_card_tall_spotlight","projects/_baseball_card_tall_standard"])+"</div>")}var n=e.data("url"),i=e.data("ref");n&&e.find(".js-slider").each(function(){var i=$(this);i.show(),$.ajax({url:oauth_url(n),type:"get",success:function(n){var r=i.find(".js-project-list");return i.find(".js-slider").removeClass("loading"),n.projects.length?void $.each(n.projects,function(){var e=this;r.append(t(e))}):void e.hide()},error:function(){e.hide()}})})}),define_namespace(".NS_site__projects_hero",function(e){function t(){var t=e.find("video").get(0);e.height(Math.round(.75*($(window).height()-$("#header-wrap").height()))),t&&t.play()}function n(e){var t=e.closest(".js-cycle-slide"),n=t.siblings().length+1,i=t.index()+1;return{classname:_.uniqueId("js-hero-link-"),data:{title:t.data("title"),position:i+" of "+n,selected_link:e.attr("href")}}}function i(t){var n=e.find(".pager");n.removeClass("light-theme dark-theme"),n.addClass(t.attr("data-theme"))}var r=e.find(".hero-slide").first();$(".js-cycle-slide a").each(function(){var e=n($(this));
$(this).addClass(e.classname),track_links("."+e.classname,"Clicked Homepage Hero",e.data)}),e.find(".slides").on("cycle-before",function(e,t,n,r){var o=$(r);i(o)}),$(document).resize(function(){t()}),$(".js-track-nyt-film").on("click",function(){track("NYT Film Hero Click")}),$(document).on("keydown",function(t){t.keyCode===KEY.LEFT&&e.find(".cycle-slideshow").cycle("prev"),t.keyCode===KEY.RIGHT&&e.find(".cycle-slideshow").cycle("next")}),t(),i(r),e.removeClass("loading")}),function(){var e="NS_site__simple_ticket_form";$("."+e).length&&$(document).on("click","#new_zendesk_ticket input:submit",function(e){e.preventDefault();var t=$(this),n=t.closest("form"),i=n.parent();n.is(".submitting")||(n.addClass("submitting"),t.data("original_text",t.val()),t.val(I18n.t("onloads.views.site.simple_ticket_form.Submitting")),$.ajax({type:"POST",data:n.serialize(),url:n.attr("action"),beforeSend:function(){i.find(".success, .error").remove()},complete:function(){n.removeClass("submitting"),t.val(t.data("original_text"))},success:function(){i.html('<h5 class="green">'+I18n.t("onloads.views.site.simple_ticket_form.Thanks_for_the_message_A_member")+"</h5>")},error:function(e){var t=JSON.parse(e.responseText);t=_.map(t,function(e,t){var n={base:"",requester:"email",subject:"question",description:"details"}[t]||t;return _.map(e,function(e){return _.compact([formatters.capitalize(n),e]).join(" ")})}),t=_.compact(t),t=_.flatten(t),i.prepend(render("funnels/_ticket_error",{errors:t}))}}))})}(),define_namespace(".NS_site__social_tout",function(e){function t(){$.ajax({url:oauth_url(e.data("url")),type:"get",success:function(t){var n=t.remotely_followed_count,i=t.remotely_followed.users;n>0&&(e.find(".js-friend-count").html(I18n.t("onloads.views.site.social_tout.Count_of_your_friends_are_on_kickstarter",{count:n,formatted_count:formatters.format_number(n,{precision:0})})),e.find(".js-avatar-pile").html(render("activity/card/_backing_avatars",{backers:i})))}})}function n(){window.scrollY+1.5*$(window).height()<=e.offset().top||($(window).unbind("scroll",n),t())}window.api_oauth_token&&$(window).on("scroll",n)}),define_namespace("body#site_about",function(){$(".js-charter-link").click(function(){track("About KSR About Charter Click")}),$(".js-stats-link").click(function(){track("About KSR About Stats Click")}),$(".js-team-link").click(function(){track("About KSR About Team Click")}),$(".js-jobs-link").click(function(){track("About KSR About Jobs Click")}),$(".js-toggle-founding-story").click(function(){track("About KSR About Founding Story Toggle")}),$(".js-press-link").click(function(){track("About KSR About Press Click")}),$(".js-learn-link").click(function(){track("About KSR About Learn Click")})}),define_namespace("body#site_fulfillment_report",function(){$(".js-fulfillment-report-expand").on("click",function(e){var t=$(this).closest(".fulfillment-report-sidebar");t.is(".is-expanded")?(t.find(".js-fulfillment-report__expandable-content").hide(),t.removeClass("is-expanded")):(t.find(".js-fulfillment-report__expandable-content").fadeIn(),t.addClass("is-expanded")),e.preventDefault()}),$(".js-facebook").on("click",function(e){e.preventDefault(),window.open($(this).attr("href"),"popupWindow","width=600,height=600,scrollbars=yes")})}),define_namespace("body#jobs_index",function(){$(".js-current-openings").click(function(){$.scrollTo($($(this).attr("href")),{duration:3e3,easing:"easeOutExpo"}),track("About KSR Jobs Current Openings Click")}),$(".js-charter-link").click(function(){track("About KSR Jobs Charter Click")}),$(".js-team-link").click(function(){track("About KSR Jobs Team Click")}),$(".js-job-section a").click(function(){track("About KSR Jobs Posting Click")})}),define_namespace("body#site_press",function(){$(".js-stats-button").click(function(){track("About KSR Press Stats Button Click")}),$(".js-faq-list input").click(function(){track("About KSR Press FAQ Item Click")}),$(".js-toggle-founding-story").click(function(){track("About KSR Press Founding Story Toggle")})}),$(function(){var e="body#site_privacy";$(document).on("change",e+" form.select_country",function(){$(this).submit()})}),define_namespace("body#site_spotlight",function(){device_idioms["not-touchable"]&&window.setTimeout(function(){skrollr.init({forceHeight:!1})},1e3),$(".js-explore-bar").on("click",function(e){$("html, body").animate({scrollTop:$("#js-spotlight-projects").offset().top},500,"easeOutExpo"),e.preventDefault()})}),$(function(){var e="body#terms_oct2012";$(document).on("change",e+" form.select_country",function(){$(this).submit()})}),define_namespace(".NS_spotlight_projects__carousel",function(e){function t(){$(window).width()<o?n.cycle("destroy"):n.cycle({autoHeight:0,timeout:0,slides:".project-group",speed:600,fx:"scrollHorz",easing:"easeOutExpo",pager:".dots",next:".next",prev:".previous",log:!1})}var n=e.find(".featured-projects-list"),i=e.find(".next"),r=e.find(".previous"),o=640;n.on("cycle-after cycle-before",function(e,t){1===t.slideNum?(i.addClass("visible"),r.removeClass("visible")):t.slideNum===t.slideCount?(r.addClass("visible"),i.removeClass("visible")):(r.addClass("visible"),i.addClass("visible")),"cycle-after"===e.type&&track("Watch Cycle Featured Projects")}),$(document).resize(function(){t()}),t()}),define_namespace("body#spotlight_projects_index",function(e){var t,n;e.hasClass("spotlight_projects_watch")?(t="Watch",n="iTunes"):(t="Play",n="Steam"),$(".share-link").on("click",function(e){var n=$(window).height()/2-250,i=$(window).width()/2-250;window.open($(this).attr("href"),"name","height=500, width=500, top="+n+", left="+i),track(t+" Page Share"),e.preventDefault()}),track_links("a.js-service-more",t+" Click "+n+" More Link"),track_links("a.track-service",t+" Click "+n+" Link"),track_links("a.track-official",t+" Click Official Site Link"),$(".published_projects").on("click","a.more",function(e){var t=$(this),n=$(".published_projects"),i=t.attr("href");t.remove(),$.ajax({url:i,method:"GET",data:"format=js",dataType:"html",success:function(e){n.append(e)}}),e.preventDefault()})}),define_namespace("body#stories_veronica_mars",function(){}),define_namespace(".NS_survey_questions__address",function(e){e.find(".country select").change(function(){var t=$(this).closest(".country"),n=t.data("original_country"),i=t.data("original_shipping_amount"),r=$(this).val(),o=$(this).find("option:selected").html(),a=$(this).find("option:selected").data("cost"),s=$("body").attr("id"),c=t.find(".shipping_changed_message"),l=$(".state .select"),u=$(".state .text"),d=$(".state .text_container");l.prop("disabled",!0).addClass("hidden"),u.prop("disabled",!0),d.addClass("hidden"),e.hasClass("is_preview")||(l.hasClass(r)?$.each(l,function(){var e=$(this);e.hasClass(r)&&e.prop("disabled",!1).removeClass("hidden")}):(u.prop("disabled",!1),d.removeClass("hidden")),n&&(a>i?(c.show(),c.find(".country-name").html(o),track("Survey Address for Backing with Restricted Shipping",{original_country:n,country:r,original_shipping_amount:i,shipping_amount:a,survey_context:s})):c.hide()))}),e.find(".country select").trigger("change")}),define_namespace("body#survey_responses_confirm_address",function(e){var t=$("input.radio#suggested_address");e.length&&(e.on("change",".address_col input.radio",function(){var e=$(this);$(this).closest(".addresses").find(".address_col").each(function(){var e=$(this);e.find("input.radio").is(":checked")?e.find("input[type=hidden]").attr("disabled",!1):e.find("input[type=hidden]").attr("disabled",!0)}),"entered_address"===e.attr("id")?track("Address Entered Selected"):"suggested_address"===e.attr("id")&&track("Suggested Address Selected")}),t&&t.click(),$(".addresses.no_suggestion").length?track("Confirm your Address Page"):track("Select an Address Page"))}),define_namespace("body#survey_responses_edit_address",function(e){e.find(".back").click(function(e){e.preventDefault(),window.history.go(-1)}),track("Edit Address Page")}),define_namespace("body#survey_responses_new",function(e){var t=e.find("input:hidden#dirty");e.length&&(e.on("keydown","input:text",function(e){13===e.which&&e.preventDefault()}),e.on("focus",".address input:text",function(){$(this).closest(".address").removeClass("hide_overlabels")}),"0"===t.val()?t.val("1"):track("Back to Survey Response Page"),track("Survey Response Page"))}),define_namespace("body#survey_editability_edit",function(e){var t=$("form#disable_survey_editability_form",e),n=$("#send_editable_address_preview",e),i=$("form#enable_survey_editability_form",e),r=t.find("#disable_confirm_text").html(),o=i.find("#enable_confirm_text").html();$("input:text",e).on("keydown",function(e){e.which===KEY.ENTER&&e.preventDefault()}),n.on("click",function(e){e.preventDefault();var t=$(this);t.data("loading")||(t.data("loading",!0),$.post(t.attr("href"),{},function(e,n){"success"===n&&(growl({success:I18n.t("onloads.views.surveys.editability_form.A_preview_has_been_sent_to_your_email_address")}),t.data("loading",!1))})),track("Survey Editability Deadline Preview Sent")}),t.confirm_submit({title:I18n.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:r,yes_copy:I18n.t("onloads.views.surveys.editability_form.Send_notifications_now"),no_copy:I18n.t("onloads.views.surveys.editability_form.Cancel")}),i.confirm_submit({title:I18n.t("onloads.views.surveys.editability_form.Just_to_confirm"),copy:o,yes_copy:I18n.t("onloads.views.surveys.editability_form.Allow_changes_now"),no_copy:I18n.t("onloads.views.surveys.editability_form.Cancel")})}),define_namespace("body#surveys_form",function(e){function t(){var e=s.find("input.keep_box:checked").closest(".fieldset:not(.template)");a.empty(),e.each(function(){a.append($(this).find("div.preview").children().clone())})}function n(e){var n=$(e),i=n.val(),r=n.closest(".fieldset"),o=r.find(".preview");n.is("#survey_intro")?o.find(".survey_intro").text(i):n.is(".question_choice")?o.find(".choice label").eq(n.closest("li.field").index()).text(i):i?o.find("li > label").text(i):o.find("li > label").text("Question"),t()}function i(e){e.confirm_submit({copy:I18n.t("onloads.views.surveys.form.You_can_only_send_a_survey_once_per_reward_tier_so_make_sure"),title:I18n.t("onloads.views.surveys.form.Please_confirm"),yes_copy:I18n.t("onloads.views.surveys.form.Send_survey_now"),no_copy:I18n.t("onloads.views.surveys.form.Edit_survey"),on_confirm_submit:function(){e.find("#sending").val("1")}})}function r(){c.find(".question:not(.template)").each(function(e){$(this).find(".position").val(e+1)}),t()}function o(){var e=s.find(".add_address_question");c.find(".question.address").is(":visible")?e.hide():e.show()}var a=$("#preview",e),s=$("form#survey_form",e),c=$("ul.questions",e),l=$("#saving-layer",e),u={containment:"document",tolerance:"pointer",items:".question.draggable",stop:r};c.sortable(u),e.on("click",".address.question .keep_box.checkbox",function(){$(this).is(":checked")?$(".editability",e).show():$(".editability",e).hide()}),$(".leftcol .textarea:visible, .leftcol .text:visible",e).each(function(){n(this)}),e.on("keyup cut paste",".leftcol .text, .leftcol .textarea",function(){n(this)}),e.on("click","a.add_question",function(e){e.preventDefault();var t=$("ul.questions"),n=$(this).data("template"),i=t.children(".template."+n),a=i.clone_form_template();a.css("display","block"),t.append(a),o(),r(),a.find("input.checkbox:not(.editable_ends_at)").prop("checked",!0),a.find("input.checkbox.editable_ends_at").prop("disabled",!1)}),e.on("click",".add_question_choice",function(e){e.preventDefault();var n=$(this).closest("li.question"),i=n.find("ol.choice_fields"),r=i.find("li:last"),o=r.clone().insertAfter(r),a=n.find(".preview"),s=a.find(".choice").last(),c=s.clone().insertAfter(s),l="";o.find("label.overlabel .count").text(function(e,t){return parseInt(t,10)+1}),o.find(".delete_choice").show().andSelf().find("input").val(l).focus(),c.val(l).find("label").html(l).andSelf().find("input.radio").val(l),t()}),e.on("click",".delete_question",function(e){e.preventDefault();var t=$(this),n=t.closest(".question"),i=n.find(".keep_box.checkbox");i.is(":checked")?i.prop("checked",!1):i.prop("checked",!0),n.hide(),n.find("input.checkbox.editable_ends_at").prop("disabled",!0),o(),r()}),e.on("click",".delete_choice",function(e){e.preventDefault();var n=$(this).closest("li.field"),i=n.closest("li.question"),r=i.find(".preview"),o=n.parent().children();r.find(".choice").eq(n.index()).remove(),n.remove(),o.filter(":visible").each(function(e){$(this).find("label.overlabel .count").text(e+1)}),t()}),e.on("click","#survey_save",function(n){n.preventDefault(),track("Survey Save"),l.show(),$.ajax({url:s.attr("action"),type:s.find('[name="_method"]').val(),data:s.serialize(),complete:function(){l.hide(),t()},success:function(t){var n=$(t.data);$(".modal_dialog").remove(),$("#main_content").replaceWith(n),a=$("#preview",e),s=$("form#survey_form",e),c=$("ul.questions",e),l=$("#saving-layer"),i(s),c.sortable(u)},error:function(){window.location.reload(!0)}})}),e.on("keydown","form#survey_form",function(t){return t.keyCode!==KEY.ENTER||$(t.target).is("textarea")?void 0:(t.preventDefault(),$("#survey_save",e).trigger("click"),!1)}),i(s)}),define_namespace("body#two_factor_authentication_confirm",function(e){e.find(".js-resend_code").on("click",function(e){track("Two-factor Authentication Resend Code"),$.ajax({dataType:"json",success:function(e){growl(e)}}),e.preventDefault()}),e.find("#remember").on("change",function(){track("Two-factor Authentication Remember Changed")}),e.find(".js-use_fallback").on("click",function(t){var n=$(this);$.ajax({url:n.attr("action"),method:n.attr("method"),success:function(t){n.hide(),e.find(".js-resend_phone").removeClass("hide"),growl({success:t.success})}}),t.preventDefault()})}),$(function(){function e(){$(".NS-phone_numbers__edit").is(":visible")?$(t).find(".js-back:not(.edit-back-button)").hide():$(t).find(".js-back").show()}var t=".NS-two_factor_authentication_new";$(document).on("click",t+" .js-confirmation .js-next",function(e){$(t+" .js-confirmation").addClass("hide"),$(t+" .js-setup").removeClass("hide").trigger("resize"),e.preventDefault()}),$(document).on("click",t+" .js-auth_method .js-next",function(n){var i=$(this),r=i.closest(t),o=r.find(".js-auth_method");r.find(".js-setup").removeClass("hide").trigger("resize"),"phone"===o.find("input:checked").val()?r.find(".js-devices").removeClass("hide"):r.find(".js-qr_code").removeClass("hide"),r.trigger("resize"),e(),o.addClass("hide"),n.preventDefault()}),$(document).on("click",t+" .js-qr_code .js-back",function(n){var i=$(this).closest(t);i.find(".js-qr_code").addClass("hide"),i.find(".js-auth_method").removeClass("hide"),i.find(".js-setup").removeClass("hide").trigger("resize"),e(),n.preventDefault()}),$(document).on("click",t+" .js-devices .js-back",function(n){var i=$(this).closest(t);i.find(".js-devices").addClass("hide"),i.find(".js-auth_method").removeClass("hide"),i.find(".js-setup").removeClass("hide").trigger("resize"),e(),n.preventDefault()}),$(document).on("phone_number:added",t,function(e){var t=$(e.target).closest("form");t.submit()}),$(document).on("click",t+" a.js-enable_edit_phone",function(n){var i=$(this),r=i.closest(t);r.find(".js-edit_phone").removeClass("hide"),r.find(".js-previous_phone").addClass("hide"),r.find(".js-submit").addClass("hide"),r.find(".opt_out").addClass("hide"),r.trigger("resize"),e(),n.preventDefault()}),$(document).on("submit",t+" form.js-method",function(e){var n=$(this),i=n.closest(t);$.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),dataType:"json",success:function(e){e.success?"app"===e.otp_delivery_method?(i.find(".js-qr_code").addClass("hide"),i.find(".js-otp_fallback").removeClass("hide"),i.find(".edit-back-button").addClass("hide")):window.location.reload(!0):growl(e)}}),e.preventDefault()})}),$(function(){var e=".NS-two_factor_authentication_show";$(document).on("click",e+" .js-manage_phone_fallback",function(){function t(){$(".NS-phone_numbers__edit").is(":visible")&&($(e).find(".intro").hide(),$(e).find(".disable").removeClass("hide"),$(e).find(".edit-back-button").html("Nevermind"),$(e).on("click",".edit-back-button",function(){window.location.reload(!0)}))}var n=$(this).closest(e);n.find(".js-tfa_manage").addClass("hide"),$(e).find(".js-edit_phone").removeClass("hide"),t()}),$(document).on("phone_number:added",e,function(){var t=$(this).closest(e),n=t.find(".js-manage_phone_fallback").data("url");n&&$.ajax({url:n,type:"POST",dataType:"json",success:function(e){e.success?(growl({success:e.success}),window.location.reload(!0,800)):growl({error:e.error})}})})}),$(function(){function e(){var e=$('div[id="forgot-password"]');e.removeClass("current"),e.siblings("#login, #verify").addClass("current"),$(".modal_dialog #facebook, .modal_dialog #verify").show()}function t(t){var n=$(t).closest(".current");n.is("#verify")||n.removeClass("current"),$("#login-signup #forgot-password").addClass("current"),$(".modal_dialog #facebook, .modal_dialog #verify").hide(),$(document).one("closed.modal_dialog",e)}track_links(".js-switch-to-signup","Login to Signup Switch"),$(document).on("click","#retry-forgot-password",function(e){var n=this.href,i=$('div[id="forgot-password"]');t(this),$.ajax({url:n,dataType:"html",success:function(e){i=$(e).replaceAll(i),i.addClass("current")}}),e.preventDefault()}),$(document).on("click","#login-signup a.link_to_forgot-password-dialog",function(e){e.preventDefault(),t(this),$(document).on("jGrowl.close_200","form#reset",function(){$(".modal_dialog").trigger("close.modal_dialog")})}),$(document).on("form-submit-notify","#forgot-password #reset",e);var n=$("#user_sessions_new, #users_new");n.length&&($(".current",n).find("input:visible:first").focus(),$("#user_weekly_newsletter").change(function(){var e=$(this);e.is(":checked")?track("Checked Newsletter"):track("Unchecked Newsletter")}),$(".fieldset-errors").livequery(function(){if(""!==$.trim($(".fieldset-errors").text())){var e=$(".fieldset-errors h2").text(),t=$(".fieldset-errors li").text();track("Errored User Signup",{error_type:e,error_text:t})}}),$("input",n).focus(function(){$("#login, #signup").removeClass("current"),$(this).closest("#login, #signup").addClass("current")}))}),$(function(){track_links(".js-switch-to-login","Signup to Login Switch"),$(document).on("blur","#new_user input#user_email",function(){var e=$(this);e.mailcheck({suggested:function(e,t){var n=$('<div class="mailcheck_suggestion f5 grey-dark mb1">'+I18n.t("onloads.views.users.new.Did_you_mean",{suggestion:t.full})+"</div>");e.siblings(".mailcheck_suggestion").remove(),n.find("a").on("click",function(n){n.preventDefault(),e.val(t.full)}),e.before(n),n.slideDown(),"undefined"!=typeof ga&&ga("send","event","Regular Signup Errors","Invalid domain or TLD detected",e.val())},ignoreTLDs:!0})})}),define_namespace(".NS_users__profile",function(){$("#profile_tools .js-profile-share-link").click(function(e){$("#profile_tools .share_hover").toggle(),e.preventDefault()}),$("a.twitter").click(function(e){window.open($(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()}),$("a.facebook").click(function(e){window.open($(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes"),e.preventDefault()})}),$(function(){$(".NS-users-_urls_fields").livequery(function(){var e=$(this),t=$("div.new.template",e);t.on("click","a.add",function(n){n.preventDefault();var i=t.find("input.text"),r=t.clone_form_template(),o=r.find("input.keep_box");return""===i.val()?void r.remove():(r.addClass("field-selected"),r.find("a.add").remove(),r.find("span.value").text(i.val()),i.trigger("dirty"),o.val(0).prop("checked",!0),i.val(""),$("div.urls",e).append(r),void r.trigger("shifted"))}),e.on("click",".url .remove a",function(e){e.preventDefault();var t=$(this),n=t.closest("div.url"),i=t.siblings(".checkbox");i.prop("checked",!1),n.trigger("dirty"),n.trigger("shifted"),n.hide()}),t.find("input.text").on("keypress",function(e){var n=e.keyCode||e.which;13===n&&(e.preventDefault(),t.find("a.add").click())})})}),define_namespace("#users_edit_account",function(e){var t=!1;e.find("a.change_password_toggle").on("click",function(n){n.preventDefault();var i=$("li.change_password",e);t?(i.fadeOut(),i.find("input").prop("disabled",!0),i.find("input").val(""),t=!1):(i.fadeIn(),i.find("input").prop("disabled",!1),i.first().find("input").focus(),t=!0)})}),define_namespace("body#users_edit_profile",function(e){var t=e.find("input.file");t.ksr_uploader()}),define_namespace("body#users_watched_projects",function(e){e.on("click","a.js-unstar",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"DELETE",dataType:"json",success:function(){var e=t.closest(".project");e.fadeOut(function(){var t=e.closest(".section");t.find(".project:visible").length||t.remove()})}})}),e.on("click","a.potd",function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("href"),type:"post",dataType:"json",success:function(){window.location.reload()}})})}),define_namespace(".NS_video_tracks__caption_video",function(){var e=new root.VideoTrack(root.videoTrackJSON);new root.VideoTrackView({model:e,el:"#video_track"}).render()}),$(function(){$(document).on("click",".js-unwatch a",function(e){var t=$(this);e.preventDefault(),current_project.set("is_starred",!1),$.ajax({url:t.attr("href"),dataType:"json",type:"DELETE"})})}),$(function(){$(document).on("click",".js-watch a",function(e){var t=$(this);e.preventDefault(),current_project.set("is_starred",!0),$.ajax({url:t.attr("href"),dataType:"json",type:"POST",success:function(e){e.modal&&($.create_login_modal(e.data,"star_project"),current_project.set("is_starred",!1)),e.flash&&growl(_.map(e.flash,function(e){return e[e.length-1]}))}})})}),$(function(){$(".widget_show").livequery(function(){function e(e,t){var n=render("widgets/_video_embed_code",{width:e,height:t,path:o});r.find("input#width").val(e),r.find("input#height").val(t),i.find("textarea").val(n)}var t=$(this),n=t.find(".size form"),i=t.find(".video .code"),r=n.find(".custom"),o=i.data("path"),a=16/9;e(480,Math.ceil(480/a)),n.find("input.radio").on("change",function(){var t=$("input.radio:checked"),r=t.closest("label");n.find("label").removeClass("selected"),r.addClass("selected"),e(r.data("width"),r.data("height")),i.find("textarea").select(),t.is("#widget-size_size-custom")&&r.find("input.text").val("").eq(0).select()}),r.find("input").on("keyup input cut paste",function(t){var n=$(t.target),i=r.find("input#width").val(),o=r.find("input#height").val();n.is("#width")?o=Math.ceil(i/a):i=Math.ceil(o*a),e(i,o)}),t.find("#video_embed").on("click",function(){track("Project Share",{share_type:"video_embed"})}),t.find("#widget_embed").on("click",function(){track("Project Share",{share_type:"widget_embed"})}),t.find("#shortlink_embed").on("click",function(){track("Project Share",{share_type:"shortlink_embed"})})})}),define_namespace("body#years_twentytwelve",function(){var e=$("#panel_content");!function(){function t(){$(".panel").width($(window).width()),$(window).width()>570?($(".section").each(function(){var e=$(this);e.width($(window).width()*e.find(".panel").length)}),$("#panels").height($(window).height()),$("body").css({overflow:"hidden"})):$("body").css({overflow:"visible"}),$(".video_big").width($(window).width()),$(".video_big").height($(this).parent(".panel").height());var e=1.77864583333333;$(window).height()*e>$(window).width()?($(".video_big video").height($(window).height()),$(".video_big video").css({width:"auto",position:"absolute",top:"0px","margin-top":"0px",left:"50%","margin-left":-Math.round($(this).height()*e/2)})):($(".video_big video").width($(window).width()),$(".video_big video").css({height:"auto",position:"absolute",left:"0px","margin-left":"0px",top:"50%","margin-top":-Math.round($(this).width()/e/2)}))}var n=0,i=e.find("li.panel").length,r="";track("YiR/2012 Initialize"),e.serialScroll({items:"li.panel",lock:!1,cycle:!1,duration:500,easing:"easeOutExpo"}),e.on("notify.serialScroll",function(t,o){var a=e.find("li.panel").eq(o),s=a.closest(".section").attr("id");r="#"+a.attr("id"),track("YiR/2012 Panel Load",{panel_index:o,panel_name:s}),o>0?$("#arrows .next, #arrows .prev, header, footer").addClass("visible"):$("#arrows .next, #arrows .prev, header, footer").removeClass("visible"),history.pushState&&(o>0?history.pushState({page:o},null,r):history.pushState({page:o},null,URI().hash("")));try{a.find(".video_autoplay").length?(e.find("video")[0].pause(),a.find("video")[0].play(),a.find("video").on("ended",function(){try{$(this)[0].play()}catch(e){}})):e.find("video")[0].pause()}catch(c){}$("header, footer, .next, .prev").removeClass("january february march april may june july august september october november december"),o>0&&$("header, footer, .next, .prev").addClass(s),o===i-1?($("#arrows .next").hide(),$("footer").hide()):0!==o&&($("#arrows .next").show(),$("footer").show()),$("#tile_view").find("li").removeClass("selected"),$("#tile_view").find("li[data-url="+window.location.hash.substring(1)+"]").addClass("selected"),n=o}),$(window).on("hashchange",function(){r!==window.location.hash&&(window.location.hash.length>1&&e.find(window.location.hash).length&&(n=$(window.location.hash).index("li.panel")),e.trigger("notify.serialScroll",[n]))}).trigger("hashchange"),t(),$(window).on("resize",function(){t(),e.trigger("goto",[n])}),$("#arrows .next, #intro .next").on("click",function(t){t.preventDefault(),track("YiR/2012 Next",{keypress:!1}),e.trigger("next")}),$("#arrows .prev").on("click",function(t){t.preventDefault(),track("YiR/2012 Previous",{keypress:!1}),e.trigger("prev")}),$("header h1 a").on("click",function(t){t.preventDefault(),track("YiR/2012 Reset"),e.scrollTo("#intro"),e.trigger("notify.serialScroll",[0]),$("#tile_view_link").find(".ss-grid").removeClass("hide"),$("#tile_view_link").find(".ss-delete").addClass("hide"),$("#content").animate({marginTop:"0px"},800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})})}(),$(window).on("keydown",function(t){switch(t.keyCode){case KEY.LEFT:track("YiR/2012 Previous",{keypress:!0}),e.trigger("prev"),$(".video.video_flash").is(":visible")&&e.find(".close_video").click();break;case KEY.RIGHT:track("YiR/2012 Next",{keypress:!0}),e.trigger("next"),$(".video.video_flash").is(":visible")&&e.find(".close_video").click();break;case KEY.ESC:e.find(".close_video").click(),t.preventDefault()}});var t=$("#makey_c"),n=$("#makey_d"),i=$("#makey_e"),r=$("#makey_f");$(".makey").on("hover",function(e){e.preventDefault(),track("Makey Makey Hover")}),$("#makey_makey #banana_c").on("hover",function(e){e.preventDefault(),t.trigger("play")}),$("#makey_makey #banana_d").on("hover",function(e){e.preventDefault(),n.trigger("play")}),$("#makey_makey #banana_e").on("hover",function(e){e.preventDefault(),i.trigger("play")}),$("#makey_makey #banana_f").on("hover",function(e){e.preventDefault(),r.trigger("play")}),$("#tile_view_link, #tile_view a").on("click",function(){$("#tile_view_link").find(".ss-grid").is(":visible")?($("#tile_view_link").find(".ss-grid").addClass("hide"),$("#tile_view_link").find(".ss-delete").removeClass("hide")):($("#tile_view_link").find(".ss-grid").removeClass("hide"),$("#tile_view_link").find(".ss-delete").addClass("hide")),"0px"===$("#content").css("marginTop")?(track("YiR/2012 Tile View"),$("#content").animate({marginTop:"-"+$(window).height()},800,"easeOutExpo",function(){$("body").css({overflow:"visible"})})):$("#content").animate({marginTop:"0px"},800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})}),e.find(".play").on("click touchstart",function(e){var t=$(this).closest(".panel");e.preventDefault(),track("YiR/2012 Video Play",{panel:t.attr("id")}),$("#arrows").fadeOut(),$("header, footer").removeClass("visible"),t.find(".video").fadeIn(),t.find(".container").fadeOut("500",function(){t.find(".video-player").ksr_video().trigger("ksr_video:play")})}),e.find(".close_video").on("click",function(e){e.preventDefault(),$(".video.video_flash").fadeOut("500",function(){$(".panel").find(".container").fadeIn()}),$(window).width()>570&&($("#arrows").fadeIn(),$("header, footer").addClass("visible")),$(".panel").find(".video-player").trigger("ksr_video:pause")}),$("footer").find("#mobile_share").on("click focus",function(){$("footer").toggleClass("share_visible")}),$("#share_url").click(function(){$(this).select()}),$("body").removeClass("loading"),history.pushState||$("header, footer").addClass("visible")});var jwplayer=function(e){return jwplayer.api?jwplayer.api.selectPlayer(e):void 0},$jw=jwplayer;jwplayer.version="5.7.1896",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(t){if(e.utils.exists(t)){var n=t.indexOf("://"),i=t.indexOf("?");return n>0&&(0>i||i>n)}}e.utils=function(){},e.utils.typeOf=function(e){var t=typeof e;return"object"===t&&(e?e instanceof Array&&(t="array"):t="null"),t},e.utils.extend=function(){var t=e.utils.extend.arguments;if(t.length>1){for(var n=1;n<t.length;n++)for(var i in t[n])t[0][i]=t[n][i];return t[0]}return null},e.utils.clone=function(t){var n,i=e.utils.clone.arguments;if(1==i.length)switch(e.utils.typeOf(i[0])){case"object":n={};for(var r in i[0])n[r]=e.utils.clone(i[0][r]);break;case"array":n=[];for(var r in i[0])n[r]=e.utils.clone(i[0][r]);break;default:return i[0]}return n},e.utils.extension=function(e){return e?(e=e.substring(e.lastIndexOf("/")+1,e.length),e=e.split("?")[0],e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0):""},e.utils.html=function(e,t){e.innerHTML=t},e.utils.wrap=function(e,t){e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e)},e.utils.ajax=function(e,t,n){var i;i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?t&&t(i):n&&n(e))};try{i.open("GET",e,!0),i.send(null)}catch(r){n&&n(e)}return i},e.utils.load=function(e,t,n){e.onreadystatechange=function(){4===e.readyState&&(200===e.status?t&&t():n&&n())}},e.utils.find=function(e,t){return e.getElementsByTagName(t)},e.utils.append=function(e,t){e.appendChild(t)},e.utils.isIE=function(){return"undefined"!=typeof window.ActiveXObject},e.utils.isLegacyAndroid=function(){var e=navigator.userAgent.toLowerCase();return null!==e.match(/android 2.[012]/i)},e.utils.isIOS=function(e){"undefined"==typeof e&&(e=/iP(hone|ad|od)/i);var t=navigator.userAgent.toLowerCase();return null!==t.match(e)},e.utils.isIPad=function(){return e.utils.isIOS(/iPad/i)},e.utils.isIPod=function(){return e.utils.isIOS(/iP(hone|od)/i)},e.utils.getFirstPlaylistItemFromConfig=function(e){var t,n={};return t=e.playlist&&e.playlist.length?e.playlist[0]:e,n.file=t.file,n.levels=t.levels,n.streamer=t.streamer,n.playlistfile=t.playlistfile,n.provider=t.provider,n.provider||(n.file&&(n.file.toLowerCase().indexOf("youtube.com")>-1||n.file.toLowerCase().indexOf("youtu.be")>-1)&&(n.provider="youtube"),n.streamer&&0==n.streamer.toLowerCase().indexOf("rtmp://")&&(n.provider="rtmp"),t.type&&(n.provider=t.type.toLowerCase())),"audio"==n.provider&&(n.provider="sound"),n},e.utils.getOuterHTML=function(e){if(e.outerHTML)return e.outerHTML;try{return(new XMLSerializer).serializeToString(e)}catch(t){return""}},e.utils.setOuterHTML=function(e,t){if(e.outerHTML)e.outerHTML=t;else{var n=document.createElement("div");n.innerHTML=t;var i=document.createRange();i.selectNodeContents(n);var r=i.extractContents();e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e)}},e.utils.hasFlash=function(){if("undefined"!=typeof navigator.plugins&&"undefined"!=typeof navigator.plugins["Shockwave Flash"])return!0;if("undefined"!=typeof window.ActiveXObject)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(e){}return!1},e.utils.getPluginName=function(e){return e.lastIndexOf("/")>=0&&(e=e.substring(e.lastIndexOf("/")+1,e.length)),e.lastIndexOf("-")>=0&&(e=e.substring(0,e.lastIndexOf("-"))),e.lastIndexOf(".swf")>=0&&(e=e.substring(0,e.lastIndexOf(".swf"))),e.lastIndexOf(".js")>=0&&(e=e.substring(0,e.lastIndexOf(".js"))),e},e.utils.getPluginVersion=function(e){return e.lastIndexOf("-")>=0?e.lastIndexOf(".js")>=0?e.substring(e.lastIndexOf("-")+1,e.lastIndexOf(".js")):e.lastIndexOf(".swf")>=0?e.substring(e.lastIndexOf("-")+1,e.lastIndexOf(".swf")):e.substring(e.lastIndexOf("-")+1):""},e.utils.getAbsolutePath=function(n,i){if(e.utils.exists(i)||(i=document.location.href),!e.utils.exists(n))return void 0;if(t(n))return n;var r,o=i.substring(0,i.indexOf("://")+3),a=i.substring(o.length,i.indexOf("/",o.length+1));
if(0===n.indexOf("/"))r=n.split("/");else{var s=i.split("?")[0];s=s.substring(o.length+a.length+1,s.lastIndexOf("/")),r=s.split("/").concat(n.split("/"))}for(var c=[],l=0;l<r.length;l++)r[l]&&e.utils.exists(r[l])&&"."!=r[l]&&(".."==r[l]?c.pop():c.push(r[l]));return o+a+"/"+c.join("/")},e.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"},e.utils.getPluginPathType=function(t){if("string"==typeof t){t=t.split("?")[0];var n=t.indexOf("://");if(n>0)return e.utils.pluginPathType.ABSOLUTE;var i=t.indexOf("/"),r=e.utils.extension(t);return!(0>n&&0>i)||r&&isNaN(r)?e.utils.pluginPathType.RELATIVE:e.utils.pluginPathType.CDN}},e.utils.mapEmpty=function(e){for(var t in e)return!1;return!0},e.utils.mapLength=function(e){var t=0;for(var n in e)t++;return t},e.utils.log=function(e,t){"undefined"!=typeof console&&"undefined"!=typeof console.log&&(t?console.log(e,t):console.log(e))},e.utils.css=function(t,n,i){if(e.utils.exists(t))for(var r in n)try{if("undefined"==typeof n[r])continue;if("number"==typeof n[r]&&"zIndex"!=r&&"opacity"!=r){if(isNaN(n[r]))continue;r.match(/color/i)?n[r]="#"+e.utils.strings.pad(n[r].toString(16),6):n[r]=Math.ceil(n[r])+"px"}t.style[r]=n[r]}catch(o){}},e.utils.isYouTube=function(e){return e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1},e.utils.transform=function(e,t){e.style.webkitTransform=t,e.style.MozTransform=t,e.style.OTransform=t},e.utils.stretch=function(t,n,i,r,o,a){if("undefined"!=typeof i&&"undefined"!=typeof r&&"undefined"!=typeof o&&"undefined"!=typeof a){var s=i/o,c=r/a;n.style.overflow="hidden",e.utils.transform(n,"");var l={};switch(t.toUpperCase()){case e.utils.stretching.NONE:l.width=o,l.height=a;break;case e.utils.stretching.UNIFORM:s>c?(l.width=o*c,l.height=a*c):(l.width=o*s,l.height=a*s);break;case e.utils.stretching.FILL:s>c?(l.width=o*s,l.height=a*s):(l.width=o*c,l.height=a*c);break;case e.utils.stretching.EXACTFIT:e.utils.transform(n,["scale(",s,",",c,")"," translate(0px,0px)"].join("")),l.width=o,l.height=a}l.top=(r-l.height)/2,l.left=(i-l.width)/2,e.utils.css(n,l)}},e.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"},e.utils.deepReplaceKeyName=function(t,n,i){switch(e.utils.typeOf(t)){case"array":for(var r=0;r<t.length;r++)t[r]=e.utils.deepReplaceKeyName(t[r],n,i);break;case"object":for(var o in t){var a=o.replace(new RegExp(n,"g"),i);t[a]=e.utils.deepReplaceKeyName(t[o],n,i),o!=a&&delete t[o]}}return t},e.utils.isInArray=function(e,t){if(!(e&&e instanceof Array))return!1;for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1},e.utils.exists=function(e){switch(typeof e){case"string":return e.length>0;case"object":return null!==e;case"undefined":return!1}return!0},e.utils.empty=function(e){if("function"==typeof e.hasChildNodes)for(;e.hasChildNodes();)e.removeChild(e.firstChild)},e.utils.parseDimension=function(e){return"string"==typeof e?""===e?0:e.lastIndexOf("%")>-1?e:parseInt(e.replace("px",""),10):e},e.utils.getDimensions=function(t){return t&&t.style?{x:e.utils.parseDimension(t.style.left),y:e.utils.parseDimension(t.style.top),width:e.utils.parseDimension(t.style.width),height:e.utils.parseDimension(t.style.height)}:{}},e.utils.timeFormat=function(e){return str="00:00",e>0&&(str=Math.floor(e/60)<10?"0"+Math.floor(e/60)+":":Math.floor(e/60)+":",str+=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60)),str}}(jwplayer),function(e){e.events=function(){},e.events.COMPLETE="COMPLETE",e.events.ERROR="ERROR"}(jwplayer),function(jwplayer){jwplayer.events.eventdispatcher=function(debug){var _debug=debug,_listeners,_globallisteners;this.resetEventListeners=function(){_listeners={},_globallisteners=[]},this.resetEventListeners(),this.addEventListener=function(type,listener,count){try{jwplayer.utils.exists(_listeners[type])||(_listeners[type]=[]),"string"==typeof listener&&eval("listener = "+listener),_listeners[type].push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeEventListener=function(e,t){if(_listeners[e]){try{for(var n=0;n<_listeners[e].length;n++)if(_listeners[e][n].listener.toString()==t.toString()){_listeners[e].splice(n,1);break}}catch(i){jwplayer.utils.log("error",i)}return!1}},this.addGlobalListener=function(listener,count){try{"string"==typeof listener&&eval("listener = "+listener),_globallisteners.push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeGlobalListener=function(e){if(_globallisteners[type]){try{for(var t=0;t<_globallisteners.length;t++)if(_globallisteners[t].listener.toString()==e.toString()){_globallisteners.splice(t,1);break}}catch(n){jwplayer.utils.log("error",n)}return!1}},this.sendEvent=function(e,t){if(jwplayer.utils.exists(t)||(t={}),_debug&&jwplayer.utils.log(e,t),"undefined"!=typeof _listeners[e])for(var n=0;n<_listeners[e].length;n++){try{_listeners[e][n].listener(t)}catch(i){jwplayer.utils.log("There was an error while handling a listener: "+i.toString(),_listeners[e][n].listener)}_listeners[e][n]&&(1===_listeners[e][n].count?delete _listeners[e][n]:_listeners[e][n].count>0&&(_listeners[e][n].count=_listeners[e][n].count-1))}for(var r=0;r<_globallisteners.length;r++){try{_globallisteners[r].listener(t)}catch(i){jwplayer.utils.log("There was an error while handling a listener: "+i.toString(),_globallisteners[r].listener)}_globallisteners[r]&&(1===_globallisteners[r].count?delete _globallisteners[r]:_globallisteners[r].count>0&&(_globallisteners[r].count=_globallisteners[r].count-1))}}}}(jwplayer),function(e){var t=[];e.api=function(t){function n(e,t){return function(n,i,r,o){if("flash"==e.renderingMode||"html5"==e.renderingMode){var a;i?(h[n]=i,a="jwplayer('"+e.id+"').callback('"+n+"')"):!i&&h[n]&&delete h[n],l.jwDockSetButton(n,a,r,o)}return t}}function i(e){return function(t){var n=t.newstate,i=t.oldstate;if(n==e){var r=s[n];if(r)for(var o=0;o<r.length;o++)"function"==typeof r[o]&&r[o].call(this,{oldstate:i,newstate:n})}}}function r(e,t){return function(n){if(e==n.component){var i=c[e][t];if(i)for(var r=0;r<i.length;r++)"function"==typeof i[r]&&i[r].call(this,n)}}}function o(t,n){var i=e.utils.extend({},n);t!=e.api.events.JWPLAYER_FULLSCREEN||i.fullscreen?"object"==typeof i.data&&(i=e.utils.extend(i,i.data),delete i.data):(i.fullscreen="true"==i.message?!0:!1,delete i.message);var r=["position","duration","offset"];for(var o in r)i[r[o]]&&(i[r[o]]=Math.round(1e3*i[r[o]])/1e3);return i}this.container=t,this.id=t.id;var a={},s={},c={},l=void 0,u=!1,d=[],f=e.utils.getOuterHTML(t),p={},h={};return this.getBuffer=function(){return this.callInternal("jwGetBuffer")},this.getContainer=function(){return this.container},this.getPlugin=function(t){var i=this,r={};return"dock"==t?e.utils.extend(r,{setButton:n(i,r),show:function(){return i.callInternal("jwDockShow"),r},hide:function(){return i.callInternal("jwDockHide"),r},onShow:function(t){return i.componentListener("dock",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return i.componentListener("dock",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):"controlbar"==t?e.utils.extend(r,{show:function(){return i.callInternal("jwControlbarShow"),r},hide:function(){return i.callInternal("jwControlbarHide"),r},onShow:function(t){return i.componentListener("controlbar",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return i.componentListener("controlbar",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):"display"==t?e.utils.extend(r,{show:function(){return i.callInternal("jwDisplayShow"),r},hide:function(){return i.callInternal("jwDisplayHide"),r},onShow:function(t){return i.componentListener("display",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return i.componentListener("display",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):this.plugins[t]},this.callback=function(e){return h[e]?h[e]():void 0},this.getDuration=function(){return this.callInternal("jwGetDuration")},this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")},this.getHeight=function(){return this.callInternal("jwGetHeight")},this.getLockState=function(){return this.callInternal("jwGetLockState")},this.getMeta=function(){return this.getItemMeta()},this.getMute=function(){return this.callInternal("jwGetMute")},this.getPlaylist=function(){var t=this.callInternal("jwGetPlaylist");"flash"==this.renderingMode&&e.utils.deepReplaceKeyName(t,"__dot__",".");for(var n=0;n<t.length;n++)e.utils.exists(t[n].index)||(t[n].index=n);return t},this.getPlaylistItem=function(t){return e.utils.exists(t)||(t=this.getCurrentItem()),this.getPlaylist()[t]},this.getPosition=function(){return this.callInternal("jwGetPosition")},this.getRenderingMode=function(){return this.renderingMode},this.getState=function(){return this.callInternal("jwGetState")},this.getVolume=function(){return this.callInternal("jwGetVolume")},this.getWidth=function(){return this.callInternal("jwGetWidth")},this.setFullscreen=function(t){return e.utils.exists(t)?this.callInternal("jwSetFullscreen",t):this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen")),this},this.setMute=function(t){return e.utils.exists(t)?this.callInternal("jwSetMute",t):this.callInternal("jwSetMute",!this.callInternal("jwGetMute")),this},this.lock=function(){return this},this.unlock=function(){return this},this.load=function(e){return this.callInternal("jwLoad",e),this},this.playlistItem=function(e){return this.callInternal("jwPlaylistItem",e),this},this.playlistPrev=function(){return this.callInternal("jwPlaylistPrev"),this},this.playlistNext=function(){return this.callInternal("jwPlaylistNext"),this},this.resize=function(e,t){return"html5"==this.renderingMode?l.jwResize(e,t):(this.container.width=e,this.container.height=t),this},this.play=function(t){return"undefined"==typeof t?(t=this.getState(),t==e.api.events.state.PLAYING||t==e.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPlay",t),this},this.pause=function(t){return"undefined"==typeof t?(t=this.getState(),t==e.api.events.state.PLAYING||t==e.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPause",t),this},this.stop=function(){return this.callInternal("jwStop"),this},this.seek=function(e){return this.callInternal("jwSeek",e),this},this.setVolume=function(e){return this.callInternal("jwSetVolume",e),this},this.onBufferChange=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BUFFER,t)},this.onBufferFull=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BUFFER_FULL,t)},this.onError=function(t){return this.eventListener(e.api.events.JWPLAYER_ERROR,t)},this.onFullscreen=function(t){return this.eventListener(e.api.events.JWPLAYER_FULLSCREEN,t)},this.onMeta=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_META,t)},this.onMute=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_MUTE,t)},this.onPlaylist=function(t){return this.eventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,t)},this.onPlaylistItem=function(t){return this.eventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,t)},this.onReady=function(t){return this.eventListener(e.api.events.API_READY,t)},this.onResize=function(t){return this.eventListener(e.api.events.JWPLAYER_RESIZE,t)},this.onComplete=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_COMPLETE,t)},this.onSeek=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_SEEK,t)},this.onTime=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_TIME,t)},this.onVolume=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_VOLUME,t)},this.onBuffer=function(t){return this.stateListener(e.api.events.state.BUFFERING,t)},this.onPause=function(t){return this.stateListener(e.api.events.state.PAUSED,t)},this.onPlay=function(t){return this.stateListener(e.api.events.state.PLAYING,t)},this.onIdle=function(t){return this.stateListener(e.api.events.state.IDLE,t)},this.remove=function(){a={},d=[],e.utils.getOuterHTML(this.container)!=f&&e.api.destroyPlayer(this.id,f)},this.setup=function(t){if(e.embed){var n=this.id;this.remove();var i=e(n);return i.config=t,new e.embed(i)}return this},this.registerPlugin=function(t,n,i){e.plugins.registerPlugin(t,n,i)},this.setPlayer=function(e,t){l=e,this.renderingMode=t},this.stateListener=function(t,n){return s[t]||(s[t]=[],this.eventListener(e.api.events.JWPLAYER_PLAYER_STATE,i(t))),s[t].push(n),this},this.componentListener=function(e,t,n){return c[e]||(c[e]={}),c[e][t]||(c[e][t]=[],this.eventListener(t,r(e,t))),c[e][t].push(n),this},this.addInternalListener=function(e,t){e.jwAddEventListener(t,'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+t+'", dat); }')},this.eventListener=function(e,t){return a[e]||(a[e]=[],l&&u&&this.addInternalListener(l,e)),a[e].push(t),this},this.dispatchEvent=function(e){if(a[e])for(var t=o(e,arguments[1]),n=0;n<a[e].length;n++)"function"==typeof a[e][n]&&a[e][n].call(this,t)},this.callInternal=function(t,n){return u?"undefined"!=typeof l&&"function"==typeof l[t]?e.utils.exists(n)?l[t](n):l[t]():null:void d.push({method:t,parameters:n})},this.playerReady=function(t){u=!0,l||this.setPlayer(document.getElementById(t.id)),this.container=document.getElementById(this.id);for(var n in a)this.addInternalListener(l,n);for(this.eventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,function(e){p={}}),this.eventListener(e.api.events.JWPLAYER_MEDIA_META,function(t){e.utils.extend(p,t.metadata)}),this.dispatchEvent(e.api.events.API_READY);d.length>0;){var i=d.shift();this.callInternal(i.method,i.parameters)}},this.getItemMeta=function(){return p},this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")},this},e.api.selectPlayer=function(t){var n;if(e.utils.exists(t)||(t=0),t.nodeType?n=t:"string"==typeof t&&(n=document.getElementById(t)),n){var i=e.api.playerById(n.id);return i?i:e.api.addPlayer(new e.api(n))}return"number"==typeof t?e.getPlayers()[t]:null},e.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem"},e.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},e.api.playerById=function(e){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},e.api.addPlayer=function(e){for(var n=0;n<t.length;n++)if(t[n]==e)return e;return t.push(e),e},e.api.destroyPlayer=function(n,i){for(var r=-1,o=0;o<t.length;o++)t[o].id!=n||(r=o);if(r>=0){var a=document.getElementById(t[r].id);if(document.getElementById(t[r].id+"_wrapper")&&(a=document.getElementById(t[r].id+"_wrapper")),a)if(i)e.utils.setOuterHTML(a,i);else{var s=document.createElement("div"),c=a.id;a.id.indexOf("_wrapper")==a.id.length-8&&(newID=a.id.substring(0,a.id.length-8)),s.setAttribute("id",c),a.parentNode.replaceChild(s,a)}t.splice(r,1)}return null},e.getPlayers=function(){return t.slice(0)}}(jwplayer);var _userPlayerReady="function"==typeof playerReady?playerReady:void 0;playerReady=function(e){var t=jwplayer.api.playerById(e.id);t?t.playerReady(e):jwplayer.api.selectPlayer(e.id).playerReady(e),_userPlayerReady&&_userPlayerReady.call(this,e)},function(){function e(e,t){if("undefined"!=typeof e){var n="internal";$("body").is(".widget")&&(n="external"),$.ajax({url:e,type:"post",data:{event_type:t,location:n}})}}function t(e){return $("body").is(".widget")||e.closest("#projects_show").length?"Project":e.closest(".school").length?"School":e.closest(".NS_site__homepage_staff_picks").length?"Homepage Editorial":e.closest("#projects_start").length?"Start Project":e.closest("body.posts").length?"Project Post":e.closest("#projects_edit").length?"Project Edit":e.closest("#jobs_index").length?"Jobs Page":e.closest(".activity").length?"Activity":"Other"}function n(e){root.koala_video_progress_endpoint&&(o=setInterval(function(){var t=e.current_position();i(Math.floor(t))},1e3))}function i(e){$.ajax({type:"POST",url:root.root.koala_video_progress_endpoint,data:JSON.stringify({project_name:current_project.data.name,project_pid:current_project.data.id,backers_count:current_project.data.backers_count,blurb:current_project.data.blurb,category_name:current_project.data.category.name,comments_count:current_project.data.comments_count,creator_name:current_project.data.creator.name,currency_symbol:current_project.data.currency_symbol,goal:current_project.data.goal,launched_at:current_project.data.launched_at,photo_full:current_project.data.photo.full,photo_thumb:current_project.data.photo.thumb,project_url:current_project.data.urls.web.project,usd_pledged:current_project.data.usd_pledged,video:current_project.data.video,video_playhead_position:e}),contentType:"text/plain; charset=UTF-8"})}function r(e){return function(n){var i=$(n.target),r=t(i),o=i.attr("data-video-name");track(r+" "+e,{video_name:o})}}var o;$(document).on("ksr_video:playing",function(i,r){var o=$(i.target),a=t(o),s=o.data("ksr_video"),c=s.current_position(),l=o.closest(".video-player").attr("data-video-tracker-url"),u=o.attr("data-video-name");n(s),r?(e(l,"start"),track(a+" Video Start",{track_count:o.find("track").length,track_language:o.data("language"),video_name:u})):track(a+" Video Resume",{position:c,video_name:u})}).on("ksr_video:paused",function(e){var n=$(e.target),i=n.data("ksr_video"),r=t(n),a=i.current_position(),s=n.attr("data-video-name");clearInterval(o),track(r+" Video Pause",{position:a,video_name:s})}).on("ksr_video:ended",function(n){var i=$(n.target),r=i.data("ksr_video"),o=t(i),a=r.duration(),s=i.closest(".video-player").attr("data-video-tracker-url"),c=i.attr("data-video-name");e(s,"complete"),track(o+" Video Complete",{duration:a,video_name:c})}).on("ksr_video:change_track",function(e,n){var i=$(e.target),r=t(i),o=i.attr("data-video-name");track(r+" Video Change Track",{track_language:n,video_name:o})}).on("ksr_video:muted",r("Video Mute")).on("ksr_video:unmuted",r("Video Unmute")).on("ksr_video:volume_adjusted",r("Video Volume Adjustment"))}(),window.benchmark&&window.performance.mark("end_base.js_eval");